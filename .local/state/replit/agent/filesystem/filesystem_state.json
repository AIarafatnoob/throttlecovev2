{"file_contents":{"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"replit.md":{"content":"# ThrottleCove Development Guide\n\n## Overview\n\nThrottleCove is a modern vehicle management web application designed to be a comprehensive digital garage and motorcycle community platform. The application follows a full-stack architecture with a React frontend and Express backend, utilizing PostgreSQL for data persistence.\n\n## Recent Changes\n\n### Complete Project Documentation Creation (July 2025)\n- Created comprehensive 350+ line project documentation (`COMPLETE_PROJECT_DOCUMENTATION.md`)\n- Documented entire technology stack with 20+ core dependencies and their specific versions\n- Detailed complete database schema covering all 15+ tables with relationships and indexing\n- Provided step-by-step setup, development, and deployment instructions for multiple platforms\n- Documented 25+ API endpoints with request/response specifications\n- Created frontend component library documentation with 50+ reusable components\n- Outlined 5-phase future development roadmap with advanced features\n- Included security implementation guide covering authentication, API protection, and data security\n- Provided comprehensive troubleshooting guide for common development and production issues\n- Created performance optimization and scalability planning documentation\n- Documented monitoring, maintenance, and deployment strategies for production environments\n\n### Scalable Backend Architecture Analysis (July 2025)\n- Completed comprehensive codebase analysis covering all 15+ database tables and current architecture\n- Created detailed scalable backend architecture documentation (`SCALABLE_BACKEND_ARCHITECTURE.md`)\n- Recommended microservices architecture with 7 core services for optimal scaling\n- Designed database optimization strategy with indexing, partitioning, and read replicas\n- Planned Redis caching layer for sessions, rate limiting, and real-time data\n- Outlined WebSocket scaling strategy using Redis Pub/Sub for real-time features\n- Documented security hardening with JWT, rate limiting, and row-level security\n- Created Kubernetes deployment strategy with auto-scaling configuration\n- Designed monitoring stack with Prometheus, Grafana, and custom metrics\n- Provided 12-week implementation roadmap with three distinct phases\n- Estimated infrastructure costs and team requirements for scaling to 10,000+ users\n\n### Squad Page Implementation (July 2025)\n- Built comprehensive Squad page with cycling group features\n- Added 5 new database tables: event_rsvps, group_posts, group_messages, ride_stats, user_profiles\n- Implemented 6-tab interface: Feed, Events, Riders, Stats, Routes, Chat\n- Created group ride planning with RSVP functionality and meeting point details\n- Built real-time communication system with group chat and emergency alerts\n- Added location sharing and safety features including crash detection\n- Implemented ride stats and leaderboards with monthly/weekly tracking\n- Created event scheduling with pace, terrain, and distance filtering\n- Built personalization features with rider profiles and riding styles\n- Optimized for minimum user input with intuitive UI and quick actions\n- Added route sharing capabilities with GPX file support (UI ready)\n- Integrated social features with posts, photos, tips, and polls\n\n### Community Page Replacement (July 2025)\n- Deleted Community page completely\n- Created blank \"Squad\" page as replacement\n- Updated routing in App.tsx to point /community route to new Squad page\n- Updated navigation button text from \"Community\" to \"Squad\"\n- Removed Community.tsx file from codebase\n\n### Production Deployment Fixes (July 2025)\n- Fixed Vite development server running in production causing deployment failures\n- Implemented proper environment detection to serve static files in production mode\n- Created fallback mechanism when static build files are not available\n- Updated server configuration to handle both development and production modes correctly\n- Resolved issue where application was loading React development files in production\n- Added proper error handling and logging for production static file serving\n\n### Dynamic Button Colors & SNS-Inspired Profile Layout (July 2025)\n- Implemented dynamic color system for floating buttons (black over content, red over footer)\n- Redesigned profile card with SNS-inspired layout featuring centered profile picture\n- Added automatic scroll detection for button color changes\n- Enhanced user hierarchy display with prominent name, rank badge, and stats grid\n- Improved visual feedback with smooth color transitions and better contrast\n\n### Complete Project Documentation (July 2025)\n- Created comprehensive project recreation guide (`COMPLETE_PROJECT_DOCUMENTATION.md`)\n- Documented entire system architecture and technology stack\n- Provided step-by-step setup and deployment instructions\n- Detailed database schema with all table structures and relationships\n- Complete backend implementation guide with security features\n- Frontend implementation guide with React components and hooks\n- Authentication system documentation with session management\n- Comprehensive API documentation with examples\n- Security implementation guide covering all protection layers\n- File structure documentation showing project organization\n- Configuration files with complete setup instructions\n- Deployment guide for multiple platforms (Replit, Vercel, Railway)\n- Testing strategies and development workflow documentation\n- Troubleshooting guide with common issues and solutions\n\n### Backend Architecture Documentation (January 2025)\n- Created comprehensive backend architecture specification (`BACKEND_ARCHITECTURE.md`)\n- Designed microservices architecture for scalability\n- Specified security implementations including JWT, RBAC, and input sanitization\n- Detailed database schema with proper indexing and relationships\n- Planned horizontal scaling with load balancing and auto-scaling\n- Documented caching strategy with multi-layer approach\n- Specified monitoring, logging, and health check systems\n- Created deployment strategy with Kubernetes and CI/CD pipelines\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n- **Framework**: React 18 with TypeScript\n- **Build Tool**: Vite for fast development and optimized builds\n- **Styling**: Tailwind CSS with custom component library based on shadcn/ui\n- **State Management**: React hooks with Zustand for auth state\n- **Data Fetching**: TanStack Query (React Query) for server state management\n- **Routing**: Wouter for lightweight client-side routing\n- **Animations**: Framer Motion for smooth UI transitions\n\n### Backend Architecture\n- **Runtime**: Node.js with Express.js framework\n- **Language**: TypeScript with ES modules\n- **Session Management**: Express sessions with in-memory store (development)\n- **Authentication**: Passport.js with local strategy\n- **API Design**: RESTful endpoints under `/api` prefix\n\n### Database Layer\n- **ORM**: Drizzle ORM for type-safe database operations\n- **Database**: PostgreSQL (configured for Neon serverless)\n- **Migrations**: Drizzle Kit for schema management\n- **Schema**: Centralized in `shared/schema.ts` for type sharing\n\n## Key Components\n\n### Authentication System\n- Session-based authentication using Passport.js\n- User registration and login with username/password\n- Protected routes with authentication middleware\n- Shared auth state between client and server\n\n### Vehicle Management\n- Digital garage for storing multiple motorcycles per user\n- Vehicle information including make, model, year, mileage\n- Photo upload capabilities for vehicle images\n- Status tracking and tagging system\n\n### Maintenance Tracking\n- Maintenance records with service type, date, cost tracking\n- Maintenance scheduling with due date reminders\n- Service history per vehicle\n- Parts recommendations and marketplace integration\n\n### Community Features\n- User profiles with ranking system based on miles ridden\n- Ride sharing and group ride organization\n- Document storage for vehicle paperwork\n- Social features for connecting with other riders\n\n### UI Component System\n- Custom component library built on Radix UI primitives\n- Consistent design system with theme support\n- Responsive design with mobile-first approach\n- Accessible components following WAI-ARIA guidelines\n\n## Data Flow\n\n### Client-Server Communication\n1. Frontend makes API requests to Express server endpoints\n2. Server validates requests and processes business logic\n3. Database operations performed through Drizzle ORM\n4. Responses sent back as JSON with proper error handling\n5. Client updates UI state using React Query cache\n\n### Authentication Flow\n1. User submits login credentials to `/api/auth/login`\n2. Passport.js validates credentials against database\n3. Session created and stored server-side\n4. Client receives user data and updates auth state\n5. Subsequent requests include session cookie for authentication\n\n### Data Persistence\n- All user data stored in PostgreSQL database\n- Schema defined with Drizzle ORM for type safety\n- Foreign key relationships maintain data integrity\n- Migrations handle schema evolution\n\n## External Dependencies\n\n### Core Framework Dependencies\n- React ecosystem (React, React DOM, React Hook Form)\n- Express.js with middleware (cors, sessions, passport)\n- Vite with TypeScript and development plugins\n\n### UI and Styling\n- Tailwind CSS for utility-first styling\n- Radix UI primitives for accessible components\n- Framer Motion for animations\n- Lucide React for consistent iconography\n\n### Database and State\n- Drizzle ORM with PostgreSQL adapter\n- Neon serverless database connection\n- TanStack Query for client state management\n- Zustand for lightweight state management\n\n### Development Tools\n- TypeScript for type safety across the stack\n- ESLint and Prettier for code quality\n- PostCSS for CSS processing\n- Replit-specific development plugins\n\n## Deployment Strategy\n\n### Development Environment\n- Vite dev server for hot module replacement\n- Express server with middleware mode integration\n- In-memory session store for development\n- Environment variables for database connection\n\n### Production Build\n- Vite builds frontend to `dist/public`\n- ESBuild bundles server code to `dist/index.js`\n- Static file serving from Express server\n- Database migrations applied via Drizzle Kit\n\n### Environment Configuration\n- `NODE_ENV` determines development vs production mode\n- `DATABASE_URL` for PostgreSQL connection\n- `SESSION_SECRET` for session encryption\n- Replit-specific environment detection\n\n### Deployment Architecture\n- Single server deployment serving both frontend and API\n- PostgreSQL database hosted on Neon\n- Session storage can be upgraded to Redis for production\n- Static assets served directly from Express","size_bytes":10776},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \"var(--radius)\",\n        md: \"calc(var(--radius) - 2px)\",\n        sm: \"calc(var(--radius) - 4px)\",\n      },\n      colors: {\n        background: \"hsl(var(--background))\",\n        foreground: \"hsl(var(--foreground))\",\n        card: {\n          DEFAULT: \"hsl(var(--card))\",\n          foreground: \"hsl(var(--card-foreground))\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover))\",\n          foreground: \"hsl(var(--popover-foreground))\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary))\",\n          foreground: \"hsl(var(--primary-foreground))\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary))\",\n          foreground: \"hsl(var(--secondary-foreground))\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted))\",\n          foreground: \"hsl(var(--muted-foreground))\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent))\",\n          foreground: \"hsl(var(--accent-foreground))\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive))\",\n          foreground: \"hsl(var(--destructive-foreground))\",\n        },\n        border: \"hsl(var(--border))\",\n        input: \"hsl(var(--input))\",\n        ring: \"hsl(var(--ring))\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1))\",\n          \"2\": \"hsl(var(--chart-2))\",\n          \"3\": \"hsl(var(--chart-3))\",\n          \"4\": \"hsl(var(--chart-4))\",\n          \"5\": \"hsl(var(--chart-5))\",\n        },\n        sidebar: {\n          DEFAULT: \"hsl(var(--sidebar-background))\",\n          foreground: \"hsl(var(--sidebar-foreground))\",\n          primary: \"hsl(var(--sidebar-primary))\",\n          \"primary-foreground\": \"hsl(var(--sidebar-primary-foreground))\",\n          accent: \"hsl(var(--sidebar-accent))\",\n          \"accent-foreground\": \"hsl(var(--sidebar-accent-foreground))\",\n          border: \"hsl(var(--sidebar-border))\",\n          ring: \"hsl(var(--sidebar-ring))\",\n        },\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: {\n            height: \"0\",\n          },\n          to: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n        },\n        \"accordion-up\": {\n          from: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n          to: {\n            height: \"0\",\n          },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":2787},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport themePlugin from \"@replit/vite-plugin-shadcn-theme-json\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    themePlugin(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n});\n","size_bytes":978},"attached_assets/ThrottleCove_DEV_DOC.md":{"content":"\n# üõ†Ô∏è ThrottleCove Development Documentation\n\n## üì¶ Project Overview\n\n**ThrottleCove** is a modern vehicle management web application built using **React**, **TypeScript**, and **Vite**. It integrates a variety of UI components, image and document upload features, interactive carousels, and a backend configured with **Drizzle ORM**.\n\n---\n\n## üìÅ Project Structure\n\n```\nThrottleCove/\n‚îî‚îÄ‚îÄ ThrottleCove/\n    ‚îú‚îÄ‚îÄ client/                     # Frontend source code\n    ‚îÇ   ‚îî‚îÄ‚îÄ src/\n    ‚îÇ       ‚îú‚îÄ‚îÄ App.tsx            # Main application component\n    ‚îÇ       ‚îú‚îÄ‚îÄ main.tsx           # Entry point\n    ‚îÇ       ‚îî‚îÄ‚îÄ components/\n    ‚îÇ           ‚îî‚îÄ‚îÄ ui/            # Reusable UI components (ShadCN-like)\n    ‚îú‚îÄ‚îÄ drizzle.config.ts          # Drizzle ORM config\n    ‚îú‚îÄ‚îÄ package.json               # Project dependencies and scripts\n    ‚îú‚îÄ‚îÄ postcss.config.js          # PostCSS configuration\n    ‚îú‚îÄ‚îÄ tailwind.config.ts         # TailwindCSS configuration\n    ‚îú‚îÄ‚îÄ tsconfig.json              # TypeScript configuration\n    ‚îú‚îÄ‚îÄ vite.config.ts             # Vite bundler configuration\n```\n\n---\n\n## üß∞ Tech Stack\n\n- **Frontend**: React + TypeScript\n- **Styling**: Tailwind CSS, PostCSS\n- **Bundler**: Vite\n- **UI Components**: Custom & ShadCN-UI based\n- **State Management**: React state (hooks-based)\n- **ORM**: Drizzle (for future database interactions)\n- **Hosting**: Replit-supported structure\n\n---\n\n## üöÄ Installation & Setup\n\n```bash\n# Clone the repo\ngit clone <your-repo-url>\ncd ThrottleCove/ThrottleCove\n\n# Install dependencies\nnpm install\n\n# Start development server\nnpm run dev\n```\n\n---\n\n## üß© Core Features\n\n### 1. üìÑ Document Upload\nLocated in: `components/ui/DocumentUpload.tsx`  \n- Allows users to upload and preview documents\n\n### 2. üñºÔ∏è Photo Upload\nLocated in: `components/ui/PhotoUpload.tsx`  \n- Drag-and-drop or file selection\n- Image preview and validation\n\n### 3. üåÄ Carousel Components\n- `PartsCarousel.tsx`: Custom horizontal carousel\n- `VerticalCarousel.tsx`: Vertical scroll-based image viewer\n\n### 4. üìä Chart Integration\n- Built-in UI chart (`components/ui/chart.tsx`)\n\n### 5. üìÖ Calendar & Form UI\n- Tailored date selectors, inputs, and dialog components\n\n---\n\n## üß± Component Architecture\n\nFollows a **modular UI** system inspired by **ShadCN/UI**:\n\nEach component is:\n- Type-safe (written in `.tsx`)\n- Individually styled using Tailwind\n- Responsive and reusable\n\n```tsx\n// Example: Button usage\nimport { Button } from \"@/components/ui/button\";\n\n<Button className=\"w-full\" variant=\"outline\">Click Me</Button>\n```\n\n---\n\n## ‚öôÔ∏è Configuration Files\n\n| File | Purpose |\n|------|---------|\n| `vite.config.ts` | Frontend build & development server |\n| `tailwind.config.ts` | Design system with Tailwind |\n| `tsconfig.json` | TypeScript project rules |\n| `drizzle.config.ts` | ORM config |\n| `.replit` | Replit environment support |\n\n---\n\n## üß™ Testing (Recommended Setup)\n\nThis project doesn't include tests yet. You can add:\n\n- **Unit Tests**: `Vitest` or `Jest`\n- **Component Tests**: `React Testing Library`\n- **E2E Tests**: `Cypress`\n\n---\n\n## ‚òÅÔ∏è Deployment\n\nYou can deploy the frontend to platforms like:\n\n- **Vercel**\n- **Netlify**\n- **Render**\n- **Replit** (built-in support)\n\nEnsure the `vite.config.ts` has correct base paths if deployed in a subdirectory.\n\n---\n\n## üõ£Ô∏è Future Enhancements\n\n- Integrate a backend API (Node, Express, etc.)\n- Enable database with Drizzle + PostgreSQL or SQLite\n- Add authentication (e.g., Clerk, Auth0, Firebase)\n- Mobile responsiveness enhancements\n- Persistent state (localStorage / database)\n\n---\n\n## üßæ Appendix\n\n- **Drizzle ORM**: https://orm.drizzle.team/\n- **ShadCN/UI**: https://ui.shadcn.dev/\n- **Vite**: https://vitejs.dev/\n\n---\n\n**Maintainer**: _Your Name_  \n**Last Updated**: June 2025\n","size_bytes":3875},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport cors from 'cors';\nimport compression from 'compression';\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\nimport { initializeDatabase, checkDatabaseHealth } from './database.js';\nimport { config } from './config.js';\nimport { logger, requestLogger } from './utils/logger.js';\nimport { \n  securityHeaders,\n  apiRateLimit,\n  requestTimeout,\n  corsOptions \n} from './middleware/security.js';\n\n// Initialize Express app\nconst app = express();\n\n// Trust proxy for accurate IP addresses\napp.set('trust proxy', 1);\n\n// Security middleware\napp.use(securityHeaders);\napp.use(cors(corsOptions));\napp.use(compression());\napp.use(requestTimeout());\n\n// Parse JSON with size limit\napp.use(express.json({ limit: '10mb' }));\napp.use(express.urlencoded({ extended: true, limit: '10mb' }));\n\n// Rate limiting for API routes\napp.use('/api', apiRateLimit);\n\n// Request logging middleware\napp.use((req: Request, res: Response, next: NextFunction) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    \n    // Enhanced logging\n    requestLogger.info('Request completed', {\n      method: req.method,\n      url: req.url,\n      statusCode: res.statusCode,\n      duration,\n      ip: req.ip,\n      userAgent: req.get('User-Agent'),\n    });\n\n    // Keep original format for API endpoints\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"‚Ä¶\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n// Health check endpoint\napp.get(\"/health\", async (req, res) => {\n  try {\n    const dbHealth = await checkDatabaseHealth();\n    \n    const health = {\n      status: dbHealth ? \"healthy\" : \"unhealthy\",\n      timestamp: new Date().toISOString(),\n      environment: config.NODE_ENV,\n      version: process.env.npm_package_version || '1.0.0',\n      database: dbHealth ? \"connected\" : \"disconnected\",\n      uptime: process.uptime(),\n      memory: process.memoryUsage(),\n    };\n\n    const statusCode = dbHealth ? 200 : 503;\n    res.status(statusCode).json(health);\n  } catch (error) {\n    logger.error('Health check failed:', error);\n    res.status(503).json({\n      status: \"unhealthy\",\n      timestamp: new Date().toISOString(),\n      error: \"Health check failed\",\n    });\n  }\n});\n\n(async () => {\n  try {\n    // Initialize database first\n    try {\n      await initializeDatabase();\n      logger.info('Database initialized successfully');\n    } catch (error) {\n      logger.warn('Database initialization failed, continuing without database:', error);\n    }\n\n    // Register API routes\n    const server = await registerRoutes(app);\n\n    // Global error handler\n    app.use((err: any, req: Request, res: Response, _next: NextFunction) => {\n      logger.error('Unhandled error:', {\n        error: err.message,\n        stack: err.stack,\n        path: req.path,\n        method: req.method,\n        ip: req.ip,\n        userAgent: req.get('User-Agent'),\n      });\n\n      // Don't expose internal errors in production\n      const isDevelopment = config.NODE_ENV === 'development';\n      \n      res.status(err.status || err.statusCode || 500).json({\n        error: isDevelopment ? err.message : 'Internal server error',\n        ...(isDevelopment && { stack: err.stack }),\n        timestamp: new Date().toISOString(),\n      });\n    });\n\n    // Use Vite in development, static files in production\n    if (config.NODE_ENV === 'development') {\n      await setupVite(app, server);\n    } else {\n      try {\n        serveStatic(app);\n        logger.info('Serving static files from dist/public');\n      } catch (error) {\n        logger.warn('Static files not found, falling back to Vite middleware:', error);\n        await setupVite(app, server);\n      }\n    }\n\n    // Graceful shutdown handlers\n    process.on('SIGTERM', () => {\n      logger.info('SIGTERM received, shutting down gracefully');\n      server.close(() => {\n        logger.info('Process terminated');\n        process.exit(0);\n      });\n    });\n\n    process.on('SIGINT', () => {\n      logger.info('SIGINT received, shutting down gracefully');\n      server.close(() => {\n        logger.info('Process terminated');\n        process.exit(0);\n      });\n    });\n\n    // Start server\n    const port = config.PORT;\n    server.listen({\n      port,\n      host: \"0.0.0.0\",\n      reusePort: true,\n    }, () => {\n      logger.info(`Server running on port ${port}`, {\n        environment: config.NODE_ENV,\n        port,\n      });\n      log(`serving on port ${port}`);\n    });\n\n  } catch (error) {\n    logger.error('Failed to start server:', error);\n    process.exit(1);\n  }\n})();\n","size_bytes":5190},"server/routes.ts":{"content":"import type { Express, Request, Response } from \"express\";\nimport express from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from './storage.js';\nimport session from \"express-session\";\nimport passport from \"passport\";\nimport { Strategy as LocalStrategy } from \"passport-local\";\nimport MemoryStore from \"memorystore\";\nimport { z } from \"zod\";\nimport bcrypt from \"bcryptjs\";\nimport multer from \"multer\";\nimport path from \"path\";\nimport fs from \"fs\";\n\nimport {\n  insertUserSchema,\n  insertMotorcycleSchema,\n  insertMaintenanceRecordSchema,\n  insertMaintenanceScheduleSchema,\n  insertRideSchema,\n  insertRiderRelationshipSchema,\n  loginSchema,\n  registerSchema\n} from \"../shared/schema.js\";\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Create uploads directory if it doesn't exist\n  const uploadsDir = path.join(process.cwd(), 'uploads');\n  if (!fs.existsSync(uploadsDir)) {\n    fs.mkdirSync(uploadsDir, { recursive: true });\n  }\n\n  // Multer configuration for file uploads\n  const upload = multer({\n    storage: multer.diskStorage({\n      destination: (req, file, cb) => {\n        cb(null, uploadsDir);\n      },\n      filename: (req, file, cb) => {\n        const uniqueSuffix = Date.now() + '-' + Math.round(Math.random() * 1E9);\n        cb(null, file.fieldname + '-' + uniqueSuffix + path.extname(file.originalname));\n      }\n    }),\n    limits: {\n      fileSize: 5 * 1024 * 1024 // 5MB limit\n    },\n    fileFilter: (req, file, cb) => {\n      if (file.fieldname === 'photo') {\n        // Accept images only\n        if (!file.mimetype.startsWith('image/')) {\n          cb(new Error('Only image files are allowed'));\n          return;\n        }\n      } else if (file.fieldname.startsWith('document_')) {\n        // Accept common document formats\n        const allowedTypes = ['application/pdf', 'image/jpeg', 'image/jpg', 'image/png'];\n        if (!allowedTypes.includes(file.mimetype)) {\n          cb(new Error('Only PDF, JPG, and PNG files are allowed for documents'));\n          return;\n        }\n      }\n      cb(null, true);\n    }\n  });\n\n  // Serve uploaded files statically\n  app.use('/uploads', express.static(uploadsDir));\n\n  // Session setup\n  const MemoryStoreSession = MemoryStore(session);\n  \n  app.use(session({\n    secret: process.env.SESSION_SECRET || \"throttlecove-secret\",\n    resave: false,\n    saveUninitialized: false,\n    store: new MemoryStoreSession({\n      checkPeriod: 86400000 // prune expired entries every 24h\n    }),\n    cookie: {\n      maxAge: 7 * 24 * 60 * 60 * 1000, // 1 week\n      secure: process.env.NODE_ENV === \"production\",\n      httpOnly: true,\n    }\n  }));\n  \n  // Passport configuration\n  app.use(passport.initialize());\n  app.use(passport.session());\n  \n  passport.use(new LocalStrategy(async (username, password, done) => {\n    try {\n      const user = await storage.getUserByUsername(username);\n      \n      if (!user) {\n        return done(null, false, { message: \"Invalid username or password\" });\n      }\n      \n      // Compare hashed password\n      const isValidPassword = await bcrypt.compare(password, user.passwordHash);\n      if (!isValidPassword) {\n        return done(null, false, { message: \"Invalid username or password\" });\n      }\n      \n      return done(null, user);\n    } catch (error) {\n      return done(error);\n    }\n  }));\n  \n  passport.serializeUser((user: any, done) => {\n    done(null, user.id);\n  });\n  \n  passport.deserializeUser(async (id: number, done) => {\n    try {\n      const user = await storage.getUser(id);\n      done(null, user);\n    } catch (error) {\n      done(error);\n    }\n  });\n  \n  // Auth middleware\n  const isAuthenticated = (req: Request, res: Response, next: any) => {\n    if (req.isAuthenticated()) {\n      return next();\n    }\n    res.status(401).json({ error: \"Authentication required\" });\n  };\n\n  // ============================================================================\n  // AUTHENTICATION ROUTES\n  // ============================================================================\n\n  // Register new user\n  app.post(\"/api/auth/register\", async (req: Request, res: Response) => {\n    try {\n      const { username, password, fullName, email } = req.body;\n\n      if (!username || !password || !fullName || !email) {\n        return res.status(400).json({ error: \"All fields are required\" });\n      }\n\n      const existingUser = await storage.getUserByUsername(username);\n      if (existingUser) {\n        return res.status(400).json({ error: \"Username already exists\" });\n      }\n\n      // Hash password\n      const passwordHash = await bcrypt.hash(password, 10);\n\n      const user = await storage.createUser({\n        username,\n        passwordHash,\n        fullName,\n        email,\n      });\n\n      req.login(user, (err) => {\n        if (err) {\n          return res.status(500).json({ error: \"Login failed after registration\" });\n        }\n        res.json({ \n          user: {\n            id: user.id,\n            username: user.username,\n            fullName: user.fullName,\n            email: user.email,\n            avatarUrl: user.avatarUrl,\n          }\n        });\n      });\n    } catch (error) {\n      console.error('Registration error:', error);\n      res.status(500).json({ error: \"Registration failed\" });\n    }\n  });\n\n  // Login user\n  app.post(\"/api/auth/login\", (req: Request, res: Response, next: any) => {\n    passport.authenticate(\"local\", (err: any, user: any, info: any) => {\n      if (err) {\n        return next(err);\n      }\n      if (!user) {\n        return res.status(401).json({ error: \"Invalid credentials\" });\n      }\n      req.login(user, (err) => {\n        if (err) {\n          return next(err);\n        }\n        return res.json({\n          user: {\n            id: user.id,\n            username: user.username,\n            fullName: user.fullName,\n            email: user.email,\n            avatarUrl: user.avatarUrl,\n          }\n        });\n      });\n    })(req, res, next);\n  });\n\n  // Logout user\n  app.post(\"/api/auth/logout\", (req: Request, res: Response) => {\n    req.logout((err) => {\n      if (err) {\n        return res.status(500).json({ error: \"Logout failed\" });\n      }\n      res.json({ message: \"Logged out successfully\" });\n    });\n  });\n\n  // Get current session/user\n  app.get(\"/api/auth/session\", (req: Request, res: Response) => {\n    if (req.isAuthenticated()) {\n      const user = req.user as any;\n      res.json({\n        id: user.id,\n        username: user.username,\n        fullName: user.fullName,\n        email: user.email,\n        avatarUrl: user.avatarUrl,\n      });\n    } else {\n      res.status(401).json({ error: \"Not authenticated\" });\n    }\n  });\n\n  // ============================================================================\n  // MOTORCYCLE ROUTES\n  // ============================================================================\n\n  // Get all motorcycles for user\n  app.get(\"/api/motorcycles\", isAuthenticated, async (req: any, res: Response) => {\n    try {\n      const motorcycles = await storage.getMotorcyclesByUserId(req.user.id);\n      res.json(motorcycles);\n    } catch (error) {\n      console.error('Get motorcycles error:', error);\n      res.status(500).json({ error: \"Failed to fetch motorcycles\" });\n    }\n  });\n\n  // Create new motorcycle\n  app.post(\"/api/motorcycles\", isAuthenticated, upload.any(), async (req: any, res: Response) => {\n    try {\n      const files = req.files as Express.Multer.File[];\n      \n      // Process uploaded photo\n      let photoUrl = '';\n      const photoFile = files?.find(f => f.fieldname === 'photo');\n      if (photoFile) {\n        photoUrl = `/uploads/${photoFile.filename}`;\n      }\n      \n      // Process uploaded documents\n      const documentFiles = files?.filter(f => f.fieldname.startsWith('document_')) || [];\n      \n      // Create motorcycle with photo as first item in photos array\n      const motorcycleData = {\n        ...req.body,\n        userId: req.user.id,\n        photos: photoUrl ? [photoUrl] : [],\n        mileage: req.body.mileage ? parseInt(req.body.mileage) : 0,\n        year: req.body.year ? parseInt(req.body.year) : new Date().getFullYear()\n      };\n      \n      const motorcycle = await storage.createMotorcycle(motorcycleData);\n      \n      // Save documents to documents table if any were uploaded\n      if (documentFiles.length > 0) {\n        for (const docFile of documentFiles) {\n          const documentData = {\n            motorcycleId: motorcycle.id,\n            documentType: 'general',\n            title: docFile.originalname,\n            fileUrl: `/uploads/${docFile.filename}`,\n            fileSize: docFile.size,\n            mimeType: docFile.mimetype\n          };\n          \n          await storage.createDocument(documentData);\n        }\n      }\n      \n      res.status(201).json(motorcycle);\n    } catch (error) {\n      console.error('Create motorcycle error:', error);\n      res.status(500).json({ error: \"Failed to create motorcycle\" });\n    }\n  });\n\n  // Get motorcycle by ID\n  app.get(\"/api/motorcycles/:id\", isAuthenticated, async (req: any, res: Response) => {\n    try {\n      const motorcycle = await storage.getMotorcycle(parseInt(req.params.id));\n      if (!motorcycle || motorcycle.userId !== req.user.id) {\n        return res.status(404).json({ error: \"Motorcycle not found\" });\n      }\n      res.json(motorcycle);\n    } catch (error) {\n      console.error('Get motorcycle error:', error);\n      res.status(500).json({ error: \"Failed to fetch motorcycle\" });\n    }\n  });\n\n  // Update motorcycle\n  app.put(\"/api/motorcycles/:id\", isAuthenticated, async (req: any, res: Response) => {\n    try {\n      const id = parseInt(req.params.id);\n      const motorcycle = await storage.getMotorcycle(id);\n      \n      if (!motorcycle || motorcycle.userId !== req.user.id) {\n        return res.status(404).json({ error: \"Motorcycle not found\" });\n      }\n\n      const updatedMotorcycle = await storage.updateMotorcycle(id, req.body);\n      res.json(updatedMotorcycle);\n    } catch (error) {\n      console.error('Update motorcycle error:', error);\n      res.status(500).json({ error: \"Failed to update motorcycle\" });\n    }\n  });\n\n  // Delete motorcycle\n  app.delete(\"/api/motorcycles/:id\", isAuthenticated, async (req: any, res: Response) => {\n    try {\n      const id = parseInt(req.params.id);\n      const motorcycle = await storage.getMotorcycle(id);\n      \n      if (!motorcycle || motorcycle.userId !== req.user.id) {\n        return res.status(404).json({ error: \"Motorcycle not found\" });\n      }\n\n      await storage.deleteMotorcycle(id);\n      res.json({ message: \"Motorcycle deleted successfully\" });\n    } catch (error) {\n      console.error('Delete motorcycle error:', error);\n      res.status(500).json({ error: \"Failed to delete motorcycle\" });\n    }\n  });\n\n  // Get documents for a motorcycle\n  app.get(\"/api/motorcycles/:id/documents\", isAuthenticated, async (req: any, res: Response) => {\n    try {\n      const motorcycleId = parseInt(req.params.id);\n      const motorcycle = await storage.getMotorcycle(motorcycleId);\n      \n      if (!motorcycle || motorcycle.userId !== req.user.id) {\n        return res.status(404).json({ error: \"Motorcycle not found\" });\n      }\n      \n      const documents = await storage.getDocumentsByMotorcycleId(motorcycleId);\n      res.json(documents);\n    } catch (error) {\n      console.error('Get documents error:', error);\n      res.status(500).json({ error: \"Failed to get documents\" });\n    }\n  });\n\n  // Get all documents for user's vehicles\n  app.get(\"/api/documents\", isAuthenticated, async (req: any, res: Response) => {\n    try {\n      const userMotorcycles = await storage.getMotorcyclesByUserId(req.user.id);\n      const allDocuments = [];\n      \n      for (const motorcycle of userMotorcycles) {\n        const documents = await storage.getDocumentsByMotorcycleId(motorcycle.id);\n        allDocuments.push(...documents.map(doc => ({ \n          ...doc, \n          motorcycleName: motorcycle.name || `${motorcycle.make} ${motorcycle.model}` \n        })));\n      }\n      \n      res.json(allDocuments);\n    } catch (error) {\n      console.error('Get all documents error:', error);\n      res.status(500).json({ error: \"Failed to get documents\" });\n    }\n  });\n\n  // ============================================================================\n  // MAINTENANCE ROUTES\n  // ============================================================================\n\n  // Get maintenance records for motorcycle\n  app.get(\"/api/motorcycles/:id/maintenance\", isAuthenticated, async (req: any, res: Response) => {\n    try {\n      const motorcycleId = parseInt(req.params.id);\n      const motorcycle = await storage.getMotorcycle(motorcycleId);\n      \n      if (!motorcycle || motorcycle.userId !== req.user.id) {\n        return res.status(404).json({ error: \"Motorcycle not found\" });\n      }\n\n      const records = await storage.getMaintenanceRecordsByMotorcycleId(motorcycleId);\n      res.json(records);\n    } catch (error) {\n      console.error('Get maintenance records error:', error);\n      res.status(500).json({ error: \"Failed to fetch maintenance records\" });\n    }\n  });\n\n  // Create maintenance record\n  app.post(\"/api/motorcycles/:id/maintenance\", isAuthenticated, async (req: any, res: Response) => {\n    try {\n      const motorcycleId = parseInt(req.params.id);\n      const motorcycle = await storage.getMotorcycle(motorcycleId);\n      \n      if (!motorcycle || motorcycle.userId !== req.user.id) {\n        return res.status(404).json({ error: \"Motorcycle not found\" });\n      }\n\n      const recordData = { ...req.body, motorcycleId };\n      const record = await storage.createMaintenanceRecord(recordData);\n      res.status(201).json(record);\n    } catch (error) {\n      console.error('Create maintenance record error:', error);\n      res.status(500).json({ error: \"Failed to create maintenance record\" });\n    }\n  });\n\n  // ============================================================================\n  // RIDE ROUTES\n  // ============================================================================\n\n  // Get rides for user\n  app.get(\"/api/rides\", isAuthenticated, async (req: any, res: Response) => {\n    try {\n      const rides = await storage.getRidesByUserId(req.user.id);\n      res.json(rides);\n    } catch (error) {\n      console.error('Get rides error:', error);\n      res.status(500).json({ error: \"Failed to fetch rides\" });\n    }\n  });\n\n  // Create new ride\n  app.post(\"/api/rides\", isAuthenticated, async (req: any, res: Response) => {\n    try {\n      const rideData = { ...req.body, userId: req.user.id };\n      const ride = await storage.createRide(rideData);\n      res.status(201).json(ride);\n    } catch (error) {\n      console.error('Create ride error:', error);\n      res.status(500).json({ error: \"Failed to create ride\" });\n    }\n  });\n\n  // ============================================================================\n  // HEALTH AND STATUS ROUTES\n  // ============================================================================\n\n  // API status endpoint\n  app.get(\"/api/status\", (req: Request, res: Response) => {\n    res.json({\n      status: \"operational\",\n      timestamp: new Date().toISOString(),\n      version: \"1.0.0\",\n      services: {\n        auth: \"operational\",\n        vehicles: \"operational\",\n        storage: \"operational\",\n      },\n    });\n  });\n\n  // Create HTTP server\n  const httpServer = createServer(app);\n  \n  console.log('API routes registered successfully');\n  return httpServer;\n}","size_bytes":15486},"server/storage.ts":{"content":"import { \n  users, User, InsertUser,\n  motorcycles, Motorcycle, InsertMotorcycle,\n  maintenanceRecords, MaintenanceRecord, InsertMaintenanceRecord,\n  maintenanceSchedules, MaintenanceSchedule, InsertMaintenanceSchedule,\n  rides, Ride, InsertRide,\n  documents, Document, InsertDocument,\n  riderRelationships, RiderRelationship, InsertRiderRelationship\n} from \"@shared/schema\";\n\n// Interface for storage operations\nexport interface IStorage {\n  // User operations\n  getUser(id: number): Promise<User | undefined>;\n  getUserByUsername(username: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n  \n  // Motorcycle operations\n  getMotorcycle(id: number): Promise<Motorcycle | undefined>;\n  getMotorcyclesByUserId(userId: number): Promise<Motorcycle[]>;\n  createMotorcycle(motorcycle: InsertMotorcycle): Promise<Motorcycle>;\n  updateMotorcycle(id: number, motorcycle: Partial<Motorcycle>): Promise<Motorcycle | undefined>;\n  deleteMotorcycle(id: number): Promise<boolean>;\n  \n  // Maintenance record operations\n  getMaintenanceRecord(id: number): Promise<MaintenanceRecord | undefined>;\n  getMaintenanceRecordsByMotorcycleId(motorcycleId: number): Promise<MaintenanceRecord[]>;\n  createMaintenanceRecord(record: InsertMaintenanceRecord): Promise<MaintenanceRecord>;\n  updateMaintenanceRecord(id: number, record: Partial<MaintenanceRecord>): Promise<MaintenanceRecord | undefined>;\n  deleteMaintenanceRecord(id: number): Promise<boolean>;\n  \n  // Maintenance schedule operations\n  getMaintenanceSchedule(id: number): Promise<MaintenanceSchedule | undefined>;\n  getMaintenanceSchedulesByMotorcycleId(motorcycleId: number): Promise<MaintenanceSchedule[]>;\n  createMaintenanceSchedule(schedule: InsertMaintenanceSchedule): Promise<MaintenanceSchedule>;\n  updateMaintenanceSchedule(id: number, schedule: Partial<MaintenanceSchedule>): Promise<MaintenanceSchedule | undefined>;\n  deleteMaintenanceSchedule(id: number): Promise<boolean>;\n  \n  // Ride operations\n  getRide(id: number): Promise<Ride | undefined>;\n  getRidesByUserId(userId: number): Promise<Ride[]>;\n  createRide(ride: InsertRide): Promise<Ride>;\n  updateRide(id: number, ride: Partial<Ride>): Promise<Ride | undefined>;\n  deleteRide(id: number): Promise<boolean>;\n  \n  // Document operations\n  getDocument(id: number): Promise<Document | undefined>;\n  getDocumentsByMotorcycleId(motorcycleId: number): Promise<Document[]>;\n  createDocument(document: InsertDocument): Promise<Document>;\n  updateDocument(id: number, document: Partial<Document>): Promise<Document | undefined>;\n  deleteDocument(id: number): Promise<boolean>;\n  \n  // Rider relationship operations\n  getRiderRelationship(id: number): Promise<RiderRelationship | undefined>;\n  getRiderRelationshipsByUserId(userId: number): Promise<RiderRelationship[]>;\n  createRiderRelationship(relationship: InsertRiderRelationship): Promise<RiderRelationship>;\n  updateRiderRelationship(id: number, relationship: Partial<RiderRelationship>): Promise<RiderRelationship | undefined>;\n  deleteRiderRelationship(id: number): Promise<boolean>;\n}\n\nexport class MemStorage implements IStorage {\n  private users: Map<number, User>;\n  private motorcycles: Map<number, Motorcycle>;\n  private maintenanceRecords: Map<number, MaintenanceRecord>;\n  private maintenanceSchedules: Map<number, MaintenanceSchedule>;\n  private rides: Map<number, Ride>;\n  private documents: Map<number, Document>;\n  private riderRelationships: Map<number, RiderRelationship>;\n  \n  private currentUserId: number = 1;\n  private currentMotorcycleId: number = 1;\n  private currentMaintenanceRecordId: number = 1;\n  private currentMaintenanceScheduleId: number = 1;\n  private currentRideId: number = 1;\n  private currentDocumentId: number = 1;\n  private currentRiderRelationshipId: number = 1;\n  \n  constructor() {\n    this.users = new Map();\n    this.motorcycles = new Map();\n    this.maintenanceRecords = new Map();\n    this.maintenanceSchedules = new Map();\n    this.rides = new Map();\n    this.documents = new Map();\n    this.riderRelationships = new Map();\n    \n    // Add demo user with hashed password\n    this.createUser({\n      username: \"demo\",\n      passwordHash: \"$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi\", // \"password\"\n      fullName: \"Demo User\",\n      email: \"demo@throttlecove.com\",\n      avatarUrl: \"https://images.unsplash.com/photo-1568602471122-7832951cc4c5?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=200&h=200&q=80\"\n    });\n  }\n  \n  // User operations\n  async getUser(id: number): Promise<User | undefined> {\n    return this.users.get(id);\n  }\n  \n  async getUserByUsername(username: string): Promise<User | undefined> {\n    return Array.from(this.users.values()).find(\n      (user) => user.username === username\n    );\n  }\n  \n  async createUser(user: InsertUser): Promise<User> {\n    const id = this.currentUserId++;\n    const newUser: User = { ...user, id, createdAt: new Date() };\n    this.users.set(id, newUser);\n    return newUser;\n  }\n  \n  // Motorcycle operations\n  async getMotorcycle(id: number): Promise<Motorcycle | undefined> {\n    return this.motorcycles.get(id);\n  }\n  \n  async getMotorcyclesByUserId(userId: number): Promise<Motorcycle[]> {\n    return Array.from(this.motorcycles.values()).filter(\n      (motorcycle) => motorcycle.userId === userId\n    );\n  }\n  \n  async createMotorcycle(motorcycle: InsertMotorcycle): Promise<Motorcycle> {\n    const id = this.currentMotorcycleId++;\n    const newMotorcycle: Motorcycle = { ...motorcycle, id, createdAt: new Date() };\n    this.motorcycles.set(id, newMotorcycle);\n    return newMotorcycle;\n  }\n  \n  async updateMotorcycle(id: number, motorcycle: Partial<Motorcycle>): Promise<Motorcycle | undefined> {\n    const existingMotorcycle = this.motorcycles.get(id);\n    if (!existingMotorcycle) return undefined;\n    \n    const updatedMotorcycle = { ...existingMotorcycle, ...motorcycle };\n    this.motorcycles.set(id, updatedMotorcycle);\n    return updatedMotorcycle;\n  }\n  \n  async deleteMotorcycle(id: number): Promise<boolean> {\n    return this.motorcycles.delete(id);\n  }\n  \n  // Maintenance record operations\n  async getMaintenanceRecord(id: number): Promise<MaintenanceRecord | undefined> {\n    return this.maintenanceRecords.get(id);\n  }\n  \n  async getMaintenanceRecordsByMotorcycleId(motorcycleId: number): Promise<MaintenanceRecord[]> {\n    return Array.from(this.maintenanceRecords.values()).filter(\n      (record) => record.motorcycleId === motorcycleId\n    );\n  }\n  \n  async createMaintenanceRecord(record: InsertMaintenanceRecord): Promise<MaintenanceRecord> {\n    const id = this.currentMaintenanceRecordId++;\n    const newRecord: MaintenanceRecord = { ...record, id, createdAt: new Date() };\n    this.maintenanceRecords.set(id, newRecord);\n    return newRecord;\n  }\n  \n  async updateMaintenanceRecord(id: number, record: Partial<MaintenanceRecord>): Promise<MaintenanceRecord | undefined> {\n    const existingRecord = this.maintenanceRecords.get(id);\n    if (!existingRecord) return undefined;\n    \n    const updatedRecord = { ...existingRecord, ...record };\n    this.maintenanceRecords.set(id, updatedRecord);\n    return updatedRecord;\n  }\n  \n  async deleteMaintenanceRecord(id: number): Promise<boolean> {\n    return this.maintenanceRecords.delete(id);\n  }\n  \n  // Maintenance schedule operations\n  async getMaintenanceSchedule(id: number): Promise<MaintenanceSchedule | undefined> {\n    return this.maintenanceSchedules.get(id);\n  }\n  \n  async getMaintenanceSchedulesByMotorcycleId(motorcycleId: number): Promise<MaintenanceSchedule[]> {\n    return Array.from(this.maintenanceSchedules.values()).filter(\n      (schedule) => schedule.motorcycleId === motorcycleId\n    );\n  }\n  \n  async createMaintenanceSchedule(schedule: InsertMaintenanceSchedule): Promise<MaintenanceSchedule> {\n    const id = this.currentMaintenanceScheduleId++;\n    const newSchedule: MaintenanceSchedule = { ...schedule, id, createdAt: new Date() };\n    this.maintenanceSchedules.set(id, newSchedule);\n    return newSchedule;\n  }\n  \n  async updateMaintenanceSchedule(id: number, schedule: Partial<MaintenanceSchedule>): Promise<MaintenanceSchedule | undefined> {\n    const existingSchedule = this.maintenanceSchedules.get(id);\n    if (!existingSchedule) return undefined;\n    \n    const updatedSchedule = { ...existingSchedule, ...schedule };\n    this.maintenanceSchedules.set(id, updatedSchedule);\n    return updatedSchedule;\n  }\n  \n  async deleteMaintenanceSchedule(id: number): Promise<boolean> {\n    return this.maintenanceSchedules.delete(id);\n  }\n  \n  // Ride operations\n  async getRide(id: number): Promise<Ride | undefined> {\n    return this.rides.get(id);\n  }\n  \n  async getRidesByUserId(userId: number): Promise<Ride[]> {\n    return Array.from(this.rides.values()).filter(\n      (ride) => ride.userId === userId\n    );\n  }\n  \n  async createRide(ride: InsertRide): Promise<Ride> {\n    const id = this.currentRideId++;\n    const newRide: Ride = { ...ride, id, createdAt: new Date() };\n    this.rides.set(id, newRide);\n    return newRide;\n  }\n  \n  async updateRide(id: number, ride: Partial<Ride>): Promise<Ride | undefined> {\n    const existingRide = this.rides.get(id);\n    if (!existingRide) return undefined;\n    \n    const updatedRide = { ...existingRide, ...ride };\n    this.rides.set(id, updatedRide);\n    return updatedRide;\n  }\n  \n  async deleteRide(id: number): Promise<boolean> {\n    return this.rides.delete(id);\n  }\n  \n  // Document operations\n  async getDocument(id: number): Promise<Document | undefined> {\n    return this.documents.get(id);\n  }\n\n  async getDocumentsByMotorcycleId(motorcycleId: number): Promise<Document[]> {\n    return Array.from(this.documents.values()).filter(doc => doc.motorcycleId === motorcycleId);\n  }\n\n  async createDocument(document: InsertDocument): Promise<Document> {\n    const newDocument: Document = {\n      id: this.currentDocumentId++,\n      ...document,\n      createdAt: new Date(),\n      updatedAt: new Date(),\n    };\n    this.documents.set(newDocument.id, newDocument);\n    return newDocument;\n  }\n\n  async updateDocument(id: number, document: Partial<Document>): Promise<Document | undefined> {\n    const existing = this.documents.get(id);\n    if (!existing) return undefined;\n    \n    const updated = { \n      ...existing, \n      ...document, \n      updatedAt: new Date()\n    };\n    this.documents.set(id, updated);\n    return updated;\n  }\n\n  async deleteDocument(id: number): Promise<boolean> {\n    return this.documents.delete(id);\n  }\n  \n  // Rider relationship operations\n  async getRiderRelationship(id: number): Promise<RiderRelationship | undefined> {\n    return this.riderRelationships.get(id);\n  }\n  \n  async getRiderRelationshipsByUserId(userId: number): Promise<RiderRelationship[]> {\n    return Array.from(this.riderRelationships.values()).filter(\n      (relationship) => relationship.userId === userId || relationship.friendId === userId\n    );\n  }\n  \n  async createRiderRelationship(relationship: InsertRiderRelationship): Promise<RiderRelationship> {\n    const id = this.currentRiderRelationshipId++;\n    const newRelationship: RiderRelationship = { ...relationship, id, createdAt: new Date() };\n    this.riderRelationships.set(id, newRelationship);\n    return newRelationship;\n  }\n  \n  async updateRiderRelationship(id: number, relationship: Partial<RiderRelationship>): Promise<RiderRelationship | undefined> {\n    const existingRelationship = this.riderRelationships.get(id);\n    if (!existingRelationship) return undefined;\n    \n    const updatedRelationship = { ...existingRelationship, ...relationship };\n    this.riderRelationships.set(id, updatedRelationship);\n    return updatedRelationship;\n  }\n  \n  async deleteRiderRelationship(id: number): Promise<boolean> {\n    return this.riderRelationships.delete(id);\n  }\n}\n\nexport const storage = new MemStorage();\n","size_bytes":11875},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2254},"shared/schema.ts":{"content":"import { pgTable, text, serial, integer, date, boolean, timestamp, uniqueIndex, varchar, decimal, point, jsonb, inet, uuid, index } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\n// Users table with enhanced security fields\nexport const users = pgTable(\"users\", {\n  id: serial(\"id\").primaryKey(),\n  username: varchar(\"username\", { length: 50 }).notNull().unique(),\n  email: varchar(\"email\", { length: 255 }).notNull().unique(),\n  passwordHash: varchar(\"password_hash\", { length: 255 }).notNull(),\n  fullName: varchar(\"full_name\", { length: 255 }),\n  phone: varchar(\"phone\", { length: 20 }),\n  avatarUrl: text(\"avatar_url\"),\n  emailVerified: boolean(\"email_verified\").default(false),\n  mfaEnabled: boolean(\"mfa_enabled\").default(false),\n  mfaSecret: varchar(\"mfa_secret\", { length: 32 }),\n  loginAttempts: integer(\"login_attempts\").default(0),\n  lockedUntil: timestamp(\"locked_until\"),\n  lastLogin: timestamp(\"last_login\"),\n  role: varchar(\"role\", { length: 20 }).default(\"user\"),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n  updatedAt: timestamp(\"updated_at\").defaultNow().notNull(),\n}, (table) => ({\n  usernameIdx: index(\"idx_users_username\").on(table.username),\n  emailIdx: index(\"idx_users_email\").on(table.email),\n}));\n\n// User sessions for JWT management\nexport const userSessions = pgTable(\"user_sessions\", {\n  id: uuid(\"id\").primaryKey().defaultRandom(),\n  userId: integer(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  sessionToken: varchar(\"session_token\", { length: 255 }).notNull().unique(),\n  refreshToken: varchar(\"refresh_token\", { length: 255 }).unique(),\n  ipAddress: inet(\"ip_address\"),\n  userAgent: text(\"user_agent\"),\n  expiresAt: timestamp(\"expires_at\").notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n}, (table) => ({\n  sessionTokenIdx: index(\"idx_sessions_token\").on(table.sessionToken),\n  expiresAtIdx: index(\"idx_sessions_expires\").on(table.expiresAt),\n}));\n\n// Enhanced motorcycles table\nexport const motorcycles = pgTable(\"motorcycles\", {\n  id: serial(\"id\").primaryKey(),\n  userId: integer(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  name: varchar(\"name\", { length: 255 }).notNull(),\n  make: varchar(\"make\", { length: 100 }).notNull(),\n  model: varchar(\"model\", { length: 100 }).notNull(),\n  year: integer(\"year\"),\n  vin: varchar(\"vin\", { length: 17 }).unique(),\n  engineSize: integer(\"engine_size\"), // CC\n  engineType: varchar(\"engine_type\", { length: 50 }),\n  color: varchar(\"color\", { length: 50 }),\n  mileage: integer(\"mileage\").default(0),\n  purchaseDate: date(\"purchase_date\"),\n  purchasePrice: decimal(\"purchase_price\", { precision: 10, scale: 2 }),\n  currentValue: decimal(\"current_value\", { precision: 10, scale: 2 }),\n  insuranceProvider: varchar(\"insurance_provider\", { length: 255 }),\n  insurancePolicy: varchar(\"insurance_policy\", { length: 100 }),\n  registrationNumber: varchar(\"registration_number\", { length: 50 }),\n  licensePlate: varchar(\"license_plate\", { length: 20 }),\n  status: varchar(\"status\", { length: 20 }).default(\"active\"), // active, sold, stolen, totaled\n  photos: text(\"photos\").array(), // Array of photo URLs\n  documents: jsonb(\"documents\"), // Document metadata\n  customFields: jsonb(\"custom_fields\"), // User-defined fields\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n  updatedAt: timestamp(\"updated_at\").defaultNow().notNull(),\n}, (table) => ({\n  userIdIdx: index(\"idx_motorcycles_user_id\").on(table.userId),\n  vinIdx: index(\"idx_motorcycles_vin\").on(table.vin),\n  searchIdx: index(\"idx_motorcycles_search\").on(table.name, table.make, table.model),\n}));\n\n// Enhanced maintenance records table\nexport const maintenanceRecords = pgTable(\"maintenance_records\", {\n  id: serial(\"id\").primaryKey(),\n  motorcycleId: integer(\"motorcycle_id\").notNull().references(() => motorcycles.id, { onDelete: \"cascade\" }),\n  serviceType: varchar(\"service_type\", { length: 100 }).notNull(),\n  description: text(\"description\"),\n  mileageAtService: integer(\"mileage_at_service\"),\n  serviceDate: date(\"service_date\").notNull(),\n  cost: decimal(\"cost\", { precision: 10, scale: 2 }),\n  serviceProvider: varchar(\"service_provider\", { length: 255 }),\n  partsUsed: jsonb(\"parts_used\"), // Array of parts with details\n  laborHours: decimal(\"labor_hours\", { precision: 4, scale: 2 }),\n  nextServiceDue: integer(\"next_service_due\"), // Mileage\n  nextServiceDate: date(\"next_service_date\"),\n  receiptUrl: text(\"receipt_url\"),\n  notes: text(\"notes\"),\n  warrantyPeriod: integer(\"warranty_period\"), // Days\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n  updatedAt: timestamp(\"updated_at\").defaultNow().notNull(),\n}, (table) => ({\n  motorcycleIdIdx: index(\"idx_maintenance_records_motorcycle_id\").on(table.motorcycleId),\n  serviceDateIdx: index(\"idx_maintenance_records_service_date\").on(table.serviceDate),\n}));\n\n// Enhanced maintenance schedules table\nexport const maintenanceSchedules = pgTable(\"maintenance_schedules\", {\n  id: serial(\"id\").primaryKey(),\n  motorcycleId: integer(\"motorcycle_id\").notNull().references(() => motorcycles.id, { onDelete: \"cascade\" }),\n  serviceType: varchar(\"service_type\", { length: 100 }).notNull(),\n  intervalType: varchar(\"interval_type\", { length: 20 }).notNull(), // mileage, time, both\n  mileageInterval: integer(\"mileage_interval\"),\n  timeInterval: integer(\"time_interval\"), // Days\n  description: text(\"description\"),\n  costEstimate: decimal(\"cost_estimate\", { precision: 10, scale: 2 }),\n  isCritical: boolean(\"is_critical\").default(false),\n  reminderSettings: jsonb(\"reminder_settings\"), // Notification preferences\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n  updatedAt: timestamp(\"updated_at\").defaultNow().notNull(),\n}, (table) => ({\n  motorcycleIdIdx: index(\"idx_maintenance_schedules_motorcycle_id\").on(table.motorcycleId),\n}));\n\n// Enhanced rides table with GPS tracking\nexport const rides = pgTable(\"rides\", {\n  id: serial(\"id\").primaryKey(),\n  userId: integer(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  motorcycleId: integer(\"motorcycle_id\").references(() => motorcycles.id, { onDelete: \"set null\" }),\n  title: varchar(\"title\", { length: 255 }),\n  description: text(\"description\"),\n  startLocation: point(\"start_location\"),\n  endLocation: point(\"end_location\"),\n  routeData: jsonb(\"route_data\"), // GPS coordinates, waypoints\n  distance: decimal(\"distance\", { precision: 8, scale: 2 }), // Kilometers\n  duration: integer(\"duration\"), // Minutes\n  startTime: timestamp(\"start_time\"),\n  endTime: timestamp(\"end_time\"),\n  maxSpeed: decimal(\"max_speed\", { precision: 5, scale: 2 }),\n  avgSpeed: decimal(\"avg_speed\", { precision: 5, scale: 2 }),\n  fuelConsumed: decimal(\"fuel_consumed\", { precision: 5, scale: 2 }),\n  cost: decimal(\"cost\", { precision: 8, scale: 2 }),\n  photos: text(\"photos\").array(),\n  isPublic: boolean(\"is_public\").default(false),\n  tags: text(\"tags\").array(),\n  weatherData: jsonb(\"weather_data\"),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n  updatedAt: timestamp(\"updated_at\").defaultNow().notNull(),\n}, (table) => ({\n  userIdIdx: index(\"idx_rides_user_id\").on(table.userId),\n  startTimeIdx: index(\"idx_rides_start_time\").on(table.startTime),\n  startLocationIdx: index(\"idx_rides_start_location\").on(table.startLocation),\n}));\n\n// Documents table for vehicle paperwork\nexport const documents = pgTable(\"documents\", {\n  id: serial(\"id\").primaryKey(),\n  motorcycleId: integer(\"motorcycle_id\").notNull().references(() => motorcycles.id, { onDelete: \"cascade\" }),\n  documentType: varchar(\"document_type\", { length: 50 }).notNull(), // registration, insurance, service, etc.\n  title: varchar(\"title\", { length: 255 }).notNull(),\n  fileUrl: text(\"file_url\").notNull(),\n  fileSize: integer(\"file_size\"),\n  mimeType: varchar(\"mime_type\", { length: 100 }),\n  issueDate: date(\"issue_date\"),\n  expiryDate: date(\"expiry_date\"),\n  issuingAuthority: varchar(\"issuing_authority\", { length: 255 }),\n  documentNumber: varchar(\"document_number\", { length: 100 }),\n  status: varchar(\"status\", { length: 20 }).default(\"valid\"), // valid, expired, expiring\n  reminderDays: integer(\"reminder_days\").default(30),\n  extractedData: jsonb(\"extracted_data\"), // OCR results\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n  updatedAt: timestamp(\"updated_at\").defaultNow().notNull(),\n}, (table) => ({\n  motorcycleIdIdx: index(\"idx_documents_motorcycle_id\").on(table.motorcycleId),\n  expiryDateIdx: index(\"idx_documents_expiry_date\").on(table.expiryDate),\n}));\n\n// Enhanced rider relationships (social features)\nexport const riderRelationships = pgTable(\"rider_relationships\", {\n  id: serial(\"id\").primaryKey(),\n  followerId: integer(\"follower_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  followingId: integer(\"following_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  status: varchar(\"status\", { length: 20 }).default(\"pending\"), // pending, accepted, blocked\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n}, (table) => ({\n  followerIdx: index(\"idx_relationships_follower\").on(table.followerId),\n  followingIdx: index(\"idx_relationships_following\").on(table.followingId),\n  uniqueRelationship: index(\"idx_relationships_unique\").on(table.followerId, table.followingId),\n}));\n\n// Groups and communities\nexport const groups = pgTable(\"groups\", {\n  id: serial(\"id\").primaryKey(),\n  name: varchar(\"name\", { length: 255 }).notNull(),\n  description: text(\"description\"),\n  creatorId: integer(\"creator_id\").references(() => users.id, { onDelete: \"set null\" }),\n  type: varchar(\"type\", { length: 20 }).default(\"public\"), // public, private, invite_only\n  location: point(\"location\"),\n  locationName: varchar(\"location_name\", { length: 255 }),\n  memberCount: integer(\"member_count\").default(0),\n  avatarUrl: text(\"avatar_url\"),\n  coverUrl: text(\"cover_url\"),\n  rules: text(\"rules\"),\n  tags: text(\"tags\").array(),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n  updatedAt: timestamp(\"updated_at\").defaultNow().notNull(),\n}, (table) => ({\n  locationIdx: index(\"idx_groups_location\").on(table.location),\n  searchIdx: index(\"idx_groups_search\").on(table.name, table.description),\n}));\n\n// Group membership\nexport const groupMembers = pgTable(\"group_members\", {\n  id: serial(\"id\").primaryKey(),\n  groupId: integer(\"group_id\").notNull().references(() => groups.id, { onDelete: \"cascade\" }),\n  userId: integer(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  role: varchar(\"role\", { length: 20 }).default(\"member\"), // admin, moderator, member\n  joinedAt: timestamp(\"joined_at\").defaultNow().notNull(),\n}, (table) => ({\n  groupUserIdx: index(\"idx_group_members_group_user\").on(table.groupId, table.userId),\n}));\n\n// Events and group rides\nexport const events = pgTable(\"events\", {\n  id: serial(\"id\").primaryKey(),\n  groupId: integer(\"group_id\").references(() => groups.id, { onDelete: \"cascade\" }),\n  creatorId: integer(\"creator_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  title: varchar(\"title\", { length: 255 }).notNull(),\n  description: text(\"description\"),\n  eventType: varchar(\"event_type\", { length: 20 }).default(\"ride\"), // ride, meetup, service, social\n  startTime: timestamp(\"start_time\").notNull(),\n  endTime: timestamp(\"end_time\"),\n  location: point(\"location\"),\n  locationName: varchar(\"location_name\", { length: 255 }),\n  maxParticipants: integer(\"max_participants\"),\n  currentParticipants: integer(\"current_participants\").default(0),\n  difficultyLevel: varchar(\"difficulty_level\", { length: 20 }), // beginner, intermediate, advanced\n  routeData: jsonb(\"route_data\"),\n  estimatedDistance: decimal(\"estimated_distance\", { precision: 8, scale: 2 }),\n  cost: decimal(\"cost\", { precision: 8, scale: 2 }),\n  requirements: text(\"requirements\"),\n  status: varchar(\"status\", { length: 20 }).default(\"active\"), // active, cancelled, completed\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n  updatedAt: timestamp(\"updated_at\").defaultNow().notNull(),\n}, (table) => ({\n  locationIdx: index(\"idx_events_location\").on(table.location),\n  startTimeIdx: index(\"idx_events_start_time\").on(table.startTime),\n}));\n\n// Notifications system\nexport const notifications = pgTable(\"notifications\", {\n  id: serial(\"id\").primaryKey(),\n  userId: integer(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  type: varchar(\"type\", { length: 50 }).notNull(),\n  title: varchar(\"title\", { length: 255 }).notNull(),\n  message: text(\"message\"),\n  data: jsonb(\"data\"), // Additional context data\n  read: boolean(\"read\").default(false),\n  actionUrl: text(\"action_url\"),\n  expiresAt: timestamp(\"expires_at\"),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n}, (table) => ({\n  userReadIdx: index(\"idx_notifications_user_read\").on(table.userId, table.read),\n}));\n\n// API keys for integrations\nexport const apiKeys = pgTable(\"api_keys\", {\n  id: serial(\"id\").primaryKey(),\n  userId: integer(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  name: varchar(\"name\", { length: 255 }).notNull(),\n  keyHash: varchar(\"key_hash\", { length: 255 }).notNull().unique(),\n  permissions: text(\"permissions\").array(), // Array of allowed operations\n  rateLimit: integer(\"rate_limit\").default(1000), // Requests per hour\n  lastUsed: timestamp(\"last_used\"),\n  expiresAt: timestamp(\"expires_at\"),\n  isActive: boolean(\"is_active\").default(true),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\n// Event RSVPs\nexport const eventRsvps = pgTable(\"event_rsvps\", {\n  id: serial(\"id\").primaryKey(),\n  eventId: integer(\"event_id\").notNull().references(() => events.id, { onDelete: \"cascade\" }),\n  userId: integer(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  status: varchar(\"status\", { length: 20 }).default(\"pending\"), // going, not_going, maybe, pending\n  responseAt: timestamp(\"response_at\").defaultNow().notNull(),\n}, (table) => ({\n  eventUserIdx: index(\"idx_event_rsvps_event_user\").on(table.eventId, table.userId),\n}));\n\n// Group posts/feed\nexport const groupPosts = pgTable(\"group_posts\", {\n  id: serial(\"id\").primaryKey(),\n  groupId: integer(\"group_id\").notNull().references(() => groups.id, { onDelete: \"cascade\" }),\n  authorId: integer(\"author_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  content: text(\"content\").notNull(),\n  postType: varchar(\"post_type\", { length: 20 }).default(\"text\"), // text, photo, route, tip, poll\n  attachments: text(\"attachments\").array(), // URLs for photos/files\n  routeData: jsonb(\"route_data\"), // GPX route data\n  pollData: jsonb(\"poll_data\"), // Poll options and responses\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n  updatedAt: timestamp(\"updated_at\").defaultNow().notNull(),\n}, (table) => ({\n  groupCreatedIdx: index(\"idx_group_posts_group_created\").on(table.groupId, table.createdAt),\n}));\n\n// Group chat messages\nexport const groupMessages = pgTable(\"group_messages\", {\n  id: serial(\"id\").primaryKey(),\n  groupId: integer(\"group_id\").notNull().references(() => groups.id, { onDelete: \"cascade\" }),\n  senderId: integer(\"sender_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  message: text(\"message\").notNull(),\n  messageType: varchar(\"message_type\", { length: 20 }).default(\"text\"), // text, location, emergency, system\n  metadata: jsonb(\"metadata\"), // Location data, emergency info, etc.\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n}, (table) => ({\n  groupCreatedIdx: index(\"idx_group_messages_group_created\").on(table.groupId, table.createdAt),\n}));\n\n// Ride stats and leaderboards\nexport const rideStats = pgTable(\"ride_stats\", {\n  id: serial(\"id\").primaryKey(),\n  userId: integer(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  groupId: integer(\"group_id\").references(() => groups.id, { onDelete: \"cascade\" }),\n  statType: varchar(\"stat_type\", { length: 30 }).notNull(), // total_distance, max_speed, rides_count, etc.\n  value: decimal(\"value\", { precision: 12, scale: 4 }).notNull(),\n  period: varchar(\"period\", { length: 20 }).default(\"all_time\"), // weekly, monthly, yearly, all_time\n  achievedAt: timestamp(\"achieved_at\").defaultNow().notNull(),\n  updatedAt: timestamp(\"updated_at\").defaultNow().notNull(),\n}, (table) => ({\n  userStatIdx: index(\"idx_ride_stats_user_stat\").on(table.userId, table.statType, table.period),\n  groupStatIdx: index(\"idx_ride_stats_group_stat\").on(table.groupId, table.statType, table.period),\n}));\n\n// User profiles with riding preferences\nexport const userProfiles = pgTable(\"user_profiles\", {\n  id: serial(\"id\").primaryKey(),\n  userId: integer(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }).unique(),\n  ridingStyle: varchar(\"riding_style\", { length: 30 }), // sprinter, climber, endurance, casual\n  preferredTerrain: text(\"preferred_terrain\").array(), // road, gravel, mtb, touring\n  skillLevel: varchar(\"skill_level\", { length: 20 }), // beginner, intermediate, advanced, expert\n  availability: jsonb(\"availability\"), // Weekly schedule preferences\n  maxDistance: integer(\"max_distance\"), // Maximum ride distance in km\n  bio: text(\"bio\"),\n  achievements: text(\"achievements\").array(), // List of cycling achievements\n  emergencyContact: varchar(\"emergency_contact\", { length: 20 }),\n  medicalInfo: text(\"medical_info\"), // Allergies, medical conditions\n  notificationPreferences: jsonb(\"notification_preferences\"),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n  updatedAt: timestamp(\"updated_at\").defaultNow().notNull(),\n});\n\n// Insert schemas\nexport const insertUserSchema = createInsertSchema(users).omit({ id: true, createdAt: true, updatedAt: true });\nexport const insertUserSessionSchema = createInsertSchema(userSessions).omit({ id: true, createdAt: true });\nexport const insertMotorcycleSchema = createInsertSchema(motorcycles).omit({ id: true, createdAt: true, updatedAt: true });\nexport const insertMaintenanceRecordSchema = createInsertSchema(maintenanceRecords).omit({ id: true, createdAt: true, updatedAt: true });\nexport const insertMaintenanceScheduleSchema = createInsertSchema(maintenanceSchedules).omit({ id: true, createdAt: true, updatedAt: true });\nexport const insertRideSchema = createInsertSchema(rides).omit({ id: true, createdAt: true, updatedAt: true });\nexport const insertDocumentSchema = createInsertSchema(documents).omit({ id: true, createdAt: true, updatedAt: true });\nexport const insertRiderRelationshipSchema = createInsertSchema(riderRelationships).omit({ id: true, createdAt: true });\nexport const insertGroupSchema = createInsertSchema(groups).omit({ id: true, createdAt: true, updatedAt: true });\nexport const insertGroupMemberSchema = createInsertSchema(groupMembers).omit({ id: true, joinedAt: true });\nexport const insertEventSchema = createInsertSchema(events).omit({ id: true, createdAt: true, updatedAt: true });\nexport const insertNotificationSchema = createInsertSchema(notifications).omit({ id: true, createdAt: true });\nexport const insertApiKeySchema = createInsertSchema(apiKeys).omit({ id: true, createdAt: true });\nexport const insertEventRsvpSchema = createInsertSchema(eventRsvps).omit({ id: true, responseAt: true });\nexport const insertGroupPostSchema = createInsertSchema(groupPosts).omit({ id: true, createdAt: true, updatedAt: true });\nexport const insertGroupMessageSchema = createInsertSchema(groupMessages).omit({ id: true, createdAt: true });\nexport const insertRideStatSchema = createInsertSchema(rideStats).omit({ id: true, achievedAt: true, updatedAt: true });\nexport const insertUserProfileSchema = createInsertSchema(userProfiles).omit({ id: true, createdAt: true, updatedAt: true });\n\n// Authentication schemas\nexport const loginSchema = z.object({\n  username: z.string().min(1, \"Username is required\"),\n  password: z.string().min(1, \"Password is required\"),\n});\n\nexport const registerSchema = z.object({\n  username: z.string().min(3, \"Username must be at least 3 characters\").max(50),\n  email: z.string().email(\"Invalid email address\"),\n  password: z.string().min(8, \"Password must be at least 8 characters\"),\n  fullName: z.string().min(1, \"Full name is required\").max(255),\n});\n\n// Type definitions\nexport type User = typeof users.$inferSelect;\nexport type InsertUser = z.infer<typeof insertUserSchema>;\n\nexport type UserSession = typeof userSessions.$inferSelect;\nexport type InsertUserSession = z.infer<typeof insertUserSessionSchema>;\n\nexport type Motorcycle = typeof motorcycles.$inferSelect;\nexport type InsertMotorcycle = z.infer<typeof insertMotorcycleSchema>;\n\nexport type MaintenanceRecord = typeof maintenanceRecords.$inferSelect;\nexport type InsertMaintenanceRecord = z.infer<typeof insertMaintenanceRecordSchema>;\n\nexport type MaintenanceSchedule = typeof maintenanceSchedules.$inferSelect;\nexport type InsertMaintenanceSchedule = z.infer<typeof insertMaintenanceScheduleSchema>;\n\nexport type Ride = typeof rides.$inferSelect;\nexport type InsertRide = z.infer<typeof insertRideSchema>;\n\nexport type Document = typeof documents.$inferSelect;\nexport type InsertDocument = z.infer<typeof insertDocumentSchema>;\n\nexport type RiderRelationship = typeof riderRelationships.$inferSelect;\nexport type InsertRiderRelationship = z.infer<typeof insertRiderRelationshipSchema>;\n\nexport type Group = typeof groups.$inferSelect;\nexport type InsertGroup = z.infer<typeof insertGroupSchema>;\n\nexport type GroupMember = typeof groupMembers.$inferSelect;\nexport type InsertGroupMember = z.infer<typeof insertGroupMemberSchema>;\n\nexport type Event = typeof events.$inferSelect;\nexport type InsertEvent = z.infer<typeof insertEventSchema>;\n\nexport type Notification = typeof notifications.$inferSelect;\nexport type InsertNotification = z.infer<typeof insertNotificationSchema>;\n\nexport type ApiKey = typeof apiKeys.$inferSelect;\nexport type InsertApiKey = z.infer<typeof insertApiKeySchema>;\n\nexport type EventRsvp = typeof eventRsvps.$inferSelect;\nexport type InsertEventRsvp = z.infer<typeof insertEventRsvpSchema>;\n\nexport type GroupPost = typeof groupPosts.$inferSelect;\nexport type InsertGroupPost = z.infer<typeof insertGroupPostSchema>;\n\nexport type GroupMessage = typeof groupMessages.$inferSelect;\nexport type InsertGroupMessage = z.infer<typeof insertGroupMessageSchema>;\n\nexport type RideStat = typeof rideStats.$inferSelect;\nexport type InsertRideStat = z.infer<typeof insertRideStatSchema>;\n\nexport type UserProfile = typeof userProfiles.$inferSelect;\nexport type InsertUserProfile = z.infer<typeof insertUserProfileSchema>;\n\n// Auth types\nexport type LoginData = z.infer<typeof loginSchema>;\nexport type RegisterData = z.infer<typeof registerSchema>;\n","size_bytes":22800},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport NavBar from \"@/components/ui/layout/ModernNavBar\";\nimport Footer from \"@/components/ui/layout/Footer\";\nimport Home from \"@/pages/Home\";\nimport Garage from \"@/pages/NewGarage\";\nimport Maintenance from \"@/pages/Maintenance\";\nimport Squad from \"@/pages/Squad\";\nimport Catalog from \"@/pages/Catalog\";\nimport Shop from \"@/pages/Shop\";\nimport Blog from \"@/pages/Blog\";\nimport MaintenanceScheduler from \"@/pages/MaintenanceScheduler\";\nimport Login from \"@/pages/Login\";\nimport Register from \"@/pages/Register\";\nimport DocumentUpload from \"@/pages/DocumentUpload\";\nimport DocumentViewer from \"@/pages/DocumentViewer\";\nimport NotFound from \"@/pages/not-found\";\nimport { useAuth } from \"@/hooks/useAuth\";\n\nfunction App() {\n  const { user, isLoading, isAuthenticated } = useAuth();\n  \n  // Use the AuthenticatedRoute component to protect routes\n  const AuthenticatedRoute = ({ component: Component, ...rest }: any) => {\n    if (isLoading) {\n      // Show loading state while checking authentication\n      return (\n        <div className=\"flex min-h-screen items-center justify-center bg-gray-50\">\n          <div className=\"text-center\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-[#FF3B30] mx-auto mb-4\"></div>\n            <p className=\"text-gray-600\">Loading...</p>\n          </div>\n        </div>\n      );\n    }\n    \n    if (!isAuthenticated) {\n      // Redirect to login if not authenticated\n      return <Login />;\n    }\n    \n    return <Component {...rest} />;\n  };\n  \n  return (\n    <div className=\"flex flex-col min-h-screen\">\n      <NavBar />\n      <main className=\"flex-grow\">\n        <Switch>\n          <Route path=\"/\" component={Home} />\n          <Route path=\"/garage\">\n            <AuthenticatedRoute component={Garage} />\n          </Route>\n          <Route path=\"/community\" component={Squad} />\n          <Route path=\"/catalog\" component={Catalog} />\n          <Route path=\"/shop\" component={Shop} />\n          <Route path=\"/blog\" component={Blog} />\n          <Route path=\"/maintenance\">\n            <AuthenticatedRoute component={MaintenanceScheduler} />\n          </Route>\n          <Route path=\"/documents/upload\">\n            <AuthenticatedRoute component={DocumentUpload} />\n          </Route>\n          <Route path=\"/documents/view/:type\">\n            <AuthenticatedRoute component={DocumentViewer} />\n          </Route>\n          <Route path=\"/login\" component={Login} />\n          <Route path=\"/register\" component={Register} />\n          <Route component={NotFound} />\n        </Switch>\n      </main>\n      <Footer />\n    </div>\n  );\n}\n\nexport default App;","size_bytes":2657},"client/src/index.css":{"content":"@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto:wght@300;400;500;700&family=Open+Sans:wght@300;400;500;600;700&family=Kanit:wght@300;400;500;600;700;800;900&display=swap');\n\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n@keyframes gradient-x {\n  0%, 100% {\n    background-size: 200% 200%;\n    background-position: left center;\n  }\n  50% {\n    background-size: 200% 200%;\n    background-position: right center;\n  }\n}\n\n@keyframes blob {\n  0% {\n    transform: translate(0px, 0px) scale(1);\n  }\n  33% {\n    transform: translate(30px, -50px) scale(1.1);\n  }\n  66% {\n    transform: translate(-20px, 20px) scale(0.9);\n  }\n  100% {\n    transform: translate(0px, 0px) scale(1);\n  }\n}\n\n.animate-gradient-x {\n  animation: gradient-x 15s ease infinite;\n}\n\n.animate-blob {\n  animation: blob 7s infinite;\n}\n\n.animation-delay-2000 {\n  animation-delay: 2s;\n}\n\n.animation-delay-4000 {\n  animation-delay: 4s;\n}\n\n@layer base {\n  :root {\n    --background: 0 0% 100%;\n    --foreground: 0 0% 10%;\n  }\n\n  * {\n    @apply border-border;\n  }\n\n  html {\n    background-color: #ffffff !important;\n  }\n\n  body {\n    @apply font-sans antialiased text-foreground;\n    background-color: #ffffff !important;\n    font-family: 'Inter', 'Roboto', 'Open Sans', sans-serif;\n    color: #1A1A1A;\n    line-height: 1.6;\n  }\n\n  h1, h2, h3, h4, h5, h6 {\n    font-family: 'Inter', sans-serif;\n    font-weight: 600;\n    color: #1A1A1A;\n    line-height: 1.3;\n  }\n\n  /* Modern card styling */\n  .modern-card {\n    @apply bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 border-0;\n  }\n\n  /* Smooth animations */\n  * {\n    transition: all 0.2s ease-in-out;\n  }\n\n  /* Custom scrollbar */\n  ::-webkit-scrollbar {\n    width: 6px;\n  }\n\n  ::-webkit-scrollbar-track {\n    background: #f1f1f1;\n  }\n\n  ::-webkit-scrollbar-thumb {\n    background: #FF3B30;\n    border-radius: 3px;\n  }\n\n  ::-webkit-scrollbar-thumb:hover {\n    background: #e5342a;\n  }\n\n  /* Ensure navbar pill maintains rounded shape */\n  .navbar-pill {\n    border-radius: 9999px !important;\n    overflow: hidden;\n  }\n\n  /* Prevent content overflow in pills */\n  .pill-content {\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n\n  /* Sticky navigation styles */\n  .sticky-nav {\n    position: fixed;\n    top: 1rem;\n    z-index: 50;\n    backdrop-filter: blur(12px);\n    background-color: rgba(26, 26, 26, 0.95);\n    border: 1px solid rgba(255, 255, 255, 0.1);\n    transition: all 0.3s ease-in-out;\n  }\n  \n  .sticky-nav:hover {\n    backdrop-filter: blur(16px);\n    background-color: rgba(26, 26, 26, 0.98);\n    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);\n  }\n  \n  /* Define responsive padding values */\n  .p-standard {\n    @apply p-4 sm:p-6 lg:p-8;\n  }\n  \n  .m-standard {\n    @apply m-4 sm:m-6 lg:m-8;\n  }\n  \n  .space-standard > * + * {\n    @apply mt-4 sm:mt-6 lg:mt-8;\n  }\n  \n  .gap-standard {\n    @apply gap-4 sm:gap-6 lg:gap-8;\n  }\n  \n  /* Add smooth transitions to all elements */\n  .transition-standard {\n    @apply transition-all duration-300 ease-in-out;\n  }\n  \n  /* Responsive text utilities */\n  .text-responsive-xs {\n    @apply text-xs sm:text-sm;\n  }\n  \n  .text-responsive-sm {\n    @apply text-sm sm:text-base;\n  }\n  \n  .text-responsive-base {\n    @apply text-base sm:text-lg;\n  }\n  \n  .text-responsive-lg {\n    @apply text-lg sm:text-xl;\n  }\n  \n  .text-responsive-xl {\n    @apply text-xl sm:text-2xl;\n  }\n\n  /* Hide scrollbars for horizontal scroll containers */\n  .scrollbar-hide {\n    -ms-overflow-style: none;  /* Internet Explorer 10+ */\n    scrollbar-width: none;  /* Firefox */\n  }\n  \n  .scrollbar-hide::-webkit-scrollbar {\n    display: none;  /* Safari and Chrome */\n  }\n  \n  /* Container responsive padding */\n  .container-responsive {\n    @apply px-4 sm:px-6 lg:px-8;\n  }\n}\n\n\n\n/* Custom group hover effects */\n.group:hover .group-hover\\:opacity-100 {\n  opacity: 1 !important;\n}\n\n.group:hover .group-hover\\:translate-x-0 {\n  transform: translateX(0) !important;\n}\n","size_bytes":4050},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { Toaster } from \"@/components/ui/toaster\";\n\ncreateRoot(document.getElementById(\"root\")!).render(\n  <QueryClientProvider client={queryClient}>\n    <App />\n    <Toaster />\n  </QueryClientProvider>\n);\n","size_bytes":410},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/hooks/useAuth.ts":{"content":"import { create } from 'zustand';\nimport { User } from '@shared/schema';\nimport { apiRequest } from '@/lib/queryClient';\n\ninterface AuthState {\n  user: User | null;\n  isLoading: boolean;\n  isAuthenticated: boolean;\n  setUser: (user: User | null) => void;\n  clearUser: () => void;\n  checkSession: () => Promise<void>;\n  logout: () => Promise<void>;\n}\n\nexport const useAuth = create<AuthState>((set, get) => ({\n  user: null,\n  isLoading: true,\n  isAuthenticated: false,\n  \n  setUser: (user) => {\n    set({ \n      user, \n      isAuthenticated: !!user,\n      isLoading: false \n    });\n  },\n  \n  clearUser: () => {\n    set({ \n      user: null, \n      isAuthenticated: false,\n      isLoading: false \n    });\n  },\n  \n  checkSession: async () => {\n    try {\n      set({ isLoading: true });\n      const response = await fetch('/api/auth/session', {\n        credentials: 'include'\n      });\n      \n      if (response.ok) {\n        const userData = await response.json();\n        set({ \n          user: userData, \n          isAuthenticated: true,\n          isLoading: false \n        });\n      } else {\n        set({ \n          user: null, \n          isAuthenticated: false,\n          isLoading: false \n        });\n      }\n    } catch (error) {\n      console.error('Session check failed:', error);\n      set({ \n        user: null, \n        isAuthenticated: false,\n        isLoading: false \n      });\n    }\n  },\n  \n  logout: async () => {\n    try {\n      await fetch('/api/auth/logout', {\n        method: 'POST',\n        credentials: 'include'\n      });\n      \n      set({ \n        user: null, \n        isAuthenticated: false,\n        isLoading: false \n      });\n    } catch (error) {\n      console.error('Logout failed:', error);\n      // Still clear local state even if server logout fails\n      set({ \n        user: null, \n        isAuthenticated: false,\n        isLoading: false \n      });\n    }\n  }\n}));\n\n// Initialize session check when the module loads - but don't block rendering\nsetTimeout(() => {\n  useAuth.getState().checkSession();\n}, 100);","size_bytes":2039},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey[0] as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1376},"client/src/lib/utils.ts":{"content":"import { type ClassValue, clsx } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n\nexport function formatCurrency(amount: number): string {\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n  }).format(amount / 100);\n}\n\nexport function formatDate(date: Date | string): string {\n  if (!date) return '';\n  const dateObj = typeof date === 'string' ? new Date(date) : date;\n  return dateObj.toLocaleDateString('en-US', {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n  });\n}\n\nexport function truncateText(text: string, maxLength: number): string {\n  if (!text || text.length <= maxLength) return text;\n  return `${text.slice(0, maxLength)}...`;\n}\n\nexport function generateRandomId(): string {\n  return Math.random().toString(36).substring(2, 10);\n}\n\nexport function calculateDaysRemaining(targetDate: Date | string): number {\n  const today = new Date();\n  const target = typeof targetDate === 'string' ? new Date(targetDate) : targetDate;\n  \n  // Reset time component to compare dates only\n  today.setHours(0, 0, 0, 0);\n  target.setHours(0, 0, 0, 0);\n  \n  const diffMs = target.getTime() - today.getTime();\n  return Math.ceil(diffMs / (1000 * 60 * 60 * 24));\n}\n\nexport function getInitials(name: string): string {\n  if (!name) return '';\n  \n  const parts = name.split(' ');\n  if (parts.length === 1) return parts[0].charAt(0).toUpperCase();\n  \n  return (parts[0].charAt(0) + parts[parts.length - 1].charAt(0)).toUpperCase();\n}\n","size_bytes":1561},"client/src/pages/Admin.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Plus, Edit, Trash2, Save, X } from \"lucide-react\";\nimport { motion } from \"framer-motion\";\n\ninterface Vehicle {\n  id: number;\n  name: string;\n  brand: string;\n  year: number;\n  engine: string;\n  type: string;\n  price: string;\n  image: string;\n  features: string[];\n  description: string;\n}\n\ninterface BlogPost {\n  id: number;\n  title: string;\n  content: string;\n  excerpt: string;\n  author: string;\n  publishedAt: string;\n  image: string;\n  tags: string[];\n}\n\ninterface Product {\n  id: number;\n  name: string;\n  description: string;\n  price: number;\n  category: string;\n  image: string;\n  inStock: boolean;\n  features: string[];\n}\n\nconst Admin = () => {\n  const [activeTab, setActiveTab] = useState(\"vehicles\");\n  const [editingItem, setEditingItem] = useState<any>(null);\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  // Vehicle form state\n  const [vehicleForm, setVehicleForm] = useState({\n    name: \"\",\n    brand: \"\",\n    year: new Date().getFullYear(),\n    engine: \"\",\n    type: \"Sport\",\n    price: \"\",\n    image: \"\",\n    features: \"\",\n    description: \"\"\n  });\n\n  // Blog form state\n  const [blogForm, setBlogForm] = useState({\n    title: \"\",\n    content: \"\",\n    excerpt: \"\",\n    author: \"\",\n    image: \"\",\n    tags: \"\"\n  });\n\n  // Product form state\n  const [productForm, setProductForm] = useState({\n    name: \"\",\n    description: \"\",\n    price: 0,\n    category: \"\",\n    image: \"\",\n    features: \"\",\n    inStock: true\n  });\n\n  // Mock data queries (in real app these would be API calls)\n  const { data: vehicles = [] } = useQuery({\n    queryKey: ['/api/admin/vehicles'],\n    queryFn: () => Promise.resolve([])\n  });\n\n  const { data: blogs = [] } = useQuery({\n    queryKey: ['/api/admin/blogs'],\n    queryFn: () => Promise.resolve([])\n  });\n\n  const { data: products = [] } = useQuery({\n    queryKey: ['/api/admin/products'],\n    queryFn: () => Promise.resolve([])\n  });\n\n  // Vehicle mutations\n  const addVehicleMutation = useMutation({\n    mutationFn: async (vehicle: any) => {\n      // In real app, this would be an API call\n      return Promise.resolve({ ...vehicle, id: Date.now() });\n    },\n    onSuccess: () => {\n      toast({ title: \"Success\", description: \"Vehicle added successfully\" });\n      setVehicleForm({\n        name: \"\",\n        brand: \"\",\n        year: new Date().getFullYear(),\n        engine: \"\",\n        type: \"Sport\",\n        price: \"\",\n        image: \"\",\n        features: \"\",\n        description: \"\"\n      });\n      queryClient.invalidateQueries({ queryKey: ['/api/admin/vehicles'] });\n    }\n  });\n\n  const addBlogMutation = useMutation({\n    mutationFn: async (blog: any) => {\n      return Promise.resolve({ ...blog, id: Date.now(), publishedAt: new Date().toISOString() });\n    },\n    onSuccess: () => {\n      toast({ title: \"Success\", description: \"Blog post published successfully\" });\n      setBlogForm({\n        title: \"\",\n        content: \"\",\n        excerpt: \"\",\n        author: \"\",\n        image: \"\",\n        tags: \"\"\n      });\n      queryClient.invalidateQueries({ queryKey: ['/api/admin/blogs'] });\n    }\n  });\n\n  const addProductMutation = useMutation({\n    mutationFn: async (product: any) => {\n      return Promise.resolve({ ...product, id: Date.now() });\n    },\n    onSuccess: () => {\n      toast({ title: \"Success\", description: \"Product added successfully\" });\n      setProductForm({\n        name: \"\",\n        description: \"\",\n        price: 0,\n        category: \"\",\n        image: \"\",\n        features: \"\",\n        inStock: true\n      });\n      queryClient.invalidateQueries({ queryKey: ['/api/admin/products'] });\n    }\n  });\n\n  const handleAddVehicle = () => {\n    const vehicle = {\n      ...vehicleForm,\n      features: vehicleForm.features.split(',').map(f => f.trim()).filter(f => f)\n    };\n    addVehicleMutation.mutate(vehicle);\n  };\n\n  const handleAddBlog = () => {\n    const blog = {\n      ...blogForm,\n      tags: blogForm.tags.split(',').map(t => t.trim()).filter(t => t)\n    };\n    addBlogMutation.mutate(blog);\n  };\n\n  const handleAddProduct = () => {\n    const product = {\n      ...productForm,\n      features: productForm.features.split(',').map(f => f.trim()).filter(f => f)\n    };\n    addProductMutation.mutate(product);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"container mx-auto px-4 py-8\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.5 }}\n        >\n          <h1 className=\"text-3xl font-bold text-[#1A1A1A] mb-2\">Admin Panel</h1>\n          <p className=\"text-gray-600 mb-8\">Manage vehicles, blog posts, and products</p>\n\n          <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\n            <TabsList className=\"grid w-full grid-cols-3 mb-8\">\n              <TabsTrigger value=\"vehicles\">Vehicles</TabsTrigger>\n              <TabsTrigger value=\"blogs\">Blog Posts</TabsTrigger>\n              <TabsTrigger value=\"products\">Products</TabsTrigger>\n            </TabsList>\n\n            {/* Vehicles Tab */}\n            <TabsContent value=\"vehicles\" className=\"space-y-6\">\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Plus className=\"h-5 w-5\" />\n                    Add New Vehicle\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div>\n                      <Label htmlFor=\"vehicle-name\">Vehicle Name</Label>\n                      <Input\n                        id=\"vehicle-name\"\n                        value={vehicleForm.name}\n                        onChange={(e) => setVehicleForm({...vehicleForm, name: e.target.value})}\n                        placeholder=\"e.g., Yamaha YZF-R1\"\n                      />\n                    </div>\n                    <div>\n                      <Label htmlFor=\"vehicle-brand\">Brand</Label>\n                      <Input\n                        id=\"vehicle-brand\"\n                        value={vehicleForm.brand}\n                        onChange={(e) => setVehicleForm({...vehicleForm, brand: e.target.value})}\n                        placeholder=\"e.g., Yamaha\"\n                      />\n                    </div>\n                    <div>\n                      <Label htmlFor=\"vehicle-year\">Year</Label>\n                      <Input\n                        id=\"vehicle-year\"\n                        type=\"number\"\n                        value={vehicleForm.year}\n                        onChange={(e) => setVehicleForm({...vehicleForm, year: parseInt(e.target.value)})}\n                      />\n                    </div>\n                    <div>\n                      <Label htmlFor=\"vehicle-engine\">Engine</Label>\n                      <Input\n                        id=\"vehicle-engine\"\n                        value={vehicleForm.engine}\n                        onChange={(e) => setVehicleForm({...vehicleForm, engine: e.target.value})}\n                        placeholder=\"e.g., 998cc\"\n                      />\n                    </div>\n                    <div>\n                      <Label htmlFor=\"vehicle-type\">Type</Label>\n                      <select\n                        className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\n                        value={vehicleForm.type}\n                        onChange={(e) => setVehicleForm({...vehicleForm, type: e.target.value})}\n                      >\n                        <option value=\"Sport\">Sport</option>\n                        <option value=\"Touring\">Touring</option>\n                        <option value=\"Adventure\">Adventure</option>\n                        <option value=\"Cruiser\">Cruiser</option>\n                      </select>\n                    </div>\n                    <div>\n                      <Label htmlFor=\"vehicle-price\">Price</Label>\n                      <Input\n                        id=\"vehicle-price\"\n                        value={vehicleForm.price}\n                        onChange={(e) => setVehicleForm({...vehicleForm, price: e.target.value})}\n                        placeholder=\"e.g., $17,999\"\n                      />\n                    </div>\n                  </div>\n                  <div>\n                    <Label htmlFor=\"vehicle-image\">Image URL</Label>\n                    <Input\n                      id=\"vehicle-image\"\n                      value={vehicleForm.image}\n                      onChange={(e) => setVehicleForm({...vehicleForm, image: e.target.value})}\n                      placeholder=\"https://example.com/image.jpg\"\n                    />\n                  </div>\n                  <div>\n                    <Label htmlFor=\"vehicle-features\">Features (comma-separated)</Label>\n                    <Input\n                      id=\"vehicle-features\"\n                      value={vehicleForm.features}\n                      onChange={(e) => setVehicleForm({...vehicleForm, features: e.target.value})}\n                      placeholder=\"Track Ready, Quick Shifter, Traction Control\"\n                    />\n                  </div>\n                  <div>\n                    <Label htmlFor=\"vehicle-description\">Description</Label>\n                    <Textarea\n                      id=\"vehicle-description\"\n                      value={vehicleForm.description}\n                      onChange={(e) => setVehicleForm({...vehicleForm, description: e.target.value})}\n                      placeholder=\"Detailed description of the vehicle...\"\n                    />\n                  </div>\n                  <Button \n                    onClick={handleAddVehicle}\n                    className=\"bg-[#FF3B30] hover:bg-[#FF3B30]/90\"\n                    disabled={addVehicleMutation.isPending}\n                  >\n                    {addVehicleMutation.isPending ? \"Adding...\" : \"Add Vehicle\"}\n                  </Button>\n                </CardContent>\n              </Card>\n\n              {/* Vehicle List */}\n              <Card>\n                <CardHeader>\n                  <CardTitle>Current Vehicles ({vehicles.length})</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  {vehicles.length === 0 ? (\n                    <p className=\"text-gray-500 text-center py-8\">No vehicles added yet</p>\n                  ) : (\n                    <div className=\"grid gap-4\">\n                      {vehicles.map((vehicle: Vehicle) => (\n                        <div key={vehicle.id} className=\"border rounded-lg p-4 flex justify-between items-center\">\n                          <div>\n                            <h3 className=\"font-semibold\">{vehicle.name}</h3>\n                            <p className=\"text-sm text-gray-600\">{vehicle.brand} ‚Ä¢ {vehicle.year} ‚Ä¢ {vehicle.type}</p>\n                            <p className=\"text-lg font-bold text-[#FF3B30]\">{vehicle.price}</p>\n                          </div>\n                          <div className=\"flex gap-2\">\n                            <Button variant=\"outline\" size=\"sm\">\n                              <Edit className=\"h-4 w-4\" />\n                            </Button>\n                            <Button variant=\"outline\" size=\"sm\" className=\"text-red-600\">\n                              <Trash2 className=\"h-4 w-4\" />\n                            </Button>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            {/* Blog Posts Tab */}\n            <TabsContent value=\"blogs\" className=\"space-y-6\">\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Plus className=\"h-5 w-5\" />\n                    Create New Blog Post\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div>\n                    <Label htmlFor=\"blog-title\">Title</Label>\n                    <Input\n                      id=\"blog-title\"\n                      value={blogForm.title}\n                      onChange={(e) => setBlogForm({...blogForm, title: e.target.value})}\n                      placeholder=\"Blog post title\"\n                    />\n                  </div>\n                  <div>\n                    <Label htmlFor=\"blog-excerpt\">Excerpt</Label>\n                    <Textarea\n                      id=\"blog-excerpt\"\n                      value={blogForm.excerpt}\n                      onChange={(e) => setBlogForm({...blogForm, excerpt: e.target.value})}\n                      placeholder=\"Brief description of the blog post...\"\n                    />\n                  </div>\n                  <div>\n                    <Label htmlFor=\"blog-content\">Content</Label>\n                    <Textarea\n                      id=\"blog-content\"\n                      className=\"min-h-[200px]\"\n                      value={blogForm.content}\n                      onChange={(e) => setBlogForm({...blogForm, content: e.target.value})}\n                      placeholder=\"Full blog post content...\"\n                    />\n                  </div>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div>\n                      <Label htmlFor=\"blog-author\">Author</Label>\n                      <Input\n                        id=\"blog-author\"\n                        value={blogForm.author}\n                        onChange={(e) => setBlogForm({...blogForm, author: e.target.value})}\n                        placeholder=\"Author name\"\n                      />\n                    </div>\n                    <div>\n                      <Label htmlFor=\"blog-image\">Featured Image URL</Label>\n                      <Input\n                        id=\"blog-image\"\n                        value={blogForm.image}\n                        onChange={(e) => setBlogForm({...blogForm, image: e.target.value})}\n                        placeholder=\"https://example.com/image.jpg\"\n                      />\n                    </div>\n                  </div>\n                  <div>\n                    <Label htmlFor=\"blog-tags\">Tags (comma-separated)</Label>\n                    <Input\n                      id=\"blog-tags\"\n                      value={blogForm.tags}\n                      onChange={(e) => setBlogForm({...blogForm, tags: e.target.value})}\n                      placeholder=\"motorcycles, racing, maintenance\"\n                    />\n                  </div>\n                  <Button \n                    onClick={handleAddBlog}\n                    className=\"bg-[#FF3B30] hover:bg-[#FF3B30]/90\"\n                    disabled={addBlogMutation.isPending}\n                  >\n                    {addBlogMutation.isPending ? \"Publishing...\" : \"Publish Blog Post\"}\n                  </Button>\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            {/* Products Tab */}\n            <TabsContent value=\"products\" className=\"space-y-6\">\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Plus className=\"h-5 w-5\" />\n                    Add New Product\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div>\n                      <Label htmlFor=\"product-name\">Product Name</Label>\n                      <Input\n                        id=\"product-name\"\n                        value={productForm.name}\n                        onChange={(e) => setProductForm({...productForm, name: e.target.value})}\n                        placeholder=\"e.g., Racing Helmet\"\n                      />\n                    </div>\n                    <div>\n                      <Label htmlFor=\"product-category\">Category</Label>\n                      <Input\n                        id=\"product-category\"\n                        value={productForm.category}\n                        onChange={(e) => setProductForm({...productForm, category: e.target.value})}\n                        placeholder=\"e.g., Safety Gear\"\n                      />\n                    </div>\n                    <div>\n                      <Label htmlFor=\"product-price\">Price</Label>\n                      <Input\n                        id=\"product-price\"\n                        type=\"number\"\n                        value={productForm.price}\n                        onChange={(e) => setProductForm({...productForm, price: parseFloat(e.target.value)})}\n                        placeholder=\"299.99\"\n                      />\n                    </div>\n                    <div className=\"flex items-center space-x-2\">\n                      <input\n                        type=\"checkbox\"\n                        id=\"product-inStock\"\n                        checked={productForm.inStock}\n                        onChange={(e) => setProductForm({...productForm, inStock: e.target.checked})}\n                      />\n                      <Label htmlFor=\"product-inStock\">In Stock</Label>\n                    </div>\n                  </div>\n                  <div>\n                    <Label htmlFor=\"product-description\">Description</Label>\n                    <Textarea\n                      id=\"product-description\"\n                      value={productForm.description}\n                      onChange={(e) => setProductForm({...productForm, description: e.target.value})}\n                      placeholder=\"Product description...\"\n                    />\n                  </div>\n                  <div>\n                    <Label htmlFor=\"product-image\">Image URL</Label>\n                    <Input\n                      id=\"product-image\"\n                      value={productForm.image}\n                      onChange={(e) => setProductForm({...productForm, image: e.target.value})}\n                      placeholder=\"https://example.com/product-image.jpg\"\n                    />\n                  </div>\n                  <div>\n                    <Label htmlFor=\"product-features\">Features (comma-separated)</Label>\n                    <Input\n                      id=\"product-features\"\n                      value={productForm.features}\n                      onChange={(e) => setProductForm({...productForm, features: e.target.value})}\n                      placeholder=\"Lightweight, DOT Certified, Anti-Fog Visor\"\n                    />\n                  </div>\n                  <Button \n                    onClick={handleAddProduct}\n                    className=\"bg-[#FF3B30] hover:bg-[#FF3B30]/90\"\n                    disabled={addProductMutation.isPending}\n                  >\n                    {addProductMutation.isPending ? \"Adding...\" : \"Add Product\"}\n                  </Button>\n                </CardContent>\n              </Card>\n            </TabsContent>\n          </Tabs>\n        </motion.div>\n      </div>\n    </div>\n  );\n};\n\nexport default Admin;","size_bytes":19863},"client/src/pages/Blog.tsx":{"content":"import { useState } from \"react\";\nimport { motion } from \"framer-motion\";\nimport { Search, Calendar, Clock, ChevronRight, ArrowUpRight, User } from \"lucide-react\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Select, SelectTrigger, SelectValue, SelectContent, SelectItem } from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useToast } from \"@/hooks/use-toast\";\n\n// Sample blog data\nconst blogArticles = [\n  {\n    id: 1,\n    title: \"The Ultimate Guide to Motorcycle Maintenance\",\n    excerpt: \"Learn essential maintenance tips to keep your bike running smoothly and extend its lifespan.\",\n    category: \"Maintenance\",\n    tags: [\"Maintenance\", \"DIY\", \"Guide\"],\n    date: \"2023-04-15\",\n    readTime: \"8 min read\",\n    imageUrl: \"https://images.unsplash.com/photo-1558981359-219d6364c9c8?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80\",\n    author: {\n      name: \"Michael Johnson\",\n      avatar: \"https://images.unsplash.com/photo-1599566150163-29194dcaad36?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80\"\n    }\n  },\n  {\n    id: 2,\n    title: \"Top Motorcycle Routes in California\",\n    excerpt: \"Discover the most scenic and thrilling motorcycle routes California has to offer.\",\n    category: \"Travel\",\n    tags: [\"Travel\", \"Routes\", \"California\"],\n    date: \"2023-04-02\",\n    readTime: \"6 min read\",\n    imageUrl: \"https://images.unsplash.com/photo-1558979158-65a1eaa08691?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80\",\n    author: {\n      name: \"Amanda Rivera\",\n      avatar: \"https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80\"\n    }\n  },\n  {\n    id: 3,\n    title: \"How to Choose Your First Motorcycle\",\n    excerpt: \"A comprehensive guide for beginners on selecting the perfect first motorcycle.\",\n    category: \"Buying Guide\",\n    tags: [\"Beginners\", \"Buying Guide\", \"Tips\"],\n    date: \"2023-03-28\",\n    readTime: \"10 min read\",\n    imageUrl: \"https://images.unsplash.com/photo-1609630875171-b1321377ee65?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80\",\n    author: {\n      name: \"David Chen\",\n      avatar: \"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80\"\n    }\n  },\n  {\n    id: 4,\n    title: \"Safety Gear That Could Save Your Life\",\n    excerpt: \"Explore the essential safety gear every rider should have and how it can protect you.\",\n    category: \"Safety\",\n    tags: [\"Safety\", \"Gear\", \"Protection\"],\n    date: \"2023-03-15\",\n    readTime: \"7 min read\",\n    imageUrl: \"https://images.unsplash.com/photo-1605664061868-b262d0e08dcb?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80\",\n    author: {\n      name: \"Sarah Martinez\",\n      avatar: \"https://images.unsplash.com/photo-1580489944761-15a19d654956?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80\"\n    }\n  },\n  {\n    id: 5,\n    title: \"The Evolution of Sport Bikes\",\n    excerpt: \"A look at how sport bikes have evolved over the decades and what the future holds.\",\n    category: \"History\",\n    tags: [\"History\", \"Sport Bikes\", \"Technology\"],\n    date: \"2023-03-05\",\n    readTime: \"9 min read\",\n    imageUrl: \"https://images.unsplash.com/photo-1636664467223-4cb81a93ec4b?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80\",\n    author: {\n      name: \"James Wilson\",\n      avatar: \"https://images.unsplash.com/photo-1568602471122-7832951cc4c5?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80\"\n    }\n  },\n  {\n    id: 6,\n    title: \"Motorcycle Customization for Beginners\",\n    excerpt: \"Learn how to personalize your motorcycle with these beginner-friendly modifications.\",\n    category: \"Customization\",\n    tags: [\"Customization\", \"DIY\", \"Modifications\"],\n    date: \"2023-02-20\",\n    readTime: \"8 min read\",\n    imageUrl: \"https://images.unsplash.com/photo-1623953834410-ff2ec280c9d1?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80\",\n    author: {\n      name: \"Robert Taylor\",\n      avatar: \"https://images.unsplash.com/photo-1570295999919-56ceb5ecca61?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80\"\n    }\n  },\n  {\n    id: 7,\n    title: \"Winter Riding: Tips and Techniques\",\n    excerpt: \"Essential advice for riding safely during winter months and cold weather conditions.\",\n    category: \"Riding Tips\",\n    tags: [\"Winter\", \"Riding Tips\", \"Safety\"],\n    date: \"2023-02-10\",\n    readTime: \"7 min read\",\n    imageUrl: \"https://images.unsplash.com/photo-1514595363471-b52b1e446bba?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80\",\n    author: {\n      name: \"Emily Johnson\",\n      avatar: \"https://images.unsplash.com/photo-1517841905240-472988babdf9?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80\"\n    }\n  },\n  {\n    id: 8,\n    title: \"Electric Motorcycles: The Future of Riding\",\n    excerpt: \"Exploring the rise of electric motorcycles and their impact on the industry.\",\n    category: \"Technology\",\n    tags: [\"Electric\", \"Technology\", \"Future\"],\n    date: \"2023-01-25\",\n    readTime: \"11 min read\",\n    imageUrl: \"https://images.unsplash.com/photo-1558979159-7a2602c83e52?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80\",\n    author: {\n      name: \"Thomas Brown\",\n      avatar: \"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80\"\n    }\n  },\n  {\n    id: 9,\n    title: \"Motorcycle Clubs: Finding Your Community\",\n    excerpt: \"How to find and join motorcycle clubs that match your riding style and interests.\",\n    category: \"Community\",\n    tags: [\"Community\", \"Clubs\", \"Social\"],\n    date: \"2023-01-15\",\n    readTime: \"6 min read\",\n    imageUrl: \"https://images.unsplash.com/photo-1517949908114-71669a64d885?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80\",\n    author: {\n      name: \"Lisa Rodriguez\",\n      avatar: \"https://images.unsplash.com/photo-1489424731084-a5d8b219a5bb?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80\"\n    }\n  },\n  {\n    id: 10,\n    title: \"Track Day Essentials: Prepare Like a Pro\",\n    excerpt: \"Everything you need to know to prepare for your first motorcycle track day experience.\",\n    category: \"Track Riding\",\n    tags: [\"Track Day\", \"Racing\", \"Performance\"],\n    date: \"2023-01-05\",\n    readTime: \"9 min read\",\n    imageUrl: \"https://images.unsplash.com/photo-1626240166557-90e9f5d44b67?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80\",\n    author: {\n      name: \"Mark Stevens\",\n      avatar: \"https://images.unsplash.com/photo-1566492031773-4f4e44671857?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80\"\n    }\n  }\n];\n\n// Get unique categories\nconst uniqueCategories = Array.from(new Set(blogArticles.map(article => article.category)));\n\nconst Blog = () => {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [category, setCategory] = useState(\"all\");\n  const { toast } = useToast();\n  \n  // Filter blog articles based on search query and category\n  const filteredArticles = blogArticles.filter(article => {\n    const matchesSearch = \n      article.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      article.excerpt.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      article.tags.some(tag => tag.toLowerCase().includes(searchQuery.toLowerCase()));\n    \n    const matchesCategory = category === \"all\" || article.category === category;\n    \n    return matchesSearch && matchesCategory;\n  });\n  \n  const formatDate = (dateString: string) => {\n    const options: Intl.DateTimeFormatOptions = { year: 'numeric', month: 'long', day: 'numeric' };\n    return new Date(dateString).toLocaleDateString('en-US', options);\n  };\n  \n  const handleReadArticle = (id: number) => {\n    toast({\n      title: \"Article Selected\",\n      description: \"This article will be available soon!\",\n    });\n  };\n  \n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100\">\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center mb-8\">\n          <div>\n            <h1 className=\"text-3xl font-bold font-header text-[#1A1A1A] mb-2\">Motorcycle Blog</h1>\n            <p className=\"text-gray-600\">Latest articles, guides, and stories from the motorcycle world</p>\n          </div>\n          <Button\n            className=\"mt-4 md:mt-0 bg-[#FF3B30] hover:bg-[#FF3B30]/90 text-white rounded-full px-6\"\n            onClick={() => {\n              toast({\n                title: \"Subscribe\",\n                description: \"Thank you for subscribing to our newsletter!\",\n              });\n            }}\n          >\n            Subscribe to Newsletter\n          </Button>\n        </div>\n        \n        {/* Quick Stats */}\n        <div className=\"bg-white rounded-full shadow-sm border p-3 mb-8\">\n          <div className=\"flex justify-between items-center gap-3\">\n            <div className=\"text-center min-w-0 flex-1\">\n              <p className=\"text-xs font-medium text-gray-500 mb-1\">ARTICLES</p>\n              <p className=\"text-lg font-bold text-gray-900\">{blogArticles.length}</p>\n            </div>\n            <div className=\"text-center min-w-0 flex-1\">\n              <p className=\"text-xs font-medium text-gray-500 mb-1\">WRITERS</p>\n              <p className=\"text-lg font-bold text-gray-900\">{Array.from(new Set(blogArticles.map(a => a.author.name))).length}</p>\n            </div>\n            <div className=\"text-center min-w-0 flex-1\">\n              <p className=\"text-xs font-medium text-gray-500 mb-1\">CATEGORIES</p>\n              <p className=\"text-lg font-bold text-gray-900\">{uniqueCategories.length}</p>\n            </div>\n            <div className=\"text-center min-w-0 flex-1\">\n              <p className=\"text-xs font-medium text-gray-500 mb-1\">AVG READ</p>\n              <p className=\"text-lg font-bold text-gray-900\">8 min</p>\n            </div>\n          </div>\n        </div>\n      \n        {/* Featured article */}\n        <motion.div \n          className=\"relative h-[400px] rounded-2xl overflow-hidden mb-8 shadow-lg\"\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.5 }}\n        >\n          <img \n            src={blogArticles[0].imageUrl} \n            alt={blogArticles[0].title}\n            className=\"w-full h-full object-cover\"\n          />\n          <div className=\"absolute inset-0 bg-gradient-to-t from-black/80 via-black/50 to-transparent rounded-2xl\"></div>\n          <div className=\"absolute bottom-0 left-0 right-0 p-6 md:p-8\">\n            <Badge className=\"mb-3 bg-[#FF3B30] hover:bg-[#FF3B30]/90 rounded-full px-4 py-1\">{blogArticles[0].category}</Badge>\n            <h2 className=\"text-2xl md:text-3xl font-bold text-white mb-3\">{blogArticles[0].title}</h2>\n            <p className=\"text-white/80 mb-4 max-w-2xl\">{blogArticles[0].excerpt}</p>\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center\">\n                <Avatar className=\"h-10 w-10 mr-3\">\n                  <AvatarImage src={blogArticles[0].author.avatar} alt={blogArticles[0].author.name} />\n                  <AvatarFallback>{blogArticles[0].author.name[0]}</AvatarFallback>\n                </Avatar>\n                <div>\n                  <p className=\"text-white text-sm font-medium\">{blogArticles[0].author.name}</p>\n                  <div className=\"flex items-center text-white/70 text-xs bg-black/20 backdrop-blur-sm rounded-full px-3 py-1 mt-1\">\n                    <Calendar className=\"h-3 w-3 mr-1\" />\n                    {formatDate(blogArticles[0].date)}\n                    <span className=\"mx-2\">‚Ä¢</span>\n                    <Clock className=\"h-3 w-3 mr-1\" />\n                    {blogArticles[0].readTime}\n                  </div>\n                </div>\n              </div>\n              <Button \n                className=\"bg-white text-[#1A1A1A] hover:bg-white/90 rounded-full\"\n                onClick={() => handleReadArticle(blogArticles[0].id)}\n              >\n                Read Article <ArrowUpRight className=\"ml-2 h-4 w-4\" />\n              </Button>\n            </div>\n          </div>\n        </motion.div>\n        \n        {/* Search and filters */}\n        <div className=\"flex flex-col md:flex-row gap-4 mb-8\">\n          <div className=\"flex-grow relative\">\n            <Search className=\"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400\" size={18} />\n            <Input\n              type=\"text\"\n              placeholder=\"Search articles...\"\n              className=\"pl-12 rounded-full border-gray-200 bg-white shadow-sm\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n            />\n          </div>\n          <Select value={category} onValueChange={setCategory}>\n            <SelectTrigger className=\"w-[180px] rounded-full border-gray-200 bg-white shadow-sm\">\n              <SelectValue placeholder=\"Select category\" />\n            </SelectTrigger>\n            <SelectContent className=\"rounded-2xl\">\n              <SelectItem value=\"all\" className=\"rounded-full\">All Categories</SelectItem>\n              {uniqueCategories.map(cat => (\n                <SelectItem key={cat} value={cat} className=\"rounded-full\">{cat}</SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </div>\n      \n        {/* Blog articles grid */}\n        {filteredArticles.length === 0 ? (\n          <div className=\"flex flex-col items-center justify-center py-16 text-center bg-white rounded-2xl shadow-sm\">\n            <div className=\"bg-gray-100 w-16 h-16 rounded-full flex items-center justify-center mb-4\">\n              <User className=\"h-8 w-8 text-gray-400\" />\n            </div>\n            <h3 className=\"text-xl font-medium mb-2\">No Articles Found</h3>\n            <p className=\"text-gray-500 max-w-md\">\n              We couldn't find any articles matching your search criteria. Try adjusting your filters or search terms.\n            </p>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {filteredArticles.slice(1).map((article, index) => (\n              <motion.div\n                key={article.id}\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ duration: 0.4, delay: index * 0.05 }}\n              >\n                <Card className=\"overflow-hidden h-full flex flex-col hover:shadow-md transition-all rounded-2xl border-0 shadow-sm bg-gradient-to-b from-white to-gray-50\">\n                  <div className=\"relative h-48\">\n                    <img \n                      src={article.imageUrl} \n                      alt={article.title}\n                      className=\"w-full h-full object-cover rounded-t-2xl\"\n                    />\n                    <Badge className=\"absolute top-3 left-3 bg-[#FF3B30] hover:bg-[#FF3B30]/90 rounded-full px-3 py-1\">\n                      {article.category}\n                    </Badge>\n                  </div>\n                  \n                  <CardContent className=\"flex-grow p-5\">\n                    <div className=\"bg-gray-50 rounded-full px-3 py-1 inline-flex items-center text-xs text-gray-500 mb-3\">\n                      <Calendar className=\"h-3 w-3 mr-1\" />\n                      {formatDate(article.date)}\n                      <span className=\"mx-2\">‚Ä¢</span>\n                      <Clock className=\"h-3 w-3 mr-1\" />\n                      {article.readTime}\n                    </div>\n                    \n                    <h3 className=\"text-xl font-bold mb-2 line-clamp-2\">{article.title}</h3>\n                    <p className=\"text-gray-600 mb-4 line-clamp-2\">{article.excerpt}</p>\n                    \n                    {/* Tags */}\n                    <div className=\"flex flex-wrap gap-2 mb-4\">\n                      {article.tags.slice(0, 2).map((tag, i) => (\n                        <span key={i} className=\"text-xs bg-blue-50 text-blue-600 px-2 py-1 rounded-full\">\n                          {tag}\n                        </span>\n                      ))}\n                    </div>\n                    \n                    <div className=\"flex items-center justify-between mt-auto pt-4\">\n                      <div className=\"flex items-center\">\n                        <Avatar className=\"h-8 w-8 mr-2\">\n                          <AvatarImage src={article.author.avatar} alt={article.author.name} />\n                          <AvatarFallback>{article.author.name[0]}</AvatarFallback>\n                        </Avatar>\n                        <span className=\"text-sm font-medium\">{article.author.name}</span>\n                      </div>\n                      <Button \n                        variant=\"ghost\" \n                        size=\"sm\" \n                        className=\"text-[#FF3B30] hover:text-[#FF3B30]/90 p-0 rounded-full\"\n                        onClick={() => handleReadArticle(article.id)}\n                      >\n                        Read More <ChevronRight className=\"h-4 w-4 ml-1\" />\n                      </Button>\n                    </div>\n                  </CardContent>\n                </Card>\n              </motion.div>\n            ))}\n          </div>\n        )}\n      \n        {filteredArticles.length > 1 && (\n          <div className=\"mt-10 flex justify-center\">\n            <Button \n              variant=\"outline\" \n              className=\"border-[#1A1A1A] text-[#1A1A1A] rounded-full px-8\"\n              onClick={() => {\n                toast({\n                  title: \"Load More\",\n                  description: \"Loading more articles...\",\n                });\n              }}\n            >\n              Load More Articles\n            </Button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Blog;","size_bytes":19071},"client/src/pages/Catalog.tsx":{"content":"import { useState } from \"react\";\nimport { motion } from \"framer-motion\";\nimport { Search, Filter, Share2, Bookmark, ChevronDown, ArrowUpRight } from \"lucide-react\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardFooter } from \"@/components/ui/card\";\nimport { Select, SelectTrigger, SelectValue, SelectContent, SelectItem } from \"@/components/ui/select\";\nimport { Tabs, TabsList, TabsTrigger, TabsContent } from \"@/components/ui/tabs\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport MotorcycleDetailsDialog from \"@/components/ui/motorcycle/MotorcycleDetailsDialog\";\n\n// Sample motorcycle data\nconst motorcycles = [\n  {\n    id: 1,\n    make: \"Honda\",\n    model: \"CBR1000RR\",\n    year: 2023,\n    category: \"Sport\",\n    engineSize: \"1000cc\",\n    power: \"217 hp\",\n    weight: \"201 kg\",\n    price: \"$16,499\",\n    imageUrl: \"https://images.unsplash.com/photo-1568772585407-9361f9bf3a87?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80\",\n    color: \"Grand Prix Red\"\n  },\n  {\n    id: 2,\n    make: \"Kawasaki\",\n    model: \"Ninja ZX-10R\",\n    year: 2023,\n    category: \"Sport\",\n    engineSize: \"998cc\",\n    power: \"203 hp\",\n    weight: \"207 kg\",\n    price: \"$16,799\",\n    imageUrl: \"https://images.unsplash.com/photo-1571646750134-a0df873adbfb?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1650&q=80\",\n    color: \"Lime Green/Ebony\"\n  },\n  {\n    id: 3,\n    make: \"Yamaha\",\n    model: \"YZF-R1\",\n    year: 2023,\n    category: \"Sport\",\n    engineSize: \"998cc\",\n    power: \"200 hp\",\n    weight: \"201 kg\",\n    price: \"$17,899\",\n    imageUrl: \"https://images.unsplash.com/photo-1558981403-c5f9899a28bc?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1650&q=80\",\n    color: \"Team Yamaha Blue\"\n  },\n  {\n    id: 4,\n    make: \"Ducati\",\n    model: \"Panigale V4\",\n    year: 2023,\n    category: \"Sport\",\n    engineSize: \"1103cc\",\n    power: \"215.5 hp\",\n    weight: \"194 kg\",\n    price: \"$23,295\",\n    imageUrl: \"https://images.unsplash.com/photo-1547549082-6bc09f2049ae?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1712&q=80\",\n    color: \"Ducati Red\"\n  },\n  {\n    id: 5,\n    make: \"BMW\",\n    model: \"R 1250 GS\",\n    year: 2023,\n    category: \"Adventure\",\n    engineSize: \"1254cc\",\n    power: \"136 hp\",\n    weight: \"249 kg\",\n    price: \"$17,995\",\n    imageUrl: \"https://images.unsplash.com/photo-1606072021740-dbd62ef11d72?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1718&q=80\",\n    color: \"Black Storm Metallic\"\n  },\n  {\n    id: 6,\n    make: \"Harley-Davidson\",\n    model: \"Road King\",\n    year: 2023,\n    category: \"Cruiser\",\n    engineSize: \"1746cc\",\n    power: \"90 hp\",\n    weight: \"379 kg\",\n    price: \"$19,499\",\n    imageUrl: \"https://images.unsplash.com/photo-1558981852-426c6c22a060?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1650&q=80\",\n    color: \"Vivid Black\"\n  },\n  {\n    id: 7,\n    make: \"Triumph\",\n    model: \"Street Triple\",\n    year: 2023,\n    category: \"Naked\",\n    engineSize: \"765cc\",\n    power: \"123 hp\",\n    weight: \"189 kg\",\n    price: \"$11,295\",\n    imageUrl: \"https://images.unsplash.com/photo-1546271227-b8ff16633e48?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1712&q=80\",\n    color: \"Matt Silver Ice\"\n  },\n  {\n    id: 8,\n    make: \"KTM\",\n    model: \"1290 Super Duke R\",\n    year: 2023,\n    category: \"Naked\",\n    engineSize: \"1301cc\",\n    power: \"180 hp\",\n    weight: \"200 kg\",\n    price: \"$18,699\",\n    imageUrl: \"https://images.unsplash.com/photo-1611241443322-b5bff7fb0b7a?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1700&q=80\",\n    color: \"Orange/Black\"\n  },\n  {\n    id: 9,\n    make: \"Suzuki\",\n    model: \"GSX-R1000R\",\n    year: 2023,\n    category: \"Sport\",\n    engineSize: \"999cc\",\n    power: \"202 hp\",\n    weight: \"203 kg\",\n    price: \"$17,749\",\n    imageUrl: \"https://images.unsplash.com/photo-1571646754017-72fbe838eeee?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1650&q=80\",\n    color: \"Metallic Triton Blue\"\n  },\n  {\n    id: 10,\n    make: \"Honda\",\n    model: \"Africa Twin\",\n    year: 2023,\n    category: \"Adventure\",\n    engineSize: \"1084cc\",\n    power: \"101 hp\",\n    weight: \"238 kg\",\n    price: \"$14,999\",\n    imageUrl: \"https://images.unsplash.com/photo-1608461864721-b8f50c91c147?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80\",\n    color: \"Grand Prix Red\"\n  }\n];\n\n// Category counts\nconst categoryCounts = {\n  Sport: motorcycles.filter(m => m.category === \"Sport\").length,\n  Adventure: motorcycles.filter(m => m.category === \"Adventure\").length,\n  Cruiser: motorcycles.filter(m => m.category === \"Cruiser\").length,\n  Naked: motorcycles.filter(m => m.category === \"Naked\").length\n};\n\nconst Catalog = () => {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [category, setCategory] = useState(\"all\");\n  const [sortBy, setSortBy] = useState(\"newest\");\n  const [selectedMotorcycle, setSelectedMotorcycle] = useState<typeof motorcycles[0] | null>(null);\n  const [isDetailsDialogOpen, setIsDetailsDialogOpen] = useState(false);\n  const { toast } = useToast();\n  \n  // Filter motorcycles based on search query and category\n  const filteredMotorcycles = motorcycles.filter(motorcycle => {\n    const matchesSearch = \n      motorcycle.make.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      motorcycle.model.toLowerCase().includes(searchQuery.toLowerCase());\n    \n    const matchesCategory = category === \"all\" || motorcycle.category === category;\n    \n    return matchesSearch && matchesCategory;\n  });\n  \n  // Sort motorcycles\n  const sortedMotorcycles = [...filteredMotorcycles].sort((a, b) => {\n    if (sortBy === \"newest\") return b.year - a.year;\n    if (sortBy === \"price-asc\") return parseInt(a.price.replace(/[^\\d]/g, '')) - parseInt(b.price.replace(/[^\\d]/g, ''));\n    if (sortBy === \"price-desc\") return parseInt(b.price.replace(/[^\\d]/g, '')) - parseInt(a.price.replace(/[^\\d]/g, ''));\n    return 0;\n  });\n  \n  const handleSaveMotorcycle = (id: number) => {\n    toast({\n      title: \"Motorcycle Saved\",\n      description: \"The motorcycle has been saved to your favorites\",\n    });\n  };\n  \n  const handleShareMotorcycle = (id: number) => {\n    toast({\n      title: \"Share Link Generated\",\n      description: \"A shareable link has been copied to your clipboard\",\n    });\n  };\n  \n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100\">\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center mb-8\">\n          <div className=\"text-center w-full\">\n            <h1 className=\"text-3xl font-bold text-[#1A1A1A] mb-1\" style={{ fontFamily: 'Kanit, sans-serif' }}>RIDE CATALOG</h1>\n            <p className=\"text-gray-600\">Explore our collection of motorcycles from top manufacturers</p>\n          </div>\n        </div>\n        \n        {/* Search and Filters */}\n        <motion.div \n          className=\"bg-white rounded-2xl shadow-sm border p-6 mb-8\"\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.4 }}\n        >\n          <div className=\"flex flex-col md:flex-row gap-4\">\n            <div className=\"flex-grow relative\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" size={18} />\n              <Input\n                type=\"text\"\n                placeholder=\"Search motorcycles by make or model...\"\n                className=\"pl-10 rounded-full border-gray-200\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n              />\n            </div>\n            <div className=\"flex flex-col sm:flex-row gap-4\">\n              <Select value={category} onValueChange={setCategory}>\n                <SelectTrigger className=\"w-[180px] rounded-full border-gray-200\">\n                  <SelectValue placeholder=\"Select category\" />\n                </SelectTrigger>\n                <SelectContent className=\"rounded-2xl\">\n                  <SelectItem value=\"all\" className=\"rounded-full\">All Categories</SelectItem>\n                  <SelectItem value=\"Sport\" className=\"rounded-full\">Sport ({categoryCounts.Sport})</SelectItem>\n                  <SelectItem value=\"Adventure\" className=\"rounded-full\">Adventure ({categoryCounts.Adventure})</SelectItem>\n                  <SelectItem value=\"Cruiser\" className=\"rounded-full\">Cruiser ({categoryCounts.Cruiser})</SelectItem>\n                  <SelectItem value=\"Naked\" className=\"rounded-full\">Naked ({categoryCounts.Naked})</SelectItem>\n                </SelectContent>\n              </Select>\n              \n              <Select value={sortBy} onValueChange={setSortBy}>\n                <SelectTrigger className=\"w-[180px] rounded-full border-gray-200\">\n                  <SelectValue placeholder=\"Sort by\" />\n                </SelectTrigger>\n                <SelectContent className=\"rounded-2xl\">\n                  <SelectItem value=\"newest\" className=\"rounded-full\">Newest First</SelectItem>\n                  <SelectItem value=\"price-asc\" className=\"rounded-full\">Price: Low to High</SelectItem>\n                  <SelectItem value=\"price-desc\" className=\"rounded-full\">Price: High to Low</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n        </motion.div>\n        \n        \n\n        {/* Tabs for browsing by category */}\n        <Tabs defaultValue=\"all\" className=\"mb-8\">\n          <TabsList className=\"grid w-full grid-cols-5 bg-gray-100 rounded-full p-1\">\n            <TabsTrigger \n              value=\"all\" \n              className=\"rounded-full data-[state=active]:bg-white data-[state=active]:shadow-sm\"\n            >\n              All\n            </TabsTrigger>\n            <TabsTrigger \n              value=\"sport\" \n              className=\"rounded-full data-[state=active]:bg-white data-[state=active]:shadow-sm\"\n            >\n              Sport\n            </TabsTrigger>\n            <TabsTrigger \n              value=\"adventure\" \n              className=\"rounded-full data-[state=active]:bg-white data-[state=active]:shadow-sm\"\n            >\n              Adventure\n            </TabsTrigger>\n            <TabsTrigger \n              value=\"cruiser\" \n              className=\"rounded-full data-[state=active]:bg-white data-[state=active]:shadow-sm\"\n            >\n              Cruiser\n            </TabsTrigger>\n            <TabsTrigger \n              value=\"naked\" \n              className=\"rounded-full data-[state=active]:bg-white data-[state=active]:shadow-sm\"\n            >\n              Naked\n            </TabsTrigger>\n          </TabsList>\n        </Tabs>\n        \n        {/* Motorcycle grid */}\n        {sortedMotorcycles.length === 0 ? (\n          <div className=\"bg-white rounded-2xl shadow-sm border p-12\">\n            <div className=\"flex flex-col items-center justify-center text-center\">\n              <div className=\"bg-gray-100 w-16 h-16 rounded-full flex items-center justify-center mb-4\">\n                <Filter className=\"h-8 w-8 text-gray-400\" />\n              </div>\n              <h3 className=\"text-xl font-medium mb-2\">No Motorcycles Found</h3>\n              <p className=\"text-gray-500 max-w-md\">\n                We couldn't find any motorcycles matching your search criteria. Try adjusting your filters or search terms.\n              </p>\n            </div>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {sortedMotorcycles.map((motorcycle, index) => (\n              <motion.div\n                key={motorcycle.id}\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ duration: 0.4, delay: index * 0.1 }}\n              >\n                <Card className=\"overflow-hidden h-full flex flex-col hover:shadow-lg transition-all duration-300 rounded-2xl border-0 shadow-sm bg-gradient-to-b from-white to-gray-50\">\n                  <div className=\"relative h-48 overflow-hidden rounded-t-2xl\">\n                    <img \n                      src={motorcycle.imageUrl} \n                      alt={`${motorcycle.make} ${motorcycle.model}`}\n                      className=\"w-full h-full object-cover transition-transform hover:scale-105 duration-300\"\n                    />\n                    <div className=\"absolute top-3 right-3 flex space-x-2\">\n                      <Button \n                        size=\"icon\" \n                        variant=\"ghost\" \n                        className=\"h-8 w-8 rounded-full bg-white/90 backdrop-blur-sm text-gray-600 hover:text-[#FF3B30] hover:bg-white border-0\"\n                        onClick={() => handleSaveMotorcycle(motorcycle.id)}\n                      >\n                        <Bookmark className=\"h-4 w-4\" />\n                      </Button>\n                      <Button \n                        size=\"icon\" \n                        variant=\"ghost\" \n                        className=\"h-8 w-8 rounded-full bg-white/90 backdrop-blur-sm text-gray-600 hover:text-[#FF3B30] hover:bg-white border-0\"\n                        onClick={() => handleShareMotorcycle(motorcycle.id)}\n                      >\n                        <Share2 className=\"h-4 w-4\" />\n                      </Button>\n                    </div>\n                    <div className=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4\">\n                      <div className=\"flex justify-between items-end\">\n                        <div>\n                          <div className=\"bg-white/20 backdrop-blur-sm rounded-full px-3 py-1 mb-2 inline-block\">\n                            <span className=\"text-white text-xs font-medium\">\n                              {motorcycle.year} {motorcycle.make}\n                            </span>\n                          </div>\n                          <h3 className=\"text-white font-bold text-lg\">{motorcycle.model}</h3>\n                        </div>\n                        <div className=\"bg-white/90 backdrop-blur-sm rounded-full px-3 py-1\">\n                          <span className=\"text-gray-900 font-bold\">{motorcycle.price}</span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  \n                  <CardContent className=\"flex-grow py-6\">\n                    <div className=\"space-y-3\">\n                      <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded-2xl\">\n                        <span className=\"text-gray-600 text-sm\">Category</span>\n                        <span className=\"font-semibold text-gray-900\">{motorcycle.category}</span>\n                      </div>\n                      <div className=\"grid grid-cols-2 gap-3\">\n                        <div className=\"p-3 bg-gray-50 rounded-2xl text-center\">\n                          <p className=\"text-xs text-gray-500 mb-1\">Engine</p>\n                          <p className=\"font-semibold text-sm\">{motorcycle.engineSize}</p>\n                        </div>\n                        <div className=\"p-3 bg-gray-50 rounded-2xl text-center\">\n                          <p className=\"text-xs text-gray-500 mb-1\">Power</p>\n                          <p className=\"font-semibold text-sm\">{motorcycle.power}</p>\n                        </div>\n                      </div>\n                    </div>\n                  </CardContent>\n                  \n                  <CardFooter className=\"pt-0 pb-6 px-6\">\n                    <Button \n                      className=\"w-full bg-[#FF3B30] hover:bg-[#FF3B30]/90 text-white rounded-full h-12\"\n                      onClick={() => {\n                        setSelectedMotorcycle(motorcycle);\n                        setIsDetailsDialogOpen(true);\n                      }}\n                    >\n                      <span className=\"flex items-center\">\n                        View Details <ArrowUpRight className=\"ml-2 h-4 w-4\" />\n                      </span>\n                    </Button>\n                  </CardFooter>\n                </Card>\n              </motion.div>\n            ))}\n          </div>\n        )}\n        \n        {sortedMotorcycles.length > 0 && (\n          <div className=\"mt-8 flex justify-center\">\n            <Button \n              variant=\"outline\" \n              className=\"border-gray-300 text-gray-700 px-8 py-3 rounded-full hover:bg-gray-50\"\n              onClick={() => {\n                toast({\n                  title: \"Load More\",\n                  description: \"Loading more motorcycles...\",\n                });\n              }}\n            >\n              <span className=\"flex items-center\">\n                Load More <ChevronDown className=\"ml-2 h-4 w-4\" />\n              </span>\n            </Button>\n          </div>\n        )}\n\n        {/* Motorcycle Details Dialog */}\n        <MotorcycleDetailsDialog \n          motorcycle={selectedMotorcycle}\n          open={isDetailsDialogOpen}\n          onOpenChange={setIsDetailsDialogOpen}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default Catalog;","size_bytes":17490},"client/src/pages/Community.tsx":{"content":"import { useState } from \"react\";\nimport { motion } from \"framer-motion\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { \n  Users, \n  Calendar, \n  MapPin, \n  MessageCircle, \n  Heart, \n  Share2,\n  Search, \n  Plus,\n  Filter,\n  TrendingUp,\n  Clock,\n  Eye,\n  MessageSquare,\n  ThumbsUp,\n  UserPlus,\n  Settings,\n  Bell,\n  Globe,\n  Camera,\n  Video,\n  Image as ImageIcon\n} from \"lucide-react\";\n\n// Mock data for the community\nconst mockPosts = [\n  {\n    id: 1,\n    author: {\n      name: \"Alex Rodriguez\",\n      username: \"@alexrides\",\n      avatar: \"üèçÔ∏è\",\n      rank: \"Road Captain\",\n      verified: true\n    },\n    content: \"Just completed an epic 500-mile ride through the Blue Ridge Mountains! The weather was perfect and the views were absolutely stunning. Met some amazing fellow riders along the way. This is why I love the motorcycle community! üèîÔ∏è\",\n    images: [\n      \"https://images.unsplash.com/photo-1558618047-3c8c76ca7d13?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80\",\n      \"https://images.unsplash.com/photo-1544197150-b99a580bb7a8?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80\"\n    ],\n    timestamp: \"2 hours ago\",\n    likes: 42,\n    comments: 8,\n    shares: 3,\n    tags: [\"adventure\", \"mountains\", \"touring\"]\n  },\n  {\n    id: 2,\n    author: {\n      name: \"Sarah Chen\",\n      username: \"@sarahspeed\",\n      avatar: \"üåü\",\n      rank: \"Speed Demon\",\n      verified: false\n    },\n    content: \"Track day at Laguna Seca was incredible! Managed to shave 2 seconds off my best lap time. The new suspension setup is working perfectly. Who else is hitting the track this weekend?\",\n    images: [\n      \"https://images.unsplash.com/photo-1568605117036-5fe5e7bab0b7?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80\"\n    ],\n    timestamp: \"4 hours ago\",\n    likes: 67,\n    comments: 15,\n    shares: 7,\n    tags: [\"track\", \"racing\", \"performance\"]\n  },\n  {\n    id: 3,\n    author: {\n      name: \"Mike Thompson\",\n      username: \"@mikeadv\",\n      avatar: \"üóª\",\n      rank: \"Adventure Seeker\",\n      verified: true\n    },\n    content: \"Planning a cross-country adventure ride next month. Looking for riding partners who are up for camping under the stars and exploring remote trails. This will be a 2-week journey covering over 3,000 miles!\",\n    images: [],\n    timestamp: \"6 hours ago\",\n    likes: 28,\n    comments: 22,\n    shares: 12,\n    tags: [\"adventure\", \"touring\", \"camping\"]\n  }\n];\n\nconst mockEvents = [\n  {\n    id: 1,\n    title: \"Weekly Coffee Meetup\",\n    date: \"Sunday, 9:00 AM\",\n    location: \"Downtown Cafe\",\n    attendees: 15,\n    type: \"social\"\n  },\n  {\n    id: 2,\n    title: \"Canyon Run\",\n    date: \"Saturday, 7:00 AM\",\n    location: \"Angeles Crest Highway\",\n    attendees: 8,\n    type: \"ride\"\n  },\n  {\n    id: 3,\n    title: \"Bike Night\",\n    date: \"Friday, 6:00 PM\",\n    location: \"Local Brewery\",\n    attendees: 32,\n    type: \"social\"\n  }\n];\n\nconst mockRiders = [\n  {\n    id: 1,\n    name: \"Jessica Parker\",\n    username: \"@jessrides\",\n    avatar: \"üö¥‚Äç‚ôÄÔ∏è\",\n    rank: \"Navigator\",\n    miles: 15420,\n    following: false\n  },\n  {\n    id: 2,\n    name: \"David Kim\",\n    username: \"@davidk\",\n    avatar: \"üèÅ\",\n    rank: \"Track Master\",\n    miles: 22100,\n    following: true\n  },\n  {\n    id: 3,\n    name: \"Lisa Martinez\",\n    username: \"@lisamtz\",\n    avatar: \"üåÆ\",\n    rank: \"Cruiser\",\n    miles: 8750,\n    following: false\n  }\n];\n\nexport default function Community() {\n  const [activeTab, setActiveTab] = useState(\"feed\");\n  const [newPost, setNewPost] = useState(\"\");\n  const [searchTerm, setSearchTerm] = useState(\"\");\n\n  const handleCreatePost = () => {\n    if (newPost.trim()) {\n      // Here we would normally send to backend\n      console.log(\"Creating post:\", newPost);\n      setNewPost(\"\");\n    }\n  };\n\n  const handleLike = (postId: number) => {\n    console.log(\"Liked post:\", postId);\n  };\n\n  const handleFollow = (riderId: number) => {\n    console.log(\"Following rider:\", riderId);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Hero Section */}\n      <div className=\"bg-gradient-to-r from-[#1A1A1A] to-gray-800 text-white py-16\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center\">\n            <motion.h1 \n              className=\"text-4xl md:text-6xl font-bold mb-4\"\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.6 }}\n            >\n              ThrottleCove Community\n            </motion.h1>\n            <motion.p \n              className=\"text-xl md:text-2xl text-gray-300 mb-8\"\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.6, delay: 0.2 }}\n            >\n              Connect, Share, and Ride Together\n            </motion.p>\n            <motion.div \n              className=\"flex flex-col sm:flex-row gap-4 justify-center\"\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.6, delay: 0.4 }}\n            >\n              <Button size=\"lg\" className=\"bg-[#FF3B30] hover:bg-[#FF3B30]/90 text-white\">\n                <Plus className=\"h-5 w-5 mr-2\" />\n                Create Post\n              </Button>\n              <Button size=\"lg\" variant=\"outline\" className=\"border-white text-white hover:bg-white hover:text-gray-900\">\n                <Users className=\"h-5 w-5 mr-2\" />\n                Find Riders\n              </Button>\n            </motion.div>\n          </div>\n        </div>\n      </div>\n\n      {/* Navigation Tabs */}\n      <div className=\"bg-white border-b sticky top-0 z-40\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex space-x-8 overflow-x-auto\">\n            {[\n              { id: \"feed\", label: \"Feed\", icon: Globe },\n              { id: \"events\", label: \"Events\", icon: Calendar },\n              { id: \"riders\", label: \"Riders\", icon: Users },\n              { id: \"groups\", label: \"Groups\", icon: MessageCircle }\n            ].map((tab) => {\n              const Icon = tab.icon;\n              return (\n                <button\n                  key={tab.id}\n                  onClick={() => setActiveTab(tab.id)}\n                  className={`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors whitespace-nowrap ${\n                    activeTab === tab.id\n                      ? \"border-[#FF3B30] text-[#FF3B30]\"\n                      : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300\"\n                  }`}\n                >\n                  <Icon className=\"h-4 w-4\" />\n                  <span>{tab.label}</span>\n                </button>\n              );\n            })}\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n          {/* Main Feed */}\n          <div className=\"lg:col-span-2 space-y-6\">\n            {activeTab === \"feed\" && (\n              <>\n                {/* Create Post Card */}\n                <Card>\n                  <CardContent className=\"p-6\">\n                    <div className=\"flex space-x-4\">\n                      <Avatar>\n                        <AvatarFallback>üèçÔ∏è</AvatarFallback>\n                      </Avatar>\n                      <div className=\"flex-1\">\n                        <Textarea\n                          placeholder=\"Share your latest ride, tips, or motorcycle stories...\"\n                          value={newPost}\n                          onChange={(e) => setNewPost(e.target.value)}\n                          rows={3}\n                          className=\"resize-none border-0 focus:ring-0 text-base\"\n                        />\n                        <div className=\"flex items-center justify-between mt-4 pt-4 border-t\">\n                          <div className=\"flex space-x-4\">\n                            <Button variant=\"ghost\" size=\"sm\">\n                              <ImageIcon className=\"h-4 w-4 mr-2\" />\n                              Photo\n                            </Button>\n                            <Button variant=\"ghost\" size=\"sm\">\n                              <Video className=\"h-4 w-4 mr-2\" />\n                              Video\n                            </Button>\n                            <Button variant=\"ghost\" size=\"sm\">\n                              <MapPin className=\"h-4 w-4 mr-2\" />\n                              Location\n                            </Button>\n                          </div>\n                          <Button \n                            onClick={handleCreatePost}\n                            disabled={!newPost.trim()}\n                            className=\"bg-[#FF3B30] hover:bg-[#FF3B30]/90\"\n                          >\n                            Post\n                          </Button>\n                        </div>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n\n                {/* Posts Feed */}\n                <div className=\"space-y-6\">\n                  {mockPosts.map((post) => (\n                    <motion.div\n                      key={post.id}\n                      initial={{ opacity: 0, y: 20 }}\n                      animate={{ opacity: 1, y: 0 }}\n                      transition={{ duration: 0.3 }}\n                    >\n                      <Card className=\"hover:shadow-lg transition-shadow\">\n                        <CardContent className=\"p-6\">\n                          {/* Post Header */}\n                          <div className=\"flex items-start space-x-4 mb-4\">\n                            <Avatar>\n                              <AvatarFallback>{post.author.avatar}</AvatarFallback>\n                            </Avatar>\n                            <div className=\"flex-1\">\n                              <div className=\"flex items-center space-x-2\">\n                                <h3 className=\"font-semibold\">{post.author.name}</h3>\n                                {post.author.verified && (\n                                  <Badge variant=\"secondary\" className=\"text-xs\">\n                                    {post.author.rank}\n                                  </Badge>\n                                )}\n                              </div>\n                              <p className=\"text-sm text-gray-500\">{post.author.username} ‚Ä¢ {post.timestamp}</p>\n                            </div>\n                            <Button variant=\"ghost\" size=\"sm\">\n                              <Settings className=\"h-4 w-4\" />\n                            </Button>\n                          </div>\n\n                          {/* Post Content */}\n                          <div className=\"mb-4\">\n                            <p className=\"text-gray-900 leading-relaxed\">{post.content}</p>\n                            {post.tags.length > 0 && (\n                              <div className=\"flex flex-wrap gap-2 mt-3\">\n                                {post.tags.map((tag) => (\n                                  <Badge key={tag} variant=\"outline\" className=\"text-xs\">\n                                    #{tag}\n                                  </Badge>\n                                ))}\n                              </div>\n                            )}\n                          </div>\n\n                          {/* Post Images */}\n                          {post.images.length > 0 && (\n                            <div className={`grid gap-2 mb-4 ${\n                              post.images.length === 1 ? 'grid-cols-1' : \n                              post.images.length === 2 ? 'grid-cols-2' : \n                              'grid-cols-2 lg:grid-cols-3'\n                            }`}>\n                              {post.images.map((image, index) => (\n                                <div key={index} className=\"relative rounded-lg overflow-hidden\">\n                                  <img \n                                    src={image} \n                                    alt={`Post image ${index + 1}`}\n                                    className=\"w-full h-48 object-cover hover:scale-105 transition-transform cursor-pointer\"\n                                  />\n                                </div>\n                              ))}\n                            </div>\n                          )}\n\n                          {/* Post Actions */}\n                          <div className=\"flex items-center justify-between pt-4 border-t\">\n                            <div className=\"flex space-x-6\">\n                              <Button \n                                variant=\"ghost\" \n                                size=\"sm\"\n                                onClick={() => handleLike(post.id)}\n                                className=\"text-gray-500 hover:text-[#FF3B30]\"\n                              >\n                                <Heart className=\"h-4 w-4 mr-2\" />\n                                {post.likes}\n                              </Button>\n                              <Button variant=\"ghost\" size=\"sm\" className=\"text-gray-500\">\n                                <MessageSquare className=\"h-4 w-4 mr-2\" />\n                                {post.comments}\n                              </Button>\n                              <Button variant=\"ghost\" size=\"sm\" className=\"text-gray-500\">\n                                <Share2 className=\"h-4 w-4 mr-2\" />\n                                {post.shares}\n                              </Button>\n                            </div>\n                            <Button variant=\"ghost\" size=\"sm\">\n                              <Eye className=\"h-4 w-4\" />\n                            </Button>\n                          </div>\n                        </CardContent>\n                      </Card>\n                    </motion.div>\n                  ))}\n                </div>\n              </>\n            )}\n\n            {activeTab === \"events\" && (\n              <div className=\"space-y-6\">\n                <div className=\"flex justify-between items-center\">\n                  <h2 className=\"text-2xl font-bold\">Upcoming Events</h2>\n                  <Button className=\"bg-[#FF3B30] hover:bg-[#FF3B30]/90\">\n                    <Plus className=\"h-4 w-4 mr-2\" />\n                    Create Event\n                  </Button>\n                </div>\n                <div className=\"grid gap-6\">\n                  {mockEvents.map((event) => (\n                    <Card key={event.id} className=\"hover:shadow-lg transition-shadow\">\n                      <CardContent className=\"p-6\">\n                        <div className=\"flex items-start justify-between\">\n                          <div className=\"flex-1\">\n                            <h3 className=\"text-lg font-semibold mb-2\">{event.title}</h3>\n                            <div className=\"flex items-center space-x-4 text-sm text-gray-500 mb-4\">\n                              <div className=\"flex items-center\">\n                                <Calendar className=\"h-4 w-4 mr-1\" />\n                                {event.date}\n                              </div>\n                              <div className=\"flex items-center\">\n                                <MapPin className=\"h-4 w-4 mr-1\" />\n                                {event.location}\n                              </div>\n                              <div className=\"flex items-center\">\n                                <Users className=\"h-4 w-4 mr-1\" />\n                                {event.attendees} attending\n                              </div>\n                            </div>\n                            <Badge className={\n                              event.type === 'ride' ? 'bg-green-100 text-green-800' :\n                              event.type === 'social' ? 'bg-blue-100 text-blue-800' :\n                              'bg-gray-100 text-gray-800'\n                            }>\n                              {event.type}\n                            </Badge>\n                          </div>\n                          <Button variant=\"outline\">\n                            Join Event\n                          </Button>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {activeTab === \"riders\" && (\n              <div className=\"space-y-6\">\n                <div className=\"flex justify-between items-center\">\n                  <h2 className=\"text-2xl font-bold\">Connect with Riders</h2>\n                  <div className=\"flex space-x-2\">\n                    <div className=\"relative\">\n                      <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4\" />\n                      <Input\n                        placeholder=\"Search riders...\"\n                        value={searchTerm}\n                        onChange={(e) => setSearchTerm(e.target.value)}\n                        className=\"pl-10\"\n                      />\n                    </div>\n                    <Button variant=\"outline\">\n                      <Filter className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                </div>\n                <div className=\"grid gap-4\">\n                  {mockRiders.map((rider) => (\n                    <Card key={rider.id} className=\"hover:shadow-lg transition-shadow\">\n                      <CardContent className=\"p-6\">\n                        <div className=\"flex items-center justify-between\">\n                          <div className=\"flex items-center space-x-4\">\n                            <Avatar className=\"h-12 w-12\">\n                              <AvatarFallback className=\"text-lg\">{rider.avatar}</AvatarFallback>\n                            </Avatar>\n                            <div>\n                              <h3 className=\"font-semibold\">{rider.name}</h3>\n                              <p className=\"text-sm text-gray-500\">{rider.username}</p>\n                              <div className=\"flex items-center space-x-2 mt-1\">\n                                <Badge variant=\"secondary\" className=\"text-xs\">\n                                  {rider.rank}\n                                </Badge>\n                                <span className=\"text-xs text-gray-500\">{rider.miles.toLocaleString()} miles</span>\n                              </div>\n                            </div>\n                          </div>\n                          <Button \n                            variant={rider.following ? \"outline\" : \"default\"}\n                            onClick={() => handleFollow(rider.id)}\n                            className={!rider.following ? \"bg-[#FF3B30] hover:bg-[#FF3B30]/90\" : \"\"}\n                          >\n                            {rider.following ? (\n                              \"Following\"\n                            ) : (\n                              <>\n                                <UserPlus className=\"h-4 w-4 mr-2\" />\n                                Follow\n                              </>\n                            )}\n                          </Button>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {activeTab === \"groups\" && (\n              <div className=\"text-center py-12\">\n                <MessageCircle className=\"h-16 w-16 text-gray-300 mx-auto mb-4\" />\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Groups Coming Soon</h3>\n                <p className=\"text-gray-500 mb-6\">\n                  Create and join motorcycle groups based on your interests, location, and riding style.\n                </p>\n                <Button className=\"bg-[#FF3B30] hover:bg-[#FF3B30]/90\">\n                  <Bell className=\"h-4 w-4 mr-2\" />\n                  Notify Me\n                </Button>\n              </div>\n            )}\n          </div>\n\n          {/* Sidebar */}\n          <div className=\"space-y-6\">\n            {/* Trending Topics */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center\">\n                  <TrendingUp className=\"h-5 w-5 mr-2 text-[#FF3B30]\" />\n                  Trending\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-3\">\n                {[\n                  { tag: \"#TrackDay\", posts: \"47 posts\" },\n                  { tag: \"#AdventureRiding\", posts: \"32 posts\" },\n                  { tag: \"#BikeNight\", posts: \"28 posts\" },\n                  { tag: \"#MaintenanceTips\", posts: \"21 posts\" },\n                  { tag: \"#RideShare\", posts: \"19 posts\" }\n                ].map((trend, index) => (\n                  <div key={index} className=\"flex justify-between items-center p-2 hover:bg-gray-50 rounded cursor-pointer\">\n                    <div>\n                      <p className=\"font-medium text-sm\">{trend.tag}</p>\n                      <p className=\"text-xs text-gray-500\">{trend.posts}</p>\n                    </div>\n                  </div>\n                ))}\n              </CardContent>\n            </Card>\n\n            {/* Upcoming Events Sidebar */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center\">\n                  <Calendar className=\"h-5 w-5 mr-2 text-[#FF3B30]\" />\n                  This Week\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                {mockEvents.slice(0, 3).map((event) => (\n                  <div key={event.id} className=\"border-l-4 border-[#FF3B30] pl-3\">\n                    <h4 className=\"font-medium text-sm\">{event.title}</h4>\n                    <p className=\"text-xs text-gray-500 mt-1\">{event.date}</p>\n                    <p className=\"text-xs text-gray-500\">{event.attendees} attending</p>\n                  </div>\n                ))}\n                <Button variant=\"outline\" size=\"sm\" className=\"w-full\">\n                  View All Events\n                </Button>\n              </CardContent>\n            </Card>\n\n            {/* Community Stats */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center\">\n                  <Users className=\"h-5 w-5 mr-2 text-[#FF3B30]\" />\n                  Community\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"text-center\">\n                  <div className=\"text-2xl font-bold\">2,847</div>\n                  <div className=\"text-sm text-gray-500\">Active Riders</div>\n                </div>\n                <div className=\"grid grid-cols-2 gap-4 text-center\">\n                  <div>\n                    <div className=\"text-lg font-semibold\">156</div>\n                    <div className=\"text-xs text-gray-500\">Posts Today</div>\n                  </div>\n                  <div>\n                    <div className=\"text-lg font-semibold\">23</div>\n                    <div className=\"text-xs text-gray-500\">Events This Week</div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":23810},"client/src/pages/Garage.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { Motorcycle } from \"@shared/schema\";\nimport AddMotorcycleDialog from \"@/components/ui/motorcycle/AddMotorcycleDialog\";\nimport { Plus, Settings, Calendar, MapPin, MoreVertical, Wrench, Clock } from \"lucide-react\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { motion } from \"framer-motion\";\nimport { \n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\n\nconst Garage = () => {\n  const [isGridView, setIsGridView] = useState(true);\n  const [isAddDialogOpen, setIsAddDialogOpen] = useState(false);\n  const [motorcycleToDelete, setMotorcycleToDelete] = useState<number | null>(null);\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  \n  const { data: motorcycles, isLoading, error } = useQuery<Motorcycle[]>({\n    queryKey: ['/api/motorcycles'],\n  });\n  \n  const handleAddMotorcycle = () => {\n    setIsAddDialogOpen(true);\n  };\n  \n  const handleEditMotorcycle = (motorcycle: Motorcycle) => {\n    toast({\n      title: \"Coming Soon\",\n      description: \"Motorcycle editing feature will be available soon!\",\n    });\n  };\n  \n  const handleDeleteMotorcycle = async () => {\n    if (!motorcycleToDelete) return;\n    \n    try {\n      await apiRequest(\"DELETE\", `/api/motorcycles/${motorcycleToDelete}`, undefined);\n      \n      queryClient.invalidateQueries({ queryKey: ['/api/motorcycles'] });\n      \n      toast({\n        title: \"Motorcycle Deleted\",\n        description: \"The motorcycle has been removed from your garage.\",\n      });\n      \n      setMotorcycleToDelete(null);\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to delete motorcycle. Please try again.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n  \n  return (\n    <div className=\"container mx-auto px-4 py-12\">\n      <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center mb-8\">\n        <div>\n          <h2 className=\"text-3xl font-bold font-header text-[#1A1A1A]\">Your Garage</h2>\n          <p className=\"text-gray-600\">Manage your motorcycle collection</p>\n        </div>\n        <div className=\"mt-4 md:mt-0 flex space-x-2\">\n          <div className=\"flex border rounded overflow-hidden\">\n            <Button\n              variant={isGridView ? \"default\" : \"ghost\"}\n              className={`rounded-none px-4 py-2 ${\n                isGridView ? \"bg-[#007AFF]\" : \"bg-gray-100 text-gray-700\"\n              }`}\n              onClick={() => setIsGridView(true)}\n            >\n              <Grid className=\"h-4 w-4 mr-2\" />\n              Grid\n            </Button>\n            <Button\n              variant={!isGridView ? \"default\" : \"ghost\"}\n              className={`rounded-none px-4 py-2 ${\n                !isGridView ? \"bg-[#007AFF]\" : \"bg-gray-100 text-gray-700\"\n              }`}\n              onClick={() => setIsGridView(false)}\n            >\n              <List className=\"h-4 w-4 mr-2\" />\n              List\n            </Button>\n          </div>\n          <Button \n            className=\"bg-[#FF3B30] hover:bg-[#FF3B30]/90 text-white\"\n            onClick={handleAddMotorcycle}\n          >\n            <Plus className=\"h-4 w-4 mr-2\" />\n            Add Motorcycle\n          </Button>\n        </div>\n      </div>\n      \n      {isLoading && (\n        <div className=\"flex justify-center items-center h-64\">\n          <svg className=\"animate-spin h-8 w-8 text-[#007AFF]\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n            <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n            <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n          </svg>\n        </div>\n      )}\n      \n      {error && (\n        <div className=\"flex flex-col items-center justify-center h-64\">\n          <AlertTriangle className=\"h-12 w-12 text-[#FF3B30] mb-4\" />\n          <h3 className=\"text-xl font-bold\">Error Loading Motorcycles</h3>\n          <p className=\"text-gray-600\">Unable to load your garage. Please try again later.</p>\n        </div>\n      )}\n      \n      {!isLoading && !error && motorcycles && motorcycles.length === 0 && (\n        <div className=\"flex flex-col items-center justify-center bg-gray-50 p-12 rounded-lg border-2 border-dashed border-gray-300\">\n          <Bike className=\"h-16 w-16 text-gray-400 mb-4\" />\n          <h3 className=\"text-xl font-bold\">Your Garage is Empty</h3>\n          <p className=\"text-gray-600 mb-6\">Add your first motorcycle to get started</p>\n          <Button \n            className=\"bg-[#FF3B30] hover:bg-[#FF3B30]/90 text-white\"\n            onClick={handleAddMotorcycle}\n          >\n            <Plus className=\"h-4 w-4 mr-2\" />\n            Add Your First Motorcycle\n          </Button>\n        </div>\n      )}\n      \n      {!isLoading && !error && motorcycles && motorcycles.length > 0 && (\n        <div className={`grid ${\n          isGridView \n            ? \"grid-cols-1 md:grid-cols-2 lg:grid-cols-3\" \n            : \"grid-cols-1\"\n        } gap-6`}>\n          {motorcycles.map((motorcycle) => (\n            <MotorcycleCard \n              key={motorcycle.id} \n              motorcycle={motorcycle} \n              onUpdate={() => handleEditMotorcycle(motorcycle)}\n              onDelete={(id) => setMotorcycleToDelete(id)}\n            />\n          ))}\n          \n          {/* Add motorcycle card */}\n          <div \n            className=\"border-2 border-dashed border-gray-200 rounded-lg flex flex-col items-center justify-center p-6 h-full min-h-[200px] cursor-pointer hover:bg-gray-50 transition-all\"\n            onClick={handleAddMotorcycle}\n          >\n            <div className=\"h-16 w-16 rounded-full bg-gray-100 flex items-center justify-center mb-4\">\n              <Plus className=\"h-6 w-6 text-gray-500\" />\n            </div>\n            <h3 className=\"text-xl font-bold font-header text-center\">Add Motorcycle</h3>\n            <p className=\"text-gray-500 text-center mt-2\">Click to add a new motorcycle to your garage</p>\n          </div>\n        </div>\n      )}\n      \n      <AddMotorcycleDialog \n        open={isAddDialogOpen} \n        onOpenChange={setIsAddDialogOpen} \n        onSuccess={() => queryClient.invalidateQueries({ queryKey: ['/api/motorcycles'] })}\n      />\n      \n      <AlertDialog open={!!motorcycleToDelete} onOpenChange={() => setMotorcycleToDelete(null)}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Are you sure?</AlertDialogTitle>\n            <AlertDialogDescription>\n              This will permanently delete this motorcycle and all associated maintenance records. This action cannot be undone.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\n            <AlertDialogAction \n              className=\"bg-[#FF3B30] hover:bg-[#FF3B30]/90 text-white\"\n              onClick={handleDeleteMotorcycle}\n            >\n              Delete\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  );\n};\n\nexport default Garage;\n","size_bytes":7814},"client/src/pages/Home.tsx":{"content":"import logoh from \"@/assets/tclogov2h2.svg\";\nimport neonga from \"@/assets/nwhero2.png\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card, CardContent, CardHeader, CardTitle, CardFooter } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Link } from \"wouter\";\nimport { Bike, Search, TrafficCone, ArrowRight, Star, Heart, Filter, User } from \"lucide-react\";\nimport { motion } from \"framer-motion\";\nimport { useState } from \"react\";\nimport MotorcycleDetailsDialog from \"@/components/ui/motorcycle/MotorcycleDetailsDialog\";\n\n// Sample motorcycle data\nconst motorcycles = [\n  {\n    id: 1,\n    name: \"Yamaha YZF-R1\",\n    brand: \"Yamaha\",\n    year: 2024,\n    engine: \"998cc\",\n    type: \"Sport\",\n    price: \"$17,999\",\n    rating: 4.8,\n    image: \"https://images.unsplash.com/photo-1558618047-3c8c76ca7d13?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80\",\n    features: [\"Track Ready\", \"Quick Shifter\", \"Traction Control\"]\n  },\n  {\n    id: 2,\n    name: \"Harley-Davidson Street Glide\",\n    brand: \"Harley-Davidson\",\n    year: 2024,\n    engine: \"1868cc\",\n    type: \"Touring\",\n    price: \"$21,999\",\n    rating: 4.6,\n    image: \"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80\",\n    features: [\"Touring\", \"Audio System\", \"Comfort\"]\n  },\n  {\n    id: 3,\n    name: \"Honda CBR600RR\",\n    brand: \"Honda\",\n    year: 2024,\n    engine: \"599cc\",\n    type: \"Sport\",\n    price: \"$12,199\",\n    rating: 4.7,\n    image: \"https://images.unsplash.com/photo-1568772585407-9361f9bf3a87?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80\",\n    features: [\"Lightweight\", \"Agile\", \"Track Focused\"]\n  },\n  {\n    id: 4,\n    name: \"BMW R1250GS\",\n    brand: \"BMW\",\n    year: 2024,\n    engine: \"1254cc\",\n    type: \"Adventure\",\n    price: \"$17,495\",\n    rating: 4.9,\n    image: \"https://images.unsplash.com/photo-1608845206259-da2d4feda8a2?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80\",\n    features: [\"Adventure Ready\", \"ABS\", \"Traction Control\"]\n  },\n  {\n    id: 5,\n    name: \"Ducati Panigale V4\",\n    brand: \"Ducati\",\n    year: 2024,\n    engine: \"1103cc\",\n    type: \"Sport\",\n    price: \"$23,995\",\n    rating: 4.9,\n    image: \"https://images.unsplash.com/photo-1568605117036-5fe5e7bab0b7?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80\",\n    features: [\"Premium\", \"Race Derived\", \"Electronics\"]\n  },\n  {\n    id: 6,\n    name: \"Kawasaki Ninja ZX-10R\",\n    brand: \"Kawasaki\",\n    year: 2024,\n    engine: \"998cc\",\n    type: \"Sport\",\n    price: \"$16,999\",\n    rating: 4.7,\n    image: \"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80\",\n    features: [\"Track Ready\", \"Advanced Electronics\", \"Power\"]\n  }\n];\n\nconst Home = () => {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [selectedType, setSelectedType] = useState(\"All\");\n  const [isDetailsDialogOpen, setIsDetailsDialogOpen] = useState(false);\n  const [selectedMotorcycle, setSelectedMotorcycle] = useState<any>(null);\n\n  const filteredMotorcycles = motorcycles.filter(bike => {\n    const matchesSearch = bike.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         bike.brand.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesType = selectedType === \"All\" || bike.type === selectedType;\n    return matchesSearch && matchesType;\n  });\n\n  return (\n    <div className=\"flex flex-col min-h-screen\">\n      {/* Hero section */}\n      <section className=\"bg-[#1A1A1A] text-white relative h-[45vh] md:h-[55vh] overflow-hidden\">\n        <div className=\"absolute inset-0 bg-gradient-to-r from-black/70 to-black/40 z-10\"></div>\n        <motion.img \n          src={neonga} \n          alt=\"Bike in garage\" \n          className=\"absolute inset-0 w-full h-full object-cover\"\n          initial={{ scale: 1.05 }}\n          animate={{ scale: 1 }}\n          transition={{ duration: 8, ease: \"easeOut\" }}\n        />\n        <div className=\"container mx-auto px-4 py-10 relative z-20 h-full flex flex-col justify-center\">\n          <motion.h1 \n            className=\"text-4xl md:text-5xl lg:text-6xl font-bold font-header leading-tight max-w-2xl text-white\"\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.6 }}\n          >\n            YOUR DIGITAL GARAGE\n          </motion.h1>\n          <motion.p \n            className=\"mt-4 text-base md:text-lg max-w-xl\"\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.6, delay: 0.2 }}\n          >\n            Command the road. Master your maintenance, ride with legends, and treat your machine like royalty -\n            <span className=\"font-bold text-[#FF3B30]\"> THROTTLE</span> UP\n          </motion.p>\n          <motion.div \n            className=\"mt-6\"\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.6, delay: 0.4 }}\n          >\n            <Link href=\"/garage\">\n              <Button \n                className=\"bg-[#FF3B30] hover:bg-[#FF3B30]/90 transition-all text-white px-6 py-5 rounded-full font-medium text-lg group\"\n                asChild\n              >\n                <span>\n                  OPEN YOUR GARAGE\n                  <motion.div\n                    className=\"inline-block ml-2\"\n                    initial={{ rotate: 0 }}\n                    whileHover={{ rotate: 180 }}\n                    transition={{ duration: 0.3 }}\n                  >\n                    <TrafficCone className=\"h-5 w-5\" />\n                  </motion.div>\n                </span>\n              </Button>\n            </Link>\n          </motion.div>\n        </div>\n      </section>\n\n      {/* Motorcycle Catalog Section */}\n      <section className=\"py-16 bg-gray-50\">\n        <div className=\"container mx-auto px-4\">\n          <motion.div \n            className=\"text-center mb-12\"\n            initial={{ opacity: 0, y: 20 }}\n            whileInView={{ opacity: 1, y: 0 }}\n            viewport={{ once: true }}\n            transition={{ duration: 0.5 }}\n          >\n            {/* Site Logo Centered */}\n            <div className=\"flex justify-center mb-8\">\n              <div className=\"relative\">\n                <img\n                  src={logoh}\n                  alt=\"ThrottleCove Logo\"\n                  className=\"h-20 sm:h-28 w-auto object-contain relative z-10\"\n                />\n                <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-[#FF3B30]/5 to-transparent rounded-lg blur-sm\" />\n              </div>\n            </div>\n\n            \n\n            {/* Search Bar */}\n            <div className=\"max-w-2xl mx-auto relative mb-8\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5\" />\n                <Input\n                  type=\"text\"\n                  placeholder=\"Search For Your Dream Machine\"\n                  className=\"pl-12 pr-4 py-4 text-lg border-2 border-gray-200 focus:border-[#FF3B30] rounded-full shadow-sm placeholder:opacity-50 text-center\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                />\n              </div>\n            </div>\n\n            {/* Filter Buttons */}\n            <div className=\"flex flex-wrap justify-center gap-2 mb-8\">\n              {[\"All\", \"Sport\", \"Touring\", \"Adventure\", \"Cruiser\"].map((type) => (\n                <Button\n                  key={type}\n                  variant={selectedType === type ? \"default\" : \"outline\"}\n                  size=\"sm\"\n                  className={`px-4 py-1.5 rounded-full transition-all text-sm ${\n                    selectedType === type \n                      ? \"bg-[#FF3B30] hover:bg-[#FF3B30]/90 text-white border-[#FF3B30]\" \n                      : \"border-gray-300 hover:border-[#FF3B30] hover:text-[#FF3B30] bg-white\"\n                  }`}\n                  onClick={() => setSelectedType(type)}\n                >\n                  {type}\n                </Button>\n              ))}\n            </div>\n          </motion.div>\n\n          {/* Motorcycle Grid */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {filteredMotorcycles.map((bike, index) => (\n              <motion.div\n                key={bike.id}\n                initial={{ opacity: 0, y: 20 }}\n                whileInView={{ opacity: 1, y: 0 }}\n                viewport={{ once: true }}\n                transition={{ duration: 0.4, delay: index * 0.1 }}\n              >\n                <Card className=\"overflow-hidden h-full flex flex-col hover:shadow-lg transition-all duration-300 rounded-2xl border-0 shadow-sm bg-gradient-to-b from-white to-gray-50\">\n                  <div className=\"relative h-48 overflow-hidden rounded-t-2xl\">\n                    <img \n                      src={bike.image} \n                      alt={bike.name}\n                      className=\"w-full h-full object-cover transition-transform hover:scale-105 duration-300\"\n                    />\n                    <div className=\"absolute top-3 right-3 flex space-x-2\">\n                      <Button \n                        size=\"icon\" \n                        variant=\"ghost\" \n                        className=\"h-8 w-8 rounded-full bg-white/90 backdrop-blur-sm text-gray-600 hover:text-[#FF3B30] hover:bg-white border-0\"\n                        onClick={() => {\n                          // Add to favorites\n                          const favorites = JSON.parse(localStorage.getItem('bikeFavorites') || '[]');\n                          if (!favorites.find((b: any) => b.id === bike.id)) {\n                            favorites.push(bike);\n                            localStorage.setItem('bikeFavorites', JSON.stringify(favorites));\n                            alert(`${bike.name} added to favorites!`);\n                          } else {\n                            alert(`${bike.name} is already in favorites!`);\n                          }\n                        }}\n                      >\n                        <Heart className=\"h-4 w-4\" />\n                      </Button>\n                    </div>\n                    <div className=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4\">\n                      <div className=\"flex justify-between items-end\">\n                        <div>\n                          <div className=\"bg-white/20 backdrop-blur-sm rounded-full px-3 py-1 mb-2 inline-block\">\n                            <span className=\"text-white text-xs font-medium\">\n                              {bike.year} {bike.brand}\n                            </span>\n                          </div>\n                          <h3 className=\"text-white font-bold text-lg\">{bike.name}</h3>\n                        </div>\n                        <div className=\"bg-white/90 backdrop-blur-sm rounded-full px-3 py-1\">\n                          <span className=\"text-gray-900 font-bold\">{bike.price}</span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  \n                  <CardContent className=\"flex-grow py-6\">\n                    <div className=\"space-y-3\">\n                      <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded-2xl\">\n                        <span className=\"text-gray-600 text-sm\">Category</span>\n                        <span className=\"font-semibold text-gray-900\">{bike.type}</span>\n                      </div>\n                      <div className=\"grid grid-cols-2 gap-3\">\n                        <div className=\"p-3 bg-gray-50 rounded-2xl text-center\">\n                          <p className=\"text-xs text-gray-500 mb-1\">Engine</p>\n                          <p className=\"font-semibold text-sm\">{bike.engine}</p>\n                        </div>\n                        <div className=\"p-3 bg-gray-50 rounded-2xl text-center\">\n                          <p className=\"text-xs text-gray-500 mb-1\">Rating</p>\n                          <div className=\"flex items-center justify-center gap-1\">\n                            <Star className=\"h-3 w-3 text-yellow-400 fill-current\" />\n                            <p className=\"font-semibold text-sm\">{bike.rating}</p>\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"flex flex-wrap gap-2\">\n                        {bike.features.slice(0, 3).map((feature, i) => (\n                          <Badge key={i} variant=\"secondary\" className=\"text-xs bg-gray-100 text-gray-700 rounded-full\">\n                            {feature}\n                          </Badge>\n                        ))}\n                      </div>\n                    </div>\n                  </CardContent>\n                  \n                  <CardFooter className=\"pt-0 pb-6 px-6\">\n                    <div className=\"w-full flex gap-2\">\n                      <Button \n                        className=\"flex-1 bg-[#FF3B30] hover:bg-[#FF3B30]/90 text-white rounded-full h-12\"\n                        onClick={() => {\n                          // Convert bike data to match MotorcycleDetailsDialog interface\n                          const motorcycleData = {\n                            id: bike.id,\n                            make: bike.brand,\n                            model: bike.name.replace(`${bike.brand} `, ''),\n                            year: bike.year,\n                            category: bike.type,\n                            engineSize: bike.engine,\n                            power: \"150 HP\", // Default value\n                            weight: \"180 kg\", // Default value\n                            price: bike.price,\n                            imageUrl: bike.image,\n                            color: \"Standard\" // Default value\n                          };\n                          setSelectedMotorcycle(motorcycleData);\n                          setIsDetailsDialogOpen(true);\n                        }}\n                      >\n                        <span className=\"flex items-center\">\n                          View Details <ArrowRight className=\"ml-2 h-4 w-4\" />\n                        </span>\n                      </Button>\n                    </div>\n                  </CardFooter>\n                </Card>\n              </motion.div>\n            ))}\n          </div>\n\n          {/* View More Button */}\n          <motion.div \n            className=\"text-center mt-12\"\n            initial={{ opacity: 0 }}\n            whileInView={{ opacity: 1 }}\n            viewport={{ once: true }}\n            transition={{ duration: 0.5, delay: 0.3 }}\n          >\n            <Link href=\"/catalog\">\n              <Button \n                variant=\"outline\" \n                className=\"px-8 py-3 border-2 border-[#FF3B30] text-[#FF3B30] hover:bg-[#FF3B30] hover:text-white transition-all font-medium rounded-full\"\n                asChild\n              >\n                <span>\n                  View Full Catalog\n                  <ArrowRight className=\"ml-2 h-4 w-4\" />\n                </span>\n              </Button>\n            </Link>\n          </motion.div>\n        </div>\n      </section>\n\n      {/* Popular Gear Section */}\n      <section className=\"py-16 bg-white\">\n        <div className=\"container mx-auto px-4\">\n          <motion.div \n            className=\"text-center mb-12\"\n            initial={{ opacity: 0, y: 20 }}\n            whileInView={{ opacity: 1, y: 0 }}\n            viewport={{ once: true }}\n            transition={{ duration: 0.5 }}\n          >\n            <h2 className=\"text-3xl font-bold mb-4\">Essential Rider Gear</h2>\n            <p className=\"text-gray-600 max-w-2xl mx-auto\">\n              Top-rated safety equipment and accessories trusted by thousands of riders worldwide\n            </p>\n          </motion.div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\n            {[\n              {\n                name: \"Apex Pro Carbon Helmet\",\n                price: \"$599.99\",\n                rating: 4.9,\n                image: \"https://via.placeholder.com/300x200/F59E0B\",\n                category: \"Helmet\",\n                badge: \"Best Seller\"\n              },\n              {\n                name: \"Turbulence Pro Jacket\",\n                price: \"$349.99\",\n                rating: 4.8,\n                image: \"https://via.placeholder.com/300x200/3B82F6\",\n                category: \"Jacket\",\n                badge: \"Top Rated\"\n              },\n              {\n                name: \"Track Pro Gloves\",\n                price: \"$149.99\",\n                rating: 4.8,\n                image: \"https://via.placeholder.com/300x200/10B981\",\n                category: \"Gloves\",\n                badge: \"Premium\"\n              },\n              {\n                name: \"Race Pro Boots\",\n                price: \"$329.99\",\n                rating: 4.9,\n                image: \"https://via.placeholder.com/300x200/8B5CF6\",\n                category: \"Boots\",\n                badge: \"Pro Level\"\n              }\n            ].map((item, index) => (\n              <motion.div\n                key={index}\n                initial={{ opacity: 0, y: 20 }}\n                whileInView={{ opacity: 1, y: 0 }}\n                viewport={{ once: true }}\n                transition={{ duration: 0.4, delay: index * 0.1 }}\n              >\n                <Card className=\"overflow-hidden hover:shadow-lg transition-all duration-300 rounded-2xl border-0 shadow-sm bg-gradient-to-b from-white to-gray-50\">\n                  <div className=\"relative h-40\">\n                    <div \n                      className=\"w-full h-full bg-cover bg-center rounded-t-2xl\"\n                      style={{ backgroundImage: `url(${item.image})` }}\n                    >\n                      <div className=\"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent rounded-t-2xl\" />\n                      <div className=\"absolute top-3 right-3\">\n                        <Badge className=\"bg-[#FF3B30] text-white rounded-full px-3 py-1\">\n                          {item.badge}\n                        </Badge>\n                      </div>\n                      <div className=\"absolute bottom-3 left-3\">\n                        <span className=\"bg-white/90 backdrop-blur-sm rounded-full px-3 py-1 text-xs font-medium\">\n                          {item.category}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                  <CardContent className=\"p-4\">\n                    <h3 className=\"font-semibold text-lg mb-2 line-clamp-1\">{item.name}</h3>\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <div className=\"flex items-center gap-1\">\n                        <Star className=\"h-4 w-4 text-yellow-400 fill-current\" />\n                        <span className=\"text-sm font-medium\">{item.rating}</span>\n                      </div>\n                      <span className=\"font-bold text-lg\">{item.price}</span>\n                    </div>\n                    <Button className=\"w-full bg-[#FF3B30] hover:bg-[#FF3B30]/90 text-white rounded-full\">\n                      Add to Cart\n                    </Button>\n                  </CardContent>\n                </Card>\n              </motion.div>\n            ))}\n          </div>\n\n          <motion.div \n            className=\"text-center\"\n            initial={{ opacity: 0 }}\n            whileInView={{ opacity: 1 }}\n            viewport={{ once: true }}\n            transition={{ duration: 0.5, delay: 0.3 }}\n          >\n            <Link href=\"/shop\">\n              <Button \n                variant=\"outline\" \n                className=\"px-8 py-3 border-2 border-[#FF3B30] text-[#FF3B30] hover:bg-[#FF3B30] hover:text-white transition-all font-medium rounded-full\"\n                asChild\n              >\n                <span>\n                  Shop All Gear\n                  <ArrowRight className=\"ml-2 h-4 w-4\" />\n                </span>\n              </Button>\n            </Link>\n          </motion.div>\n        </div>\n      </section>\n\n      {/* Latest Blog Posts Section */}\n      <section className=\"py-16 bg-gradient-to-br from-slate-50 to-slate-100\">\n        <div className=\"container mx-auto px-4\">\n          <motion.div \n            className=\"text-center mb-12\"\n            initial={{ opacity: 0, y: 20 }}\n            whileInView={{ opacity: 1, y: 0 }}\n            viewport={{ once: true }}\n            transition={{ duration: 0.5 }}\n          >\n            <h2 className=\"text-3xl font-bold mb-4\">Latest from the Community</h2>\n            <p className=\"text-gray-600 max-w-2xl mx-auto\">\n              Stay updated with the latest tips, reviews, and stories from fellow riders\n            </p>\n          </motion.div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8 mb-8\">\n            {[\n              {\n                title: \"The Ultimate Guide to Motorcycle Maintenance\",\n                excerpt: \"Learn essential maintenance tips to keep your bike running smoothly and extend its lifespan.\",\n                category: \"Maintenance\",\n                readTime: \"8 min read\",\n                date: \"2 days ago\",\n                image: \"https://images.unsplash.com/photo-1558981359-219d6364c9c8?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80\",\n                author: \"Michael Johnson\"\n              },\n              {\n                title: \"Top Motorcycle Routes in California\",\n                excerpt: \"Discover the most scenic and thrilling motorcycle routes California has to offer.\",\n                category: \"Travel\",\n                readTime: \"6 min read\",\n                date: \"4 days ago\",\n                image: \"https://images.unsplash.com/photo-1558979158-65a1eaa08691?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80\",\n                author: \"Amanda Rivera\"\n              },\n              {\n                title: \"Safety Gear That Could Save Your Life\",\n                excerpt: \"Explore the essential safety gear every rider should have and how it can protect you.\",\n                category: \"Safety\",\n                readTime: \"7 min read\",\n                date: \"1 week ago\",\n                image: \"https://images.unsplash.com/photo-1605664061868-b262d0e08dcb?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80\",\n                author: \"Sarah Martinez\"\n              }\n            ].map((post, index) => (\n              <motion.div\n                key={index}\n                initial={{ opacity: 0, y: 20 }}\n                whileInView={{ opacity: 1, y: 0 }}\n                viewport={{ once: true }}\n                transition={{ duration: 0.4, delay: index * 0.1 }}\n              >\n                <Card className=\"overflow-hidden h-full flex flex-col hover:shadow-lg transition-all duration-300 rounded-2xl border-0 shadow-sm bg-gradient-to-b from-white to-gray-50\">\n                  <div className=\"relative h-48\">\n                    <img \n                      src={post.image} \n                      alt={post.title}\n                      className=\"w-full h-full object-cover rounded-t-2xl\"\n                    />\n                    <div className=\"absolute top-3 left-3\">\n                      <Badge className=\"bg-[#FF3B30] text-white rounded-full px-3 py-1\">\n                        {post.category}\n                      </Badge>\n                    </div>\n                  </div>\n                  \n                  <CardContent className=\"flex-grow p-6\">\n                    <div className=\"flex items-center text-xs text-gray-500 mb-3 gap-4\">\n                      <span>{post.date}</span>\n                      <span>‚Ä¢</span>\n                      <span>{post.readTime}</span>\n                    </div>\n                    \n                    <h3 className=\"text-xl font-bold mb-3 line-clamp-2\">{post.title}</h3>\n                    <p className=\"text-gray-600 mb-4 line-clamp-3\">{post.excerpt}</p>\n                    \n                    <div className=\"flex items-center justify-between mt-auto pt-4\">\n                      <span className=\"text-sm font-medium text-gray-700\">By {post.author}</span>\n                      <Button \n                        variant=\"ghost\" \n                        size=\"sm\" \n                        className=\"text-[#FF3B30] hover:text-[#FF3B30]/90 p-0 rounded-full\"\n                      >\n                        Read More <ArrowRight className=\"h-4 w-4 ml-1\" />\n                      </Button>\n                    </div>\n                  </CardContent>\n                </Card>\n              </motion.div>\n            ))}\n          </div>\n\n          <motion.div \n            className=\"text-center\"\n            initial={{ opacity: 0 }}\n            whileInView={{ opacity: 1 }}\n            viewport={{ once: true }}\n            transition={{ duration: 0.5, delay: 0.3 }}\n          >\n            <Link href=\"/blog\">\n              <Button \n                variant=\"outline\" \n                className=\"px-8 py-3 border-2 border-[#FF3B30] text-[#FF3B30] hover:bg-[#FF3B30] hover:text-white transition-all font-medium rounded-full\"\n                asChild\n              >\n                <span>\n                  Read All Articles\n                  <ArrowRight className=\"ml-2 h-4 w-4\" />\n                </span>\n              </Button>\n            </Link>\n          </motion.div>\n        </div>\n      </section>\n\n      \n\n      {/* Motorcycle Details Dialog */}\n      <MotorcycleDetailsDialog \n        motorcycle={selectedMotorcycle}\n        open={isDetailsDialogOpen}\n        onOpenChange={setIsDetailsDialogOpen}\n      />\n    </div>\n  );\n};\n\nexport default Home;","size_bytes":25877},"client/src/pages/Login.tsx":{"content":"import { useState } from \"react\";\nimport { Link, useLocation } from \"wouter\";\nimport { \n  Card, \n  CardContent, \n  CardDescription, \n  CardFooter, \n  CardHeader, \n  CardTitle \n} from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { Label } from \"@/components/ui/label\";\nimport { useForm } from \"react-hook-form\";\nimport { z } from \"zod\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport logo from \"@/assets/tclogov2h2.svg\";\n\nconst loginSchema = z.object({\n  username: z.string().min(1, \"Username is required\"),\n  password: z.string().min(1, \"Password is required\"),\n});\n\ntype LoginFormValues = z.infer<typeof loginSchema>;\n\nconst Login = () => {\n  const [, navigate] = useLocation();\n  const { toast } = useToast();\n  const { setUser } = useAuth();\n  const [isLoading, setIsLoading] = useState(false);\n\n  const form = useForm<LoginFormValues>({\n    resolver: zodResolver(loginSchema),\n    defaultValues: {\n      username: \"\",\n      password: \"\",\n    },\n  });\n\n  const onSubmit = async (data: LoginFormValues) => {\n    setIsLoading(true);\n\n    try {\n      const response = await fetch('/api/auth/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify(data),\n      });\n\n      if (response.ok) {\n        const result = await response.json();\n        setUser(result.user);\n\n        toast({\n          title: \"Login successful\",\n          description: \"Welcome back to ThrottleCove!\",\n        });\n\n        // Navigate to garage after successful login\n        navigate(\"/garage\");\n      } else {\n        const errorData = await response.json();\n        throw new Error(errorData.error || \"Login failed\");\n      }\n    } catch (error) {\n      console.error(\"Login error:\", error);\n      toast({\n        title: \"Login failed\",\n        description: error instanceof Error ? error.message : \"Please check your credentials and try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 animate-gradient-x flex items-center justify-center p-4 relative overflow-hidden\">\n      {/* Animated background elements */}\n      <div className=\"absolute inset-0 opacity-30\">\n        <div className=\"absolute top-1/4 left-1/4 w-32 h-32 bg-blue-300 rounded-full mix-blend-multiply filter blur-xl animate-blob\"></div>\n        <div className=\"absolute top-1/3 right-1/4 w-32 h-32 bg-purple-300 rounded-full mix-blend-multiply filter blur-xl animate-blob animation-delay-2000\"></div>\n        <div className=\"absolute bottom-1/4 left-1/3 w-32 h-32 bg-pink-300 rounded-full mix-blend-multiply filter blur-xl animate-blob animation-delay-4000\"></div>\n      </div>\n\n      <div className=\"w-full max-w-md relative z-10\">\n        <Card className=\"shadow-2xl border-0 rounded-3xl backdrop-blur-sm bg-white/90\">\n          <form onSubmit={form.handleSubmit(onSubmit)}>\n            <CardHeader className=\"text-center space-y-4 pb-8\">\n              <div className=\"mx-auto flex items-center justify-center\">\n                <img\n                  src={logo}\n                  alt=\"ThrottleCove Logo\"\n                  className=\"h-12 w-auto\"\n                />\n              </div>\n              <div>\n                <CardTitle className=\"text-2xl font-bold text-[#1A1A1A]\">\n                  Welcome back\n                </CardTitle>\n                <CardDescription className=\"text-gray-600 mt-2\">\n                  Sign in to your ThrottleCove account\n                </CardDescription>\n              </div>\n            </CardHeader>\n\n            <CardContent className=\"space-y-6\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"username\">Username</Label>\n                <Input\n                  id=\"username\"\n                  type=\"text\"\n                  placeholder=\"Enter your username\"\n                  className=\"rounded-full\"\n                  {...form.register(\"username\")}\n                />\n                {form.formState.errors.username && (\n                  <p className=\"text-sm text-red-500\">\n                    {form.formState.errors.username.message}\n                  </p>\n                )}\n              </div>\n\n              <div className=\"space-y-2\">\n                <div className=\"flex justify-between items-center\">\n                  <Label htmlFor=\"password\">Password</Label>\n                  <Link href=\"/forgot-password\" className=\"text-xs text-[#007AFF] hover:underline\">\n                    Forgot password?\n                  </Link>\n                </div>\n                <Input\n                  id=\"password\"\n                  type=\"password\"\n                  placeholder=\"Enter your password\"\n                  className=\"rounded-full\"\n                  {...form.register(\"password\")}\n                />\n                {form.formState.errors.password && (\n                  <p className=\"text-sm text-red-500\">\n                    {form.formState.errors.password.message}\n                  </p>\n                )}\n              </div>\n            </CardContent>\n\n            <CardFooter className=\"flex flex-col gap-4\">\n              <Button \n                className=\"w-3/4 mx-auto bg-[#1A1A1A] hover:bg-[#1A1A1A]/90 rounded-full px-12\"\n                type=\"submit\"\n                disabled={isLoading}\n              >\n                {isLoading ? \"Opening Garage...\" : \"Open Garage\"}\n              </Button>\n\n              <p className=\"text-sm text-center text-gray-600\">\n                Don't have an account?{\" \"}\n                <Link href=\"/register\" className=\"text-[#FF3B30] hover:underline\">\n                  Register\n                </Link>\n              </p>\n            </CardFooter>\n          </form>\n        </Card>\n\n        <div className=\"mt-4 text-center\">\n          <Link href=\"/\" className=\"text-sm text-gray-600 hover:text-[#1A1A1A]\">\n            ‚Üê Back to home\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;","size_bytes":6259},"client/src/pages/Maintenance.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { \n  MaintenanceRecord, \n  Motorcycle,\n  MaintenanceSchedule\n} from \"@shared/schema\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Separator } from \"@/components/ui/separator\";\nimport MaintenanceCard from \"@/components/ui/maintenance/MaintenanceCard\";\nimport ServiceDialog from \"@/components/ui/maintenance/ServiceDialog\";\nimport MetricCard from \"@/components/ui/dashboard/MetricCard\";\nimport { \n  Wrench, \n  Calendar,\n  Check, \n  CalendarDays,\n  Plus,\n  Bike,\n  AlertTriangle,\n  ChevronLeft,\n  ChevronRight,\n  FilterX\n} from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { format, addDays } from \"date-fns\";\n\nconst Maintenance = () => {\n  const [selectedMotorcycle, setSelectedMotorcycle] = useState<string>(\"all\");\n  const [selectedServiceType, setSelectedServiceType] = useState<string>(\"all\");\n  const [currentPage, setCurrentPage] = useState(1);\n  const [isServiceDialogOpen, setIsServiceDialogOpen] = useState(false);\n  const [selectedMotorcycleId, setSelectedMotorcycleId] = useState<number | null>(null);\n  const recordsPerPage = 5;\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  \n  const { data: motorcycles, isLoading: motorcyclesLoading } = useQuery<Motorcycle[]>({\n    queryKey: ['/api/motorcycles'],\n  });\n  \n  // Fetch all maintenance records\n  const { data: maintenanceRecords, isLoading: recordsLoading } = useQuery<MaintenanceRecord[]>({\n    queryKey: ['/api/motorcycles/maintenance-all'],\n    queryFn: async () => {\n      if (!motorcycles || motorcycles.length === 0) return [];\n      \n      // Fetch maintenance records for each motorcycle\n      const promises = motorcycles.map(motorcycle => \n        fetch(`/api/motorcycles/${motorcycle.id}/maintenance`, { credentials: 'include' })\n          .then(res => res.ok ? res.json() : [])\n      );\n      \n      const allRecords = await Promise.all(promises);\n      return allRecords.flat();\n    },\n    enabled: !!motorcycles && motorcycles.length > 0,\n  });\n  \n  // Show loading state while fetching data\n  const isLoading = motorcyclesLoading || recordsLoading;\n  \n  // Filter records based on selected filters\n  const filteredRecords = maintenanceRecords?.filter(record => {\n    if (selectedMotorcycle !== \"all\" && record.motorcycleId !== parseInt(selectedMotorcycle)) {\n      return false;\n    }\n    \n    if (selectedServiceType !== \"all\" && record.serviceType !== selectedServiceType) {\n      return false;\n    }\n    \n    return true;\n  }) || [];\n  \n  // Sort records by date (newest first)\n  const sortedRecords = [...filteredRecords].sort((a, b) => \n    new Date(b.date).getTime() - new Date(a.date).getTime()\n  );\n  \n  // Pagination\n  const totalPages = Math.ceil(sortedRecords.length / recordsPerPage);\n  const paginatedRecords = sortedRecords.slice(\n    (currentPage - 1) * recordsPerPage,\n    currentPage * recordsPerPage\n  );\n  \n  // Calculate upcoming maintenance tasks\n  const upcomingMaintenance = maintenanceRecords?.filter(record => \n    !record.completed && new Date(record.date) >= new Date()\n  ).sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime()) || [];\n  \n  // Get service types for filter\n  const serviceTypes = Array.from(new Set(maintenanceRecords?.map(record => record.serviceType) || []));\n  \n  // Get total and completed services\n  const totalServices = maintenanceRecords?.length || 0;\n  const completedServices = maintenanceRecords?.filter(record => record.completed).length || 0;\n  \n  // Handle add service for specific motorcycle\n  const handleAddService = (motorcycleId: number) => {\n    setSelectedMotorcycleId(motorcycleId);\n    setIsServiceDialogOpen(true);\n  };\n  \n  // Handle generic add service\n  const handleAddGenericService = () => {\n    if (!motorcycles || motorcycles.length === 0) {\n      toast({\n        title: \"No Motorcycles\",\n        description: \"Please add a motorcycle to your garage first.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    \n    setSelectedMotorcycleId(motorcycles[0].id);\n    setIsServiceDialogOpen(true);\n  };\n\n  return (\n    <div className=\"container mx-auto px-4 py-12\">\n      <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center mb-8\">\n        <div>\n          <h2 className=\"text-3xl font-bold font-header text-[#1A1A1A]\">Maintenance Tracker</h2>\n          <p className=\"text-gray-600\">Keep your motorcycles in peak condition</p>\n        </div>\n        <div className=\"mt-4 md:mt-0\">\n          <Button \n            className=\"bg-[#007AFF] hover:bg-[#007AFF]/90 text-white\"\n            onClick={handleAddGenericService}\n          >\n            <Plus className=\"h-4 w-4 mr-2\" />\n            ADD SERVICE RECORD\n          </Button>\n        </div>\n      </div>\n      \n      {/* Metrics Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n        <MetricCard\n          title=\"Total Services\"\n          value={totalServices}\n          icon={<Wrench className=\"h-5 w-5\" />}\n          subtextHighlight={`${completedServices}`}\n          subtext=\"completed records\"\n        />\n        \n        <MetricCard\n          title=\"Upcoming Maintenance\"\n          value={upcomingMaintenance.length}\n          icon={<Calendar className=\"h-5 w-5\" />}\n          iconColor=\"bg-[#FF3B30]/10 text-[#FF3B30]\"\n          subtextHighlight={upcomingMaintenance.length > 0 ? \"Next:\" : \"None\"}\n          subtext={upcomingMaintenance.length > 0 \n            ? ` ${upcomingMaintenance[0].serviceType} on ${format(new Date(upcomingMaintenance[0].date), 'MMM d')}`\n            : \" scheduled\"}\n        />\n        \n        <MetricCard\n          title=\"Completion Rate\"\n          value={totalServices > 0 ? `${Math.round((completedServices / totalServices) * 100)}%` : \"0%\"}\n          icon={<Check className=\"h-5 w-5\" />}\n          iconColor=\"bg-green-100 text-green-600\"\n          subtext=\"maintenance completion rate\"\n        />\n      </div>\n      \n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        {/* Left Column: Service History */}\n        <div className=\"lg:col-span-2\">\n          <Card className=\"mb-6\">\n            <CardHeader className=\"pb-2 flex flex-col sm:flex-row justify-between items-start sm:items-center\">\n              <CardTitle className=\"text-xl font-bold font-header\">Service History</CardTitle>\n              <div className=\"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 mt-2 sm:mt-0 w-full sm:w-auto\">\n                <Select value={selectedMotorcycle} onValueChange={setSelectedMotorcycle}>\n                  <SelectTrigger className=\"w-full sm:w-[180px]\">\n                    <SelectValue placeholder=\"All Motorcycles\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">All Motorcycles</SelectItem>\n                    {motorcycles?.map(motorcycle => (\n                      <SelectItem key={motorcycle.id} value={motorcycle.id.toString()}>\n                        {motorcycle.name || `${motorcycle.make} ${motorcycle.model}`}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n                \n                <Select value={selectedServiceType} onValueChange={setSelectedServiceType}>\n                  <SelectTrigger className=\"w-full sm:w-[180px]\">\n                    <SelectValue placeholder=\"All Services\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">All Services</SelectItem>\n                    {serviceTypes.map(type => (\n                      <SelectItem key={type} value={type}>{type}</SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n                \n                {(selectedMotorcycle !== \"all\" || selectedServiceType !== \"all\") && (\n                  <Button \n                    variant=\"ghost\" \n                    size=\"icon\"\n                    onClick={() => {\n                      setSelectedMotorcycle(\"all\");\n                      setSelectedServiceType(\"all\");\n                    }}\n                    className=\"hidden sm:flex\"\n                  >\n                    <FilterX className=\"h-4 w-4\" />\n                  </Button>\n                )}\n              </div>\n            </CardHeader>\n            \n            {isLoading ? (\n              <CardContent className=\"flex justify-center items-center py-12\">\n                <div className=\"flex flex-col items-center\">\n                  <svg className=\"animate-spin h-8 w-8 text-[#007AFF] mb-4\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                    <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                    <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                  </svg>\n                  <p className=\"text-gray-500\">Loading service records...</p>\n                </div>\n              </CardContent>\n            ) : paginatedRecords.length === 0 ? (\n              <CardContent className=\"flex flex-col items-center justify-center py-12\">\n                <Wrench className=\"h-12 w-12 text-gray-300 mb-4\" />\n                <h3 className=\"text-lg font-medium mb-2\">No Service Records Found</h3>\n                <p className=\"text-gray-500 text-center mb-4\">\n                  {selectedMotorcycle !== \"all\" || selectedServiceType !== \"all\" \n                    ? \"Try adjusting your filters to see more records\"\n                    : \"Start by adding your first service record\"}\n                </p>\n                {selectedMotorcycle !== \"all\" || selectedServiceType !== \"all\" ? (\n                  <Button\n                    variant=\"outline\"\n                    onClick={() => {\n                      setSelectedMotorcycle(\"all\");\n                      setSelectedServiceType(\"all\");\n                    }}\n                  >\n                    <FilterX className=\"h-4 w-4 mr-2\" />\n                    Clear Filters\n                  </Button>\n                ) : (\n                  <Button \n                    className=\"bg-[#007AFF] hover:bg-[#007AFF]/90 text-white\"\n                    onClick={handleAddGenericService}\n                  >\n                    <Plus className=\"h-4 w-4 mr-2\" />\n                    Add Service Record\n                  </Button>\n                )}\n              </CardContent>\n            ) : (\n              <>\n                <div className=\"overflow-x-auto\">\n                  <table className=\"w-full\">\n                    <thead>\n                      <tr className=\"text-left bg-gray-50\">\n                        <th className=\"px-6 py-3 font-medium\">Date</th>\n                        <th className=\"px-6 py-3 font-medium\">Motorcycle</th>\n                        <th className=\"px-6 py-3 font-medium\">Service</th>\n                        <th className=\"px-6 py-3 font-medium\">Odometer</th>\n                        <th className=\"px-6 py-3 font-medium\">Cost</th>\n                        <th className=\"px-6 py-3 font-medium\">Status</th>\n                        <th className=\"px-6 py-3 font-medium\">Actions</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {paginatedRecords.map(record => {\n                        const motorcycle = motorcycles?.find(m => m.id === record.motorcycleId);\n                        return (\n                          <tr key={record.id} className=\"border-b border-gray-200\">\n                            <td className=\"px-6 py-4\">{format(new Date(record.date), 'MMM d, yyyy')}</td>\n                            <td className=\"px-6 py-4\">\n                              <div className=\"flex items-center space-x-2\">\n                                <div className=\"h-8 w-8 rounded overflow-hidden bg-gray-100\">\n                                  <img \n                                    src={motorcycle?.imageUrl || `https://source.unsplash.com/random/100x100/?motorcycle,${motorcycle?.make}`} \n                                    alt={motorcycle?.make || \"Motorcycle\"} \n                                    className=\"h-full w-full object-cover\" \n                                  />\n                                </div>\n                                <span>{motorcycle ? (motorcycle.name || `${motorcycle.make} ${motorcycle.model}`) : \"Unknown\"}</span>\n                              </div>\n                            </td>\n                            <td className=\"px-6 py-4\">{record.serviceType}</td>\n                            <td className=\"px-6 py-4\">{record.mileage} miles</td>\n                            <td className=\"px-6 py-4\">\n                              {record.cost ? `$${(record.cost / 100).toFixed(2)}` : \"-\"}\n                            </td>\n                            <td className=\"px-6 py-4\">\n                              <Badge className={record.completed \n                                ? \"bg-green-100 text-green-700\" \n                                : new Date(record.date) < new Date() \n                                  ? \"bg-red-100 text-red-700\"\n                                  : \"bg-blue-100 text-blue-700\"\n                              }>\n                                {record.completed \n                                  ? \"Completed\" \n                                  : new Date(record.date) < new Date() \n                                    ? \"Overdue\"\n                                    : \"Scheduled\"\n                                }\n                              </Badge>\n                            </td>\n                            <td className=\"px-6 py-4\">\n                              <div className=\"flex space-x-2\">\n                                <Button \n                                  variant=\"ghost\" \n                                  size=\"sm\" \n                                  className=\"h-8 w-8 p-0 text-gray-500\"\n                                  onClick={() => {\n                                    toast({\n                                      title: \"View Details\",\n                                      description: \"This feature will be available soon!\",\n                                    });\n                                  }}\n                                >\n                                  <Calendar className=\"h-4 w-4\" />\n                                </Button>\n                                {!record.completed && (\n                                  <Button \n                                    variant=\"ghost\" \n                                    size=\"sm\" \n                                    className=\"h-8 w-8 p-0 text-green-600\"\n                                    onClick={() => {\n                                      // Mark as complete logic\n                                      queryClient.invalidateQueries({ queryKey: ['/api/motorcycles/maintenance-all'] });\n                                      toast({\n                                        title: \"Service Completed\",\n                                        description: \"This service has been marked as complete.\",\n                                      });\n                                    }}\n                                  >\n                                    <Check className=\"h-4 w-4\" />\n                                  </Button>\n                                )}\n                              </div>\n                            </td>\n                          </tr>\n                        );\n                      })}\n                    </tbody>\n                  </table>\n                </div>\n                \n                <CardContent className=\"flex items-center justify-between pt-4\">\n                  <div className=\"text-sm text-gray-500\">\n                    Showing {paginatedRecords.length} of {filteredRecords.length} records\n                  </div>\n                  \n                  {totalPages > 1 && (\n                    <div className=\"flex space-x-1\">\n                      <Button \n                        variant=\"outline\" \n                        size=\"icon\" \n                        onClick={() => setCurrentPage(p => Math.max(1, p - 1))}\n                        disabled={currentPage === 1}\n                      >\n                        <ChevronLeft className=\"h-4 w-4\" />\n                      </Button>\n                      \n                      {Array.from({ length: Math.min(3, totalPages) }, (_, i) => {\n                        // Simple pagination with always visible first, current, and last page\n                        let pageNum;\n                        if (totalPages <= 3) {\n                          pageNum = i + 1;\n                        } else if (currentPage === 1) {\n                          pageNum = i + 1;\n                        } else if (currentPage === totalPages) {\n                          pageNum = totalPages - 2 + i;\n                        } else {\n                          pageNum = currentPage - 1 + i;\n                        }\n                        \n                        if (pageNum > 0 && pageNum <= totalPages) {\n                          return (\n                            <Button \n                              key={pageNum}\n                              variant={currentPage === pageNum ? \"default\" : \"outline\"}\n                              className={currentPage === pageNum ? \"bg-[#1A1A1A]\" : \"\"}\n                              onClick={() => setCurrentPage(pageNum)}\n                            >\n                              {pageNum}\n                            </Button>\n                          );\n                        }\n                        return null;\n                      })}\n                      \n                      <Button \n                        variant=\"outline\" \n                        size=\"icon\" \n                        onClick={() => setCurrentPage(p => Math.min(totalPages, p + 1))}\n                        disabled={currentPage === totalPages}\n                      >\n                        <ChevronRight className=\"h-4 w-4\" />\n                      </Button>\n                    </div>\n                  )}\n                </CardContent>\n              </>\n            )}\n          </Card>\n        </div>\n\n        {/* Right Column: Upcoming Services and Service Schedule */}\n        <div className=\"lg:col-span-1\">\n          <Card className=\"mb-6\">\n            <CardHeader>\n              <CardTitle className=\"text-xl font-bold font-header\">Upcoming Services</CardTitle>\n            </CardHeader>\n            <CardContent className=\"p-0\">\n              {isLoading ? (\n                <div className=\"flex justify-center items-center py-12\">\n                  <svg className=\"animate-spin h-8 w-8 text-[#007AFF]\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                    <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                    <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                  </svg>\n                </div>\n              ) : upcomingMaintenance.length === 0 ? (\n                <div className=\"flex flex-col items-center justify-center py-12\">\n                  <CalendarDays className=\"h-12 w-12 text-gray-300 mb-4\" />\n                  <h3 className=\"text-lg font-medium mb-2\">No Upcoming Services</h3>\n                  <p className=\"text-gray-500 text-center mb-4\">\n                    You don't have any scheduled maintenance tasks\n                  </p>\n                  <Button \n                    className=\"bg-[#007AFF] hover:bg-[#007AFF]/90 text-white\"\n                    onClick={handleAddGenericService}\n                  >\n                    <Plus className=\"h-4 w-4 mr-2\" />\n                    Schedule Service\n                  </Button>\n                </div>\n              ) : (\n                <div className=\"divide-y divide-gray-200\">\n                  {upcomingMaintenance.slice(0, 3).map(record => {\n                    const motorcycle = motorcycles?.find(m => m.id === record.motorcycleId);\n                    const today = new Date();\n                    const recordDate = new Date(record.date);\n                    const daysDiff = Math.floor((recordDate.getTime() - today.getTime()) / (1000 * 3600 * 24));\n                    \n                    return (\n                      <div key={record.id} className=\"p-4\">\n                        <div className=\"flex justify-between items-start\">\n                          <div>\n                            <h4 className=\"font-medium\">{record.serviceType}</h4>\n                            <p className=\"text-sm text-gray-500\">\n                              {motorcycle ? (motorcycle.name || `${motorcycle.make} ${motorcycle.model}`) : \"Unknown\"}\n                            </p>\n                          </div>\n                          <div className=\"text-right\">\n                            <p className={`font-medium ${\n                              daysDiff <= 7 ? \"text-[#FF3B30]\" : \"text-[#007AFF]\"\n                            }`}>\n                              {daysDiff <= 0 \n                                ? \"Due today\" \n                                : daysDiff === 1 \n                                  ? \"Due tomorrow\" \n                                  : `Due in ${daysDiff} days`\n                              }\n                            </p>\n                            <p className=\"text-xs text-gray-500\">{format(recordDate, 'MMM d, yyyy')}</p>\n                          </div>\n                        </div>\n                        <div className=\"mt-3 flex justify-between\">\n                          <span className=\"text-sm\">\n                            {record.cost ? `Estimated cost: $${(record.cost / 100).toFixed(2)}` : \"\"}\n                          </span>\n                          <Button \n                            variant=\"link\" \n                            className=\"text-[#007AFF] p-0 h-auto\"\n                            onClick={() => {\n                              toast({\n                                title: \"Schedule Service\",\n                                description: \"This feature will be available soon!\",\n                              });\n                            }}\n                          >\n                            Schedule\n                          </Button>\n                        </div>\n                      </div>\n                    );\n                  })}\n                </div>\n              )}\n              \n              {upcomingMaintenance.length > 0 && (\n                <div className=\"p-4 border-t border-gray-200\">\n                  <Button \n                    variant=\"outline\" \n                    className=\"w-full text-[#007AFF]\"\n                    onClick={() => {\n                      toast({\n                        title: \"View All\",\n                        description: \"Full service calendar coming soon!\",\n                      });\n                    }}\n                  >\n                    View All Upcoming Services\n                  </Button>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"text-xl font-bold font-header\">Maintenance Schedule</CardTitle>\n            </CardHeader>\n            <CardContent>\n              {motorcycles && motorcycles.length > 0 ? (\n                <>\n                  <div className=\"mb-4\">\n                    <label className=\"block text-sm font-medium mb-1\">Motorcycle</label>\n                    <Select value={selectedMotorcycle === \"all\" ? (motorcycles[0]?.id.toString() || \"\") : selectedMotorcycle}>\n                      <SelectTrigger>\n                        <SelectValue placeholder=\"Select motorcycle\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        {motorcycles.map(motorcycle => (\n                          <SelectItem key={motorcycle.id} value={motorcycle.id.toString()}>\n                            {motorcycle.name || `${motorcycle.make} ${motorcycle.model}`}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  </div>\n                  \n                  <div className=\"space-y-4\">\n                    <div className=\"flex justify-between p-3 bg-gray-50 rounded\">\n                      <div>\n                        <p className=\"font-medium\">Oil Change</p>\n                        <p className=\"text-xs text-gray-500\">Every 3,000 miles or 6 months</p>\n                      </div>\n                      <div className=\"text-right\">\n                        <p className=\"text-[#FF3B30] text-sm\">Due soon</p>\n                        <p className=\"text-xs\">233 miles left</p>\n                      </div>\n                    </div>\n\n                    <div className=\"flex justify-between p-3 bg-gray-50 rounded\">\n                      <div>\n                        <p className=\"font-medium\">Air Filter</p>\n                        <p className=\"text-xs text-gray-500\">Every 12,000 miles</p>\n                      </div>\n                      <div className=\"text-right\">\n                        <p className=\"text-green-600 text-sm\">Good</p>\n                        <p className=\"text-xs\">9,233 miles left</p>\n                      </div>\n                    </div>\n\n                    <div className=\"flex justify-between p-3 bg-gray-50 rounded\">\n                      <div>\n                        <p className=\"font-medium\">Valve Check</p>\n                        <p className=\"text-xs text-gray-500\">Every 15,000 miles</p>\n                      </div>\n                      <div className=\"text-right\">\n                        <p className=\"text-green-600 text-sm\">Good</p>\n                        <p className=\"text-xs\">12,233 miles left</p>\n                      </div>\n                    </div>\n                  </div>\n                  \n                  <Separator className=\"my-4\" />\n                  \n                  <Button \n                    className=\"w-full bg-[#1A1A1A] hover:bg-[#1A1A1A]/90 text-white\"\n                    onClick={() => {\n                      toast({\n                        title: \"Customize Schedule\",\n                        description: \"This feature will be available soon!\",\n                      });\n                    }}\n                  >\n                    Customize Maintenance Schedule\n                  </Button>\n                </>\n              ) : (\n                <div className=\"flex flex-col items-center justify-center py-8\">\n                  <Bike className=\"h-12 w-12 text-gray-300 mb-4\" />\n                  <h3 className=\"text-lg font-medium mb-2\">No Motorcycles</h3>\n                  <p className=\"text-gray-500 text-center mb-4\">\n                    Add a motorcycle to manage its maintenance schedule\n                  </p>\n                  <Link href=\"/garage\">\n                    <Button \n                      className=\"bg-[#FF3B30] hover:bg-[#FF3B30]/90 text-white\"\n                    >\n                      Go to Garage\n                    </Button>\n                  </Link>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n      \n      {/* Service Dialog */}\n      {selectedMotorcycleId && (\n        <ServiceDialog \n          open={isServiceDialogOpen}\n          onOpenChange={setIsServiceDialogOpen}\n          motorcycleId={selectedMotorcycleId}\n          onSuccess={() => {\n            queryClient.invalidateQueries({ queryKey: ['/api/motorcycles/maintenance-all'] });\n          }}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default Maintenance;\n","size_bytes":28320},"client/src/pages/MaintenanceScheduler.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Calendar } from \"@/components/ui/calendar\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { motion } from \"framer-motion\";\nimport { CalendarDays, Wrench, FileText, Save } from \"lucide-react\";\n\nconst MaintenanceScheduler = () => {\n  const [selectedDate, setSelectedDate] = useState<Date | undefined>(new Date());\n  const [maintenanceForm, setMaintenanceForm] = useState({\n    type: \"\",\n    description: \"\",\n    cost: \"\",\n    mileage: \"\",\n    notes: \"\"\n  });\n  const { toast } = useToast();\n\n  const handleScheduleMaintenance = () => {\n    if (!selectedDate || !maintenanceForm.type) {\n      toast({\n        title: \"Missing Information\",\n        description: \"Please select a date and maintenance type.\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    // Save to localStorage\n    const existingMaintenance = JSON.parse(localStorage.getItem('maintenanceSchedule') || '[]');\n    const newMaintenance = {\n      id: Date.now(),\n      date: selectedDate.toISOString(),\n      ...maintenanceForm,\n      createdAt: new Date().toISOString()\n    };\n    \n    existingMaintenance.push(newMaintenance);\n    localStorage.setItem('maintenanceSchedule', JSON.stringify(existingMaintenance));\n\n    toast({\n      title: \"Maintenance Scheduled\",\n      description: `${maintenanceForm.type} scheduled for ${selectedDate.toLocaleDateString()}`,\n    });\n\n    // Reset form\n    setMaintenanceForm({\n      type: \"\",\n      description: \"\",\n      cost: \"\",\n      mileage: \"\",\n      notes: \"\"\n    });\n  };\n\n  const maintenanceTypes = [\n    \"Oil Change\",\n    \"Tire Replacement\",\n    \"Brake Service\",\n    \"Chain Maintenance\",\n    \"Filter Replacement\",\n    \"Spark Plug Replacement\",\n    \"Coolant Service\",\n    \"General Inspection\",\n    \"Custom Service\"\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"container mx-auto px-4 py-8\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.5 }}\n        >\n          <div className=\"flex items-center gap-3 mb-6\">\n            <div className=\"p-3 bg-[#FF3B30] rounded-full\">\n              <Wrench className=\"h-6 w-6 text-white\" />\n            </div>\n            <div>\n              <h1 className=\"text-3xl font-bold text-[#1A1A1A]\">Maintenance Scheduler</h1>\n              <p className=\"text-gray-600\">Schedule and track your motorcycle maintenance</p>\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n            {/* Calendar Section */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <CalendarDays className=\"h-5 w-5\" />\n                  Select Date\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <Calendar\n                  mode=\"single\"\n                  selected={selectedDate}\n                  onSelect={setSelectedDate}\n                  className=\"rounded-md border\"\n                />\n              </CardContent>\n            </Card>\n\n            {/* Maintenance Form */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <FileText className=\"h-5 w-5\" />\n                  Maintenance Details\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div>\n                  <Label htmlFor=\"maintenance-type\">Maintenance Type</Label>\n                  <select\n                    id=\"maintenance-type\"\n                    className=\"flex h-10 w-full rounded-full border border-input bg-background px-3 py-2 text-sm\"\n                    value={maintenanceForm.type}\n                    onChange={(e) => setMaintenanceForm({...maintenanceForm, type: e.target.value})}\n                  >\n                    <option value=\"\">Select maintenance type</option>\n                    {maintenanceTypes.map((type) => (\n                      <option key={type} value={type}>{type}</option>\n                    ))}\n                  </select>\n                </div>\n\n                <div>\n                  <Label htmlFor=\"description\">Description</Label>\n                  <Textarea\n                    id=\"description\"\n                    placeholder=\"Describe the maintenance work needed...\"\n                    className=\"rounded-lg\"\n                    value={maintenanceForm.description}\n                    onChange={(e) => setMaintenanceForm({...maintenanceForm, description: e.target.value})}\n                  />\n                </div>\n\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <Label htmlFor=\"cost\">Estimated Cost</Label>\n                    <Input\n                      id=\"cost\"\n                      type=\"number\"\n                      placeholder=\"0.00\"\n                      className=\"rounded-full\"\n                      value={maintenanceForm.cost}\n                      onChange={(e) => setMaintenanceForm({...maintenanceForm, cost: e.target.value})}\n                    />\n                  </div>\n                  <div>\n                    <Label htmlFor=\"mileage\">Current Mileage</Label>\n                    <Input\n                      id=\"mileage\"\n                      type=\"number\"\n                      placeholder=\"12000\"\n                      className=\"rounded-full\"\n                      value={maintenanceForm.mileage}\n                      onChange={(e) => setMaintenanceForm({...maintenanceForm, mileage: e.target.value})}\n                    />\n                  </div>\n                </div>\n\n                <div>\n                  <Label htmlFor=\"notes\">Additional Notes</Label>\n                  <Textarea\n                    id=\"notes\"\n                    placeholder=\"Any additional notes or reminders...\"\n                    className=\"rounded-lg\"\n                    value={maintenanceForm.notes}\n                    onChange={(e) => setMaintenanceForm({...maintenanceForm, notes: e.target.value})}\n                  />\n                </div>\n\n                <Button \n                  onClick={handleScheduleMaintenance}\n                  className=\"w-full bg-[#FF3B30] hover:bg-[#FF3B30]/90 text-white rounded-full\"\n                >\n                  <Save className=\"mr-2 h-4 w-4\" />\n                  Schedule Maintenance\n                </Button>\n              </CardContent>\n            </Card>\n          </div>\n\n          {/* Recent Maintenance */}\n          <Card className=\"mt-8\">\n            <CardHeader>\n              <CardTitle>Recent Maintenance</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-center py-8 text-gray-500\">\n                <Wrench className=\"h-12 w-12 mx-auto mb-4 text-gray-300\" />\n                <p>No maintenance records found</p>\n                <p className=\"text-sm\">Schedule your first maintenance above</p>\n              </div>\n            </CardContent>\n          </Card>\n        </motion.div>\n      </div>\n    </div>\n  );\n};\n\nexport default MaintenanceScheduler;","size_bytes":7468},"client/src/pages/NewGarage.tsx":{"content":"import { useState, useRef, useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { Motorcycle } from \"@shared/schema\";\nimport AddMotorcycleDialog from \"@/components/ui/motorcycle/AddMotorcycleDialog\";\nimport ExpandableMotorcycleCard from \"@/components/ui/motorcycle/ExpandableMotorcycleCard\";\nimport DocumentVault from \"@/components/ui/DocumentVault\";\nimport { DocumentPreview } from \"@/components/ui/DocumentPreview\";\n\n\nimport { Plus, MoreVertical, Wrench, MapPin, Calendar, Gauge, TrendingUp, Camera, User, FileText, Settings, Eye, ChevronDown, ChevronUp, Upload } from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { getUserRank, getNextRank, getKmToNextRank, getTierColor, bikerRanks, getProgressRanks } from \"@/utils/ranking\";\nimport PartsCarousel from \"@/components/ui/PartsCarousel\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { RankDetailsModal } from \"@/components/ui/RankDetailsModal\";\nimport { \n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\n\n// Modern motorcycle card component based on the mockup\nconst ModernMotorcycleCard = ({ motorcycle, onEdit, onDelete }: {\n  motorcycle: Motorcycle;\n  onEdit: (motorcycle: Motorcycle) => void;\n  onDelete: (id: number) => void;\n}) => {\n  // Calculate next service date (mock data for now)\n  const nextServiceDate = new Date();\n  nextServiceDate.setDate(nextServiceDate.getDate() + 30);\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      whileHover={{ y: -4 }}\n      transition={{ duration: 0.2 }}\n    >\n      <Card className=\"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 border-0 overflow-hidden\">\n        <CardContent className=\"p-6\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <div className=\"flex items-center gap-4\">\n              <div className=\"w-16 h-16 bg-black rounded-full flex items-center justify-center\">\n                {/* Motorcycle silhouette icon */}\n                <svg viewBox=\"0 0 100 100\" className=\"w-10 h-10 text-white fill-current\">\n                  <path d=\"M15 70 C15 60, 25 50, 35 50 L65 50 C75 50, 85 60, 85 70 C85 80, 75 90, 65 90 L35 90 C25 90, 15 80, 15 70 Z M30 40 L70 40 C75 40, 80 35, 80 30 C80 25, 75 20, 70 20 L30 20 C25 20, 20 25, 20 30 C20 35, 25 40, 30 40 Z M45 30 L55 30 L50 40 Z\" />\n                </svg>\n              </div>\n              <div>\n                <h3 className=\"font-bold text-lg text-[#1A1A1A]\">{motorcycle.name}</h3>\n                <p className=\"text-gray-500 text-sm\">{motorcycle.make} {motorcycle.model}</p>\n              </div>\n            </div>\n\n            <DropdownMenu>\n              <DropdownMenuTrigger asChild>\n                <Button variant=\"ghost\" size=\"sm\" className=\"h-8 w-8 p-0\">\n                  <MoreVertical className=\"h-4 w-4\" />\n                </Button>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent align=\"end\">\n                <DropdownMenuItem onClick={() => onEdit(motorcycle)}>\n                  <Wrench className=\"mr-2 h-4 w-4\" />\n                  Edit Details\n                </DropdownMenuItem>\n                <DropdownMenuItem \n                  onClick={() => onDelete(motorcycle.id)}\n                  className=\"text-red-600\"\n                >\n                  <span className=\"mr-2\">üóëÔ∏è</span>\n                  Delete\n                </DropdownMenuItem>\n              </DropdownMenuContent>\n            </DropdownMenu>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-6 mb-6\">\n            <div className=\"text-center\">\n              <p className=\"text-gray-500 text-sm mb-1\">Total Miles</p>\n              <p className=\"text-2xl font-bold text-[#1A1A1A]\">\n                {motorcycle.mileage?.toLocaleString() || \"12,000\"}\n              </p>\n              <p className=\"text-xs text-gray-500\">MI</p>\n            </div>\n            <div className=\"text-center\">\n              <p className=\"text-gray-500 text-sm mb-1\">Next Service</p>\n              <p className=\"text-lg font-semibold text-[#1A1A1A]\">\n                {nextServiceDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}\n              </p>\n              <p className=\"text-xs text-gray-500\">\n                {nextServiceDate.toLocaleDateString('en-US', { weekday: 'short', year: 'numeric' })}\n              </p>\n            </div>\n          </div>\n\n          <div className=\"flex gap-2\">\n            <Button \n              className=\"flex-1 bg-[#FF3B30] hover:bg-[#FF3B30]/90 text-white rounded-full\"\n              onClick={() => {\n                // Navigate to maintenance scheduler\n                window.location.href = `/maintenance`;\n              }}\n            >\n              Service\n            </Button>\n            <Button \n              className=\"flex-1 bg-[#FF3B30] hover:bg-[#FF3B30]/90 text-white rounded-full\"\n              onClick={async () => {\n                // Open mileage update dialog\n                const newMileage = prompt(`Current mileage: ${motorcycle.mileage || 0}. Enter new mileage:`);\n                if (newMileage && !isNaN(Number(newMileage))) {\n                  try {\n                    // Update motorcycle mileage via API\n                    await fetch(`/api/motorcycles/${motorcycle.id}`, {\n                      method: 'PATCH',\n                      headers: { 'Content-Type': 'application/json' },\n                      body: JSON.stringify({ mileage: Number(newMileage) })\n                    });\n\n                    // Refresh the page to show updated mileage\n                    window.location.reload();\n                  } catch (error) {\n                    alert('Failed to update mileage. Please try again.');\n                  }\n                }\n              }}\n            >\n              New Mile\n            </Button>\n            <Button \n              className=\"flex-1 bg-[#FF3B30] hover:bg-[#FF3B30]/90 text-white rounded-full\"\n              onClick={() => {\n                // Navigate to motorcycle detail page\n                window.location.href = `/garage/${motorcycle.id}`;\n              }}\n            >\n              Detail\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n    </motion.div>\n  );\n};\n\nconst NewGarage = () => {\n  const [isAddDialogOpen, setIsAddDialogOpen] = useState(false);\n  const [motorcycleToDelete, setMotorcycleToDelete] = useState<number | null>(null);\n\n  const [expandedMotorcycleId, setExpandedMotorcycleId] = useState<number | null>(null);\n  const [currentCarouselIndex, setCurrentCarouselIndex] = useState(0);\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const { user } = useAuth();\n  const [profilePicture, setProfilePicture] = useState<string | null>(user?.avatarUrl || null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const profileInputRef = useRef<HTMLInputElement>(null);\n\n  // SOS functionality state\n  const [sosActive, setSosActive] = useState(false);\n  const [sosProgress, setSosProgress] = useState(0);\n  const sosTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n  const sosIntervalRef = useRef<NodeJS.Timeout | null>(null);\n  const sosStartPosition = useRef<{ x: number; y: number } | null>(null);\n  const sosMovementThreshold = 10; // pixels - if user moves more than this, cancel SOS\n\n  // Dynamic button color state\n  const [isOverFooter, setIsOverFooter] = useState(false);\n  const footerRef = useRef<HTMLDivElement>(null);\n\n  // Vault functionality states\n  const [isVaultOpen, setIsVaultOpen] = useState(false);\n  const [buttonPosition, setButtonPosition] = useState(0);\n  const [isDragging, setIsDragging] = useState(false);\n  const [vaultTextOpacity, setVaultTextOpacity] = useState(0);\n  const buttonRef = useRef<HTMLDivElement>(null);\n  const [documents, setDocuments] = useState<any[]>([]);\n  const [selectedDocumentType, setSelectedDocumentType] = useState<string | null>(null);\n  const [isDocumentPreviewOpen, setIsDocumentPreviewOpen] = useState(false);\n\n\n\n  const { data: motorcycles, isLoading, error } = useQuery<Motorcycle[]>({\n    queryKey: ['/api/motorcycles'],\n  });\n\n  // Cleanup SOS timers on unmount\n  useEffect(() => {\n    return () => {\n      if (sosTimeoutRef.current) {\n        clearTimeout(sosTimeoutRef.current);\n      }\n      if (sosIntervalRef.current) {\n        clearInterval(sosIntervalRef.current);\n      }\n    };\n  }, []);\n\n  // Add global event listeners for vault functionality\n  useEffect(() => {\n    const handleGlobalMouseMove = (e: MouseEvent) => {\n      if (!isDragging) return;\n\n      const containerWidth = 200; // Maximum slide distance\n      const deltaX = Math.min(0, Math.max(-containerWidth, e.clientX - window.innerWidth + 100));\n      setButtonPosition(deltaX);\n\n      // Calculate vault text opacity based on position\n      const opacity = Math.abs(deltaX) / containerWidth;\n      setVaultTextOpacity(Math.min(opacity, 1));\n    };\n\n    const handleGlobalTouchMove = (e: TouchEvent) => {\n      if (!isDragging) return;\n\n      const touch = e.touches[0];\n      const containerWidth = 200; // Maximum slide distance\n      const deltaX = Math.min(0, Math.max(-containerWidth, touch.clientX - window.innerWidth + 100));\n      setButtonPosition(deltaX);\n\n      // Calculate vault text opacity based on position\n      const opacity = Math.abs(deltaX) / containerWidth;\n      setVaultTextOpacity(Math.min(opacity, 1));\n    };\n\n    const handleGlobalEnd = () => {\n      if (!isDragging) return;\n\n      setIsDragging(false);\n\n      // If slid more than 80px, open vault\n      if (Math.abs(buttonPosition) > 80) {\n        setIsVaultOpen(true);\n      }\n\n      // Reset position\n      setButtonPosition(0);\n      setVaultTextOpacity(0);\n    };\n\n    if (isDragging) {\n      document.addEventListener('mousemove', handleGlobalMouseMove);\n      document.addEventListener('touchmove', handleGlobalTouchMove);\n      document.addEventListener('mouseup', handleGlobalEnd);\n      document.addEventListener('touchend', handleGlobalEnd);\n    }\n\n    return () => {\n      document.removeEventListener('mousemove', handleGlobalMouseMove);\n      document.removeEventListener('touchmove', handleGlobalTouchMove);\n      document.removeEventListener('mouseup', handleGlobalEnd);\n      document.removeEventListener('touchend', handleGlobalEnd);\n    };\n  }, [isDragging, buttonPosition]);\n\n  // Dynamic button color detection\n  useEffect(() => {\n    const checkButtonPosition = () => {\n      // Look for existing footer (likely with black background)\n      const footerElement = document.querySelector('footer') || \n                          document.querySelector('[class*=\"footer\"]') ||\n                          document.querySelector('[style*=\"background-color: rgb(0, 0, 0)\"]') ||\n                          document.querySelector('[class*=\"bg-black\"]');\n\n      if (!footerElement) {\n        // If no footer found, check if we're near bottom of page\n        const documentHeight = document.documentElement.scrollHeight;\n        const windowHeight = window.innerHeight;\n        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n        const distanceFromBottom = documentHeight - (scrollTop + windowHeight);\n\n        // Consider we're over \"footer area\" if within 200px of bottom\n        setIsOverFooter(distanceFromBottom < 200);\n        return;\n      }\n\n      const footerRect = footerElement.getBoundingClientRect();\n      const windowHeight = window.innerHeight;\n      const buttonBottomPosition = windowHeight - 80; // Button is 80px from bottom\n\n      // Check if button would be over footer area\n      const isButtonOverFooter = buttonBottomPosition > footerRect.top && footerRect.top < windowHeight;\n      setIsOverFooter(isButtonOverFooter);\n    };\n\n    // Check on mount and scroll\n    checkButtonPosition();\n    window.addEventListener('scroll', checkButtonPosition);\n    window.addEventListener('resize', checkButtonPosition);\n\n    return () => {\n      window.removeEventListener('scroll', checkButtonPosition);\n      window.removeEventListener('resize', checkButtonPosition);\n    };\n  }, [motorcycles]);\n\n  // Calculate total kilometers for ranking (convert from miles to km)\n  const totalKilometers = motorcycles?.reduce((sum: number, bike: Motorcycle) => sum + (bike.mileage ? Math.round(bike.mileage * 1.60934) : 0), 0) || 0;\n  const currentRank = getUserRank(totalKilometers);\n  const nextRank = getNextRank(totalKilometers);\n  const kmToNext = getKmToNextRank(totalKilometers);\n  const progressRanks = getProgressRanks(totalKilometers);\n\n  const handleAddMotorcycle = () => {\n    setIsAddDialogOpen(true);\n  };\n\n  // Vault functionality handlers\n  const handleMouseDown = (e: React.MouseEvent) => {\n    setIsDragging(true);\n    e.preventDefault();\n  };\n\n  const handleTouchStart = (e: React.TouchEvent) => {\n    setIsDragging(true);\n    e.preventDefault();\n  };\n\n  const handleVaultClose = () => {\n    setIsVaultOpen(false);\n  };\n\n  // Document button handlers\n  const handleDocumentButtonClick = (docType: string) => {\n    const docOfType = documents.find(doc => doc.type === docType);\n    if (docOfType) {\n      // Open document preview\n      setSelectedDocumentType(docType);\n      setIsDocumentPreviewOpen(true);\n    } else {\n      // Open vault with filter for this document type\n      setSelectedDocumentType(docType);\n      setIsVaultOpen(true);\n    }\n  };\n\n  const handleDocumentPreviewClose = () => {\n    setIsDocumentPreviewOpen(false);\n    setSelectedDocumentType(null);\n  };\n\n  // Get document by type\n  const getDocumentByType = (type: string) => {\n    return documents.find(doc => doc.type === type);\n  };\n\n  // Check if document type has uploaded documents\n  const hasDocumentOfType = (type: string) => {\n    return documents.some(doc => doc.type === type);\n  };\n\n  const handleEditMotorcycle = (motorcycle: Motorcycle) => {\n    toast({\n      title: \"Coming Soon\",\n      description: \"Motorcycle editing feature will be available soon!\",\n    });\n  };\n\n  const handleToggleExpand = (motorcycleId: number) => {\n    setExpandedMotorcycleId(expandedMotorcycleId === motorcycleId ? null : motorcycleId);\n  };\n\n  const handleDeleteMotorcycle = async () => {\n    if (!motorcycleToDelete) return;\n\n    try {\n      await apiRequest(\"DELETE\", `/api/motorcycles/${motorcycleToDelete}`, undefined);\n      queryClient.invalidateQueries({ queryKey: ['/api/motorcycles'] });\n\n      toast({\n        title: \"Motorcycle deleted\",\n        description: \"Your motorcycle has been removed from the garage.\",\n      });\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to delete motorcycle. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setMotorcycleToDelete(null);\n    }\n  };\n\n  // SOS functionality handlers\n  const startSOS = (clientX: number, clientY: number) => {\n    if (sosActive) return;\n\n    // Record starting position\n    sosStartPosition.current = { x: clientX, y: clientY };\n\n    // Add 800ms delay to prevent accidental triggers during normal interactions\n    sosTimeoutRef.current = setTimeout(() => {\n      // Only start if we haven't moved too much\n      if (sosStartPosition.current) {\n        setSosActive(true);\n        setSosProgress(0);\n\n        // Haptic feedback - vibrate if available\n        if (navigator.vibrate) {\n          navigator.vibrate(50);\n        }\n\n        // Start progress animation\n        sosIntervalRef.current = setInterval(() => {\n          setSosProgress(prev => {\n            const next = prev + 2; // 2% every 100ms = 5 seconds total\n            if (next >= 100) {\n              // Only trigger SOS when progress reaches 100%\n              clearInterval(sosIntervalRef.current!);\n              triggerSOS();\n              return 100;\n            }\n            return next;\n          });\n        }, 100);\n      }\n    }, 800);\n  };\n\n  const checkSOSMovement = (clientX: number, clientY: number) => {\n    if (!sosStartPosition.current) return;\n\n    const deltaX = Math.abs(clientX - sosStartPosition.current.x);\n    const deltaY = Math.abs(clientY - sosStartPosition.current.y);\n\n    // If user moved too much, cancel SOS\n    if (deltaX > sosMovementThreshold || deltaY > sosMovementThreshold) {\n      cancelSOS();\n    }\n  };\n\n  const cancelSOS = () => {\n    setSosActive(false);\n    setSosProgress(0);\n    sosStartPosition.current = null;\n\n    if (sosTimeoutRef.current) {\n      clearTimeout(sosTimeoutRef.current);\n      sosTimeoutRef.current = null;\n    }\n\n    if (sosIntervalRef.current) {\n      clearInterval(sosIntervalRef.current);\n      sosIntervalRef.current = null;\n    }\n  };\n\n  const triggerSOS = () => {\n    // Stronger haptic feedback for SOS activation\n    if (navigator.vibrate) {\n      navigator.vibrate([200, 100, 200, 100, 200]);\n    }\n\n    // Show SOS activated notification\n    toast({\n      title: \"üö® SOS Activated\",\n      description: \"Emergency alert has been triggered. Help is on the way!\",\n      variant: \"destructive\",\n    });\n\n    // Reset state\n    cancelSOS();\n\n    // Here you would typically send the SOS signal to emergency services\n    console.log(\"SOS ACTIVATED - Emergency services notified\");\n  };\n\n\n\n  const handleProfilePictureUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      if (!file.type.startsWith('image/')) {\n        toast({\n          title: \"Error\",\n          description: \"Please select an image file\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n\n      if (file.size > 5 * 1024 * 1024) {\n        toast({\n          title: \"Error\", \n          description: \"File size must be less than 5MB\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        setProfilePicture(e.target?.result as string);\n        toast({\n          title: \"Profile Picture Updated\",\n          description: \"Your profile picture has been updated.\",\n        });\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-[#FF3B30]\"></div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"text-4xl mb-4\">‚ö†Ô∏è</div>\n          <h2 className=\"text-xl font-semibold mb-2\">Something went wrong</h2>\n          <p className=\"text-gray-600\">Failed to load your motorcycles. Please try again.</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"container mx-auto px-4 py-8\">\n        {/* Profile Section */}\n        <div className=\"flex flex-col items-center mb-8\">\n          <Card className=\"bg-white rounded-3xl shadow-lg hover:shadow-xl transition-all duration-300 border-0 overflow-hidden w-full max-w-7xl mb-4\">\n            <CardContent \n              className=\"p-4 sm:p-6 lg:p-8 relative\"\n              onMouseDown={(e) => {\n                e.preventDefault();\n                startSOS(e.clientX, e.clientY);\n              }}\n              onMouseMove={(e) => {\n                if (sosStartPosition.current) {\n                  checkSOSMovement(e.clientX, e.clientY);\n                }\n              }}\n              onMouseUp={cancelSOS}\n              onMouseLeave={cancelSOS}\n              onTouchStart={(e) => {\n                e.preventDefault();\n                const touch = e.touches[0];\n                startSOS(touch.clientX, touch.clientY);\n              }}\n              onTouchMove={(e) => {\n                if (sosStartPosition.current && e.touches[0]) {\n                  const touch = e.touches[0];\n                  checkSOSMovement(touch.clientX, touch.clientY);\n                }\n              }}\n              onTouchEnd={cancelSOS}\n              style={{\n                userSelect: 'none',\n                WebkitUserSelect: 'none',\n                msUserSelect: 'none',\n              }}\n            >\n              {/* SOS Gradient Overlay - Center to Border */}\n              {sosActive && (\n                <div \n                  className=\"absolute inset-0 pointer-events-none rounded-3xl transition-all duration-200\"\n                  style={{\n                    background: `radial-gradient(ellipse at center, \n                      rgba(255, 255, 255, 0) ${50 - (sosProgress / 100 * 45)}%, \n                      rgba(255, 59, 48, ${sosProgress / 100 * 0.3}) ${55 - (sosProgress / 100 * 45)}%,\n                      rgba(255, 59, 48, ${sosProgress / 100 * 0.6}) ${70 - (sosProgress / 100 * 35)}%,\n                      rgba(255, 59, 48, ${sosProgress / 100 * 0.8}) ${85 - (sosProgress / 100 * 25)}%,\n                      rgba(255, 59, 48, ${sosProgress / 100 * 0.9}) 100%)`,\n                    border: `2px solid rgba(255, 59, 48, ${sosProgress / 100 * 0.8})`,\n                  }}\n                />\n              )}\n              {/* SNS-Style Profile Layout */}\n              <div className=\"flex flex-col space-y-6\">\n                {/* Header Row - Profile Picture + Action Buttons */}\n                <div className=\"flex items-center justify-between\">\n                  {/* Left side - empty for balance */}\n                  <div className=\"w-16\"></div>\n\n                  {/* Center - Large Profile Picture */}\n                  <div className=\"relative\">\n                    <div className=\"relative w-20 h-20 sm:w-24 sm:h-24 rounded-full overflow-hidden cursor-pointer group bg-gradient-to-br from-[#FF3B30] to-[#FF6B6B] flex items-center justify-center shadow-lg ring-4 ring-white\"\n                        onClick={() => profileInputRef.current?.click()}>\n                        {profilePicture ? (\n                            <img \n                                src={profilePicture} \n                                alt=\"Profile\" \n                                className=\"w-full h-full object-cover\"\n                            />\n                        ) : (\n                            <div className=\"text-white font-bold text-2xl sm:text-3xl\">\n                                {user?.fullName?.[0] || user?.username?.[0] || 'U'}\n                            </div>\n                        )}\n                        <div className=\"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-full\">\n                            <Camera className=\"w-6 h-6 text-white\" />\n                        </div>\n                    </div>\n                    <input\n                        ref={profileInputRef}\n                        type=\"file\"\n                        accept=\"image/*\"\n                        onChange={handleProfilePictureUpload}\n                        className=\"hidden\"\n                    />\n                  </div>\n\n                  {/* Right side - Rank Badge */}\n                  <RankDetailsModal totalKilometers={totalKilometers}>\n                    <div className=\"relative cursor-pointer transition-transform hover:scale-105\">\n                      <div className={`w-14 h-14 sm:w-16 sm:h-16 ${getTierColor(currentRank.tier)} rounded-full flex items-center justify-center shadow-lg ring-2 ring-white`}>\n                        <span className=\"text-white text-xl sm:text-2xl font-bold\">\n                          {currentRank.patch}\n                        </span>\n                      </div>\n                      {/* Tier indicator */}\n                      <div className=\"absolute -top-1 -right-1 w-4 h-4 bg-white rounded-full border-2 border-gray-200 flex items-center justify-center\">\n                        <div className={`w-2 h-2 ${getTierColor(currentRank.tier)} rounded-full`}></div>\n                      </div>\n                    </div>\n                  </RankDetailsModal>\n                </div>\n\n                {/* User Info - Centered */}\n                <div className=\"text-center space-y-4\">\n                  <div className=\"space-y-2\">\n                    <h1 className=\"font-bold text-2xl sm:text-3xl text-[#1A1A1A]\">\n                      {user?.fullName || user?.username || \"User\"}\n                    </h1>\n                    <div className=\"flex items-center justify-center gap-2\">\n                      <span className=\"text-gray-600 text-sm font-medium\">{currentRank.name}</span>\n                      <span className=\"text-gray-400\">‚Ä¢</span>\n                      <span className=\"text-gray-500 text-sm\">{currentRank.tier}</span>\n                    </div>\n                  </div>\n\n                  {/* Document Quick Access Buttons */}\n                  <div className=\"flex items-center justify-center gap-3 px-4\">\n                    {(() => {\n                      const buttons = [\n                        { key: 'insurance', icon: 'üõ°Ô∏è', title: 'Insurance' },\n                        { key: 'license', icon: 'üìã', title: 'License', isCenter: true },\n                        { key: 'registration', icon: 'üìã', title: 'Registration' }\n                      ];\n\n                      return buttons.map((button) => {\n                        const isCenter = button.isCenter;\n                        const document = getDocumentByType(button.key);\n\n                        // Determine border color based on document expiry\n                        const getBorderColor = () => {\n                          if (!document) return '';\n                          if (!document.expiryDate) return 'border-green-500';\n\n                          const daysUntilExpiry = Math.ceil((document.expiryDate.getTime() - new Date().getTime()) / (1000 * 60 * 60 * 24));\n                          if (daysUntilExpiry <= 0) return 'border-red-500'; // Expired\n                          if (daysUntilExpiry <= 30) return 'border-yellow-500'; // Expiring soon\n                          return 'border-green-500'; // All good\n                        };\n\n                        return (\n                          <button \n                            key={button.key}\n                            onClick={() => handleDocumentButtonClick(button.key)}\n                            className={`relative ${\n                              isCenter \n                                ? 'px-6 py-3 bg-[#1A1A1A] hover:bg-[#1A1A1A]/90' \n                                : 'w-12 h-12 bg-[#1A1A1A] hover:bg-[#1A1A1A]/90'\n                            } rounded-full flex items-center justify-center shadow-lg transition-all duration-200 hover:scale-105 ${\n                              document ? `border-2 ${getBorderColor()}` : ''\n                            }`}\n                            style={{\n                              borderWidth: document ? '1px' : '0',\n                              borderStyle: document ? 'solid' : 'none',\n                              borderColor: document ? (\n                                !document.expiryDate ? 'rgb(34 197 94)' : // green-500\n                                Math.ceil((document.expiryDate.getTime() - new Date().getTime()) / (1000 * 60 * 60 * 24)) <= 0 ? 'rgb(239 68 68)' : // red-500\n                                Math.ceil((document.expiryDate.getTime() - new Date().getTime()) / (1000 * 60 * 60 * 24)) <= 30 ? 'rgb(234 179 8)' : // yellow-500\n                                'rgb(34 197 94)' // green-500\n                              ) : 'transparent'\n                            }}\n                          >\n                            {isCenter ? (\n                              <>\n                                <span className=\"text-white text-sm font-medium mr-2\">{button.icon}</span>\n                                <span className=\"text-white text-sm font-medium\">{button.title}</span>\n                              </>\n                            ) : (\n                              <span className=\"text-white text-lg\">{button.icon}</span>\n                            )}\n                          </button>\n                        );\n                      });\n                    })()}\n                  </div>\n                </div>\n\n                {/* Primary Stat and Document Access */}\n                <div className=\"space-y-4\">\n                  {/* Total KM - Primary Stat */}\n                  <div className=\"text-center bg-gradient-to-r from-gray-50 to-gray-100 rounded-2xl p-6\">\n                    <p className=\"text-gray-500 text-sm mb-2 font-medium\">Total Distance</p>\n                    <div className=\"flex items-baseline justify-center gap-2 mb-1\">\n                      <p className=\"text-4xl sm:text-5xl font-bold text-[#1A1A1A]\">\n                        {totalKilometers.toLocaleString()}\n                      </p>\n                      <span className=\"text-lg sm:text-xl font-medium text-gray-400\">KM</span>\n                    </div>\n                  </div>\n\n\n                </div>\n\n                {/* Progress Bar with Enhanced Design */}\n                <div className=\"space-y-4\">\n                  <div className=\"text-center\">\n                    <p className=\"text-sm font-medium text-gray-700 mb-2\">Ranking Progress</p>\n                    {nextRank ? (\n                      <p className=\"text-xs text-gray-500\">\n                        <span className=\"font-medium text-[#FF3B30]\">{kmToNext.toLocaleString()} km</span> to reach <span className=\"font-medium\">{nextRank.name}</span>\n                      </p>\n                    ) : (\n                      <p className=\"text-xs text-green-600 font-medium\">üèÜ Maximum Rank Achieved!</p>\n                    )}\n                  </div>\n\n                  <div className=\"relative bg-gray-200 rounded-full h-3 overflow-hidden\">\n                    {/* Progress fill */}\n                    <div \n                      className=\"absolute top-0 left-0 h-full bg-gradient-to-r from-amber-500 via-orange-500 to-red-500 rounded-full transition-all duration-700 ease-out\"\n                      style={{ \n                        width: `${Math.min((totalKilometers / 300000) * 100, 100)}%` \n                      }}\n                    />\n\n                    {/* Progress rank indicators */}\n                    <div className=\"absolute top-0 left-0 w-full h-full flex items-center justify-between px-2\">\n                      {progressRanks.map((rank, index) => {\n                        const isAchieved = totalKilometers >= rank.minKm;\n                        const isCurrent = currentRank.id === rank.id;\n\n                        return (\n                          <div\n                            key={rank.id}\n                            className={`relative w-3 h-3 rounded-full border transition-all duration-300 ${\n                              isCurrent\n                                ? 'bg-[#FF3B30] border-white shadow-md scale-150 z-10'\n                                : isAchieved\n                                ? 'bg-white border-gray-300 shadow-sm'\n                                : 'bg-gray-300 border-gray-400'\n                            }`}\n                            style={{ \n                              position: 'absolute',\n                              left: `${33.33 * index}%`,\n                              transform: 'translateX(-50%)'\n                            }}\n                            title={`${rank.name} - ${rank.minKm.toLocaleString()} km`}\n                          >\n                            {isCurrent && (\n                              <div className=\"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-[#1A1A1A] text-white px-2 py-1 rounded text-xs whitespace-nowrap z-20\">\n                                {rank.name}\n                              </div>\n                            )}\n                          </div>\n                        );\n                      })}\n                    </div>\n                  </div>\n\n                  {/* Progress labels */}\n                  <div className=\"flex justify-between items-center text-xs text-gray-500\">\n                    <span className=\"font-medium\">{progressRanks[0]?.name || \"Rookie\"}</span>\n                    <span className=\"font-medium\">{progressRanks[2]?.name || \"Apex Nomad\"}</span>\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        {!motorcycles || motorcycles.length === 0 ? (\n          <>\n            <div className=\"text-center py-16 pb-32\">\n              <div className=\"w-20 h-20 sm:w-24 sm:h-24 bg-gray-200 rounded-3xl flex items-center justify-center mx-auto mb-6\">\n                <div className=\"text-3xl sm:text-4xl\">üèçÔ∏è</div>\n              </div>\n              <h2 className=\"text-xl sm:text-2xl font-semibold mb-4 text-[#1A1A1A]\">Your garage is empty</h2>\n              <p className=\"text-gray-600 mb-8 max-w-md mx-auto text-sm sm:text-base\">\n                Add your first motorcycle to start tracking maintenance, mileage, and service schedules\n              </p>\n            </div>\n\n            {/* Floating Add Bike Button with Vault Functionality */}\n            <motion.div\n              ref={buttonRef}\n              className=\"fixed bottom-6 right-6 z-50 group\"\n              initial={{ scale: 0 }}\n              animate={{ \n                scale: 1,\n                x: buttonPosition,\n                transition: { duration: 0.3 }\n              }}\n              whileHover={{ scale: isDragging ? 1 : 1.1 }}\n              whileTap={{ scale: isDragging ? 1 : 0.9 }}\n            >\n              <div className=\"relative\">\n                <Button \n                  onClick={isDragging ? undefined : handleAddMotorcycle}\n                  onMouseDown={handleMouseDown}\n                  onTouchStart={handleTouchStart}\n                  className={`${isOverFooter ? 'bg-[#FF3B30] hover:bg-[#FF3B30]/90' : 'bg-[#1A1A1A] hover:bg-[#1A1A1A]/90'} text-white rounded-full w-14 h-14 sm:w-16 sm:h-16 shadow-lg hover:shadow-xl transition-all duration-300 p-0 cursor-grab ${isDragging ? 'cursor-grabbing' : ''}`}\n                  style={{ touchAction: 'none' }}\n                >\n                  <Plus className=\"h-6 w-6 sm:h-8 sm:w-8\" />\n                </Button>\n              </div>\n            </motion.div>\n          </>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 sm:gap-8 pb-20\">\n            {motorcycles.map((motorcycle) => (\n              <motion.div\n                key={motorcycle.id}\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                whileHover={{ y: -4, scale: 1.02 }}\n                transition={{ duration: 0.2 }}\n              >\n                <Card \n                  className=\"bg-white rounded-3xl shadow-lg hover:shadow-xl transition-all duration-300 border-0 overflow-hidden relative\"\n                >\n                  <CardContent className=\"p-4 sm:p-6 flex flex-col\">\n                    {/* Header Section */}\n                    <div className=\"flex items-start justify-between mb-6\">\n                      <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n                        <div className=\"w-12 h-12 sm:w-14 sm:h-14 bg-black rounded-2xl flex items-center justify-center flex-shrink-0\">\n                          <svg viewBox=\"0 0 100 100\" className=\"w-6 h-6 sm:w-8 sm:h-8 text-white fill-current\">\n                            <path d=\"M15 70 C15 60, 25 50, 35 50 L65 50 C75 50, 85 60, 85 70 C85 80, 75 90, 65 90 L35 90 C25 90, 15 80, 15 70 Z M30 40 L70 40 C75 40, 80 35, 80 30 C80 25, 75 20, 70 20 L30 20 C25 20, 20 25, 20 30 C20 35, 25 40, 30 40 Z M45 30 L55 30 L50 40 Z\" />\n                          </svg>\n                        </div>\n                        <div className=\"min-w-0 flex-1\">\n                          <h3 className=\"font-bold text-base sm:text-lg text-[#1A1A1A] truncate leading-tight\">{motorcycle.name}</h3>\n                          <p className=\"text-gray-500 text-xs sm:text-sm truncate\">{motorcycle.make} {motorcycle.model}</p>\n                        </div>\n                      </div>\n\n                      <div className=\"absolute top-4 right-4\">\n                        <DropdownMenu>\n                          <DropdownMenuTrigger asChild>\n                            <Button \n                              variant=\"ghost\" \n                              size=\"sm\" \n                              className=\"h-8 w-8 p-0 rounded-xl flex-shrink-0 bg-white/80 hover:bg-white shadow-sm\"\n                              onClick={(e) => e.stopPropagation()}\n                            >\n                              <MoreVertical className=\"h-4 w-4\" />\n                            </Button>\n                          </DropdownMenuTrigger>\n                          <DropdownMenuContent align=\"end\">\n                            <DropdownMenuItem \n                              onClick={(e) => {\n                                e.stopPropagation();\n                                handleEditMotorcycle(motorcycle);\n                              }}\n                            >\n                              <Wrench className=\"mr-2 h-4 w-4\" />\n                              Edit Details\n                            </DropdownMenuItem>\n                            <DropdownMenuItem \n                              onClick={(e) => {\n                                e.stopPropagation();\n                                setMotorcycleToDelete(motorcycle.id);\n                              }}\n                              className=\"text-red-600\"\n                            >\n                              <span className=\"mr-2\">üóëÔ∏è</span>\n                              Delete\n                            </DropdownMenuItem>\n                          </DropdownMenuContent>\n                        </DropdownMenu>\n                      </div>\n                    </div>\n\n                    {/* Stats Section */}\n                    <div className=\"grid grid-cols-2 gap-3 sm:gap-4 mb-4 flex-1\">\n                      <div className=\"text-center bg-gray-50 rounded-2xl p-3 sm:p-4\">\n                        <p className=\"text-gray-500 text-xs mb-1\">Total KM</p>\n                        <p className=\"text-lg sm:text-xl font-bold text-[#1A1A1A]\">\n                          {motorcycle.mileage ? Math.round(motorcycle.mileage * 1.60934).toLocaleString() : \"0\"}\n                        </p>\n                        <p className=\"text-gray-400 text-xs\">KM</p>\n                      </div>\n                      <div className=\"text-center bg-gray-50 rounded-2xl p-3 sm:p-4\">\n                        <p className=\"text-gray-500 text-xs mb-1\">Next Service</p>\n                        <p className=\"text-sm sm:text-base font-semibold text-[#FF3B30]\">\n                          Soon\n                        </p>\n                        <p className=\"text-gray-400 text-xs\">Due</p>\n                      </div>\n                    </div>\n\n                    {/* Action Buttons */}\n                    <div className=\"grid grid-cols-2 gap-2 sm:gap-3\">\n                      <Button \n                        size=\"sm\"\n                        className=\"bg-[#FF3B30] hover:bg-[#FF3B30]/90 text-white rounded-xl py-2 text-xs sm:text-sm font-medium\"\n                        onClick={() => window.location.href = `/maintenance`}\n                      >\n                        <Wrench className=\"w-3 h-3 sm:w-4 sm:h-4 mr-1\" />\n                        Service\n                      </Button>\n                      <Button \n                        size=\"sm\"\n                        variant=\"outline\" \n                        className=\"border-[#FF3B30] text-[#FF3B30] hover:bg-[#FF3B30] hover:text-white rounded-xl py-2 text-xs sm:text-sm font-medium\"\n                        onClick={async () => {\n                          const currentKm = motorcycle.mileage ? Math.round(motorcycle.mileage * 1.60934) : 0;\n                          const newKilometers = prompt(`Current kilometers: ${currentKm}. Enter new kilometers:`);\n                          if (newKilometers && !isNaN(Number(newKilometers))) {\n                            try {\n                              // Convert KM back to miles for storage\n                              const milesValue = Math.round(Number(newKilometers) / 1.60934);\n                              await apiRequest(\"PUT\", `/api/motorcycles/${motorcycle.id}`, { \n                                ...motorcycle, \n                                mileage: milesValue \n                              });\n                              // Invalidate queries to refresh data without page reload\n                              queryClient.invalidateQueries({ queryKey: ['/api/motorcycles'] });\n                              toast({\n                                title: \"Kilometers Updated\",\n                                description: `Updated kilometers to ${Number(newKilometers).toLocaleString()} km`,\n                              });\n                            } catch (error) {\n                              toast({\n                                title: \"Error\",\n                                description: \"Failed to update kilometers. Please try again.\",\n                                variant: \"destructive\",\n                              });\n                            }\n                          }\n                        }}\n                      >\n                        <Gauge className=\"w-3 h-3 sm:w-4 sm:h-4 mr-1\" />\n                        Update KM\n                      </Button>\n                    </div>\n\n                    {/* Centered Arrow Button - 50% hanging outside card */}\n                    <div className=\"relative\">\n                      <div className=\"absolute left-1/2 transform -translate-x-1/2 -bottom-5 z-10\">\n                        <Button\n                          variant=\"default\"\n                          size=\"sm\"\n                          className=\"h-10 w-10 p-0 rounded-full bg-white hover:bg-gray-50 border-2 border-gray-200 shadow-md transition-all duration-200 hover:shadow-lg\"\n                          onClick={() => handleToggleExpand(motorcycle.id)}\n                        >\n                          {expandedMotorcycleId === motorcycle.id ? (\n                            <ChevronUp className=\"h-5 w-5 text-gray-600\" />\n                          ) : (\n                            <ChevronDown className=\"h-5 w-5 text-gray-600\" />\n                          )}\n                        </Button>\n                      </div>\n                    </div>\n\n                    {/* Expanded Details Section */}\n                    {expandedMotorcycleId === motorcycle.id && (\n                      <motion.div\n                        initial={{ height: 0, opacity: 0 }}\n                        animate={{ height: \"auto\", opacity: 1 }}\n                        exit={{ height: 0, opacity: 0 }}\n                        transition={{ duration: 0.3 }}\n                        className=\"mt-6 pt-6 border-t border-gray-100 space-y-4\"\n                      >\n                        {/* Vehicle Documents */}\n                        <div>\n                          <div className=\"flex items-center justify-between mb-3\">\n                            <h4 className=\"font-semibold text-[#1A1A1A] flex items-center text-sm\">\n                              <FileText className=\"h-4 w-4 mr-2 text-[#FF3B30]\" />\n                              Documents\n                            </h4>\n                            <Button size=\"sm\" variant=\"outline\" className={`text-xs h-7 rounded-xl transition-all duration-300 ${isOverFooter ? 'border-[#FF3B30] text-[#FF3B30] hover:bg-[#FF3B30] hover:text-white' : 'border-[#1A1A1A] text-[#1A1A1A] hover:bg-[#1A1A1A] hover:text-white'}`}>\n                              <Settings className=\"h-3 w-3 mr-1\" />\n                              Manage\n                            </Button>\n                          </div>\n\n                          <div className=\"grid grid-cols-1 gap-2\">\n                            {[\n                              { id: 1, name: \"Registration\", icon: \"üìã\", status: \"valid\" },\n                              { id: 2, name: \"Insurance\", icon: \"üõ°Ô∏è\", status: \"expiring\" },\n                              { id: 3, name: \"Service Record\", icon: \"üîß\", status: \"valid\" }\n                            ].map((doc) => (\n                              <div \n                                key={doc.id}\n                                className=\"flex items-center justify-between p-2 bg-gray-50 rounded-xl border\"\n                              >\n                                <div className=\"flex items-center space-x-2\">\n                                  <span className=\"text-sm\">{doc.icon}</span>\n                                  <div>\n                                    <p className=\"font-medium text-xs text-[#1A1A1A]\">{doc.name}</p>\n                                    <p className=\"text-xs text-gray-500\">Updated recently</p>\n                                  </div>\n                                </div>\n                                <div className=\"flex items-center space-x-2\">\n                                  <Badge className={`text-xs ${\n                                    doc.status === \"valid\" ? \"bg-green-100 text-green-800\" :\n                                    doc.status === \"expiring\" ? \"bg-yellow-100 text-yellow-800\" :\n                                    \"bg-red-100 text-red-800\"\n                                  }`}>\n                                    {doc.status}\n                                  </Badge>\n                                  <Button size=\"sm\" variant=\"ghost\" className=\"h-6 w-6 p-0\">\n                                    <Eye className=\"h-3 w-3\" />\n                                  </Button>\n                                </div>\n                              </div>\n                            ))}\n                          </div>\n                        </div>\n\n\n                      </motion.div>\n                    )}\n                  </CardContent>\n                </Card>\n              </motion.div>\n            ))}\n          </div>\n        )}\n\n        {/* Floating Add Bike Button with Vault Functionality */}\n        <motion.div\n          ref={buttonRef}\n          className=\"fixed bottom-6 right-6 z-50 group\"\n          initial={{ scale: 0 }}\n          animate={{ \n            scale: 1,\n            x: buttonPosition,\n            transition: { duration: 0.3 }\n          }}\n          whileHover={{ scale: isDragging ? 1 : 1.1 }}\n          whileTap={{ scale: isDragging ? 1 : 0.9 }}\n        >\n          <div className=\"relative flex items-center\">\n            {/* Swipe Indicator and Open Vault Text */}\n            <div className=\"flex items-center mr-3 opacity-60 hover:opacity-100 transition-opacity duration-300\">\n              {/* Swipe Indicator */}\n              <div className=\"mr-2\">\n                <svg \n                  className=\"w-5 h-5 text-gray-400 animate-pulse\" \n                  fill=\"none\" \n                  stroke=\"currentColor\" \n                  viewBox=\"0 0 24 24\"\n                >\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 16l-4-4m0 0l4-4m-4 4h18\" />\n                </svg>\n              </div>\n\n              {/* Open Vault Text */}\n              <span className=\"text-gray-600 text-sm font-medium whitespace-nowrap\">\n                Open Vault\n              </span>\n            </div>\n\n            <Button \n              onClick={isDragging ? undefined : handleAddMotorcycle}\n              onMouseDown={handleMouseDown}\n              onTouchStart={handleTouchStart}\n              className={`${isOverFooter ? 'bg-[#FF3B30] hover:bg-[#FF3B30]/90' : 'bg-[#1A1A1A] hover:bg-[#1A1A1A]/90'} text-white rounded-full w-14 h-14 sm:w-16 sm:h-16 shadow-lg hover:shadow-xl transition-all duration-300 p-0 cursor-grab ${isDragging ? 'cursor-grabbing' : ''}`}\n              style={{ touchAction: 'none' }}\n            >\n              <Plus className=\"h-6 w-6 sm:h-8 sm:w-8\" />\n            </Button>\n          </div>\n        </motion.div>\n\n        <AddMotorcycleDialog \n          open={isAddDialogOpen} \n          onOpenChange={setIsAddDialogOpen}\n          onSuccess={() => {\n            setIsAddDialogOpen(false);\n            queryClient.invalidateQueries({ queryKey: ['/api/motorcycles'] });\n          }}\n        />\n\n\n\n\n\n        <AlertDialog open={motorcycleToDelete !== null} onOpenChange={() => setMotorcycleToDelete(null)}>\n          <AlertDialogContent>\n            <AlertDialogHeader>\n              <AlertDialogTitle>Are you sure?</AlertDialogTitle>\n              <AlertDialogDescription>\n                This action cannot be undone. This will permanently delete your motorcycle\n                and all associated maintenance records.\n              </AlertDialogDescription>\n            </AlertDialogHeader>\n            <AlertDialogFooter>\n              <AlertDialogCancel>Cancel</AlertDialogCancel>\n              <AlertDialogAction onClick={handleDeleteMotorcycle} className=\"bg-red-600 hover:bg-red-700\">\n                Delete\n              </AlertDialogAction>\n            </AlertDialogFooter>\n          </AlertDialogContent>\n        </AlertDialog>\n\n        {/* Document Vault */}\n        <DocumentVault \n          isOpen={isVaultOpen} \n          onClose={handleVaultClose} \n          documents={documents}\n          onDocumentsChange={setDocuments}\n          selectedDocumentType={selectedDocumentType}\n        />\n\n        {/* Document Preview */}\n        <DocumentPreview \n          isOpen={isDocumentPreviewOpen} \n          onClose={handleDocumentPreviewClose} \n          document={selectedDocumentType ? getDocumentByType(selectedDocumentType) : null}\n        />\n\n\n\n      </div>\n    </div>\n  );\n};\n\nexport default NewGarage;","size_bytes":50787},"client/src/pages/Register.tsx":{"content":"import { useState } from \"react\";\nimport { Link, useLocation } from \"wouter\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Star, Shield, Users, Wrench, Calendar, MessageSquare, Trophy, Camera } from \"lucide-react\";\nimport { \n  Card, \n  CardContent, \n  CardDescription, \n  CardFooter, \n  CardHeader, \n  CardTitle \n} from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { Label } from \"@/components/ui/label\";\nimport { useForm } from \"react-hook-form\";\nimport { z } from \"zod\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useQueryClient } from \"@tanstack/react-query\";\nimport { Avatar, AvatarImage, AvatarFallback } from \"@/components/ui/avatar\"\nimport logo from \"@/assets/tclogov2h2.svg\";\n\nconst registerSchema = z.object({\n  username: z.string().min(3, \"Username must be at least 3 characters\"),\n  fullName: z.string().min(1, \"Full name is required\"),\n  email: z.string().email(\"Please enter a valid email address\"),\n  password: z.string().min(6, \"Password must be at least 6 characters\"),\n  confirmPassword: z.string(),\n}).refine(data => data.password === data.confirmPassword, {\n  message: \"Passwords do not match\",\n  path: [\"confirmPassword\"],\n});\n\ntype RegisterFormValues = z.infer<typeof registerSchema>;\n\nconst features = [\n  {\n    icon: Shield,\n    title: \"Digital Garage\",\n    description: \"Store and manage all your motorcycles in one secure place\"\n  },\n  {\n    icon: Calendar,\n    title: \"Maintenance Tracking\",\n    description: \"Never miss important service dates with smart reminders\"\n  },\n  {\n    icon: Users,\n    title: \"Community Hub\",\n    description: \"Connect with riders, join group rides, and share experiences\"\n  },\n  {\n    icon: Trophy,\n    title: \"Achievements\",\n    description: \"Unlock badges and track your riding milestones\"\n  }\n];\n\nconst reviews = [\n  {\n    name: \"Jake Rodriguez\",\n    rating: 5,\n    comment: \"Finally, a platform that gets motorcycle enthusiasts! Love the maintenance tracking.\",\n    avatar: \"JR\",\n    location: \"Los Angeles, CA\",\n    text: \"This app has revolutionized how I manage my motorcycles. The maintenance tracking is a lifesaver!\",\n  },\n  {\n    name: \"Sarah Chen\",\n    rating: 5,\n    comment: \"The community features are amazing. Found my local riding group here!\",\n    avatar: \"SC\",\n    location: \"New York, NY\",\n    text: \"I've connected with so many riders in my area thanks to this app's community features. It's been an incredible experience!\",\n  },\n  {\n    name: \"Mike Thompson\",\n    rating: 4,\n    comment: \"Great for organizing my bikes and keeping track of service history.\",\n    avatar: \"MT\",\n    location: \"Chicago, IL\",\n    text: \"Organizing my bikes and tracking their service history has never been easier. A must-have for any motorcycle owner!\",\n  }\n];\n\nconst Register = () => {\n  const [, navigate] = useLocation();\n  const { toast } = useToast();\n  const { setUser } = useAuth();\n  const [isLoading, setIsLoading] = useState(false);\n  const queryClient = useQueryClient();\n\n  const form = useForm<RegisterFormValues>({\n    resolver: zodResolver(registerSchema),\n    defaultValues: {\n      username: \"\",\n      fullName: \"\",\n      email: \"\",\n      password: \"\",\n      confirmPassword: \"\",\n    },\n  });\n\n  const onSubmit = async (data: RegisterFormValues) => {\n    setIsLoading(true);\n\n    // Remove confirmPassword before sending to API\n    const { confirmPassword, ...registerData } = data;\n\n    try {\n      const res = await apiRequest(\"POST\", \"/api/auth/register\", registerData);\n      const user = await res.json();\n\n      setUser(user);\n      queryClient.invalidateQueries({ queryKey: ['/api/auth/session'] });\n\n      toast({\n        title: \"Registration Successful\",\n        description: `Welcome to ThrottleCove, ${user.fullName}!`,\n      });\n\n      navigate(\"/garage\");\n    } catch (error) {\n      toast({\n        title: \"Registration Failed\",\n        description: \"This username or email may already be in use. Please try another.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 to-white\">\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"max-w-6xl mx-auto\">\n\n          {/* Main Registration Section - Primary Focus */}\n          <div className=\"text-center mb-8 sm:mb-12 px-4\">\n            <div className=\"flex justify-center mb-1\">\n              <img\n                src={logo}\n                alt=\"ThrottleCove Logo\"\n                className=\"h-20 sm:h-24 w-auto\"\n              />\n            </div>\n            <h1 className=\"text-lg sm:text-xl font-light text-[#1A1A1A]/70 mb-4\">\n              Everything You Need To Manage Your Motorcycle Life\n            </h1>\n          </div>\n\n          {/* Registration Form */}\n          <Card className=\"w-full max-w-md mx-auto mb-12 sm:mb-16 rounded-3xl shadow-2xl border-0 backdrop-blur-sm bg-white/90\">\n            <CardContent className=\"p-6 sm:p-8\">\n              <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4 sm:space-y-6\">\n                <div className=\"space-y-3 sm:space-y-4\">\n                  <div>\n                    <Input\n                      type=\"text\"\n                      placeholder=\"Full Name\"\n                      {...form.register(\"fullName\")}\n                      className=\"w-full h-11 sm:h-12 rounded-full\"\n                    />\n                    {form.formState.errors.fullName && (\n                      <p className=\"text-red-500 text-sm mt-1\">{form.formState.errors.fullName.message}</p>\n                    )}\n                  </div>\n                  <div>\n                    <Input\n                      type=\"email\"\n                      placeholder=\"Email\"\n                      {...form.register(\"email\")}\n                      className=\"w-full h-11 sm:h-12 rounded-full\"\n                    />\n                    {form.formState.errors.email && (\n                      <p className=\"text-red-500 text-sm mt-1\">{form.formState.errors.email.message}</p>\n                    )}\n                  </div>\n                  <div>\n                    <Input\n                      type=\"text\"\n                      placeholder=\"Username\"\n                      {...form.register(\"username\")}\n                      className=\"w-full h-11 sm:h-12 rounded-full\"\n                    />\n                    {form.formState.errors.username && (\n                      <p className=\"text-red-500 text-sm mt-1\">{form.formState.errors.username.message}</p>\n                    )}\n                  </div>\n                  <div>\n                    <Input\n                      type=\"password\"\n                      placeholder=\"Password\"\n                      {...form.register(\"password\")}\n                      className=\"w-full h-11 sm:h-12 rounded-full\"\n                    />\n                    {form.formState.errors.password && (\n                      <p className=\"text-red-500 text-sm mt-1\">{form.formState.errors.password.message}</p>\n                    )}\n                  </div>\n                  <div>\n                    <Input\n                      type=\"password\"\n                      placeholder=\"Confirm Password\"\n                      {...form.register(\"confirmPassword\")}\n                      className=\"w-full h-11 sm:h-12 rounded-full\"\n                    />\n                    {form.formState.errors.confirmPassword && (\n                      <p className=\"text-red-500 text-sm mt-1\">{form.formState.errors.confirmPassword.message}</p>\n                    )}\n                  </div>\n                </div>\n\n                <div className=\"flex justify-center\">\n                  <Button\n                    type=\"submit\"\n                    disabled={isLoading}\n                    className=\"w-3/4 bg-[#1A1A1A] hover:bg-[#1A1A1A]/90 text-white rounded-full px-12 disabled:opacity-50\"\n                  >\n                    {isLoading ? \"Creating Account...\" : \"Create Account\"}\n                  </Button>\n                </div>\n\n                <CardFooter className=\"text-center px-0 pb-0\">\n                  <p className=\"text-sm text-gray-600\">\n                    Already have an account?{\" \"}\n                    <Link href=\"/login\" className=\"text-[#FF3B30] hover:underline font-medium\">\n                      Sign in\n                    </Link>\n                  </p>\n                </CardFooter>\n              </form>\n            </CardContent>\n          </Card>\n\n          {/* Secondary Content - Features and Reviews */}\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8 sm:gap-12 max-w-6xl mx-auto px-4\">\n\n            {/* Features Section */}\n            <div className=\"space-y-4 sm:space-y-6\">\n              <div className=\"text-center lg:text-left\">\n                <h2 className=\"text-xl sm:text-2xl font-bold text-[#1A1A1A] mb-3\">\n                  Why Choose ThrottleCove?\n                </h2>\n                <p className=\"text-gray-600 text-sm sm:text-base\">\n                  Everything you need in one place\n                </p>\n              </div>\n\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4\">\n                {features.map((feature, index) => (\n                  <Card key={index} className=\"p-3 sm:p-4 bg-gray-50/50 border-gray-200 hover:bg-white hover:shadow-md transition-all\">\n                    <div className=\"space-y-2 sm:space-y-3\">\n                      <div className=\"w-8 h-8 sm:w-10 sm:h-10 bg-[#FF3B30]/10 rounded-lg flex items-center justify-center\">\n                        <feature.icon className=\"h-4 w-4 sm:h-5 sm:w-5 text-[#FF3B30]\" />\n                      </div>\n                      <div>\n                        <h3 className=\"font-semibold text-[#1A1A1A] mb-1 text-sm sm:text-base\">\n                          {feature.title}\n                        </h3>\n                        <p className=\"text-xs sm:text-sm text-gray-600 leading-relaxed\">\n                          {feature.description}\n                        </p>\n                      </div>\n                    </div>\n                  </Card>\n                ))}\n              </div>\n            </div>\n\n             {/* Reviews Section */}\n            <div className=\"space-y-6\">\n              <div className=\"text-center lg:text-left\">\n                <h2 className=\"text-2xl font-bold text-[#1A1A1A] mb-3\">\n                  Trusted by Riders\n                </h2>\n                <p className=\"text-gray-600\">\n                  See what our community says\n                </p>\n              </div>\n\n              <div className=\"space-y-4\">\n                {reviews.map((review, index) => (\n                  <Card key={index} className=\"p-4 bg-gray-50/50 border-gray-200\">\n                    <div className=\"space-y-3\">\n                      <div className=\"flex items-center space-x-1\">\n                        {[...Array(5)].map((_, i) => (\n                          <Star \n                            key={i} \n                            className={`h-4 w-4 ${\n                              i < review.rating \n                                ? \"text-yellow-400 fill-current\" \n                                : \"text-gray-300\"\n                            }`} \n                          />\n                        ))}\n                      </div>\n\n                      <p className=\"text-gray-700 text-sm leading-relaxed italic\">\n                        \"{review.comment}\"\n                      </p>\n\n                      <div className=\"flex items-center space-x-3\">\n                        <div className=\"w-8 h-8 bg-[#FF3B30] rounded-full flex items-center justify-center\">\n                          <span className=\"text-white text-xs font-semibold\">\n                            {review.avatar}\n                          </span>\n                        </div>\n                        <div>\n                          <p className=\"font-medium text-sm text-[#1A1A1A]\">\n                            {review.name}\n                          </p>\n                          <p className=\"text-xs text-gray-500\">Verified Rider</p>\n                        </div>\n                      </div>\n                    </div>\n                  </Card>\n                ))}\n\n                <Card className=\"p-4 bg-gradient-to-r from-[#FF3B30]/5 to-[#FF3B30]/10 border-[#FF3B30]/20\">\n                  <div className=\"text-center\">\n                    <div className=\"flex justify-center space-x-1 mb-2\">\n                      {[...Array(5)].map((_, i) => (\n                        <Star key={i} className=\"h-4 w-4 text-yellow-400 fill-current\" />\n                      ))}\n                    </div>\n                    <p className=\"text-sm font-medium text-[#1A1A1A]\">\n                      4.9/5 from 2,847+ riders\n                    </p>\n                    <p className=\"text-xs text-gray-600 mt-1\">\n                      Join thousands of satisfied members\n                    </p>\n                  </div>\n                </Card>\n              </div>\n            </div>\n\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Register;","size_bytes":13332},"client/src/pages/Shop.tsx":{"content":"import { useState } from \"react\";\nimport { \n  Tabs, \n  TabsContent, \n  TabsList, \n  TabsTrigger \n} from \"@/components/ui/tabs\";\nimport { \n  Card, \n  CardContent, \n  CardDescription, \n  CardFooter, \n  CardHeader, \n  CardTitle \n} from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Shirt, HardHat, ShieldCheck, Wind, Zap } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\n\n// Product interface\ninterface Product {\n  id: number;\n  name: string;\n  description: string;\n  price: number;\n  rating: number;\n  image: string;\n  category: string;\n  features: string[];\n  badge?: string;\n}\n\nconst products: Product[] = [\n  // Helmets\n  {\n    id: 1,\n    name: \"Apex Pro Carbon\",\n    description: \"Premium full-face carbon helmet with advanced ventilation and noise reduction.\",\n    price: 599.99,\n    rating: 4.9,\n    image: \"helmet-1\",\n    category: \"helmets\",\n    features: [\"Carbon fiber shell\", \"Pinlock ready visor\", \"Emergency quick release\", \"DOT & ECE certified\"],\n    badge: \"Premium\"\n  },\n  {\n    id: 2,\n    name: \"Velocity GT\",\n    description: \"Aerodynamic helmet designed for sport riders seeking performance and comfort.\",\n    price: 349.99,\n    rating: 4.7,\n    image: \"helmet-2\",\n    category: \"helmets\",\n    features: [\"Fiberglass composite shell\", \"Anti-fog visor\", \"Removable liner\", \"DOT certified\"]\n  },\n  {\n    id: 3,\n    name: \"Stealth Modular 3.0\",\n    description: \"Versatile flip-up helmet with integrated sun visor and bluetooth connectivity.\",\n    price: 289.99,\n    rating: 4.5,\n    image: \"helmet-3\",\n    category: \"helmets\",\n    features: [\"Modular design\", \"Integrated sun visor\", \"Bluetooth ready\", \"ECE certified\"]\n  },\n  {\n    id: 4,\n    name: \"Cruiser Classic\",\n    description: \"Vintage-inspired open face helmet that doesn't compromise on modern safety.\",\n    price: 179.99,\n    rating: 4.3,\n    image: \"helmet-4\",\n    category: \"helmets\",\n    features: [\"ABS shell\", \"Leather trim\", \"Quick-release buckle\", \"DOT certified\"]\n  },\n  {\n    id: 5,\n    name: \"Adventure X\",\n    description: \"Dual-sport helmet with peak visor, perfect for on and off-road adventures.\",\n    price: 249.99,\n    rating: 4.6,\n    image: \"helmet-5\",\n    category: \"helmets\",\n    features: [\"Adjustable peak visor\", \"Extra wide viewport\", \"Moisture-wicking liner\", \"DOT & ECE certified\"]\n  },\n  \n  // Jackets\n  {\n    id: 6,\n    name: \"Turbulence Pro\",\n    description: \"All-season textile jacket with removable thermal liner and waterproof membrane.\",\n    price: 349.99,\n    rating: 4.8,\n    image: \"jacket-1\",\n    category: \"jackets\",\n    features: [\"CE level 2 armor\", \"Waterproof\", \"Removable thermal liner\", \"Ventilation zippers\"],\n    badge: \"Best Seller\"\n  },\n  {\n    id: 7,\n    name: \"Vintage Racer\",\n    description: \"Classic leather jacket with modern protection for the style-conscious rider.\",\n    price: 399.99,\n    rating: 4.7,\n    image: \"jacket-2\",\n    category: \"jackets\",\n    features: [\"Premium cowhide leather\", \"CE shoulder & elbow armor\", \"Back protector pocket\", \"Quilted lining\"]\n  },\n  {\n    id: 8,\n    name: \"TechMesh Summer\",\n    description: \"Lightweight mesh jacket designed for hot weather riding with maximum airflow.\",\n    price: 199.99,\n    rating: 4.5,\n    image: \"jacket-3\",\n    category: \"jackets\",\n    features: [\"High-density mesh\", \"CE armor\", \"Reflective details\", \"Adjustable fit\"]\n  },\n  {\n    id: 9,\n    name: \"Urban Commuter\",\n    description: \"Stylish water-resistant jacket that transitions from motorcycle to office seamlessly.\",\n    price: 279.99,\n    rating: 4.4,\n    image: \"jacket-4\",\n    category: \"jackets\",\n    features: [\"Water resistant\", \"Removable armor\", \"Multiple pockets\", \"Casual styling\"]\n  },\n  {\n    id: 10,\n    name: \"Adventure Tour\",\n    description: \"Rugged all-weather jacket built for long-distance adventure touring.\",\n    price: 449.99,\n    rating: 4.9,\n    image: \"jacket-5\",\n    category: \"jackets\",\n    features: [\"GORE-TEX¬Æ membrane\", \"CE level 2 armor\", \"Cargo pockets\", \"Adventure fit\"],\n    badge: \"Premium\"\n  },\n  \n  // Gloves\n  {\n    id: 11,\n    name: \"Track Pro\",\n    description: \"Race-ready gloves with premium kangaroo leather and extensive protection.\",\n    price: 149.99,\n    rating: 4.8,\n    image: \"gloves-1\",\n    category: \"gloves\",\n    features: [\"Kangaroo leather palm\", \"Carbon fiber knuckles\", \"Palm sliders\", \"Pre-curved fingers\"],\n    badge: \"Race Spec\"\n  },\n  {\n    id: 12,\n    name: \"Touring Comfort\",\n    description: \"All-season touring gloves with Gore-Tex and touch screen capability.\",\n    price: 119.99,\n    rating: 4.6,\n    image: \"gloves-2\",\n    category: \"gloves\",\n    features: [\"Gore-Tex waterproof\", \"Thinsulate insulation\", \"Touch screen compatible\", \"Visor wiper\"]\n  },\n  {\n    id: 13,\n    name: \"Summer Mesh\",\n    description: \"Lightweight, breathable gloves for hot weather riding.\",\n    price: 59.99,\n    rating: 4.3,\n    image: \"gloves-3\",\n    category: \"gloves\",\n    features: [\"Mesh construction\", \"Leather reinforcements\", \"Knuckle protection\", \"Touch screen compatible\"]\n  },\n  {\n    id: 14,\n    name: \"Classic Cruiser\",\n    description: \"Vintage-styled deerskin gloves with minimal bulk and classic styling.\",\n    price: 79.99,\n    rating: 4.4,\n    image: \"gloves-4\",\n    category: \"gloves\",\n    features: [\"Deerskin leather\", \"Minimal design\", \"Snap closure\", \"Unlined for dexterity\"]\n  },\n  {\n    id: 15,\n    name: \"Winter Extreme\",\n    description: \"Heavily insulated waterproof gloves for winter riding conditions.\",\n    price: 129.99,\n    rating: 4.7,\n    image: \"gloves-5\",\n    category: \"gloves\",\n    features: [\"400g Thinsulate\", \"Waterproof membrane\", \"Extended gauntlet\", \"Heated option available\"]\n  },\n  \n  // Boots\n  {\n    id: 16,\n    name: \"Race Pro\",\n    description: \"Professional racing boots with extensive protection and ankle stabilization.\",\n    price: 329.99,\n    rating: 4.9,\n    image: \"boots-1\",\n    category: \"boots\",\n    features: [\"Magnesium toe slider\", \"Ankle brace system\", \"Impact protection\", \"Anti-twist sole\"],\n    badge: \"Pro Level\"\n  },\n  {\n    id: 17,\n    name: \"Adventure Trek\",\n    description: \"Waterproof dual-sport boots that excel both on and off the motorcycle.\",\n    price: 279.99,\n    rating: 4.7,\n    image: \"boots-2\",\n    category: \"boots\",\n    features: [\"Waterproof membrane\", \"Ankle protection\", \"Rugged sole\", \"Flex zones for walking\"]\n  },\n  {\n    id: 18,\n    name: \"Urban Commuter\",\n    description: \"Casual-looking motorcycle boots that provide protection without looking technical.\",\n    price: 189.99,\n    rating: 4.5,\n    image: \"boots-3\",\n    category: \"boots\",\n    features: [\"Reinforced toe & heel\", \"Ankle protection\", \"Casual appearance\", \"Oil-resistant sole\"]\n  },\n  {\n    id: 19,\n    name: \"Cruiser Classic\",\n    description: \"Classic pull-on style boots with subtle protective features.\",\n    price: 219.99,\n    rating: 4.3,\n    image: \"boots-4\",\n    category: \"boots\",\n    features: [\"Full-grain leather\", \"Reinforced shifter pad\", \"Cushioned insole\", \"Slip-resistant sole\"]\n  },\n  {\n    id: 20,\n    name: \"Touring Tech\",\n    description: \"All-day comfortable waterproof touring boots with extensive features.\",\n    price: 259.99,\n    rating: 4.8,\n    image: \"boots-5\",\n    category: \"boots\",\n    features: [\"Gore-Tex lining\", \"Reflective details\", \"Shock absorbing heel\", \"Wide fit option\"]\n  },\n  \n  // Accessories\n  {\n    id: 21,\n    name: \"BackGuard Pro\",\n    description: \"CE Level 2 back protector with ventilation channels and ergonomic design.\",\n    price: 119.99,\n    rating: 4.8,\n    image: \"accessory-1\",\n    category: \"accessories\",\n    features: [\"CE Level 2 certified\", \"Ergonomic design\", \"Ventilated\", \"Adjustable straps\"]\n  },\n  {\n    id: 22,\n    name: \"RiderComm BT5\",\n    description: \"Premium bluetooth communication system with noise cancellation.\",\n    price: 299.99,\n    rating: 4.9,\n    image: \"accessory-2\",\n    category: \"accessories\",\n    features: [\"2km range\", \"Noise cancellation\", \"Voice commands\", \"40 hour battery\"],\n    badge: \"Top Rated\"\n  },\n  {\n    id: 23,\n    name: \"All-Weather Cover\",\n    description: \"Heavy-duty motorcycle cover with heat shields and security features.\",\n    price: 89.99,\n    rating: 4.6,\n    image: \"accessory-3\",\n    category: \"accessories\",\n    features: [\"Waterproof\", \"UV resistant\", \"Heat shields\", \"Security loops\"]\n  },\n  {\n    id: 24,\n    name: \"MotoLock Ultra\",\n    description: \"Hardened steel disc lock with alarm and reminder cable.\",\n    price: 79.99,\n    rating: 4.7,\n    image: \"accessory-4\",\n    category: \"accessories\",\n    features: [\"110dB alarm\", \"Hardened steel\", \"Reminder cable\", \"Pick resistant\"]\n  },\n  {\n    id: 25,\n    name: \"TechGrip Phone Mount\",\n    description: \"Secure vibration-dampening smartphone mount with wireless charging.\",\n    price: 59.99,\n    rating: 4.5,\n    image: \"accessory-5\",\n    category: \"accessories\",\n    features: [\"Wireless charging\", \"Vibration dampening\", \"Weather resistant\", \"Universal fit\"]\n  }\n];\n\n// Helper function to generate star rating display\nconst StarRating = ({ rating }: { rating: number }) => {\n  return (\n    <div className=\"flex items-center gap-1 text-amber-400\">\n      {'‚òÖ'.repeat(Math.floor(rating))}\n      {rating % 1 > 0 ? '¬Ω' : ''}\n      {'‚òÜ'.repeat(5 - Math.ceil(rating))}\n      <span className=\"ml-1 text-gray-600 text-sm\">({rating.toFixed(1)})</span>\n    </div>\n  );\n};\n\n// Category icon mapping\nconst CategoryIcon = ({ category }: { category: string }) => {\n  switch (category) {\n    case 'helmets':\n      return <HardHat className=\"h-5 w-5\" />;\n    case 'jackets':\n      return <ShieldCheck className=\"h-5 w-5\" />;\n    case 'gloves':\n      return <Wind className=\"h-5 w-5\" />;\n    case 'boots':\n      return <Shirt className=\"h-5 w-5\" />;\n    case 'accessories':\n      return <Zap className=\"h-5 w-5\" />;\n    default:\n      return null;\n  }\n};\n\n// Generate placeholder images with category and ID\nconst getImagePlaceholder = (category: string, id: number) => {\n  const colors = {\n    helmets: \"#F59E0B\",\n    jackets: \"#3B82F6\",\n    gloves: \"#10B981\",\n    boots: \"#8B5CF6\",\n    accessories: \"#EC4899\"\n  };\n  \n  const bgColor = colors[category as keyof typeof colors] || \"#6B7280\";\n  \n  return `https://via.placeholder.com/300x200/${bgColor.replace('#', '')}`;\n};\n\nconst Shop = () => {\n  const { toast } = useToast();\n  const [selectedCategory, setSelectedCategory] = useState(\"helmets\");\n  \n  // Filter products by selected category\n  const filteredProducts = products.filter(product => product.category === selectedCategory);\n  \n  // Handle add to cart\n  const handleAddToCart = (product: Product) => {\n    // Get existing cart from localStorage\n    const existingCart = JSON.parse(localStorage.getItem('shoppingCart') || '[]');\n    \n    // Check if product already exists in cart\n    const existingIndex = existingCart.findIndex((item: any) => item.id === product.id);\n    \n    if (existingIndex >= 0) {\n      // Increment quantity if product exists\n      existingCart[existingIndex].quantity += 1;\n    } else {\n      // Add new product to cart\n      existingCart.push({ ...product, quantity: 1 });\n    }\n    \n    // Save updated cart to localStorage\n    localStorage.setItem('shoppingCart', JSON.stringify(existingCart));\n    \n    toast({\n      title: \"Added to cart\",\n      description: `${product.name} has been added to your cart.`,\n    });\n  };\n  \n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100\">\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-3xl font-bold mb-2\">Rider Essentials</h1>\n          <p className=\"text-gray-600 mb-6\">Quality gear for the modern motorcyclist</p>\n        </div>\n        \n        \n        \n        <Tabs defaultValue=\"helmets\" onValueChange={setSelectedCategory} className=\"w-full\">\n          <TabsList className=\"grid w-full grid-cols-5 bg-gray-100 rounded-full p-1 mb-8\">\n            <TabsTrigger value=\"helmets\" className=\"flex items-center gap-2 rounded-full data-[state=active]:bg-white data-[state=active]:shadow-sm\">\n              <HardHat className=\"h-4 w-4\" />\n              <span className=\"hidden sm:inline\">Helmets</span>\n            </TabsTrigger>\n            <TabsTrigger value=\"jackets\" className=\"flex items-center gap-2 rounded-full data-[state=active]:bg-white data-[state=active]:shadow-sm\">\n              <ShieldCheck className=\"h-4 w-4\" />\n              <span className=\"hidden sm:inline\">Jackets</span>\n            </TabsTrigger>\n            <TabsTrigger value=\"gloves\" className=\"flex items-center gap-2 rounded-full data-[state=active]:bg-white data-[state=active]:shadow-sm\">\n              <Wind className=\"h-4 w-4\" />\n              <span className=\"hidden sm:inline\">Gloves</span>\n            </TabsTrigger>\n            <TabsTrigger value=\"boots\" className=\"flex items-center gap-2 rounded-full data-[state=active]:bg-white data-[state=active]:shadow-sm\">\n              <Shirt className=\"h-4 w-4\" />\n              <span className=\"hidden sm:inline\">Boots</span>\n            </TabsTrigger>\n            <TabsTrigger value=\"accessories\" className=\"flex items-center gap-2 rounded-full data-[state=active]:bg-white data-[state=active]:shadow-sm\">\n              <Zap className=\"h-4 w-4\" />\n              <span className=\"hidden sm:inline\">Access.</span>\n            </TabsTrigger>\n          </TabsList>\n          \n          {['helmets', 'jackets', 'gloves', 'boots', 'accessories'].map((category) => (\n            <TabsContent value={category} key={category}>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {filteredProducts.map((product) => (\n                  <Card key={product.id} className=\"overflow-hidden transition-all duration-300 hover:shadow-lg rounded-2xl border-0 shadow-sm bg-gradient-to-b from-white to-gray-50\">\n                    <div className=\"relative\">\n                      <div \n                        className=\"h-48 bg-cover bg-center rounded-t-2xl\" \n                        style={{ \n                          backgroundImage: `url(${getImagePlaceholder(product.category, product.id)})`,\n                          backgroundColor: product.category === 'helmets' ? '#F59E0B' : \n                                          product.category === 'jackets' ? '#3B82F6' : \n                                          product.category === 'gloves' ? '#10B981' : \n                                          product.category === 'boots' ? '#8B5CF6' : '#EC4899'\n                        }}\n                      >\n                        <div className=\"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent flex items-end rounded-t-2xl\">\n                          <div className=\"p-4 text-white\">\n                            <div className=\"bg-white/20 backdrop-blur-sm rounded-full px-3 py-1 inline-flex items-center gap-2\">\n                              <CategoryIcon category={product.category} />\n                              <span className=\"capitalize text-sm\">{product.category}</span>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                      {product.badge && (\n                        <Badge className=\"absolute top-3 right-3 bg-[#FF3B30] text-white rounded-full px-3 py-1\">\n                          {product.badge}\n                        </Badge>\n                      )}\n                    </div>\n                    \n                    <CardHeader className=\"pb-3\">\n                      <div className=\"flex justify-between items-start mb-3\">\n                        <CardTitle className=\"text-xl\">{product.name}</CardTitle>\n                        <div className=\"bg-gray-100 rounded-full px-3 py-1\">\n                          <span className=\"font-bold text-lg\">${product.price.toFixed(2)}</span>\n                        </div>\n                      </div>\n                      <StarRating rating={product.rating} />\n                      <CardDescription className=\"line-clamp-2\">\n                        {product.description}\n                      </CardDescription>\n                    </CardHeader>\n                    \n                    <CardContent className=\"pt-0\">\n                      <div className=\"space-y-2\">\n                        <div className=\"text-sm font-medium\">Key Features:</div>\n                        <div className=\"grid grid-cols-1 gap-2\">\n                          {product.features.slice(0, 3).map((feature, i) => (\n                            <div key={i} className=\"flex items-center p-2 bg-gray-50 rounded-2xl text-xs\">\n                              <span className=\"mr-2 text-[#FF3B30]\">‚Ä¢</span>\n                              <span>{feature}</span>\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n                    </CardContent>\n                    \n                    <CardFooter className=\"flex justify-between pt-4\">\n                      <Button variant=\"outline\" className=\"rounded-full\">Details</Button>\n                      <Button \n                        className=\"bg-[#FF3B30] hover:bg-opacity-90 rounded-full\"\n                        onClick={() => handleAddToCart(product)}\n                      >\n                        Add to Cart\n                      </Button>\n                    </CardFooter>\n                  </Card>\n                ))}\n              </div>\n            </TabsContent>\n          ))}\n        </Tabs>\n      </div>\n    </div>\n  );\n};\n\nexport default Shop;","size_bytes":17614},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/utils/ranking.ts":{"content":"\n// Modern biker/traveler ranking system with 20 levels based on kilometers\nexport interface BikerRank {\n  id: number;\n  name: string;\n  minKm: number;\n  maxKm: number;\n  patch: string;\n  tier: string;\n  description: string;\n}\n\nexport const bikerRanks: BikerRank[] = [\n  {\n    id: 1,\n    name: \"Rookie Rider\",\n    minKm: 0,\n    maxKm: 999,\n    patch: \"üî∞\",\n    tier: \"Bronze\",\n    description: \"Just starting the journey\"\n  },\n  {\n    id: 2,\n    name: \"Street Explorer\",\n    minKm: 1000,\n    maxKm: 2999,\n    patch: \"üõ£Ô∏è\",\n    tier: \"Bronze\",\n    description: \"Learning the local roads\"\n  },\n  {\n    id: 3,\n    name: \"City Cruiser\",\n    minKm: 3000,\n    maxKm: 4999,\n    patch: \"üèôÔ∏è\",\n    tier: \"Bronze\",\n    description: \"Master of urban riding\"\n  },\n  {\n    id: 4,\n    name: \"Urban Navigator\",\n    minKm: 5000,\n    maxKm: 7999,\n    patch: \"üß≠\",\n    tier: \"Bronze\",\n    description: \"Navigating city streets with ease\"\n  },\n  {\n    id: 5,\n    name: \"Highway Warrior\",\n    minKm: 8000,\n    maxKm: 12999,\n    patch: \"‚öîÔ∏è\",\n    tier: \"Silver\",\n    description: \"Conquering the highways\"\n  },\n  {\n    id: 6,\n    name: \"Road Captain\",\n    minKm: 13000,\n    maxKm: 19999,\n    patch: \"üõ°Ô∏è\",\n    tier: \"Silver\",\n    description: \"Leading the pack\"\n  },\n  {\n    id: 7,\n    name: \"Distance Ace\",\n    minKm: 20000,\n    maxKm: 29999,\n    patch: \"üéØ\",\n    tier: \"Silver\",\n    description: \"Elite long-distance rider\"\n  },\n  {\n    id: 8,\n    name: \"Route Master\",\n    minKm: 30000,\n    maxKm: 39999,\n    patch: \"üó∫Ô∏è\",\n    tier: \"Silver\",\n    description: \"Navigator of endless routes\"\n  },\n  {\n    id: 9,\n    name: \"Iron Horse\",\n    minKm: 40000,\n    maxKm: 54999,\n    patch: \"üêé\",\n    tier: \"Gold\",\n    description: \"Unstoppable force on wheels\"\n  },\n  {\n    id: 10,\n    name: \"Speed Demon\",\n    minKm: 55000,\n    maxKm: 69999,\n    patch: \"üî•\",\n    tier: \"Gold\",\n    description: \"Master of speed and endurance\"\n  },\n  {\n    id: 11,\n    name: \"Trail Blazer\",\n    minKm: 70000,\n    maxKm: 89999,\n    patch: \"‚≠ê\",\n    tier: \"Gold\",\n    description: \"Carving new paths\"\n  },\n  {\n    id: 12,\n    name: \"Wind Rider\",\n    minKm: 90000,\n    maxKm: 109999,\n    patch: \"üå™Ô∏è\",\n    tier: \"Gold\",\n    description: \"One with the wind\"\n  },\n  {\n    id: 13,\n    name: \"Road Legend\",\n    minKm: 110000,\n    maxKm: 134999,\n    patch: \"üëë\",\n    tier: \"Platinum\",\n    description: \"Legendary status achieved\"\n  },\n  {\n    id: 14,\n    name: \"Horizon Chaser\",\n    minKm: 135000,\n    maxKm: 159999,\n    patch: \"üåÖ\",\n    tier: \"Platinum\",\n    description: \"Always chasing the next horizon\"\n  },\n  {\n    id: 15,\n    name: \"Storm Rider\",\n    minKm: 160000,\n    maxKm: 189999,\n    patch: \"‚ö°\",\n    tier: \"Platinum\",\n    description: \"Conquering all weather conditions\"\n  },\n  {\n    id: 16,\n    name: \"Midnight Phantom\",\n    minKm: 190000,\n    maxKm: 219999,\n    patch: \"üåô\",\n    tier: \"Diamond\",\n    description: \"Master of the night roads\"\n  },\n  {\n    id: 17,\n    name: \"Apex Predator\",\n    minKm: 220000,\n    maxKm: 249999,\n    patch: \"ü¶Ö\",\n    tier: \"Diamond\",\n    description: \"Apex of riding prowess\"\n  },\n  {\n    id: 18,\n    name: \"Road Immortal\",\n    minKm: 250000,\n    maxKm: 279999,\n    patch: \"üî±\",\n    tier: \"Diamond\",\n    description: \"Immortal among riders\"\n  },\n  {\n    id: 19,\n    name: \"Eternal Nomad\",\n    minKm: 280000,\n    maxKm: 299999,\n    patch: \"‚ôæÔ∏è\",\n    tier: \"Master\",\n    description: \"Forever wandering the roads\"\n  },\n  {\n    id: 20,\n    name: \"Apex Nomad\",\n    minKm: 300000,\n    maxKm: Infinity,\n    patch: \"üíé\",\n    tier: \"Master\",\n    description: \"Ultimate road warrior\"\n  }\n];\n\nexport function getUserRank(totalKm: number): BikerRank {\n  for (let i = bikerRanks.length - 1; i >= 0; i--) {\n    const rank = bikerRanks[i];\n    if (totalKm >= rank.minKm) {\n      return rank;\n    }\n  }\n  return bikerRanks[0]; // Default to Rookie Rider\n}\n\nexport function getNextRank(totalKm: number): BikerRank | null {\n  const currentRank = getUserRank(totalKm);\n  const currentIndex = bikerRanks.findIndex(rank => rank.id === currentRank.id);\n  \n  if (currentIndex < bikerRanks.length - 1) {\n    return bikerRanks[currentIndex + 1];\n  }\n  \n  return null; // Already at highest rank\n}\n\nexport function getKmToNextRank(totalKm: number): number {\n  const nextRank = getNextRank(totalKm);\n  if (nextRank) {\n    return nextRank.minKm - totalKm;\n  }\n  return 0; // Already at highest rank\n}\n\nexport function getProgressRanks(totalKm: number): BikerRank[] {\n  const currentRank = getUserRank(totalKm);\n  const currentIndex = bikerRanks.findIndex(rank => rank.id === currentRank.id);\n  \n  const progressRanks = [];\n  \n  // Add current rank\n  progressRanks.push(currentRank);\n  \n  // Add next two ranks if they exist\n  if (currentIndex + 1 < bikerRanks.length) {\n    progressRanks.push(bikerRanks[currentIndex + 1]);\n  }\n  if (currentIndex + 2 < bikerRanks.length) {\n    progressRanks.push(bikerRanks[currentIndex + 2]);\n  }\n  \n  return progressRanks;\n}\n\n// Get tier color for styling\nexport function getTierColor(tier: string): string {\n  switch (tier) {\n    case \"Bronze\": return \"bg-amber-600\";\n    case \"Silver\": return \"bg-gray-400\";\n    case \"Gold\": return \"bg-yellow-500\";\n    case \"Platinum\": return \"bg-blue-400\";\n    case \"Diamond\": return \"bg-purple-500\";\n    case \"Master\": return \"bg-red-500\";\n    default: return \"bg-gray-500\";\n  }\n}\n","size_bytes":5371},"client/src/components/ui/Devloginbutton.tsx":{"content":"\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useLocation } from \"wouter\";\n\nconst DevLoginButton = () => {\n  const { setUser } = useAuth();\n  const [, navigate] = useLocation();\n\n  const handleDevLogin = () => {\n    const arafatUser = {\n      id: 1,\n      username: \"arafat_dev\",\n      fullName: \"Arafat\",\n      email: \"arafat@throttlecove.dev\",\n      avatarUrl: \"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80\",\n      createdAt: new Date(),\n      password: \"\" // Not used in frontend\n    };\n\n    setUser(arafatUser);\n    navigate(\"/garage\");\n  };\n\n  // Only show in development\n  if (process.env.NODE_ENV !== \"development\") {\n    return null;\n  }\n\n  return (\n    <div className=\"relative\">\n      <button\n        onClick={handleDevLogin}\n        className=\"mt-4 w-full bg-[#FF3B30] hover:bg-[#FF3B30]/90 text-white px-4 py-2 rounded-full font-semibold shadow transition relative\"\n      >\n        <span className=\"absolute -top-2 -right-2 bg-yellow-400 text-black text-xs px-2 py-1 rounded-full font-bold\">\n          DEV\n        </span>\n        Quick Dev Login\n      </button>\n      <p className=\"text-xs text-gray-500 text-center mt-1\">\n        Development mode only\n      </p>\n    </div>\n  );\n};\n\nexport default DevLoginButton;\n","size_bytes":1317},"client/src/components/ui/DocumentUpload.tsx":{"content":"import { useState, useRef } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger, DialogDescription } from \"@/components/ui/dialog\";\nimport { Label } from \"@/components/ui/label\";\nimport { Input } from \"@/components/ui/input\";\nimport { FileText, Upload, Download, Eye, X, Check, AlertCircle, Calendar, Shield } from \"lucide-react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface Document {\n  id: string;\n  name: string;\n  type: 'license' | 'registration' | 'insurance' | 'pollution' | 'tax' | 'roadworthy';\n  file: File | null;\n  uploadDate: Date;\n  expiryDate?: Date;\n  isRequired: boolean;\n  fileUrl?: string;\n  status: 'valid' | 'expiring' | 'expired';\n}\n\nconst DOCUMENT_TYPES = [\n  { \n    key: 'license', \n    name: 'Driving License', \n    required: true, \n    icon: 'ü™™',\n    description: 'Valid driving license for motorcycle operation',\n    hasExpiry: true \n  },\n  { \n    key: 'registration', \n    name: 'Registration Certificate (RC)', \n    required: true, \n    icon: 'üìã',\n    description: 'Official vehicle registration document',\n    hasExpiry: false\n  },\n  { \n    key: 'insurance', \n    name: 'Vehicle Insurance Certificate', \n    required: true, \n    icon: 'üõ°Ô∏è',\n    description: 'Current vehicle insurance coverage',\n    hasExpiry: true\n  },\n  { \n    key: 'pollution', \n    name: 'Pollution Under Control (PUC)', \n    required: true, \n    icon: 'üå±',\n    description: 'Environmental compliance certificate',\n    hasExpiry: true\n  },\n  { \n    key: 'tax', \n    name: 'Tax Token', \n    required: false, \n    icon: 'üí∞',\n    description: 'Vehicle tax payment receipt',\n    hasExpiry: true\n  },\n  { \n    key: 'roadworthy', \n    name: 'Road Worthiness Certificate', \n    required: false, \n    icon: '‚úÖ',\n    description: 'Vehicle safety inspection certificate',\n    hasExpiry: true\n  },\n];\n\nconst DocumentUploadDialog = () => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [documents, setDocuments] = useState<Document[]>([]);\n  const [uploadingType, setUploadingType] = useState<string | null>(null);\n  const [expiryDates, setExpiryDates] = useState<Record<string, string>>({});\n  const [showQuickActions, setShowQuickActions] = useState(false);\n  const { toast } = useToast();\n  const fileInputRefs = useRef<Record<string, HTMLInputElement | null>>({});\n\n  const calculateStatus = (expiryDate?: Date): Document['status'] => {\n    if (!expiryDate) return 'valid';\n    const now = new Date();\n    const daysDiff = Math.ceil((expiryDate.getTime() - now.getTime()) / (1000 * 60 * 60 * 24));\n    \n    if (daysDiff < 0) return 'expired';\n    if (daysDiff <= 30) return 'expiring';\n    return 'valid';\n  };\n\n  const handleFileUpload = (type: string, file: File) => {\n    const docType = DOCUMENT_TYPES.find(dt => dt.key === type);\n    const expiryDateStr = expiryDates[type];\n    const expiryDate = expiryDateStr ? new Date(expiryDateStr) : undefined;\n    \n    const newDoc: Document = {\n      id: Date.now().toString(),\n      name: file.name,\n      type: type as Document['type'],\n      file: file,\n      uploadDate: new Date(),\n      expiryDate,\n      isRequired: docType?.required || false,\n      fileUrl: URL.createObjectURL(file),\n      status: calculateStatus(expiryDate)\n    };\n\n    setDocuments(prev => [...prev.filter(d => d.type !== type), newDoc]);\n    setUploadingType(null);\n    \n    toast({\n      title: \"Document uploaded successfully\",\n      description: `${docType?.name} has been added to your collection.`,\n    });\n  };\n\n  const removeDocument = (id: string) => {\n    const doc = documents.find(d => d.id === id);\n    if (doc?.fileUrl) {\n      URL.revokeObjectURL(doc.fileUrl);\n    }\n    setDocuments(prev => prev.filter(d => d.id !== id));\n    toast({\n      title: \"Document removed\",\n      description: \"The document has been removed from your collection.\",\n    });\n  };\n\n  const handleExpiryDateChange = (type: string, date: string) => {\n    setExpiryDates(prev => ({ ...prev, [type]: date }));\n    \n    // Update existing document if it exists\n    const existingDoc = documents.find(d => d.type === type);\n    if (existingDoc) {\n      const newExpiryDate = date ? new Date(date) : undefined;\n      const updatedDoc = {\n        ...existingDoc,\n        expiryDate: newExpiryDate,\n        status: calculateStatus(newExpiryDate)\n      };\n      setDocuments(prev => prev.map(d => d.id === existingDoc.id ? updatedDoc : d));\n    }\n  };\n\n  const getDocumentForType = (type: string) => {\n    return documents.find(d => d.type === type);\n  };\n\n  const getCompletionStats = () => {\n    const required = DOCUMENT_TYPES.filter(dt => dt.required);\n    const uploaded = required.filter(dt => getDocumentForType(dt.key));\n    const expiring = documents.filter(d => d.status === 'expiring').length;\n    const expired = documents.filter(d => d.status === 'expired').length;\n    return { completed: uploaded.length, total: required.length, expiring, expired };\n  };\n\n  const stats = getCompletionStats();\n\n  const getStatusBadge = (document: Document) => {\n    switch (document.status) {\n      case 'expired':\n        return <Badge variant=\"destructive\" className=\"text-xs\">Expired</Badge>;\n      case 'expiring':\n        return <Badge variant=\"secondary\" className=\"bg-yellow-100 text-yellow-800 text-xs\">Expiring Soon</Badge>;\n      default:\n        return <Badge className=\"bg-green-100 text-green-800 text-xs\"><Check className=\"h-3 w-3 mr-1\" />Valid</Badge>;\n    }\n  };\n\n  const handleViewDocument = (document: Document) => {\n    if (document.fileUrl) {\n      window.open(document.fileUrl, '_blank');\n    }\n  };\n\n  const handleQuickAccess = (documentType: string) => {\n    const doc = getDocumentForType(documentType);\n    if (doc) {\n      handleViewDocument(doc);\n    } else {\n      toast({\n        title: \"Document not found\",\n        description: `Please upload your ${DOCUMENT_TYPES.find(dt => dt.key === documentType)?.name} first.`,\n        variant: \"destructive\",\n      });\n    }\n    setShowQuickActions(false);\n  };\n\n  const toggleQuickActions = () => {\n    if (showQuickActions) {\n      setShowQuickActions(false);\n    } else {\n      setShowQuickActions(true);\n    }\n  };\n\n  return (\n    <>\n      <div className=\"fixed bottom-6 left-6 z-50\">\n        {/* Quick Action Buttons */}\n        <AnimatePresence>\n          {showQuickActions && (\n            <motion.div\n              className=\"absolute bottom-16 left-1/2 transform -translate-x-1/2 flex flex-col space-y-2\"\n              initial={{ opacity: 0, y: 20, scale: 0.8 }}\n              animate={{ opacity: 1, y: 0, scale: 1 }}\n              exit={{ opacity: 0, y: 20, scale: 0.8 }}\n              transition={{ duration: 0.2 }}\n            >\n              <Button\n                onClick={() => handleQuickAccess('license')}\n                className=\"bg-white hover:bg-gray-50 text-gray-700 border border-gray-200 rounded-full px-4 py-2 shadow-md text-sm\"\n                size=\"sm\"\n              >\n                ü™™ License\n              </Button>\n              <Button\n                onClick={() => handleQuickAccess('insurance')}\n                className=\"bg-white hover:bg-gray-50 text-gray-700 border border-gray-200 rounded-full px-4 py-2 shadow-md text-sm\"\n                size=\"sm\"\n              >\n                üõ°Ô∏è Insurance\n              </Button>\n              <Dialog open={isOpen} onOpenChange={setIsOpen}>\n                <DialogTrigger asChild>\n                  <Button\n                    onClick={() => setShowQuickActions(false)}\n                    className=\"bg-white hover:bg-gray-50 text-gray-700 border border-gray-200 rounded-full px-4 py-2 shadow-md text-sm\"\n                    size=\"sm\"\n                  >\n                    ‚ãØ All Documents\n                  </Button>\n                </DialogTrigger>\n              </Dialog>\n            </motion.div>\n          )}\n        </AnimatePresence>\n\n        {/* Main Document Button */}\n        <motion.div\n          initial={{ opacity: 0, y: 100 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.5, delay: 0.3 }}\n        >\n          <Button\n            onClick={toggleQuickActions}\n            className=\"bg-[#FF3B30] hover:bg-[#FF3B30]/90 text-white rounded-full px-4 py-3 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105\"\n            size=\"sm\"\n          >\n            <div className=\"flex items-center space-x-2\">\n              <FileText className=\"h-4 w-4\" />\n              <div className=\"flex space-x-1\">\n                {DOCUMENT_TYPES.map((docType) => {\n                  const doc = getDocumentForType(docType.key);\n                  const dotColor = doc \n                    ? doc.status === 'expired' \n                      ? 'bg-red-300/70' \n                      : doc.status === 'expiring' \n                        ? 'bg-amber-300/70' \n                        : 'bg-emerald-300/70'\n                    : 'bg-gray-300/50';\n                  \n                  return (\n                    <div\n                      key={docType.key}\n                      className={`w-1.5 h-1.5 rounded-full ${dotColor} transition-colors duration-300`}\n                      title={docType.name}\n                    />\n                  );\n                })}\n              </div>\n            </div>\n          </Button>\n        </motion.div>\n      </div>\n\n      <Dialog open={isOpen} onOpenChange={setIsOpen}>\n      \n      <DialogContent className=\"max-w-5xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle className=\"text-2xl font-bold text-[#1A1A1A] mb-2\">\n            Vehicle Documents Manager\n          </DialogTitle>\n          <DialogDescription className=\"text-gray-600 mb-4\">\n            Keep all your essential riding documents in one secure place. Required for legal riding in Bangladesh.\n          </DialogDescription>\n          \n          {/* Status Overview */}\n          <div className=\"flex flex-wrap gap-3 mb-4\">\n            <Badge \n              variant={stats.completed === stats.total ? \"default\" : \"secondary\"}\n              className={stats.completed === stats.total ? \"bg-green-100 text-green-800\" : \"bg-yellow-100 text-yellow-800\"}\n            >\n              <Shield className=\"h-3 w-3 mr-1\" />\n              {stats.completed === stats.total ? \"All Required Docs Complete\" : `${stats.completed}/${stats.total} Required`}\n            </Badge>\n            \n            {stats.expiring > 0 && (\n              <Badge variant=\"secondary\" className=\"bg-yellow-100 text-yellow-800\">\n                <Calendar className=\"h-3 w-3 mr-1\" />\n                {stats.expiring} Expiring Soon\n              </Badge>\n            )}\n            \n            {stats.expired > 0 && (\n              <Badge variant=\"destructive\">\n                <AlertCircle className=\"h-3 w-3 mr-1\" />\n                {stats.expired} Expired\n              </Badge>\n            )}\n          </div>\n        </DialogHeader>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 mt-6\">\n          {DOCUMENT_TYPES.map((docType) => {\n            const uploadedDoc = getDocumentForType(docType.key);\n            const isUploading = uploadingType === docType.key;\n\n            return (\n              <motion.div\n                key={docType.key}\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                whileHover={{ y: -4, scale: 1.02 }}\n                transition={{ duration: 0.2 }}\n              >\n                <Card className={`bg-white rounded-3xl shadow-lg hover:shadow-xl transition-all duration-300 border-0 overflow-hidden h-full ${\n                  uploadedDoc?.status === 'expired' ? 'ring-2 ring-red-200' :\n                  uploadedDoc?.status === 'expiring' ? 'ring-2 ring-yellow-200' :\n                  uploadedDoc ? 'ring-2 ring-green-200' : ''\n                }`}>\n                  <CardContent className=\"p-4 h-full flex flex-col\">\n                    {/* Header Section */}\n                    <div className=\"flex items-start justify-between mb-4\">\n                      <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n                        <div className=\"w-12 h-12 bg-[#FF3B30] rounded-2xl flex items-center justify-center flex-shrink-0 text-2xl\">\n                          {docType.icon}\n                        </div>\n                        <div className=\"min-w-0 flex-1\">\n                          <h3 className=\"font-bold text-base text-[#1A1A1A] truncate leading-tight\">{docType.name}</h3>\n                          <p className=\"text-gray-500 text-xs truncate\">{docType.description}</p>\n                          <div className=\"flex items-center flex-wrap gap-1 mt-1\">\n                            {docType.required && (\n                              <Badge variant=\"destructive\" className=\"text-xs\">Required</Badge>\n                            )}\n                            {uploadedDoc && getStatusBadge(uploadedDoc)}\n                          </div>\n                        </div>\n                      </div>\n                      \n                      {uploadedDoc && (\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => removeDocument(uploadedDoc.id)}\n                          className=\"text-red-500 hover:text-red-700 hover:bg-red-50 flex-shrink-0 h-8 w-8 p-0 rounded-xl\"\n                        >\n                          <X className=\"h-4 w-4\" />\n                        </Button>\n                      )}\n                    </div>\n\n                    {uploadedDoc ? (\n                      <div className=\"space-y-3 flex-1\">\n                        {/* Document Status Section */}\n                        <div className=\"bg-gray-50 rounded-2xl p-3\">\n                          <div className=\"flex items-center justify-between mb-2\">\n                            <div className=\"flex items-center space-x-2\">\n                              <FileText className=\"h-4 w-4 text-[#FF3B30]\" />\n                              <span className=\"text-sm font-medium text-[#1A1A1A]\">Document Ready</span>\n                            </div>\n                            <Button \n                              size=\"sm\" \n                              variant=\"outline\" \n                              className=\"rounded-full h-8 w-8 p-0\"\n                              onClick={() => handleViewDocument(uploadedDoc)}\n                            >\n                              <Eye className=\"h-3 w-3\" />\n                            </Button>\n                          </div>\n                          <p className=\"text-xs text-gray-500 truncate\">{uploadedDoc.name}</p>\n                          <p className=\"text-xs text-gray-400\">\n                            Added {uploadedDoc.uploadDate.toLocaleDateString()}\n                          </p>\n                        </div>\n\n                        {/* Expiry Status */}\n                        {uploadedDoc.expiryDate && (\n                          <div className={`rounded-2xl p-3 ${\n                            uploadedDoc.status === 'expired' ? 'bg-red-50 border border-red-200' :\n                            uploadedDoc.status === 'expiring' ? 'bg-yellow-50 border border-yellow-200' :\n                            'bg-green-50 border border-green-200'\n                          }`}>\n                            <div className=\"flex items-center space-x-2 mb-1\">\n                              <Calendar className=\"h-4 w-4\" />\n                              <span className=\"text-sm font-medium\">\n                                {uploadedDoc.status === 'expired' ? 'Expired' : \n                                 uploadedDoc.status === 'expiring' ? 'Expiring Soon' : 'Valid'}\n                              </span>\n                            </div>\n                            <p className=\"text-xs text-gray-600\">\n                              {uploadedDoc.status === 'expired' ? 'Expired' : 'Expires'}: {uploadedDoc.expiryDate.toLocaleDateString()}\n                            </p>\n                          </div>\n                        )}\n\n                        {/* Quick Expiry Update */}\n                        {docType.hasExpiry && (\n                          <div className=\"space-y-2\">\n                            <Label htmlFor={`expiry-${docType.key}`} className=\"text-xs font-medium text-gray-600\">\n                              Update Expiry Date\n                            </Label>\n                            <Input\n                              id={`expiry-${docType.key}`}\n                              type=\"date\"\n                              value={expiryDates[docType.key] || (uploadedDoc.expiryDate ? uploadedDoc.expiryDate.toISOString().split('T')[0] : '')}\n                              onChange={(e) => handleExpiryDateChange(docType.key, e.target.value)}\n                              className=\"text-sm h-8\"\n                            />\n                          </div>\n                        )}\n                      </div>\n                    ) : (\n                      <div className=\"space-y-3 flex-1\">\n                        {/* Combined Upload & Expiry Section */}\n                        <div className=\"space-y-3\">\n                          {/* File Upload Area */}\n                          <Label htmlFor={`file-${docType.key}`}>\n                            <div className={`border-2 border-dashed rounded-2xl p-4 text-center cursor-pointer transition-all duration-300 ${\n                              isUploading \n                                ? \"border-[#FF3B30] bg-[#FF3B30]/5\" \n                                : \"border-gray-300 hover:border-[#FF3B30] hover:bg-[#FF3B30]/5\"\n                            }`}>\n                              {isUploading ? (\n                                <div className=\"flex flex-col items-center\">\n                                  <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-[#FF3B30] mb-2\"></div>\n                                  <p className=\"text-xs text-[#FF3B30] font-medium\">Uploading...</p>\n                                </div>\n                              ) : (\n                                <>\n                                  <Upload className=\"h-6 w-6 mx-auto mb-2 text-gray-400\" />\n                                  <p className=\"text-sm text-gray-600 font-medium\">Upload Document</p>\n                                  <p className=\"text-xs text-gray-500 mt-1\">PDF, JPG, PNG up to 10MB</p>\n                                </>\n                              )}\n                            </div>\n                          </Label>\n                          <Input\n                            id={`file-${docType.key}`}\n                            type=\"file\"\n                            className=\"hidden\"\n                            accept=\".pdf,.jpg,.jpeg,.png\"\n                            onChange={(e) => {\n                              const file = e.target.files?.[0];\n                              if (file) {\n                                if (file.size > 10 * 1024 * 1024) {\n                                  toast({\n                                    title: \"File too large\",\n                                    description: \"Please select a file smaller than 10MB.\",\n                                    variant: \"destructive\",\n                                  });\n                                  return;\n                                }\n                                setUploadingType(docType.key);\n                                setTimeout(() => {\n                                  handleFileUpload(docType.key, file);\n                                }, 1500);\n                              }\n                            }}\n                            ref={(el) => fileInputRefs.current[docType.key] = el}\n                          />\n                          \n                          {/* Integrated Expiry Date Input */}\n                          {docType.hasExpiry && (\n                            <div className=\"bg-gray-50 rounded-2xl p-3\">\n                              <Label htmlFor={`new-expiry-${docType.key}`} className=\"text-xs font-medium mb-2 block text-gray-600\">\n                                <Calendar className=\"h-3 w-3 inline mr-1\" />\n                                Set Expiry Date (Optional)\n                              </Label>\n                              <Input\n                                id={`new-expiry-${docType.key}`}\n                                type=\"date\"\n                                value={expiryDates[docType.key] || ''}\n                                onChange={(e) => handleExpiryDateChange(docType.key, e.target.value)}\n                                className=\"text-sm h-8 bg-white\"\n                                min={new Date().toISOString().split('T')[0]}\n                              />\n                            </div>\n                          )}\n                        </div>\n                        \n                        {/* Status Footer */}\n                        {docType.required && (\n                          <div className=\"flex items-center space-x-2 text-amber-700 text-xs bg-amber-50 p-2 rounded-xl border border-amber-200\">\n                            <AlertCircle className=\"h-3 w-3 flex-shrink-0\" />\n                            <span>Required for legal riding</span>\n                          </div>\n                        )}\n                      </div>\n                    )}\n                  </CardContent>\n                </Card>\n              </motion.div>\n            );\n          })}\n        </div>\n\n        {/* Quick Access Section */}\n        {documents.length > 0 && (\n          <div className=\"mt-8 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200\">\n            <div className=\"flex items-start space-x-3\">\n              <div className=\"text-blue-500 mt-1\">\n                <Shield className=\"h-5 w-5\" />\n              </div>\n              <div className=\"flex-1\">\n                <h4 className=\"font-semibold text-blue-900 mb-2\">Quick Access Ready</h4>\n                <p className=\"text-sm text-blue-700 mb-3\">\n                  Your documents are securely stored and ready for instant access during traffic stops or inspections.\n                </p>\n                <div className=\"flex flex-wrap gap-2\">\n                  {documents.map((doc) => (\n                    <Button\n                      key={doc.id}\n                      size=\"sm\"\n                      variant=\"outline\"\n                      className=\"bg-white border-blue-200 hover:bg-blue-50 text-blue-900\"\n                      onClick={() => handleViewDocument(doc)}\n                    >\n                      <span className=\"mr-2\">{DOCUMENT_TYPES.find(dt => dt.key === doc.type)?.icon}</span>\n                      {DOCUMENT_TYPES.find(dt => dt.key === doc.type)?.name}\n                    </Button>\n                  ))}\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Info Section */}\n        <div className=\"mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200\">\n          <div className=\"flex items-start space-x-3\">\n            <div className=\"text-gray-500 mt-1\">\n              <AlertCircle className=\"h-5 w-5\" />\n            </div>\n            <div>\n              <h4 className=\"font-semibold text-gray-800 mb-1\">Important Reminder</h4>\n              <p className=\"text-sm text-gray-600\">\n                In Bangladesh, carrying required documents while riding is mandatory. Digital copies are legally acceptable \n                for most inspections, but always verify current regulations with local authorities.\n              </p>\n            </div>\n          </div>\n        </div>\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n};\n\nexport default DocumentUploadDialog;","size_bytes":24077},"client/src/components/ui/PartsCarousel.tsx":{"content":"import { useState } from \"react\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ChevronLeft, ChevronRight, ShoppingCart, Star } from \"lucide-react\";\n\ninterface Part {\n  id: number;\n  name: string;\n  price: number;\n  image: string;\n  rating: number;\n  category: string;\n  compatibility: string[];\n}\n\ninterface PartsCarouselProps {\n  vehicleMake: string;\n  vehicleModel: string;\n  vehicleYear: number;\n}\n\nconst PartsCarousel = ({ vehicleMake, vehicleModel, vehicleYear }: PartsCarouselProps) => {\n  const [currentIndex, setCurrentIndex] = useState(0);\n\n  // Mock parts data - in a real app, this would be fetched based on the vehicle\n  const suggestedParts: Part[] = [\n    {\n      id: 1,\n      name: \"Performance Air Filter\",\n      price: 89.99,\n      image: \"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80\",\n      rating: 4.8,\n      category: \"Engine\",\n      compatibility: [vehicleMake, vehicleModel]\n    },\n    {\n      id: 2,\n      name: \"LED Headlight Upgrade\",\n      price: 159.99,\n      image: \"https://images.unsplash.com/photo-1558618047-dcd31405f66b?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80\",\n      rating: 4.9,\n      category: \"Lighting\",\n      compatibility: [vehicleMake, vehicleModel]\n    },\n    {\n      id: 3,\n      name: \"Carbon Fiber Exhaust\",\n      price: 449.99,\n      image: \"https://images.unsplash.com/photo-1558618054-fcd31405f66c?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80\",\n      rating: 4.7,\n      category: \"Exhaust\",\n      compatibility: [vehicleMake, vehicleModel]\n    },\n    {\n      id: 4,\n      name: \"Brake Pad Set\",\n      price: 129.99,\n      image: \"https://images.unsplash.com/photo-1558618666-fcd25c85cd65?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80\",\n      rating: 4.6,\n      category: \"Brakes\",\n      compatibility: [vehicleMake, vehicleModel]\n    },\n    {\n      id: 5,\n      name: \"Tank Pad Protection\",\n      price: 39.99,\n      image: \"https://images.unsplash.com/photo-1558618047-dcd31405f66d?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80\",\n      rating: 4.5,\n      category: \"Protection\",\n      compatibility: [vehicleMake, vehicleModel]\n    }\n  ];\n\n  const itemsPerView = 3;\n  const maxIndex = Math.max(0, suggestedParts.length - itemsPerView);\n\n  const nextSlide = () => {\n    setCurrentIndex(prev => Math.min(prev + 1, maxIndex));\n  };\n\n  const prevSlide = () => {\n    setCurrentIndex(prev => Math.max(prev - 1, 0));\n  };\n\n  const handleAddToCart = (part: Part) => {\n    // Add to cart functionality\n    const cart = JSON.parse(localStorage.getItem('shoppingCart') || '[]');\n    const existingIndex = cart.findIndex((item: any) => item.id === part.id);\n    \n    if (existingIndex >= 0) {\n      cart[existingIndex].quantity += 1;\n    } else {\n      cart.push({ ...part, quantity: 1 });\n    }\n    \n    localStorage.setItem('shoppingCart', JSON.stringify(cart));\n    alert(`${part.name} added to cart!`);\n  };\n\n  return (\n    <div className=\"p-4 bg-gray-50 rounded-lg\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <div>\n          <p className=\"text-sm text-gray-600\">Compatible with {vehicleMake} {vehicleModel} ({vehicleYear})</p>\n        </div>\n        \n        <div className=\"flex space-x-2\">\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={prevSlide}\n            disabled={currentIndex === 0}\n            className=\"rounded-full p-2 h-8 w-8\"\n          >\n            <ChevronLeft className=\"h-4 w-4\" />\n          </Button>\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={nextSlide}\n            disabled={currentIndex === maxIndex}\n            className=\"rounded-full p-2 h-8 w-8\"\n          >\n            <ChevronRight className=\"h-4 w-4\" />\n          </Button>\n        </div>\n      </div>\n\n      <div className=\"overflow-hidden\">\n        <div \n          className=\"flex transition-transform duration-300 ease-in-out\"\n          style={{ transform: `translateX(-${currentIndex * (100 / itemsPerView)}%)` }}\n        >\n          {suggestedParts.map((part) => (\n            <div key={part.id} className=\"flex-shrink-0 w-1/3 px-2\">\n              <Card className=\"h-full border-0 shadow-sm hover:shadow-md transition-shadow\">\n                <CardContent className=\"p-3\">\n                  <div className=\"aspect-square bg-gray-100 rounded-lg mb-3 overflow-hidden\">\n                    <img\n                      src={part.image}\n                      alt={part.name}\n                      className=\"w-full h-full object-cover\"\n                    />\n                  </div>\n                  \n                  <div className=\"space-y-2\">\n                    <Badge variant=\"secondary\" className=\"text-xs\">\n                      {part.category}\n                    </Badge>\n                    \n                    <h5 className=\"font-medium text-sm line-clamp-2\">{part.name}</h5>\n                    \n                    <div className=\"flex items-center space-x-1\">\n                      <div className=\"flex items-center\">\n                        {[...Array(5)].map((_, i) => (\n                          <Star\n                            key={i}\n                            className={`h-3 w-3 ${\n                              i < Math.floor(part.rating)\n                                ? \"text-yellow-400 fill-current\"\n                                : \"text-gray-300\"\n                            }`}\n                          />\n                        ))}\n                      </div>\n                      <span className=\"text-xs text-gray-600\">({part.rating})</span>\n                    </div>\n                    \n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"font-bold text-[#FF3B30]\">${part.price}</span>\n                      <Button\n                        size=\"sm\"\n                        onClick={() => handleAddToCart(part)}\n                        className=\"bg-[#FF3B30] hover:bg-[#FF3B30]/90 text-white rounded-full px-3 py-1 text-xs\"\n                      >\n                        <ShoppingCart className=\"h-3 w-3 mr-1\" />\n                        Add\n                      </Button>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PartsCarousel;","size_bytes":6528},"client/src/components/ui/PhotoUpload.tsx":{"content":"import { useState, useRef } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Upload, X, Image } from \"lucide-react\";\n\ninterface PhotoUploadProps {\n  onPhotoSelect: (file: File | null) => void;\n  currentPhoto?: string;\n  label?: string;\n  className?: string;\n}\n\nconst PhotoUpload = ({ onPhotoSelect, currentPhoto, label = \"Upload Photo\", className = \"\" }: PhotoUploadProps) => {\n  const [preview, setPreview] = useState<string | null>(currentPhoto || null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      // Validate file type\n      if (!file.type.startsWith('image/')) {\n        alert('Please select an image file');\n        return;\n      }\n      \n      // Validate file size (max 5MB)\n      if (file.size > 5 * 1024 * 1024) {\n        alert('File size must be less than 5MB');\n        return;\n      }\n\n      // Create preview URL\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        setPreview(e.target?.result as string);\n      };\n      reader.readAsDataURL(file);\n      \n      onPhotoSelect(file);\n    }\n  };\n\n  const handleRemovePhoto = () => {\n    setPreview(null);\n    onPhotoSelect(null);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const handleClick = () => {\n    fileInputRef.current?.click();\n  };\n\n  return (\n    <div className={`space-y-2 ${className}`}>\n      <Label>{label}</Label>\n      \n      <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-[#FF3B30] transition-colors\">\n        {preview ? (\n          <div className=\"relative\">\n            <img\n              src={preview}\n              alt=\"Preview\"\n              className=\"max-w-full max-h-48 mx-auto rounded-lg object-cover\"\n            />\n            <Button\n              type=\"button\"\n              variant=\"destructive\"\n              size=\"sm\"\n              className=\"absolute top-2 right-2 rounded-full p-1 h-8 w-8\"\n              onClick={handleRemovePhoto}\n            >\n              <X className=\"h-4 w-4\" />\n            </Button>\n          </div>\n        ) : (\n          <div className=\"cursor-pointer\" onClick={handleClick}>\n            <Image className=\"h-12 w-12 mx-auto mb-2 text-gray-400\" />\n            <p className=\"text-sm text-gray-600 mb-2\">Click to upload photo</p>\n            <p className=\"text-xs text-gray-400\">PNG, JPG, GIF up to 5MB</p>\n          </div>\n        )}\n      </div>\n\n      <Input\n        ref={fileInputRef}\n        type=\"file\"\n        accept=\"image/*\"\n        onChange={handleFileSelect}\n        className=\"hidden\"\n      />\n      \n      {!preview && (\n        <Button\n          type=\"button\"\n          variant=\"outline\"\n          onClick={handleClick}\n          className=\"w-full rounded-full\"\n        >\n          <Upload className=\"h-4 w-4 mr-2\" />\n          Choose Photo\n        </Button>\n      )}\n    </div>\n  );\n};\n\nexport default PhotoUpload;","size_bytes":3136},"client/src/components/ui/VerticalCarousel.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { ChevronUp, ChevronDown, Calendar, MapPin } from \"lucide-react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { Motorcycle } from \"@shared/schema\";\n\ninterface VerticalCarouselProps {\n  motorcycles: Motorcycle[];\n  onMotorcycleSelect?: (motorcycle: Motorcycle) => void;\n}\n\nconst VerticalCarousel = ({ motorcycles, onMotorcycleSelect }: VerticalCarouselProps) => {\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [visibleItems, setVisibleItems] = useState(3);\n\n  useEffect(() => {\n    const updateVisibleItems = () => {\n      const height = window.innerHeight;\n      if (height < 600) setVisibleItems(2);\n      else if (height < 800) setVisibleItems(3);\n      else setVisibleItems(4);\n    };\n\n    updateVisibleItems();\n    window.addEventListener('resize', updateVisibleItems);\n    return () => window.removeEventListener('resize', updateVisibleItems);\n  }, []);\n\n  const canScrollUp = currentIndex > 0;\n  const canScrollDown = currentIndex < motorcycles.length - visibleItems;\n\n  const scrollUp = () => {\n    if (canScrollUp) {\n      setCurrentIndex(prev => prev - 1);\n    }\n  };\n\n  const scrollDown = () => {\n    if (canScrollDown) {\n      setCurrentIndex(prev => prev + 1);\n    }\n  };\n\n  const getVisibleMotorcycles = () => {\n    return motorcycles.slice(currentIndex, currentIndex + visibleItems);\n  };\n\n  if (!motorcycles || motorcycles.length === 0) {\n    return (\n      <div className=\"fixed right-8 top-1/2 transform -translate-y-1/2 z-40\">\n        <Card className=\"w-64 bg-white/90 backdrop-blur-sm shadow-xl border-0\">\n          <CardContent className=\"p-6 text-center\">\n            <div className=\"text-4xl mb-3\">üèçÔ∏è</div>\n            <p className=\"text-gray-600 text-sm\">Add motorcycles to see them here</p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"fixed right-8 top-1/2 transform -translate-y-1/2 z-40\">\n      <div className=\"flex flex-col items-center space-y-4\">\n        {/* Scroll Up Button */}\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={scrollUp}\n          disabled={!canScrollUp}\n          className={`rounded-full p-2 bg-white/90 backdrop-blur-sm shadow-lg border-0 transition-all duration-300 ${\n            canScrollUp \n              ? \"hover:bg-[#FF3B30] hover:text-white\" \n              : \"opacity-50 cursor-not-allowed\"\n          }`}\n        >\n          <ChevronUp className=\"h-4 w-4\" />\n        </Button>\n\n        {/* Motorcycle Cards Container */}\n        <div className=\"relative\">\n          <div className=\"w-64 space-y-3\">\n            <AnimatePresence mode=\"wait\">\n              {getVisibleMotorcycles().map((motorcycle, index) => {\n                const actualIndex = currentIndex + index;\n                const isCenter = index === Math.floor(visibleItems / 2);\n                \n                return (\n                  <motion.div\n                    key={`${motorcycle.id}-${actualIndex}`}\n                    initial={{ opacity: 0, x: 50, scale: 0.9 }}\n                    animate={{ \n                      opacity: isCenter ? 1 : 0.7,\n                      x: 0,\n                      scale: isCenter ? 1 : 0.95,\n                    }}\n                    exit={{ opacity: 0, x: -50, scale: 0.9 }}\n                    transition={{ duration: 0.3, delay: index * 0.1 }}\n                    whileHover={{ scale: 1.02 }}\n                    className=\"cursor-pointer\"\n                    onClick={() => onMotorcycleSelect?.(motorcycle)}\n                  >\n                    <Card className={`bg-white/90 backdrop-blur-sm shadow-xl border-0 transition-all duration-300 ${\n                      isCenter ? \"ring-2 ring-[#FF3B30]/30\" : \"\"\n                    }`}>\n                      <CardContent className=\"p-4\">\n                        <div className=\"flex items-center space-x-3 mb-3\">\n                          <div className=\"w-10 h-10 bg-[#1A1A1A] rounded-full flex items-center justify-center\">\n                            <svg className=\"w-5 h-5 text-white\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                              <path d=\"M12 2l3.09 6.26L22 9l-5 4.9 1.18 6.84L12 17.27 5.82 20.74 7 13.9 2 9l6.91-.74z\"/>\n                            </svg>\n                          </div>\n                          <div className=\"flex-1 min-w-0\">\n                            <h3 className=\"font-semibold text-sm text-[#1A1A1A] truncate\">\n                              {motorcycle.name}\n                            </h3>\n                            <p className=\"text-xs text-gray-500 truncate\">\n                              {motorcycle.make || 'Unknown'} {motorcycle.model || ''}\n                            </p>\n                          </div>\n                        </div>\n\n                        <div className=\"grid grid-cols-2 gap-3 text-xs\">\n                          <div className=\"flex items-center space-x-1\">\n                            <MapPin className=\"h-3 w-3 text-[#FF3B30]\" />\n                            <span className=\"text-gray-600 truncate\">\n                              {motorcycle.mileage?.toLocaleString() || '0'} Mi\n                            </span>\n                          </div>\n                          <div className=\"flex items-center space-x-1\">\n                            <Calendar className=\"h-3 w-3 text-[#FF3B30]\" />\n                            <span className=\"text-gray-600\">\n                              {motorcycle.year || 'N/A'}\n                            </span>\n                          </div>\n                        </div>\n\n                        {isCenter && (\n                          <motion.div\n                            initial={{ opacity: 0, height: 0 }}\n                            animate={{ opacity: 1, height: \"auto\" }}\n                            exit={{ opacity: 0, height: 0 }}\n                            className=\"mt-3 pt-3 border-t border-gray-200\"\n                          >\n                            <div className=\"flex items-center justify-between text-xs\">\n                              <span className=\"text-gray-500\">Status:</span>\n                              <span className=\"text-green-600 font-medium\">Active</span>\n                            </div>\n                          </motion.div>\n                        )}\n                      </CardContent>\n                    </Card>\n                  </motion.div>\n                );\n              })}\n            </AnimatePresence>\n          </div>\n\n          {/* Visual indicator for more items */}\n          {motorcycles.length > visibleItems && (\n            <div className=\"absolute -bottom-2 left-1/2 transform -translate-x-1/2\">\n              <div className=\"flex space-x-1\">\n                {Array.from({ length: Math.ceil(motorcycles.length / visibleItems) }).map((_, i) => (\n                  <div\n                    key={i}\n                    className={`w-2 h-2 rounded-full transition-all duration-300 ${\n                      Math.floor(currentIndex / visibleItems) === i\n                        ? \"bg-[#FF3B30]\"\n                        : \"bg-gray-300\"\n                    }`}\n                  />\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Scroll Down Button */}\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={scrollDown}\n          disabled={!canScrollDown}\n          className={`rounded-full p-2 bg-white/90 backdrop-blur-sm shadow-lg border-0 transition-all duration-300 ${\n            canScrollDown \n              ? \"hover:bg-[#FF3B30] hover:text-white\" \n              : \"opacity-50 cursor-not-allowed\"\n          }`}\n        >\n          <ChevronDown className=\"h-4 w-4\" />\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default VerticalCarousel;","size_bytes":7951},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/avatar.tsx":{"content":"import * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1405},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1128},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":1901},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ ...props }) => <ChevronLeft className=\"h-4 w-4\" />,\n        IconRight: ({ ...props }) => <ChevronRight className=\"h-4 w-4\" />,\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2609},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <p\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","size_bytes":1877},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/ui/chart.tsx":{"content":"import * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([_, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item.dataKey || item.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10466},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/ui/collapsible.tsx":{"content":"import * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":315},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\ninterface CommandDialogProps extends DialogProps {}\n\nconst CommandDialog = ({ children, ...props }: CommandDialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4879},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7246},"client/src/components/ui/dialog.tsx":{"content":"import * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}","size_bytes":3855},"client/src/components/ui/drawer.tsx":{"content":"import * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3007},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7361},"client/src/components/ui/form.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  ControllerProps,\n  FieldPath,\n  FieldValues,\n  FormProvider,\n  useFormContext,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message) : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4085},"client/src/components/ui/hover-card.tsx":{"content":"import * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1184},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nexport interface InputProps\n  extends React.InputHTMLAttributes<HTMLInputElement> {}\n\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":845},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/menubar.tsx":{"content":"import * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst MenubarMenu = MenubarPrimitive.Menu\n\nconst MenubarGroup = MenubarPrimitive.Group\n\nconst MenubarPortal = MenubarPrimitive.Portal\n\nconst MenubarSub = MenubarPrimitive.Sub\n\nconst MenubarRadioGroup = MenubarPrimitive.RadioGroup\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":7974},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5046},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1230},"client/src/components/ui/progress.tsx":{"content":"import * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }","size_bytes":775},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/resizable.tsx":{"content":"import { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1709},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/ui/select.tsx":{"content":"import * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5615},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/ui/sheet.tsx":{"content":"import * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4267},"client/src/components/ui/sidebar.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { VariantProps, cva } from \"class-variance-authority\"\nimport { PanelLeft } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport { Sheet, SheetContent } from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar:state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContext = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContext | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    defaultOpen?: boolean\n    open?: boolean\n    onOpenChange?: (open: boolean) => void\n  }\n>(\n  (\n    {\n      defaultOpen = true,\n      open: openProp,\n      onOpenChange: setOpenProp,\n      className,\n      style,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const isMobile = useIsMobile()\n    const [openMobile, setOpenMobile] = React.useState(false)\n\n    // This is the internal state of the sidebar.\n    // We use openProp and setOpenProp for control from outside the component.\n    const [_open, _setOpen] = React.useState(defaultOpen)\n    const open = openProp ?? _open\n    const setOpen = React.useCallback(\n      (value: boolean | ((value: boolean) => boolean)) => {\n        if (setOpenProp) {\n          return setOpenProp?.(\n            typeof value === \"function\" ? value(open) : value\n          )\n        }\n\n        _setOpen(value)\n\n        // This sets the cookie to keep the sidebar state.\n        document.cookie = `${SIDEBAR_COOKIE_NAME}=${open}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n      },\n      [setOpenProp, open]\n    )\n\n    // Helper to toggle the sidebar.\n    const toggleSidebar = React.useCallback(() => {\n      return isMobile\n        ? setOpenMobile((open) => !open)\n        : setOpen((open) => !open)\n    }, [isMobile, setOpen, setOpenMobile])\n\n    // Adds a keyboard shortcut to toggle the sidebar.\n    React.useEffect(() => {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        if (\n          event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n          (event.metaKey || event.ctrlKey)\n        ) {\n          event.preventDefault()\n          toggleSidebar()\n        }\n      }\n\n      window.addEventListener(\"keydown\", handleKeyDown)\n      return () => window.removeEventListener(\"keydown\", handleKeyDown)\n    }, [toggleSidebar])\n\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n    // This makes it easier to style the sidebar with Tailwind classes.\n    const state = open ? \"expanded\" : \"collapsed\"\n\n    const contextValue = React.useMemo<SidebarContext>(\n      () => ({\n        state,\n        open,\n        setOpen,\n        isMobile,\n        openMobile,\n        setOpenMobile,\n        toggleSidebar,\n      }),\n      [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n    )\n\n    return (\n      <SidebarContext.Provider value={contextValue}>\n        <TooltipProvider delayDuration={0}>\n          <div\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH,\n                \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n                ...style,\n              } as React.CSSProperties\n            }\n            className={cn(\n              \"group/sidebar-wrapper flex min-h-svh w-full text-sidebar-foreground has-[[data-variant=inset]]:bg-sidebar\",\n              className\n            )}\n            ref={ref}\n            {...props}\n          >\n            {children}\n          </div>\n        </TooltipProvider>\n      </SidebarContext.Provider>\n    )\n  }\n)\nSidebarProvider.displayName = \"SidebarProvider\"\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    side?: \"left\" | \"right\"\n    variant?: \"sidebar\" | \"floating\" | \"inset\"\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n  }\n>(\n  (\n    {\n      side = \"left\",\n      variant = \"sidebar\",\n      collapsible = \"offcanvas\",\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n    if (collapsible === \"none\") {\n      return (\n        <div\n          className={cn(\n            \"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\",\n            className\n          )}\n          ref={ref}\n          {...props}\n        >\n          {children}\n        </div>\n      )\n    }\n\n    if (isMobile) {\n      return (\n        <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n          <SheetContent\n            data-sidebar=\"sidebar\"\n            data-mobile=\"true\"\n            className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n              } as React.CSSProperties\n            }\n            side={side}\n          >\n            <div className=\"flex h-full w-full flex-col\">{children}</div>\n          </SheetContent>\n        </Sheet>\n      )\n    }\n\n    return (\n      <div\n        ref={ref}\n        className=\"group peer hidden md:block\"\n        data-state={state}\n        data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n        data-variant={variant}\n        data-side={side}\n      >\n        {/* This is what handles the sidebar gap on desktop */}\n        <div\n          className={cn(\n            \"duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear\",\n            \"group-data-[collapsible=offcanvas]:w-0\",\n            \"group-data-[side=right]:rotate-180\",\n            variant === \"floating\" || variant === \"inset\"\n              ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\"\n          )}\n        />\n        <div\n          className={cn(\n            \"duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex\",\n            side === \"left\"\n              ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n              : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n            // Adjust the padding for floating and inset variants.\n            variant === \"floating\" || variant === \"inset\"\n              ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n            className\n          )}\n          {...props}\n        >\n          <div\n            data-sidebar=\"sidebar\"\n            className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\n          >\n            {children}\n          </div>\n        </div>\n      </div>\n    )\n  }\n)\nSidebar.displayName = \"Sidebar\"\n\nconst SidebarTrigger = React.forwardRef<\n  React.ElementRef<typeof Button>,\n  React.ComponentProps<typeof Button>\n>(({ className, onClick, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      ref={ref}\n      data-sidebar=\"trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeft />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n})\nSidebarTrigger.displayName = \"SidebarTrigger\"\n\nconst SidebarRail = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\">\n>(({ className, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <button\n      ref={ref}\n      data-sidebar=\"rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex\",\n        \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarRail.displayName = \"SidebarRail\"\n\nconst SidebarInset = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"main\">\n>(({ className, ...props }, ref) => {\n  return (\n    <main\n      ref={ref}\n      className={cn(\n        \"relative flex min-h-svh flex-1 flex-col bg-background\",\n        \"peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInset.displayName = \"SidebarInset\"\n\nconst SidebarInput = React.forwardRef<\n  React.ElementRef<typeof Input>,\n  React.ComponentProps<typeof Input>\n>(({ className, ...props }, ref) => {\n  return (\n    <Input\n      ref={ref}\n      data-sidebar=\"input\"\n      className={cn(\n        \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInput.displayName = \"SidebarInput\"\n\nconst SidebarHeader = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarHeader.displayName = \"SidebarHeader\"\n\nconst SidebarFooter = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarFooter.displayName = \"SidebarFooter\"\n\nconst SidebarSeparator = React.forwardRef<\n  React.ElementRef<typeof Separator>,\n  React.ComponentProps<typeof Separator>\n>(({ className, ...props }, ref) => {\n  return (\n    <Separator\n      ref={ref}\n      data-sidebar=\"separator\"\n      className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\n      {...props}\n    />\n  )\n})\nSidebarSeparator.displayName = \"SidebarSeparator\"\n\nconst SidebarContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarContent.displayName = \"SidebarContent\"\n\nconst SidebarGroup = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarGroup.displayName = \"SidebarGroup\"\n\nconst SidebarGroupLabel = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\"\n\nconst SidebarGroupAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupAction.displayName = \"SidebarGroupAction\"\n\nconst SidebarGroupContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"group-content\"\n    className={cn(\"w-full text-sm\", className)}\n    {...props}\n  />\n))\nSidebarGroupContent.displayName = \"SidebarGroupContent\"\n\nconst SidebarMenu = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu\"\n    className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n    {...props}\n  />\n))\nSidebarMenu.displayName = \"SidebarMenu\"\n\nconst SidebarMenuItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    data-sidebar=\"menu-item\"\n    className={cn(\"group/menu-item relative\", className)}\n    {...props}\n  />\n))\nSidebarMenuItem.displayName = \"SidebarMenuItem\"\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    isActive?: boolean\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(\n  (\n    {\n      asChild = false,\n      isActive = false,\n      variant = \"default\",\n      size = \"default\",\n      tooltip,\n      className,\n      ...props\n    },\n    ref\n  ) => {\n    const Comp = asChild ? Slot : \"button\"\n    const { isMobile, state } = useSidebar()\n\n    const button = (\n      <Comp\n        ref={ref}\n        data-sidebar=\"menu-button\"\n        data-size={size}\n        data-active={isActive}\n        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n        {...props}\n      />\n    )\n\n    if (!tooltip) {\n      return button\n    }\n\n    if (typeof tooltip === \"string\") {\n      tooltip = {\n        children: tooltip,\n      }\n    }\n\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>{button}</TooltipTrigger>\n        <TooltipContent\n          side=\"right\"\n          align=\"center\"\n          hidden={state !== \"collapsed\" || isMobile}\n          {...tooltip}\n        />\n      </Tooltip>\n    )\n  }\n)\nSidebarMenuButton.displayName = \"SidebarMenuButton\"\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    showOnHover?: boolean\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuAction.displayName = \"SidebarMenuAction\"\n\nconst SidebarMenuBadge = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"menu-badge\"\n    className={cn(\n      \"absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none\",\n      \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n      \"peer-data-[size=sm]/menu-button:top-1\",\n      \"peer-data-[size=default]/menu-button:top-1.5\",\n      \"peer-data-[size=lg]/menu-button:top-2.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\"\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    showIcon?: boolean\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"rounded-md h-8 flex gap-2 px-2 items-center\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 flex-1 max-w-[--skeleton-width]\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n})\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\"\n\nconst SidebarMenuSub = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu-sub\"\n    className={cn(\n      \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuSub.displayName = \"SidebarMenuSub\"\n\nconst SidebarMenuSubItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ ...props }, ref) => <li ref={ref} {...props} />)\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\"\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<\"a\"> & {\n    asChild?: boolean\n    size?: \"sm\" | \"md\"\n    isActive?: boolean\n  }\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\"\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":23337},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nexport interface TextareaProps\n  extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\n  ({ className, ...props }, ref) => {\n    return (\n      <textarea\n        className={cn(\n          \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":772},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/components/ui/toggle-group.tsx":{"content":"import * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1739},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3\",\n        sm: \"h-9 px-2.5\",\n        lg: \"h-11 px-5\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1435},"client/src/components/ui/tooltip.tsx":{"content":"import * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1145},"client/src/components/ui/community/RideCard.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { User } from \"@shared/schema\";\nimport { MapPin, Calendar, Check } from \"lucide-react\";\nimport { format } from \"date-fns\";\n\ninterface RideCardProps {\n  id: number;\n  title: string;\n  location: string;\n  date: string;\n  host: Omit<User, 'password'>;\n  attendees: Array<Omit<User, 'password'>>;\n  joined?: boolean;\n  onJoin?: (id: number) => void;\n}\n\nconst RideCard = ({ \n  id, \n  title, \n  location, \n  date, \n  attendees, \n  joined = false,\n  onJoin \n}: RideCardProps) => {\n  const handleJoin = () => {\n    if (onJoin) {\n      onJoin(id);\n    }\n  };\n\n  const formattedDate = format(new Date(date), 'MMM d');\n  const day = format(new Date(date), 'd');\n  const month = format(new Date(date), 'MMM').toUpperCase();\n\n  return (\n    <Card className=\"overflow-hidden\">\n      <CardContent className=\"p-4\">\n        <div className=\"flex items-start\">\n          <div className=\"flex-shrink-0 w-16 h-16 bg-gray-100 rounded-lg flex flex-col items-center justify-center mr-4\">\n            <span className=\"text-xl font-bold\">{day}</span>\n            <span className=\"text-xs\">{month}</span>\n          </div>\n          \n          <div className=\"flex-grow\">\n            <h4 className=\"font-medium\">{title}</h4>\n            <p className=\"text-sm text-gray-500 flex items-center mt-1\">\n              <MapPin className=\"h-3 w-3 mr-1\" />\n              {location}\n            </p>\n            \n            <div className=\"mt-2 flex items-center\">\n              <div className=\"flex -space-x-2 mr-2\">\n                {attendees.slice(0, 3).map((attendee, index) => (\n                  <Avatar key={index} className=\"h-6 w-6 border-2 border-white\">\n                    <AvatarImage src={attendee.avatarUrl} alt={attendee.fullName} />\n                    <AvatarFallback>{attendee.fullName.charAt(0)}</AvatarFallback>\n                  </Avatar>\n                ))}\n              </div>\n              {attendees.length > 3 && (\n                <span className=\"text-xs text-gray-500\">+{attendees.length - 3} riders</span>\n              )}\n            </div>\n          </div>\n          \n          <div>\n            {joined ? (\n              <Button \n                size=\"sm\" \n                variant=\"outline\" \n                className=\"text-green-600 border-green-600\"\n                disabled\n              >\n                <Check className=\"h-3 w-3 mr-1\" />\n                Joined\n              </Button>\n            ) : (\n              <Button \n                size=\"sm\" \n                className=\"bg-[#007AFF] hover:bg-[#007AFF]/90 text-white\"\n                onClick={handleJoin}\n              >\n                Join\n              </Button>\n            )}\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default RideCard;\n","size_bytes":2934},"client/src/components/ui/community/RiderCard.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { User } from \"@shared/schema\";\nimport { MessageSquare } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useQueryClient } from \"@tanstack/react-query\";\n\ninterface RiderCardProps {\n  rider: Omit<User, 'password'>;\n  isFriend?: boolean;\n  isPending?: boolean;\n}\n\nconst RiderCard = ({ rider, isFriend = false, isPending = false }: RiderCardProps) => {\n  const [isLoading, setIsLoading] = useState(false);\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const handleConnect = async () => {\n    if (isLoading) return;\n    \n    setIsLoading(true);\n    try {\n      await apiRequest(\"POST\", \"/api/friends/request\", { friendId: rider.id });\n      toast({\n        title: \"Request Sent\",\n        description: `Friend request sent to ${rider.fullName}.`,\n      });\n      queryClient.invalidateQueries({ queryKey: ['/api/friends'] });\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to send friend request. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Card className=\"overflow-hidden hover:shadow-md transition-all\">\n      <CardContent className=\"p-4\">\n        <div className=\"flex items-center gap-4\">\n          <Avatar className=\"h-14 w-14\">\n            <AvatarImage src={rider.avatarUrl} alt={rider.fullName} />\n            <AvatarFallback>{rider.fullName.charAt(0)}</AvatarFallback>\n          </Avatar>\n          \n          <div className=\"flex-grow\">\n            <div className=\"flex justify-between items-start\">\n              <div>\n                <h3 className=\"font-medium\">{rider.fullName}</h3>\n                <p className=\"text-sm text-gray-500\">@{rider.username}</p>\n              </div>\n              {isFriend && (\n                <Badge className=\"bg-green-100 text-green-700 hover:bg-green-200\">Connected</Badge>\n              )}\n              {isPending && (\n                <Badge className=\"bg-yellow-100 text-yellow-700 hover:bg-yellow-200\">Pending</Badge>\n              )}\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"mt-4 flex justify-end space-x-2\">\n          {isFriend && (\n            <Button size=\"sm\" variant=\"outline\" className=\"text-[#007AFF]\">\n              <MessageSquare className=\"h-4 w-4 mr-1\" />\n              Message\n            </Button>\n          )}\n          \n          {!isFriend && !isPending && (\n            <Button \n              size=\"sm\" \n              className=\"bg-[#007AFF] hover:bg-[#007AFF]/90 text-white\"\n              onClick={handleConnect}\n              disabled={isLoading}\n            >\n              Connect\n            </Button>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default RiderCard;\n","size_bytes":3116},"client/src/components/ui/dashboard/MetricCard.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\n\ninterface MetricCardProps {\n  title: string;\n  value: string | number;\n  icon: React.ReactNode;\n  subtext?: string;\n  subtextHighlight?: string;\n  iconColor?: string;\n}\n\nconst MetricCard = ({ \n  title, \n  value, \n  icon, \n  subtext, \n  subtextHighlight,\n  iconColor = 'bg-primary/10 text-primary'\n}: MetricCardProps) => {\n  return (\n    <Card className=\"bg-white rounded-lg shadow\">\n      <CardContent className=\"p-6\">\n        <div className=\"flex justify-between items-start\">\n          <div>\n            <h3 className=\"text-gray-500 font-medium text-sm uppercase\">{title}</h3>\n            <p className=\"text-3xl font-bold font-header mt-2\">{value}</p>\n          </div>\n          <div className={`p-2 rounded-md ${iconColor}`}>\n            {icon}\n          </div>\n        </div>\n        {subtext && (\n          <div className=\"mt-4 text-sm text-gray-500\">\n            {subtextHighlight && <span className=\"text-[#007AFF] font-medium\">{subtextHighlight}</span>}{\" \"}\n            {subtext}\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default MetricCard;\n","size_bytes":1145},"client/src/components/ui/layout/Footer.tsx":{"content":"import { Link } from \"wouter\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { \n  Facebook, \n  Twitter, \n  Instagram, \n  Youtube, \n  ArrowRight \n} from \"lucide-react\";\n\nconst Footer = () => {\n  return (\n    <footer className=\"bg-[#1A1A1A] text-white py-8\">\n      <div className=\"container mx-auto px-4\">\n        <div className=\"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0\">\n          <div className=\"flex flex-col md:flex-row items-center space-y-2 md:space-y-0 md:space-x-6\">\n            <h3 className=\"text-lg font-bold font-header uppercase\">ThrottleCove</h3>\n            <p className=\"text-gray-400 text-sm text-center md:text-left\">\n              Your digital garage and motorcycle community platform.\n            </p>\n          </div>\n          \n          <div className=\"flex items-center space-x-6\">\n            <div className=\"flex space-x-3\">\n              <Button variant=\"ghost\" size=\"icon\" className=\"text-gray-400 hover:text-white transition-all h-8 w-8\">\n                <Facebook size={16} />\n              </Button>\n              <Button variant=\"ghost\" size=\"icon\" className=\"text-gray-400 hover:text-white transition-all h-8 w-8\">\n                <Twitter size={16} />\n              </Button>\n              <Button variant=\"ghost\" size=\"icon\" className=\"text-gray-400 hover:text-white transition-all h-8 w-8\">\n                <Instagram size={16} />\n              </Button>\n              <Button variant=\"ghost\" size=\"icon\" className=\"text-gray-400 hover:text-white transition-all h-8 w-8\">\n                <Youtube size={16} />\n              </Button>\n            </div>\n            \n            <div className=\"flex space-x-4 text-sm\">\n              <Link href=\"/privacy\" className=\"text-gray-400 hover:text-white transition-all\">\n                Privacy\n              </Link>\n              <Link href=\"/terms\" className=\"text-gray-400 hover:text-white transition-all\">\n                Terms\n              </Link>\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"border-t border-gray-800 pt-4 mt-4 text-center\">\n          <p className=\"text-gray-400 text-sm\">¬© {new Date().getFullYear()} ThrottleCove. All rights reserved.</p>\n        </div>\n      </div>\n    </footer>\n  );\n};\n\nexport default Footer;\n","size_bytes":2349},"client/src/components/ui/layout/ModernNavBar.tsx":{"content":"import { useEffect, useState } from \"react\";\nimport { Link, useLocation } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { ArrowRight, LogOut } from \"lucide-react\";\nimport logo from \"@/assets/tclogov2r2.svg\"\n\nconst ModernNavBar = () => {\n  const { user, logout } = useAuth();\n  const [location] = useLocation();\n  const { toast } = useToast();\n  const [showNavbar, setShowNavbar] = useState(true);\n  const [lastScrollY, setLastScrollY] = useState(0);\n  useEffect(() => {\n    const handleScroll = () => {\n      const currentScrollY = window.scrollY;\n      if (currentScrollY > lastScrollY && currentScrollY > 50) {\n        setShowNavbar(false); // scrolling down\n      } else {\n        setShowNavbar(true); // scrolling up\n      }\n      setLastScrollY(currentScrollY);\n    };\n\n    window.addEventListener(\"scroll\", handleScroll);\n    return () => window.removeEventListener(\"scroll\", handleScroll);\n  }, [lastScrollY]);\n\n  const handleLogout = async () => {\n    try {\n      await logout();\n      toast({\n        title: \"Logged out\",\n        description: \"You have been logged out successfully\",\n      });\n      // Use wouter navigation instead of direct window.location change\n      window.location.href = \"/\";\n    } catch (error) {\n      toast({\n        title: \"Logout error\",\n        description: \"There was an issue logging out, but you've been signed out locally.\",\n      });\n    }\n  };\n\n  const navLinks = [\n    { name: \"Garage\", path: \"/garage\" },\n    { name: \"Squad\", path: \"/community\" },\n    { name: \"Catalog\", path: \"/catalog\" },\n    { name: \"Shop\", path: \"/shop\" },\n    { name: \"Blog\", path: \"/blog\" },\n  ];\n\n  return (\n    <nav className={`bg-white border-b border-gray-200 shadow-sm sticky top-0 z-50 transition-transform duration-300 ${\n        showNavbar ? \"translate-y-0\" : \"-translate-y-full\"\n      }`}>\n      <div className=\"container mx-auto px-4 sm:px-6 lg:px-8 py-3\">\n        <div className=\"flex justify-between items-center min-h-[60px] w-full gap-2\">\n          <div className=\"flex items-center bg-[#1A1A1A] rounded-full px-3 sm:px-6 lg:px-8 py-2 sm:py-3 shadow-lg mx-auto min-w-fit max-w-fit justify-center\">\n            <Link href=\"/\" className=\"flex items-center gap-2 sm:gap-3 mr-3 sm:mr-6\">\n              <div className=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full overflow-hidden flex items-center justify-center\">\n                  <img\n                    src={logo}\n                    alt=\"ThrottleCove Logo\"\n                    className=\"object-contain w-full h-full\"\n                  />\n              </div>\n              <span className=\"text-base sm:text-lg font-bold text-white hidden sm:block\" style={{ fontFamily: 'Kanit, sans-serif' }}>\n                THROTTLE<span className=\"text-[#FF3B30] font-bold\">Cove</span>\n              </span>\n            </Link>\n\n            <div className=\"flex items-center space-x-0.5 sm:space-x-1\">\n              {navLinks.filter(link => link.name !== 'Admin').map((link) => (\n                <Link\n                  key={link.path}\n                  href={link.path}\n                  className={`text-xs sm:text-sm font-medium px-1.5 sm:px-4 py-1.5 sm:py-2 rounded-full transition-all duration-200 whitespace-nowrap ${\n                    location === link.path\n                      ? \"bg-[#FF3B30] text-white\"\n                      : \"text-gray-300 hover:text-white hover:bg-gray-700\"\n                  }`}\n                >\n                  {link.name}\n                </Link>\n              ))}\n            </div>\n          </div>\n\n          <div className=\"flex-shrink-0 relative\">\n            {user ? (\n              <div className=\"group relative\">\n                <Button\n                  onClick={handleLogout}\n                  size=\"sm\"\n                  className=\"rounded-full bg-[#1A1A1A] hover:bg-[#FF3B30] text-white text-xs sm:text-sm transition-all duration-300 ease-in-out transform group-hover:px-4 px-2 shadow-lg hover:shadow-xl relative overflow-hidden\"\n                >\n                  <LogOut className=\"h-4 w-4 group-hover:opacity-0 transition-opacity duration-300\" />\n                  <span className=\"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 text-[10px] font-bold\">\n                    LOGOUT\n                  </span>\n                </Button>\n              </div>\n            ) : (\n              <div className=\"relative\">\n                <div className=\"group relative\">\n                  <Link href=\"/register\">\n                    <Button \n                      size=\"sm\" \n                      className=\"rounded-full bg-[#1A1A1A] hover:bg-[#FF3B30] text-white text-xs sm:text-sm transition-all duration-300 ease-in-out transform group-hover:px-4 px-2 shadow-lg hover:shadow-xl relative overflow-hidden\"\n                      asChild\n                    >\n                      <span>\n                        <ArrowRight className=\"h-4 w-4 group-hover:opacity-0 transition-opacity duration-300\" />\n                        <span className=\"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300\">\n                          JOIN\n                        </span>\n                      </span>\n                    </Button>\n                  </Link>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n      {/* Sticky nav pill that follows scroll */}\n    </nav>\n  );\n};\n\nexport default ModernNavBar;","size_bytes":5653},"client/src/components/ui/layout/NavBar.tsx":{"content":"import { useState } from \"react\";\nimport { Link, useLocation } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { ChevronDown, Bell, Menu, X, User, Settings, LogOut } from \"lucide-react\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { \n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger \n} from \"@/components/ui/dropdown-menu\";\n\nconst NavBar = () => {\n  const [location] = useLocation();\n  const { user, setUser } = useAuth();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n  \n  // Get maintenance reminders\n  const { data: reminders = [] } = useQuery<any[]>({\n    queryKey: ['/api/motorcycles/maintenance-reminders'],\n    enabled: !!user,\n  });\n  \n  const notificationCount = reminders.length;\n\n  const handleLogout = async () => {\n    try {\n      await apiRequest(\"POST\", \"/api/auth/logout\", {});\n      \n      // Clear user session in auth context\n      setUser(null);\n      \n      // Invalidate all queries to refresh data\n      queryClient.invalidateQueries();\n      \n      toast({\n        title: \"Logged out\",\n        description: \"You have been successfully logged out.\",\n      });\n      \n      // Redirect to home page\n      window.location.href = '/';\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to log out. Please try again.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const navLinks = [\n    { name: \"Garage\", path: \"/garage\" },\n    { name: \"Community\", path: \"/community\" },\n    { name: \"Catalog\", path: \"/catalog\" },\n    { name: \"Shop\", path: \"/shop\" },\n    { name: \"Blog\", path: \"/blog\" },\n    { name: \"Admin\", path: \"/admin\" },\n  ];\n\n  return (\n    <nav className=\"bg-[#1A1A1A] text-white\">\n      <div className=\"container mx-auto px-4 py-4 flex justify-between items-center\">\n        <Link href=\"/\" className=\"flex items-center gap-3\">\n          <img \n            src=\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTYiIGZpbGw9IiNGRjNCMzAiLz4KPHN2ZyB4PSI0IiB5PSI0IiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSI+CjxwYXRoIGQ9Ik0yIDIwQzIgMTYgNiAxMiAxMCAxMkgxNEMxOCAxMiAyMiAxNiAyMiAyMEMyMiAyNCAyNCAyMiAyMCAyMkM0IDIyIDIgMjQgMiAyMFoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik04IDEyVjhIMTZWMTIiIGZpbGw9IndoaXRlIi8+CjwvZz4KPC9zdmc+\"\n            alt=\"ThrottleCove Logo\" \n            className=\"h-8 w-8\"\n          />\n          <span className=\"text-2xl font-bold font-header tracking-wider\">\n            THROTTLE<span className=\"text-[#FF3B30]\">COVE</span>\n          </span>\n        </Link>\n        \n        <div className=\"flex items-center space-x-6\">\n          <div className=\"hidden md:flex space-x-6\">\n            {navLinks.map((link) => (\n              <Link \n                key={link.path} \n                href={link.path}\n                className={`hover:text-[#FF3B30] transition-all py-2 ${\n                  location === link.path ? \"text-[#FF3B30]\" : \"\"\n                }`}\n              >\n                {link.name}\n              </Link>\n            ))}\n          </div>\n          \n          <div className=\"flex items-center space-x-4\">\n            {user ? (\n              <>\n                <div className=\"relative\">\n                  <Button variant=\"ghost\" className=\"hover:text-[#FF3B30] transition-all p-1\">\n                    <Bell size={20} />\n                    {notificationCount > 0 && (\n                      <span className=\"bg-[#FF3B30] rounded-full px-1.5 text-xs absolute -top-1 -right-1\">\n                        {notificationCount}\n                      </span>\n                    )}\n                  </Button>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  <DropdownMenu>\n                    <DropdownMenuTrigger asChild>\n                      <div className=\"flex items-center space-x-2 cursor-pointer\">\n                        <Avatar className=\"h-8 w-8\">\n                          <AvatarImage src={user.avatarUrl || undefined} alt={user.username} />\n                          <AvatarFallback>{user.username.charAt(0).toUpperCase()}</AvatarFallback>\n                        </Avatar>\n                        <span className=\"hidden md:inline\">{user.fullName.split(' ')[0]} {user.fullName.split(' ')[1]?.charAt(0)}.</span>\n                        <ChevronDown size={16} className=\"text-gray-400\" />\n                      </div>\n                    </DropdownMenuTrigger>\n                    <DropdownMenuContent align=\"end\" className=\"w-56 bg-white text-black\">\n                      <div className=\"flex items-center justify-start p-2 border-b mb-1\">\n                        <Avatar className=\"h-8 w-8 mr-2\">\n                          <AvatarImage src={user.avatarUrl || undefined} alt={user.username} />\n                          <AvatarFallback>{user.username.charAt(0).toUpperCase()}</AvatarFallback>\n                        </Avatar>\n                        <div className=\"flex flex-col\">\n                          <span className=\"font-medium\">{user.fullName}</span>\n                          <span className=\"text-xs text-gray-500\">@{user.username}</span>\n                        </div>\n                      </div>\n                      <DropdownMenuItem className=\"cursor-pointer\">\n                        <User className=\"mr-2 h-4 w-4\" />\n                        <span>Profile</span>\n                      </DropdownMenuItem>\n                      <DropdownMenuItem className=\"cursor-pointer\">\n                        <Settings className=\"mr-2 h-4 w-4\" />\n                        <span>Settings</span>\n                      </DropdownMenuItem>\n                      <DropdownMenuSeparator />\n                      <DropdownMenuItem className=\"cursor-pointer text-red-600\" onClick={handleLogout}>\n                        <LogOut className=\"mr-2 h-4 w-4\" />\n                        <span>Logout</span>\n                      </DropdownMenuItem>\n                    </DropdownMenuContent>\n                  </DropdownMenu>\n                </div>\n              </>\n            ) : (\n              <div className=\"flex space-x-2\">\n                <Link href=\"/login\">\n                  <Button variant=\"ghost\" className=\"text-white hover:text-[#FF3B30]\" asChild>\n                    <span>Login</span>\n                  </Button>\n                </Link>\n                <Link href=\"/register\">\n                  <Button className=\"bg-[#FF3B30] hover:bg-opacity-90 text-white\" asChild>\n                    <span>Sign Up</span>\n                  </Button>\n                </Link>\n              </div>\n            )}\n            <Button\n              variant=\"ghost\"\n              className=\"md:hidden\"\n              onClick={() => setMobileMenuOpen(!mobileMenuOpen)}\n            >\n              {mobileMenuOpen ? <X size={24} /> : <Menu size={24} />}\n            </Button>\n          </div>\n        </div>\n      </div>\n      \n      {/* Mobile Menu */}\n      {mobileMenuOpen && (\n        <div className=\"md:hidden bg-[#1A1A1A] border-t border-gray-800 px-4 py-2\">\n          <div className=\"flex flex-col space-y-2 py-2\">\n            {navLinks.map((link) => (\n              <Link \n                key={link.path} \n                href={link.path}\n                className={`py-2 block ${\n                  location === link.path ? \"text-[#FF3B30]\" : \"\"\n                }`}\n                onClick={() => setMobileMenuOpen(false)}\n              >\n                {link.name}\n              </Link>\n            ))}\n            {!user && (\n              <>\n                <Link \n                  href=\"/login\" \n                  className=\"py-2 block\" \n                  onClick={() => setMobileMenuOpen(false)}\n                >\n                  Login\n                </Link>\n                <Link \n                  href=\"/register\" \n                  className=\"py-2 block text-[#FF3B30]\" \n                  onClick={() => setMobileMenuOpen(false)}\n                >\n                  Sign Up\n                </Link>\n              </>\n            )}\n            {user && (\n              <Button\n                variant=\"ghost\"\n                className=\"justify-start px-0 text-white hover:text-[#FF3B30]\"\n                onClick={() => {\n                  handleLogout();\n                  setMobileMenuOpen(false);\n                }}\n              >\n                Logout\n              </Button>\n            )}\n          </div>\n        </div>\n      )}\n    </nav>\n  );\n};\n\nexport default NavBar;\n","size_bytes":8935},"client/src/components/ui/motorcycle/AddMotorcycleDialog.tsx":{"content":"\nimport { useState, useRef } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { \n  Dialog, \n  DialogContent, \n  DialogHeader, \n  DialogTitle,\n  DialogFooter\n} from \"@/components/ui/dialog\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Label } from \"@/components/ui/label\";\nimport { X, Upload, Camera, FileText, ImageIcon } from \"lucide-react\";\nimport { insertMotorcycleSchema } from \"@shared/schema\";\nimport { useQueryClient } from \"@tanstack/react-query\";\n\ninterface AddMotorcycleDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onSuccess: () => void;\n}\n\nconst formSchema = z.object({\n  name: z.string().min(1, \"Motorcycle nickname is required\"),\n  make: z.string().min(1, \"Make is required\"),\n  model: z.string().min(1, \"Model is required\"),\n  year: z.number().int().min(1900).max(new Date().getFullYear() + 1),\n  engineSize: z.string().min(1, \"Engine size is required\"),\n  mileage: z.number().int().min(0),\n  imageUrl: z.string().optional(),\n  status: z.string().min(1, \"Status is required\"),\n  tags: z.array(z.string()).default([\"Motorcycle\"]),\n});\n\ntype FormValues = z.infer<typeof formSchema>;\n\nconst AddMotorcycleDialog = ({ open, onOpenChange, onSuccess }: AddMotorcycleDialogProps) => {\n  const { toast } = useToast();\n  const [isLoading, setIsLoading] = useState(false);\n  const [uploadedPhoto, setUploadedPhoto] = useState<string | null>(null);\n  const [uploadedDocuments, setUploadedDocuments] = useState<File[]>([]);\n  const photoInputRef = useRef<HTMLInputElement>(null);\n  const documentsInputRef = useRef<HTMLInputElement>(null);\n  const queryClient = useQueryClient();\n\n  const form = useForm<FormValues>({\n    resolver: zodResolver(formSchema),\n    defaultValues: {\n      name: \"\",\n      make: \"\",\n      model: \"\",\n      year: new Date().getFullYear(),\n      engineSize: \"\",\n      mileage: 0,\n      imageUrl: \"\",\n      status: \"active\",\n      tags: [\"Motorcycle\"],\n    },\n  });\n\n  const handlePhotoUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      if (file.size > 5 * 1024 * 1024) {\n        toast({\n          title: \"File too large\",\n          description: \"Please select an image smaller than 5MB.\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n      const imageUrl = URL.createObjectURL(file);\n      setUploadedPhoto(imageUrl);\n      form.setValue(\"imageUrl\", imageUrl);\n    }\n  };\n\n  const handleDocumentsUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = Array.from(e.target.files || []);\n    if (files.length > 0) {\n      setUploadedDocuments(prev => [...prev, ...files]);\n      toast({\n        title: \"Documents uploaded\",\n        description: `${files.length} document(s) added for this vehicle.`,\n      });\n    }\n  };\n\n  const removeDocument = (index: number) => {\n    setUploadedDocuments(prev => prev.filter((_, i) => i !== index));\n  };\n\n  const onSubmit = async (data: FormValues) => {\n    setIsLoading(true);\n    try {\n      // Create FormData to handle file uploads\n      const formData = new FormData();\n      \n      // Add basic motorcycle data\n      Object.entries(data).forEach(([key, value]) => {\n        if (value !== undefined && value !== null) {\n          formData.append(key, value.toString());\n        }\n      });\n      \n      // Add photo if uploaded\n      if (uploadedPhoto && photoInputRef.current?.files?.[0]) {\n        formData.append('photo', photoInputRef.current.files[0]);\n      }\n      \n      // Add documents if uploaded\n      uploadedDocuments.forEach((doc, index) => {\n        formData.append(`document_${index}`, doc);\n      });\n      \n      // Add document count for processing\n      formData.append('documentCount', uploadedDocuments.length.toString());\n      \n      const response = await fetch('/api/motorcycles', {\n        method: 'POST',\n        body: formData,\n        credentials: 'include'\n      });\n      \n      if (!response.ok) {\n        throw new Error('Failed to create motorcycle');\n      }\n      \n      toast({\n        title: \"Success\",\n        description: \"Motorcycle added to your garage with all files!\",\n      });\n      \n      queryClient.invalidateQueries({ queryKey: ['/api/motorcycles'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/documents'] });\n      \n      form.reset();\n      setUploadedPhoto(null);\n      setUploadedDocuments([]);\n      onOpenChange(false);\n      onSuccess();\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to add motorcycle. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-[650px] max-h-[90vh] overflow-y-auto rounded-3xl\">\n        <DialogHeader className=\"pb-4\">\n          <DialogTitle className=\"text-2xl font-bold text-center text-[#1A1A1A] mb-6\">\n            Add Your Motorcycle\n          </DialogTitle>\n        </DialogHeader>\n        \n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-8\">\n            {/* Upload Section - Compact and at the top */}\n            <div className=\"bg-gray-50 rounded-3xl p-6 space-y-4\">\n              <h3 className=\"text-lg font-semibold text-center mb-4\">Upload Files</h3>\n              \n              <div className=\"flex gap-4 justify-center\">\n                {/* Photo Upload */}\n                <div className=\"flex-1\">\n                  <div \n                    className=\"bg-white rounded-full border-2 border-dashed border-gray-300 p-4 text-center cursor-pointer hover:border-[#FF3B30] transition-colors min-h-[80px] flex flex-col items-center justify-center\"\n                    onClick={() => photoInputRef.current?.click()}\n                  >\n                    {uploadedPhoto ? (\n                      <div className=\"flex items-center space-x-2\">\n                        <img src={uploadedPhoto} alt=\"Uploaded\" className=\"w-8 h-8 object-cover rounded-full\" />\n                        <span className=\"text-sm text-green-600 font-medium\">Photo Added</span>\n                      </div>\n                    ) : (\n                      <div className=\"flex items-center space-x-2\">\n                        <ImageIcon className=\"h-5 w-5 text-gray-400\" />\n                        <span className=\"text-sm text-gray-600 font-medium\">Add Photo</span>\n                      </div>\n                    )}\n                  </div>\n                  <input\n                    ref={photoInputRef}\n                    type=\"file\"\n                    accept=\"image/*\"\n                    onChange={handlePhotoUpload}\n                    className=\"hidden\"\n                  />\n                </div>\n\n                \n              </div>\n\n              {/* Document List */}\n              {uploadedDocuments.length > 0 && (\n                <div className=\"space-y-2\">\n                  {uploadedDocuments.map((doc, index) => (\n                    <div key={index} className=\"flex items-center justify-between bg-white rounded-full px-4 py-2\">\n                      <div className=\"flex items-center space-x-2\">\n                        <FileText className=\"h-4 w-4 text-[#FF3B30]\" />\n                        <span className=\"text-sm text-gray-700 truncate max-w-[200px]\">{doc.name}</span>\n                      </div>\n                      <Button\n                        type=\"button\"\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => removeDocument(index)}\n                        className=\"text-red-500 hover:text-red-700 h-6 w-6 p-0 rounded-full\"\n                      >\n                        <X className=\"h-3 w-3\" />\n                      </Button>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n\n            {/* Step 1: Basic Info */}\n            <div className=\"space-y-6\">\n              <h3 className=\"text-lg font-semibold text-[#1A1A1A] flex items-center\">\n                <div className=\"w-8 h-8 bg-[#FF3B30] text-white rounded-full flex items-center justify-center text-sm mr-3\">1</div>\n                Basic Information\n              </h3>\n              \n              <div className=\"grid grid-cols-2 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"name\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel className=\"text-sm font-medium text-gray-700\">Nickname *</FormLabel>\n                      <FormControl>\n                        <Input \n                          placeholder=\"My Beast\" \n                          className=\"rounded-full border-gray-300 focus:border-[#FF3B30] focus:ring-[#FF3B30] px-4 py-3\"\n                          {...field} \n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                \n                <FormField\n                  control={form.control}\n                  name=\"status\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel className=\"text-sm font-medium text-gray-700\">Status *</FormLabel>\n                      <Select onValueChange={field.onChange} defaultValue={field.value}>\n                        <FormControl>\n                          <SelectTrigger className=\"rounded-full border-gray-300 focus:border-[#FF3B30] focus:ring-[#FF3B30] px-4 py-3\">\n                            <SelectValue placeholder=\"Select status\" />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent className=\"rounded-2xl\">\n                          <SelectItem value=\"active\">Active</SelectItem>\n                          <SelectItem value=\"in service\">In Service</SelectItem>\n                          <SelectItem value=\"stored\">Stored</SelectItem>\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n            </div>\n            \n            {/* Step 2: Vehicle Details */}\n            <div className=\"space-y-6\">\n              <h3 className=\"text-lg font-semibold text-[#1A1A1A] flex items-center\">\n                <div className=\"w-8 h-8 bg-[#FF3B30] text-white rounded-full flex items-center justify-center text-sm mr-3\">2</div>\n                Vehicle Details\n              </h3>\n              \n              <div className=\"grid grid-cols-2 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"make\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel className=\"text-sm font-medium text-gray-700\">Make *</FormLabel>\n                      <FormControl>\n                        <Input \n                          placeholder=\"Honda, Yamaha, Ducati\" \n                          className=\"rounded-full border-gray-300 focus:border-[#FF3B30] focus:ring-[#FF3B30] px-4 py-3\"\n                          {...field} \n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                \n                <FormField\n                  control={form.control}\n                  name=\"model\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel className=\"text-sm font-medium text-gray-700\">Model *</FormLabel>\n                      <FormControl>\n                        <Input \n                          placeholder=\"CBR600RR, R1, Panigale\" \n                          className=\"rounded-full border-gray-300 focus:border-[#FF3B30] focus:ring-[#FF3B30] px-4 py-3\"\n                          {...field} \n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n            </div>\n\n            {/* Step 3: Specifications */}\n            <div className=\"space-y-6\">\n              <h3 className=\"text-lg font-semibold text-[#1A1A1A] flex items-center\">\n                <div className=\"w-8 h-8 bg-[#FF3B30] text-white rounded-full flex items-center justify-center text-sm mr-3\">3</div>\n                Specifications\n              </h3>\n              \n              <div className=\"grid grid-cols-3 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"year\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel className=\"text-sm font-medium text-gray-700\">Year *</FormLabel>\n                      <FormControl>\n                        <Input \n                          type=\"number\" \n                          placeholder=\"2023\" \n                          className=\"rounded-full border-gray-300 focus:border-[#FF3B30] focus:ring-[#FF3B30] px-4 py-3\"\n                          {...field}\n                          onChange={e => field.onChange(parseInt(e.target.value))}\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                \n                <FormField\n                  control={form.control}\n                  name=\"engineSize\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel className=\"text-sm font-medium text-gray-700\">Engine *</FormLabel>\n                      <FormControl>\n                        <Input \n                          placeholder=\"600cc\" \n                          className=\"rounded-full border-gray-300 focus:border-[#FF3B30] focus:ring-[#FF3B30] px-4 py-3\"\n                          {...field} \n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"mileage\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel className=\"text-sm font-medium text-gray-700\">Miles/Km</FormLabel>\n                      <FormControl>\n                        <Input \n                          type=\"number\" \n                          placeholder=\"15,000\" \n                          className=\"rounded-full border-gray-300 focus:border-[#FF3B30] focus:ring-[#FF3B30] px-4 py-3\"\n                          {...field}\n                          onChange={e => field.onChange(parseInt(e.target.value))}\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n            </div>\n            \n            <DialogFooter className=\"flex gap-3 pt-6\">\n              <Button \n                type=\"button\" \n                variant=\"outline\" \n                onClick={() => onOpenChange(false)}\n                className=\"rounded-full border-gray-300 px-8 py-3\"\n              >\n                Cancel\n              </Button>\n              <Button \n                type=\"submit\" \n                className=\"bg-[#FF3B30] hover:bg-[#FF3B30]/90 text-white rounded-full px-8 py-3\"\n                disabled={isLoading}\n              >\n                {isLoading ? \"Adding...\" : \"Add to Garage\"}\n              </Button>\n            </DialogFooter>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default AddMotorcycleDialog;\n","size_bytes":16357},"client/src/components/ui/motorcycle/ExpandableMotorcycleCard.tsx":{"content":"\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { MoreVertical, Calendar, Gauge, ChevronDown, ChevronUp } from \"lucide-react\";\nimport { Motorcycle } from \"@shared/schema\";\nimport { motion } from \"framer-motion\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\n\ninterface ExpandableMotorcycleCardProps {\n  motorcycle: Motorcycle;\n  onEdit: (motorcycle: Motorcycle) => void;\n  onDelete: (id: number) => void;\n}\n\nconst ExpandableMotorcycleCard = ({ motorcycle, onEdit, onDelete }: ExpandableMotorcycleCardProps) => {\n  const [isExpanded, setIsExpanded] = useState(false);\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"active\":\n        return \"bg-green-100 text-green-800\";\n      case \"in service\":\n        return \"bg-yellow-100 text-yellow-800\";\n      case \"stored\":\n        return \"bg-gray-100 text-gray-800\";\n      default:\n        return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  return (\n    <motion.div\n      layout\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.3 }}\n    >\n      <Card className=\"overflow-hidden border border-gray-200 hover:shadow-lg transition-all\">\n        <div className=\"h-48 overflow-hidden relative\">\n          <img \n            src={motorcycle.photos?.[0] || motorcycle.imageUrl || `https://source.unsplash.com/random/400x300/?motorcycle,${motorcycle.make}`} \n            alt={`${motorcycle.make} ${motorcycle.model}`} \n            className=\"w-full h-full object-cover\"\n          />\n          <div className=\"absolute top-0 right-0 p-2\">\n            <Badge className={getStatusColor(motorcycle.status)}>\n              {motorcycle.status}\n            </Badge>\n          </div>\n          <div className=\"absolute top-0 left-0 p-2\">\n            <DropdownMenu>\n              <DropdownMenuTrigger asChild>\n                <Button variant=\"ghost\" size=\"icon\" className=\"bg-white/80 hover:bg-white\">\n                  <MoreVertical className=\"h-4 w-4\" />\n                </Button>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent align=\"start\">\n                <DropdownMenuItem onClick={() => onEdit(motorcycle)}>\n                  Edit\n                </DropdownMenuItem>\n                <DropdownMenuItem \n                  onClick={() => onDelete(motorcycle.id)}\n                  className=\"text-red-600\"\n                >\n                  Delete\n                </DropdownMenuItem>\n              </DropdownMenuContent>\n            </DropdownMenu>\n          </div>\n        </div>\n        \n        <CardContent className=\"p-6\">\n          <div className=\"flex justify-between items-start mb-4\">\n            <div className=\"flex-1\">\n              <h3 className=\"text-xl font-bold font-header mb-1\">\n                {motorcycle.name || `${motorcycle.make} ${motorcycle.model}`}\n              </h3>\n              <p className=\"text-gray-600\">\n                {motorcycle.year} {motorcycle.make} {motorcycle.model}\n              </p>\n            </div>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => setIsExpanded(!isExpanded)}\n              className=\"p-2 ml-2\"\n            >\n              {isExpanded ? (\n                <ChevronUp className=\"h-4 w-4\" />\n              ) : (\n                <ChevronDown className=\"h-4 w-4\" />\n              )}\n            </Button>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4 mb-4 text-sm\">\n            <div className=\"text-center\">\n              <div className=\"flex items-center justify-center mb-1\">\n                <Gauge className=\"h-4 w-4 text-gray-400\" />\n              </div>\n              <p className=\"font-medium\">{motorcycle.mileage}</p>\n              <p className=\"text-gray-500 text-xs\">Miles</p>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"flex items-center justify-center mb-1\">\n                <Calendar className=\"h-4 w-4 text-gray-400\" />\n              </div>\n              <p className=\"font-medium\">\n                {motorcycle.lastRide \n                  ? new Date(motorcycle.lastRide).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })\n                  : 'Never'}\n              </p>\n              <p className=\"text-gray-500 text-xs\">Last Ride</p>\n            </div>\n          </div>\n\n          <div className=\"flex flex-wrap gap-2 mb-4\">\n            {motorcycle.tags.map((tag, index) => (\n              <Badge key={index} variant=\"outline\" className=\"bg-gray-100 text-xs\">\n                {tag}\n              </Badge>\n            ))}\n          </div>\n\n          {isExpanded && (\n            <motion.div\n              initial={{ opacity: 0, height: 0 }}\n              animate={{ opacity: 1, height: \"auto\" }}\n              exit={{ opacity: 0, height: 0 }}\n              className=\"border-t pt-4 mt-4\"\n            >\n              <div className=\"grid grid-cols-2 gap-4 text-sm mb-4\">\n                <div>\n                  <p className=\"text-gray-500\">Engine Size</p>\n                  <p className=\"font-medium\">{motorcycle.engineSize}</p>\n                </div>\n                <div>\n                  <p className=\"text-gray-500\">Status</p>\n                  <p className=\"font-medium capitalize\">{motorcycle.status}</p>\n                </div>\n              </div>\n            </motion.div>\n          )}\n\n          <div className=\"flex gap-2\">\n            <Button \n              className=\"flex-1 bg-[#FF3B30] hover:bg-[#FF3B30]/90 text-white rounded-full\"\n              onClick={async () => {\n                // Open mileage update dialog\n                const newMileage = prompt(`Current mileage: ${motorcycle.mileage || 0}. Enter new mileage:`);\n                if (newMileage && !isNaN(Number(newMileage))) {\n                  try {\n                    // Update motorcycle mileage via API\n                    await fetch(`/api/motorcycles/${motorcycle.id}`, {\n                      method: 'PUT',\n                      headers: { 'Content-Type': 'application/json' },\n                      body: JSON.stringify({ mileage: Number(newMileage) })\n                    });\n                    \n                    // Refresh the page to show updated mileage\n                    window.location.reload();\n                  } catch (error) {\n                    alert('Failed to update mileage. Please try again.');\n                  }\n                }\n              }}\n            >\n              New Mile\n            </Button>\n            <Button \n              className=\"flex-1 bg-[#FF3B30] hover:bg-[#FF3B30]/90 text-white rounded-full\"\n              onClick={() => {\n                // Navigate to motorcycle detail page\n                window.location.href = `/garage/${motorcycle.id}`;\n              }}\n            >\n              Detail\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n    </motion.div>\n  );\n};\n\nexport default ExpandableMotorcycleCard;\n","size_bytes":7165},"client/src/components/ui/motorcycle/MotorcycleCard.tsx":{"content":"import { useState } from \"react\";\nimport { Card, CardContent, CardFooter } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Motorcycle } from \"@shared/schema\";\nimport { Info, Wrench, TrafficCone, MoreVertical } from \"lucide-react\";\nimport { \n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger\n} from \"@/components/ui/dropdown-menu\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { format } from \"date-fns\";\nimport { Link } from \"wouter\";\nimport ServiceDialog from \"@/components/ui/maintenance/ServiceDialog\";\n\ninterface MotorcycleCardProps {\n  motorcycle: Motorcycle;\n  onUpdate: () => void;\n  onDelete: (id: number) => void;\n}\n\nconst MotorcycleCard = ({ motorcycle, onUpdate, onDelete }: MotorcycleCardProps) => {\n  const [isServiceDialogOpen, setIsServiceDialogOpen] = useState(false);\n  const [isRideDialogOpen, setIsRideDialogOpen] = useState(false);\n  const { toast } = useToast();\n\n  const handleLogService = () => {\n    setIsServiceDialogOpen(true);\n  };\n\n  const handleLogRide = () => {\n    setIsRideDialogOpen(true);\n    // For now, just show a toast as we haven't implemented the ride dialog yet\n    toast({\n      title: \"Ride Logging\",\n      description: \"Ride logging feature coming soon!\",\n    });\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status.toLowerCase()) {\n      case 'active':\n        return 'bg-green-500 text-white';\n      case 'in service':\n      case 'in shop':\n        return 'bg-yellow-500 text-white';\n      case 'stored':\n        return 'bg-blue-500 text-white';\n      default:\n        return 'bg-gray-500 text-white';\n    }\n  };\n\n  return (\n    <Card className=\"h-full overflow-hidden border border-gray-200 hover:shadow-lg transition-all\">\n      <div className=\"h-48 overflow-hidden relative\">\n        <img \n          src={motorcycle.imageUrl || `https://source.unsplash.com/random/400x300/?motorcycle,${motorcycle.make}`} \n          alt={`${motorcycle.make} ${motorcycle.model}`} \n          className=\"w-full h-full object-cover\"\n        />\n        <div className=\"absolute top-0 right-0 p-2\">\n          <Badge className={getStatusColor(motorcycle.status)}>\n            {motorcycle.status}\n          </Badge>\n        </div>\n      </div>\n      \n      <CardContent className=\"p-6\">\n        <div className=\"flex justify-between items-start\">\n          <h3 className=\"text-xl font-bold font-header\">{motorcycle.name || `${motorcycle.make} ${motorcycle.model}`}</h3>\n          <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <Button variant=\"ghost\" className=\"h-8 w-8 p-0\">\n                <MoreVertical className=\"h-4 w-4\" />\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent align=\"end\">\n              <DropdownMenuItem onClick={onUpdate}>Edit</DropdownMenuItem>\n              <DropdownMenuItem \n                onClick={() => onDelete(motorcycle.id)}\n                className=\"text-red-600\"\n              >\n                Delete\n              </DropdownMenuItem>\n            </DropdownMenuContent>\n          </DropdownMenu>\n        </div>\n        \n        <div className=\"mt-2 flex items-center space-x-2 text-sm text-gray-500\">\n          <span>{motorcycle.year}</span>\n          <span>‚Ä¢</span>\n          <span>{motorcycle.engineSize}</span>\n          <span>‚Ä¢</span>\n          <span>{motorcycle.mileage} miles</span>\n        </div>\n        \n        <div className=\"mt-4 flex flex-wrap gap-2\">\n          {motorcycle.tags.map((tag, index) => (\n            <Badge key={index} variant=\"outline\" className=\"bg-gray-100 text-xs\">\n              {tag}\n            </Badge>\n          ))}\n        </div>\n        \n        <div className=\"mt-6 grid grid-cols-3 gap-2 text-center\">\n          <div>\n            <p className=\"text-xs text-gray-500 mb-1\">Next Service</p>\n            <p className=\"font-medium text-[#FF3B30]\">Soon</p>\n          </div>\n          <div>\n            <p className=\"text-xs text-gray-500 mb-1\">Last Ride</p>\n            <p className=\"font-medium\">\n              {motorcycle.lastRide \n                ? format(new Date(motorcycle.lastRide), 'MMM d')\n                : 'Never'}\n            </p>\n          </div>\n          <div>\n            <p className=\"text-xs text-gray-500 mb-1\">Status</p>\n            <p className={`font-medium ${motorcycle.status === 'active' ? 'text-green-600' : \n              motorcycle.status === 'in service' ? 'text-yellow-500' : 'text-gray-600'}`}>\n              {motorcycle.status === 'active' ? 'Ready' : \n               motorcycle.status === 'in service' ? 'In Shop' : motorcycle.status}\n            </p>\n          </div>\n        </div>\n      </CardContent>\n      \n      <CardFooter className=\"border-t border-gray-200 p-4 flex justify-between\">\n        <Link href={`/motorcycle/${motorcycle.id}`}>\n          <Button variant=\"ghost\" className=\"text-[#007AFF] hover:text-[#007AFF]/80\">\n            <Info className=\"mr-1 h-4 w-4\" />\n            Details\n          </Button>\n        </Link>\n        <Button \n          variant=\"ghost\" \n          className=\"text-[#1A1A1A] hover:text-[#1A1A1A]/80\"\n          onClick={handleLogService}\n        >\n          <Wrench className=\"mr-1 h-4 w-4\" />\n          Log Service\n        </Button>\n        <Button \n          variant=\"ghost\" \n          className={`text-[#FF3B30] hover:text-[#FF3B30]/80 ${\n            motorcycle.status !== 'active' ? 'opacity-50 cursor-not-allowed' : ''\n          }`}\n          onClick={handleLogRide}\n          disabled={motorcycle.status !== 'active'}\n        >\n          <TrafficCone className=\"mr-1 h-4 w-4\" />\n          Log Ride\n        </Button>\n      </CardFooter>\n\n      <ServiceDialog \n        open={isServiceDialogOpen} \n        onOpenChange={setIsServiceDialogOpen} \n        motorcycleId={motorcycle.id}\n        onSuccess={onUpdate}\n      />\n    </Card>\n  );\n};\n\nexport default MotorcycleCard;\n","size_bytes":5954},"client/src/components/ui/motorcycle/VehicleDetailsDialog.tsx":{"content":"import { useState } from \"react\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Motorcycle } from \"@shared/schema\";\nimport { \n  X, \n  Calendar, \n  Gauge, \n  Wrench, \n  FileText, \n  Eye,\n  Settings,\n  MapPin\n} from \"lucide-react\";\nimport { motion } from \"framer-motion\";\n\ninterface VehicleDetailsDialogProps {\n  motorcycle: Motorcycle | null;\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n}\n\nconst VehicleDetailsDialog = ({ motorcycle, open, onOpenChange }: VehicleDetailsDialogProps) => {\n  if (!motorcycle) return null;\n\n  // Mock documents for demonstration\n  const mockDocuments = [\n    { id: 1, name: \"Registration Certificate\", type: \"registration\", status: \"valid\", icon: \"üìã\" },\n    { id: 2, name: \"Insurance Policy\", type: \"insurance\", status: \"expiring\", icon: \"üõ°Ô∏è\" },\n    { id: 3, name: \"Service Record\", type: \"service\", status: \"valid\", icon: \"üîß\" },\n  ];\n\n  const getStatusColor = (status?: string) => {\n    switch (status) {\n      case \"active\": return \"bg-green-100 text-green-800\";\n      case \"in service\": return \"bg-yellow-100 text-yellow-800\";\n      case \"stored\": return \"bg-gray-100 text-gray-800\";\n      default: return \"bg-blue-100 text-blue-800\";\n    }\n  };\n\n  const getDocumentStatusColor = (status: string) => {\n    switch (status) {\n      case \"valid\": return \"bg-green-100 text-green-800\";\n      case \"expiring\": return \"bg-yellow-100 text-yellow-800\";\n      case \"expired\": return \"bg-red-100 text-red-800\";\n      default: return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-[70vw] max-h-[75vh] overflow-y-auto\">\n        <DialogHeader className=\"pb-3\">\n          <div className=\"flex items-center justify-between\">\n            <DialogTitle className=\"text-xl font-bold text-[#1A1A1A]\">\n              {motorcycle.name}\n            </DialogTitle>\n            <Button \n              variant=\"ghost\" \n              size=\"icon\"\n              onClick={() => onOpenChange(false)}\n              className=\"h-6 w-6\"\n            >\n              <X className=\"h-4 w-4\" />\n            </Button>\n          </div>\n        </DialogHeader>\n\n        <div className=\"space-y-6\">\n          {/* Profile Header Section */}\n          <div className=\"text-center pb-4\">\n            <div className=\"relative inline-block mb-4\">\n              <div className=\"w-20 h-20 rounded-full overflow-hidden bg-gray-100 flex items-center justify-center mx-auto\">\n                {motorcycle.imageUrl ? (\n                  <img \n                    src={motorcycle.imageUrl} \n                    alt={motorcycle.name}\n                    className=\"w-full h-full object-cover\"\n                  />\n                ) : (\n                  <div className=\"w-12 h-12 bg-[#FF3B30] rounded-2xl flex items-center justify-center\">\n                    <svg viewBox=\"0 0 100 100\" className=\"w-6 h-6 text-white fill-current\">\n                      <path d=\"M15 70 C15 60, 25 50, 35 50 L65 50 C75 50, 85 60, 85 70 C85 80, 75 90, 65 90 L35 90 C25 90, 15 80, 15 70 Z M30 40 L70 40 C75 40, 80 35, 80 30 C80 25, 75 20, 70 20 L30 20 C25 20, 20 25, 20 30 C20 35, 25 40, 30 40 Z M45 30 L55 30 L50 40 Z\" />\n                    </svg>\n                  </div>\n                )}\n              </div>\n              <Badge className={`${getStatusColor(motorcycle.status)} absolute -bottom-1 left-1/2 transform -translate-x-1/2`}>\n                {motorcycle.status}\n              </Badge>\n            </div>\n            <h3 className=\"text-xl font-bold text-[#1A1A1A] mb-1\">{motorcycle.name}</h3>\n            <p className=\"text-sm text-gray-500\">{motorcycle.make} {motorcycle.model} ‚Ä¢ {motorcycle.year}</p>\n          </div>\n\n          {/* Stats Cards */}\n          <div className=\"grid grid-cols-2 gap-4 mb-6\">\n            <div className=\"bg-gradient-to-br from-teal-400 to-teal-500 rounded-2xl p-4 text-white\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-teal-100 text-sm\">Total Mileage</p>\n                  <p className=\"text-2xl font-bold\">{(motorcycle.mileage || 0).toLocaleString()}</p>\n                  <p className=\"text-teal-100 text-xs\">Miles</p>\n                </div>\n                <Gauge className=\"h-8 w-8 text-teal-100\" />\n              </div>\n            </div>\n            <div className=\"bg-gradient-to-br from-cyan-400 to-cyan-500 rounded-2xl p-4 text-white\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-cyan-100 text-sm\">Engine Size</p>\n                  <p className=\"text-2xl font-bold\">{motorcycle.engineSize}</p>\n                  <p className=\"text-cyan-100 text-xs\">Displacement</p>\n                </div>\n                <Settings className=\"h-8 w-8 text-cyan-100\" />\n              </div>\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\n            {/* Left Column: Documents */}\n            <div className=\"space-y-4\">\n\n            {/* Vehicle Documents */}\n            <Card>\n              <CardContent className=\"p-4\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <h4 className=\"font-semibold text-[#1A1A1A] flex items-center\">\n                    <FileText className=\"h-4 w-4 mr-2 text-[#FF3B30]\" />\n                    Documents\n                  </h4>\n                  <Button size=\"sm\" variant=\"outline\" className=\"text-xs\">\n                    <Settings className=\"h-3 w-3 mr-1\" />\n                    Manage\n                  </Button>\n                </div>\n                \n                <div className=\"space-y-3\">\n                  {mockDocuments.map((doc) => (\n                    <div \n                      key={doc.id}\n                      className=\"flex items-center space-x-3 p-3 bg-white rounded-xl border border-gray-100 hover:shadow-sm transition-shadow\"\n                    >\n                      <div className=\"w-10 h-10 bg-gray-50 rounded-full flex items-center justify-center\">\n                        <span className=\"text-lg\">{doc.icon}</span>\n                      </div>\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center justify-between\">\n                          <div>\n                            <p className=\"font-medium text-sm text-[#1A1A1A]\">{doc.name}</p>\n                            <p className=\"text-xs text-gray-500\">Updated recently</p>\n                          </div>\n                          <div className=\"flex items-center space-x-2\">\n                            <Badge className={`${getDocumentStatusColor(doc.status)} text-xs`}>\n                              {doc.status}\n                            </Badge>\n                            <Button size=\"sm\" variant=\"ghost\" className=\"h-6 w-6 p-0\">\n                              <Eye className=\"h-3 w-3\" />\n                            </Button>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n            </div>\n\n            {/* Right Column: Maintenance & Activity */}\n            <div className=\"space-y-4\">\n              {/* Maintenance Overview */}\n              <Card>\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-center justify-between mb-4\">\n                    <h4 className=\"font-semibold text-[#1A1A1A] flex items-center\">\n                      <Wrench className=\"h-4 w-4 mr-2 text-[#FF3B30]\" />\n                      Maintenance\n                    </h4>\n                    <Button size=\"sm\" variant=\"outline\" className=\"text-xs\">\n                      <Calendar className=\"h-3 w-3 mr-1\" />\n                      Schedule\n                    </Button>\n                  </div>\n                  \n                  <div className=\"space-y-3\">\n                    <div className=\"p-3 bg-green-50 rounded-xl border border-green-200\">\n                      <div className=\"flex items-center justify-between\">\n                        <div>\n                          <p className=\"font-medium text-sm text-green-800\">Next Service Due</p>\n                          <p className=\"text-xs text-green-600\">Oil change at {(motorcycle.mileage || 0) + 3000} miles</p>\n                        </div>\n                        <Badge className=\"bg-green-100 text-green-800 text-xs\">\n                          {3000 - ((motorcycle.mileage || 0) % 3000)} miles\n                        </Badge>\n                      </div>\n                    </div>\n                    \n                    <div className=\"grid grid-cols-2 gap-3\">\n                      <div className=\"text-center p-3 bg-gray-50 rounded-xl\">\n                        <p className=\"text-xs text-gray-500 mb-1\">Service Records</p>\n                        <p className=\"font-bold text-xl text-[#1A1A1A]\">0</p>\n                      </div>\n                      <div className=\"text-center p-3 bg-gray-50 rounded-xl\">\n                        <p className=\"text-xs text-gray-500 mb-1\">Upcoming</p>\n                        <p className=\"font-bold text-xl text-[#1A1A1A]\">1</p>\n                      </div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* Recent Activity */}\n              <Card>\n                <CardContent className=\"p-4\">\n                  <h4 className=\"font-semibold text-[#1A1A1A] mb-4 flex items-center\">\n                    <MapPin className=\"h-4 w-4 mr-2 text-[#FF3B30]\" />\n                    Recent Activity\n                  </h4>\n                  \n                  <div className=\"space-y-3\">\n                    <div className=\"flex items-center space-x-3 p-3 bg-white rounded-xl border border-gray-100\">\n                      <div className=\"w-2 h-2 bg-[#FF3B30] rounded-full\"></div>\n                      <div>\n                        <p className=\"text-sm font-medium text-[#1A1A1A]\">Motorcycle added to garage</p>\n                        <p className=\"text-xs text-gray-500\">{new Date(motorcycle.createdAt).toLocaleDateString()}</p>\n                      </div>\n                    </div>\n                    \n                    <div className=\"text-center py-4\">\n                      <p className=\"text-sm text-gray-500 mb-3\">No recent rides or services recorded</p>\n                      <Button size=\"sm\" variant=\"outline\" className=\"text-xs\">\n                        Log First Ride\n                      </Button>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default VehicleDetailsDialog;","size_bytes":11093},"attached_assets/BACKEND_ARCHITECTURE.md":{"content":"# ThrottleCove Backend Architecture Specification\n\n## Table of Contents\n1. [Overview](#overview)\n2. [System Architecture](#system-architecture)\n3. [Database Design](#database-design)\n4. [API Architecture](#api-architecture)\n5. [Authentication & Authorization](#authentication--authorization)\n6. [Security Implementation](#security-implementation)\n7. [Scalability Strategy](#scalability-strategy)\n8. [Data Flow & Business Logic](#data-flow--business-logic)\n9. [File Storage & Media Management](#file-storage--media-management)\n10. [Monitoring & Logging](#monitoring--logging)\n11. [Deployment Architecture](#deployment-architecture)\n12. [Performance Optimization](#performance-optimization)\n\n## Overview\n\nThrottleCove is a comprehensive motorcycle management platform requiring a robust, secure, and scalable backend architecture. The system manages user authentication, vehicle data, maintenance records, community features, and document storage while maintaining high performance and security standards.\n\n### Core Requirements\n- Multi-user vehicle management\n- Document storage and compliance tracking\n- Maintenance scheduling and history\n- Community features and social interactions\n- Real-time notifications\n- File upload and media management\n- Analytics and reporting\n- Third-party integrations (parts suppliers, service providers)\n\n## System Architecture\n\n### Microservices Architecture\n\n```\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ   API Gateway   ‚îÇ    ‚îÇ  Load Balancer  ‚îÇ    ‚îÇ   CDN/Cache     ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n         ‚îÇ                       ‚îÇ                       ‚îÇ\n         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n                                 ‚îÇ\n    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n    ‚îÇ                                                         ‚îÇ\n‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ Auth   ‚îÇ  ‚îÇ Vehicle ‚îÇ  ‚îÇ Maint.  ‚îÇ  ‚îÇ Social  ‚îÇ  ‚îÇ File    ‚îÇ\n‚îÇService ‚îÇ  ‚îÇService  ‚îÇ  ‚îÇService  ‚îÇ  ‚îÇService  ‚îÇ  ‚îÇService  ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n     ‚îÇ           ‚îÇ           ‚îÇ           ‚îÇ           ‚îÇ\n     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n                 ‚îÇ           ‚îÇ           ‚îÇ\n        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n        ‚îÇ            Database Cluster             ‚îÇ\n        ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ\n        ‚îÇ  ‚îÇPrimary  ‚îÇ ‚îÇReplica 1‚îÇ ‚îÇReplica 2‚îÇ   ‚îÇ\n        ‚îÇ  ‚îÇPostgreSQL‚îÇ ‚îÇPostgreSQL‚îÇ ‚îÇPostgreSQL‚îÇ   ‚îÇ\n        ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ\n        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n```\n\n### Service Breakdown\n\n#### 1. Authentication Service\n- User registration and login\n- Session management\n- Password reset and verification\n- OAuth integration (Google, Apple, Facebook)\n- Multi-factor authentication\n- Role-based access control\n\n#### 2. Vehicle Management Service\n- Motorcycle CRUD operations\n- Vehicle information management\n- Ownership verification\n- Vehicle history tracking\n- Integration with VIN databases\n\n#### 3. Maintenance Service\n- Service scheduling and reminders\n- Maintenance history tracking\n- Service provider recommendations\n- Parts tracking and inventory\n- Cost analysis and reporting\n\n#### 4. Social/Community Service\n- User profiles and relationships\n- Group rides and events\n- Forums and messaging\n- Content moderation\n- Notifications system\n\n#### 5. File Management Service\n- Document upload and storage\n- Image processing and optimization\n- File versioning and backup\n- Compliance document tracking\n- OCR for document parsing\n\n## Database Design\n\n### Primary Database: PostgreSQL\n\n#### Core Tables\n\n```sql\n-- Users and Authentication\nCREATE TABLE users (\n    id SERIAL PRIMARY KEY,\n    username VARCHAR(50) UNIQUE NOT NULL,\n    email VARCHAR(255) UNIQUE NOT NULL,\n    password_hash VARCHAR(255) NOT NULL,\n    full_name VARCHAR(255),\n    phone VARCHAR(20),\n    avatar_url TEXT,\n    email_verified BOOLEAN DEFAULT FALSE,\n    mfa_enabled BOOLEAN DEFAULT FALSE,\n    mfa_secret VARCHAR(32),\n    login_attempts INTEGER DEFAULT 0,\n    locked_until TIMESTAMP,\n    last_login TIMESTAMP,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- User Sessions\nCREATE TABLE user_sessions (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,\n    session_token VARCHAR(255) UNIQUE NOT NULL,\n    refresh_token VARCHAR(255) UNIQUE,\n    ip_address INET,\n    user_agent TEXT,\n    expires_at TIMESTAMP NOT NULL,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- Motorcycles\nCREATE TABLE motorcycles (\n    id SERIAL PRIMARY KEY,\n    user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,\n    name VARCHAR(255) NOT NULL,\n    make VARCHAR(100) NOT NULL,\n    model VARCHAR(100) NOT NULL,\n    year INTEGER,\n    vin VARCHAR(17) UNIQUE,\n    engine_size INTEGER, -- CC\n    engine_type VARCHAR(50),\n    color VARCHAR(50),\n    mileage INTEGER DEFAULT 0,\n    purchase_date DATE,\n    purchase_price DECIMAL(10,2),\n    current_value DECIMAL(10,2),\n    insurance_provider VARCHAR(255),\n    insurance_policy VARCHAR(100),\n    registration_number VARCHAR(50),\n    license_plate VARCHAR(20),\n    status VARCHAR(20) DEFAULT 'active', -- active, sold, stolen, totaled\n    photos TEXT[], -- Array of photo URLs\n    documents JSONB, -- Document metadata\n    custom_fields JSONB, -- User-defined fields\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- Maintenance Records\nCREATE TABLE maintenance_records (\n    id SERIAL PRIMARY KEY,\n    motorcycle_id INTEGER REFERENCES motorcycles(id) ON DELETE CASCADE,\n    service_type VARCHAR(100) NOT NULL,\n    description TEXT,\n    mileage_at_service INTEGER,\n    service_date DATE NOT NULL,\n    cost DECIMAL(10,2),\n    service_provider VARCHAR(255),\n    parts_used JSONB, -- Array of parts with details\n    labor_hours DECIMAL(4,2),\n    next_service_due INTEGER, -- Mileage\n    next_service_date DATE,\n    receipt_url TEXT,\n    notes TEXT,\n    warranty_period INTEGER, -- Days\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- Maintenance Schedules\nCREATE TABLE maintenance_schedules (\n    id SERIAL PRIMARY KEY,\n    motorcycle_id INTEGER REFERENCES motorcycles(id) ON DELETE CASCADE,\n    service_type VARCHAR(100) NOT NULL,\n    interval_type VARCHAR(20) NOT NULL, -- mileage, time, both\n    mileage_interval INTEGER,\n    time_interval INTEGER, -- Days\n    description TEXT,\n    cost_estimate DECIMAL(10,2),\n    is_critical BOOLEAN DEFAULT FALSE,\n    reminder_settings JSONB, -- Notification preferences\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- Rides and Trips\nCREATE TABLE rides (\n    id SERIAL PRIMARY KEY,\n    user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,\n    motorcycle_id INTEGER REFERENCES motorcycles(id) ON DELETE SET NULL,\n    title VARCHAR(255),\n    description TEXT,\n    start_location POINT,\n    end_location POINT,\n    route_data JSONB, -- GPS coordinates, waypoints\n    distance DECIMAL(8,2), -- Kilometers\n    duration INTEGER, -- Minutes\n    start_time TIMESTAMP,\n    end_time TIMESTAMP,\n    max_speed DECIMAL(5,2),\n    avg_speed DECIMAL(5,2),\n    fuel_consumed DECIMAL(5,2),\n    cost DECIMAL(8,2),\n    photos TEXT[],\n    is_public BOOLEAN DEFAULT FALSE,\n    tags TEXT[],\n    weather_data JSONB,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- Documents\nCREATE TABLE documents (\n    id SERIAL PRIMARY KEY,\n    motorcycle_id INTEGER REFERENCES motorcycles(id) ON DELETE CASCADE,\n    document_type VARCHAR(50) NOT NULL, -- registration, insurance, service, etc.\n    title VARCHAR(255) NOT NULL,\n    file_url TEXT NOT NULL,\n    file_size INTEGER,\n    mime_type VARCHAR(100),\n    issue_date DATE,\n    expiry_date DATE,\n    issuing_authority VARCHAR(255),\n    document_number VARCHAR(100),\n    status VARCHAR(20) DEFAULT 'valid', -- valid, expired, expiring\n    reminder_days INTEGER DEFAULT 30,\n    extracted_data JSONB, -- OCR results\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- User Relationships\nCREATE TABLE user_relationships (\n    id SERIAL PRIMARY KEY,\n    follower_id INTEGER REFERENCES users(id) ON DELETE CASCADE,\n    following_id INTEGER REFERENCES users(id) ON DELETE CASCADE,\n    status VARCHAR(20) DEFAULT 'pending', -- pending, accepted, blocked\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    UNIQUE(follower_id, following_id)\n);\n\n-- Groups and Communities\nCREATE TABLE groups (\n    id SERIAL PRIMARY KEY,\n    name VARCHAR(255) NOT NULL,\n    description TEXT,\n    creator_id INTEGER REFERENCES users(id) ON DELETE SET NULL,\n    type VARCHAR(20) DEFAULT 'public', -- public, private, invite_only\n    location POINT,\n    location_name VARCHAR(255),\n    member_count INTEGER DEFAULT 0,\n    avatar_url TEXT,\n    cover_url TEXT,\n    rules TEXT,\n    tags TEXT[],\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE TABLE group_members (\n    id SERIAL PRIMARY KEY,\n    group_id INTEGER REFERENCES groups(id) ON DELETE CASCADE,\n    user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,\n    role VARCHAR(20) DEFAULT 'member', -- admin, moderator, member\n    joined_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    UNIQUE(group_id, user_id)\n);\n\n-- Events and Rides\nCREATE TABLE events (\n    id SERIAL PRIMARY KEY,\n    group_id INTEGER REFERENCES groups(id) ON DELETE CASCADE,\n    creator_id INTEGER REFERENCES users(id) ON DELETE CASCADE,\n    title VARCHAR(255) NOT NULL,\n    description TEXT,\n    event_type VARCHAR(20) DEFAULT 'ride', -- ride, meetup, service, social\n    start_time TIMESTAMP NOT NULL,\n    end_time TIMESTAMP,\n    location POINT,\n    location_name VARCHAR(255),\n    max_participants INTEGER,\n    current_participants INTEGER DEFAULT 0,\n    difficulty_level VARCHAR(20), -- beginner, intermediate, advanced\n    route_data JSONB,\n    estimated_distance DECIMAL(8,2),\n    cost DECIMAL(8,2),\n    requirements TEXT,\n    status VARCHAR(20) DEFAULT 'active', -- active, cancelled, completed\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- Notifications\nCREATE TABLE notifications (\n    id SERIAL PRIMARY KEY,\n    user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,\n    type VARCHAR(50) NOT NULL,\n    title VARCHAR(255) NOT NULL,\n    message TEXT,\n    data JSONB, -- Additional context data\n    read BOOLEAN DEFAULT FALSE,\n    action_url TEXT,\n    expires_at TIMESTAMP,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- API Keys and Integrations\nCREATE TABLE api_keys (\n    id SERIAL PRIMARY KEY,\n    user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,\n    name VARCHAR(255) NOT NULL,\n    key_hash VARCHAR(255) UNIQUE NOT NULL,\n    permissions TEXT[], -- Array of allowed operations\n    rate_limit INTEGER DEFAULT 1000, -- Requests per hour\n    last_used TIMESTAMP,\n    expires_at TIMESTAMP,\n    is_active BOOLEAN DEFAULT TRUE,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n```\n\n### Database Indexes\n\n```sql\n-- Performance indexes\nCREATE INDEX idx_motorcycles_user_id ON motorcycles(user_id);\nCREATE INDEX idx_maintenance_records_motorcycle_id ON maintenance_records(motorcycle_id);\nCREATE INDEX idx_maintenance_records_service_date ON maintenance_records(service_date);\nCREATE INDEX idx_rides_user_id ON rides(user_id);\nCREATE INDEX idx_rides_start_time ON rides(start_time);\nCREATE INDEX idx_documents_motorcycle_id ON documents(motorcycle_id);\nCREATE INDEX idx_documents_expiry_date ON documents(expiry_date);\nCREATE INDEX idx_notifications_user_id_read ON notifications(user_id, read);\nCREATE INDEX idx_user_sessions_session_token ON user_sessions(session_token);\nCREATE INDEX idx_user_sessions_expires_at ON user_sessions(expires_at);\n\n-- Geospatial indexes\nCREATE INDEX idx_rides_start_location ON rides USING GIST(start_location);\nCREATE INDEX idx_events_location ON events USING GIST(location);\nCREATE INDEX idx_groups_location ON groups USING GIST(location);\n\n-- Full-text search indexes\nCREATE INDEX idx_motorcycles_search ON motorcycles USING GIN(to_tsvector('english', name || ' ' || make || ' ' || model));\nCREATE INDEX idx_groups_search ON groups USING GIN(to_tsvector('english', name || ' ' || description));\n```\n\n### Caching Strategy\n\n#### Redis Clusters\n```\nPrimary Cache Cluster:\n- Session storage\n- Rate limiting\n- Real-time data (notifications, chat)\n- Temporary file uploads\n\nSecondary Cache Cluster:\n- Query result caching\n- Computed aggregations\n- Static content caching\n```\n\n## API Architecture\n\n### RESTful API Design\n\n#### Base URL Structure\n```\nhttps://api.throttlecove.com/v1/\n```\n\n#### Authentication Endpoints\n```\nPOST   /auth/register\nPOST   /auth/login\nPOST   /auth/logout\nPOST   /auth/refresh\nPOST   /auth/forgot-password\nPOST   /auth/reset-password\nGET    /auth/session\nPOST   /auth/verify-email\nPOST   /auth/enable-mfa\nPOST   /auth/verify-mfa\n```\n\n#### User Management\n```\nGET    /users/profile\nPUT    /users/profile\nDELETE /users/account\nGET    /users/{id}\nGET    /users/search\nPOST   /users/follow\nDELETE /users/follow/{id}\nGET    /users/followers\nGET    /users/following\n```\n\n#### Vehicle Management\n```\nGET    /motorcycles\nPOST   /motorcycles\nGET    /motorcycles/{id}\nPUT    /motorcycles/{id}\nDELETE /motorcycles/{id}\nPOST   /motorcycles/{id}/photos\nDELETE /motorcycles/{id}/photos/{photoId}\nGET    /motorcycles/{id}/value-estimate\nGET    /motorcycles/search\n```\n\n#### Maintenance Management\n```\nGET    /motorcycles/{id}/maintenance\nPOST   /motorcycles/{id}/maintenance\nGET    /motorcycles/{id}/maintenance/{recordId}\nPUT    /motorcycles/{id}/maintenance/{recordId}\nDELETE /motorcycles/{id}/maintenance/{recordId}\nGET    /motorcycles/{id}/maintenance/schedule\nPOST   /motorcycles/{id}/maintenance/schedule\nPUT    /motorcycles/{id}/maintenance/schedule/{scheduleId}\nDELETE /motorcycles/{id}/maintenance/schedule/{scheduleId}\nGET    /motorcycles/{id}/maintenance/due\n```\n\n#### Document Management\n```\nGET    /motorcycles/{id}/documents\nPOST   /motorcycles/{id}/documents\nGET    /motorcycles/{id}/documents/{docId}\nPUT    /motorcycles/{id}/documents/{docId}\nDELETE /motorcycles/{id}/documents/{docId}\nGET    /motorcycles/{id}/documents/expiring\nPOST   /motorcycles/{id}/documents/{docId}/renew\n```\n\n#### Social Features\n```\nGET    /groups\nPOST   /groups\nGET    /groups/{id}\nPUT    /groups/{id}\nDELETE /groups/{id}\nPOST   /groups/{id}/join\nDELETE /groups/{id}/leave\nGET    /groups/{id}/members\nGET    /groups/{id}/events\nPOST   /groups/{id}/events\n\nGET    /events\nGET    /events/{id}\nPOST   /events/{id}/join\nDELETE /events/{id}/leave\nGET    /events/nearby\n```\n\n#### Ride Tracking\n```\nGET    /rides\nPOST   /rides\nGET    /rides/{id}\nPUT    /rides/{id}\nDELETE /rides/{id}\nPOST   /rides/{id}/start\nPOST   /rides/{id}/end\nGET    /rides/statistics\n```\n\n### API Security\n\n#### Rate Limiting\n```typescript\n// Rate limiting by endpoint type\nconst rateLimits = {\n  auth: '5 requests per minute',\n  read: '1000 requests per hour',\n  write: '100 requests per hour',\n  upload: '10 requests per hour',\n  api_key: '10000 requests per hour'\n};\n```\n\n#### Request Validation\n```typescript\n// Input validation middleware\nconst validateRequest = (schema: JSONSchema) => {\n  return (req: Request, res: Response, next: NextFunction) => {\n    const validation = validate(req.body, schema);\n    if (!validation.valid) {\n      return res.status(400).json({\n        error: 'Validation failed',\n        details: validation.errors\n      });\n    }\n    next();\n  };\n};\n```\n\n## Authentication & Authorization\n\n### JWT Implementation\n\n```typescript\ninterface JWTPayload {\n  userId: number;\n  username: string;\n  role: string;\n  permissions: string[];\n  sessionId: string;\n  iat: number;\n  exp: number;\n}\n\n// Token generation\nconst generateTokens = (user: User): TokenPair => {\n  const payload: JWTPayload = {\n    userId: user.id,\n    username: user.username,\n    role: user.role,\n    permissions: getUserPermissions(user.role),\n    sessionId: generateSessionId(),\n    iat: Math.floor(Date.now() / 1000),\n    exp: Math.floor(Date.now() / 1000) + (15 * 60) // 15 minutes\n  };\n\n  const accessToken = jwt.sign(payload, process.env.JWT_SECRET!);\n  const refreshToken = jwt.sign(\n    { sessionId: payload.sessionId },\n    process.env.JWT_REFRESH_SECRET!,\n    { expiresIn: '7d' }\n  );\n\n  return { accessToken, refreshToken };\n};\n```\n\n### Role-Based Access Control\n\n```typescript\nenum Role {\n  USER = 'user',\n  MODERATOR = 'moderator',\n  ADMIN = 'admin',\n  SUPER_ADMIN = 'super_admin'\n}\n\nenum Permission {\n  READ_OWN_DATA = 'read:own',\n  WRITE_OWN_DATA = 'write:own',\n  READ_PUBLIC_DATA = 'read:public',\n  MODERATE_CONTENT = 'moderate:content',\n  ADMIN_USERS = 'admin:users',\n  ADMIN_SYSTEM = 'admin:system'\n}\n\nconst rolePermissions = {\n  [Role.USER]: [\n    Permission.READ_OWN_DATA,\n    Permission.WRITE_OWN_DATA,\n    Permission.READ_PUBLIC_DATA\n  ],\n  [Role.MODERATOR]: [\n    ...rolePermissions[Role.USER],\n    Permission.MODERATE_CONTENT\n  ],\n  [Role.ADMIN]: [\n    ...rolePermissions[Role.MODERATOR],\n    Permission.ADMIN_USERS\n  ],\n  [Role.SUPER_ADMIN]: [\n    ...rolePermissions[Role.ADMIN],\n    Permission.ADMIN_SYSTEM\n  ]\n};\n```\n\n## Security Implementation\n\n### Security Headers\n```typescript\napp.use(helmet({\n  contentSecurityPolicy: {\n    directives: {\n      defaultSrc: [\"'self'\"],\n      styleSrc: [\"'self'\", \"'unsafe-inline'\", \"https:\"],\n      scriptSrc: [\"'self'\"],\n      imgSrc: [\"'self'\", \"data:\", \"https:\"],\n      connectSrc: [\"'self'\", \"https://api.throttlecove.com\"],\n      fontSrc: [\"'self'\", \"https:\"],\n      objectSrc: [\"'none'\"],\n      mediaSrc: [\"'self'\"],\n      frameSrc: [\"'none'\"]\n    }\n  },\n  hsts: {\n    maxAge: 31536000,\n    includeSubDomains: true,\n    preload: true\n  }\n}));\n```\n\n### Input Sanitization\n```typescript\nimport DOMPurify from 'isomorphic-dompurify';\nimport validator from 'validator';\n\nconst sanitizeInput = (input: string, type: 'html' | 'text' = 'text'): string => {\n  if (type === 'html') {\n    return DOMPurify.sanitize(input, {\n      ALLOWED_TAGS: ['b', 'i', 'em', 'strong', 'a', 'p', 'br'],\n      ALLOWED_ATTR: ['href']\n    });\n  }\n  return validator.escape(input);\n};\n```\n\n### SQL Injection Prevention\n```typescript\n// Using parameterized queries with Drizzle ORM\nconst getUserMotorcycles = async (userId: number) => {\n  return await db\n    .select()\n    .from(motorcycles)\n    .where(eq(motorcycles.userId, userId));\n};\n\n// Raw query protection (when needed)\nconst executeRawQuery = async (query: string, params: any[]) => {\n  // Validate query structure\n  if (query.toLowerCase().includes('drop') || \n      query.toLowerCase().includes('delete') ||\n      query.toLowerCase().includes('truncate')) {\n    throw new Error('Destructive operations not allowed');\n  }\n  \n  return await db.execute(sql.raw(query, ...params));\n};\n```\n\n### File Upload Security\n```typescript\nconst uploadConfig = {\n  limits: {\n    fileSize: 10 * 1024 * 1024, // 10MB\n    files: 5\n  },\n  fileFilter: (req: Request, file: Express.Multer.File, cb: Function) => {\n    const allowedTypes = [\n      'image/jpeg',\n      'image/png',\n      'image/webp',\n      'application/pdf'\n    ];\n    \n    if (allowedTypes.includes(file.mimetype)) {\n      cb(null, true);\n    } else {\n      cb(new Error('Invalid file type'), false);\n    }\n  }\n};\n\n// Virus scanning\nconst scanFile = async (filePath: string): Promise<boolean> => {\n  // Integrate with ClamAV or similar\n  return await virusScanner.scan(filePath);\n};\n```\n\n## Scalability Strategy\n\n### Horizontal Scaling\n\n#### Load Balancing\n```nginx\nupstream api_servers {\n    least_conn;\n    server api1.throttlecove.com:3000 weight=3;\n    server api2.throttlecove.com:3000 weight=3;\n    server api3.throttlecove.com:3000 weight=2;\n    server api4.throttlecove.com:3000 weight=2 backup;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name api.throttlecove.com;\n    \n    location / {\n        proxy_pass http://api_servers;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n```\n\n#### Auto-scaling Configuration\n```yaml\n# Kubernetes HPA\napiVersion: autoscaling/v2\nkind: HorizontalPodAutoscaler\nmetadata:\n  name: throttlecove-api\nspec:\n  scaleTargetRef:\n    apiVersion: apps/v1\n    kind: Deployment\n    name: throttlecove-api\n  minReplicas: 3\n  maxReplicas: 50\n  metrics:\n  - type: Resource\n    resource:\n      name: cpu\n      target:\n        type: Utilization\n        averageUtilization: 70\n  - type: Resource\n    resource:\n      name: memory\n      target:\n        type: Utilization\n        averageUtilization: 80\n```\n\n### Database Scaling\n\n#### Read Replicas\n```typescript\n// Database connection pool\nconst dbConfig = {\n  primary: {\n    host: process.env.DB_PRIMARY_HOST,\n    port: 5432,\n    database: 'throttlecove',\n    pool: { min: 5, max: 20 }\n  },\n  replicas: [\n    {\n      host: process.env.DB_REPLICA1_HOST,\n      port: 5432,\n      database: 'throttlecove',\n      pool: { min: 2, max: 10 }\n    },\n    {\n      host: process.env.DB_REPLICA2_HOST,\n      port: 5432,\n      database: 'throttlecove',\n      pool: { min: 2, max: 10 }\n    }\n  ]\n};\n\n// Query routing\nconst executeQuery = async (query: SQLQuery, readOnly: boolean = false) => {\n  const connection = readOnly ? getReadReplica() : getPrimaryConnection();\n  return await connection.execute(query);\n};\n```\n\n#### Connection Pooling\n```typescript\nimport { Pool } from 'pg';\n\nconst createConnectionPool = (config: DatabaseConfig) => {\n  return new Pool({\n    ...config,\n    max: 20, // Maximum connections\n    idleTimeoutMillis: 30000,\n    connectionTimeoutMillis: 2000,\n    application_name: 'throttlecove-api'\n  });\n};\n```\n\n### Caching Strategy\n\n#### Multi-layer Caching\n```typescript\nclass CacheManager {\n  private l1Cache: NodeCache; // In-memory\n  private l2Cache: Redis; // Redis\n  private l3Cache: CloudFront; // CDN\n\n  async get(key: string): Promise<any> {\n    // L1: Memory cache\n    let value = this.l1Cache.get(key);\n    if (value) return value;\n\n    // L2: Redis cache\n    value = await this.l2Cache.get(key);\n    if (value) {\n      this.l1Cache.set(key, value, 300); // 5 min TTL\n      return JSON.parse(value);\n    }\n\n    // L3: Database + cache result\n    value = await this.fetchFromDatabase(key);\n    if (value) {\n      this.l1Cache.set(key, value, 300);\n      this.l2Cache.setex(key, 3600, JSON.stringify(value)); // 1 hour TTL\n    }\n\n    return value;\n  }\n\n  async invalidate(pattern: string): Promise<void> {\n    this.l1Cache.flushAll();\n    const keys = await this.l2Cache.keys(pattern);\n    if (keys.length > 0) {\n      await this.l2Cache.del(...keys);\n    }\n  }\n}\n```\n\n## Data Flow & Business Logic\n\n### Service Layer Architecture\n\n```typescript\n// Base service class\nabstract class BaseService {\n  protected db: Database;\n  protected cache: CacheManager;\n  protected eventBus: EventBus;\n\n  constructor(db: Database, cache: CacheManager, eventBus: EventBus) {\n    this.db = db;\n    this.cache = cache;\n    this.eventBus = eventBus;\n  }\n\n  protected async withTransaction<T>(\n    callback: (tx: Transaction) => Promise<T>\n  ): Promise<T> {\n    return await this.db.transaction(callback);\n  }\n\n  protected emitEvent(event: string, data: any): void {\n    this.eventBus.emit(event, data);\n  }\n}\n\n// Vehicle service implementation\nclass VehicleService extends BaseService {\n  async createMotorcycle(userId: number, data: CreateMotorcycleData): Promise<Motorcycle> {\n    return await this.withTransaction(async (tx) => {\n      // Validate user ownership limits\n      const existingCount = await this.getUserMotorcycleCount(userId, tx);\n      if (existingCount >= 10) {\n        throw new Error('Maximum motorcycle limit reached');\n      }\n\n      // Create motorcycle\n      const motorcycle = await tx\n        .insert(motorcycles)\n        .values({ ...data, userId })\n        .returning();\n\n      // Create default maintenance schedule\n      await this.createDefaultMaintenanceSchedule(motorcycle.id, tx);\n\n      // Emit event for analytics\n      this.emitEvent('motorcycle.created', {\n        userId,\n        motorcycleId: motorcycle.id,\n        make: data.make,\n        model: data.model\n      });\n\n      // Invalidate user's motorcycle cache\n      await this.cache.invalidate(`motorcycles:user:${userId}`);\n\n      return motorcycle;\n    });\n  }\n\n  async updateMotorcycle(id: number, userId: number, data: UpdateMotorcycleData): Promise<Motorcycle> {\n    return await this.withTransaction(async (tx) => {\n      // Verify ownership\n      const existing = await this.getMotorcycleById(id, userId, tx);\n      if (!existing) {\n        throw new Error('Motorcycle not found or access denied');\n      }\n\n      // Update motorcycle\n      const updated = await tx\n        .update(motorcycles)\n        .set({ ...data, updatedAt: new Date() })\n        .where(and(eq(motorcycles.id, id), eq(motorcycles.userId, userId)))\n        .returning();\n\n      // Emit update event\n      this.emitEvent('motorcycle.updated', {\n        userId,\n        motorcycleId: id,\n        changes: data\n      });\n\n      // Invalidate caches\n      await this.cache.invalidate(`motorcycle:${id}`);\n      await this.cache.invalidate(`motorcycles:user:${userId}`);\n\n      return updated;\n    });\n  }\n}\n```\n\n### Event-Driven Architecture\n\n```typescript\ninterface DomainEvent {\n  id: string;\n  type: string;\n  aggregateId: string;\n  payload: any;\n  timestamp: Date;\n  version: number;\n}\n\nclass EventBus {\n  private handlers: Map<string, Array<(event: DomainEvent) => void>> = new Map();\n\n  subscribe(eventType: string, handler: (event: DomainEvent) => void): void {\n    if (!this.handlers.has(eventType)) {\n      this.handlers.set(eventType, []);\n    }\n    this.handlers.get(eventType)!.push(handler);\n  }\n\n  emit(eventType: string, payload: any): void {\n    const event: DomainEvent = {\n      id: generateUUID(),\n      type: eventType,\n      aggregateId: payload.id || payload.userId,\n      payload,\n      timestamp: new Date(),\n      version: 1\n    };\n\n    const handlers = this.handlers.get(eventType) || [];\n    handlers.forEach(handler => {\n      try {\n        handler(event);\n      } catch (error) {\n        console.error(`Error handling event ${eventType}:`, error);\n      }\n    });\n\n    // Store event for replay/audit\n    this.storeEvent(event);\n  }\n\n  private async storeEvent(event: DomainEvent): Promise<void> {\n    await this.db.insert(events).values(event);\n  }\n}\n\n// Event handlers\neventBus.subscribe('motorcycle.created', async (event) => {\n  // Send welcome email\n  await emailService.sendWelcomeEmail(event.payload.userId);\n  \n  // Update user statistics\n  await analyticsService.incrementUserMetric(event.payload.userId, 'motorcycles_added');\n  \n  // Create default documents\n  await documentService.createDefaultDocuments(event.payload.motorcycleId);\n});\n\neventBus.subscribe('maintenance.due', async (event) => {\n  // Send maintenance reminder\n  await notificationService.sendMaintenanceReminder(event.payload);\n  \n  // Update maintenance statistics\n  await analyticsService.recordMaintenanceEvent(event.payload);\n});\n```\n\n## File Storage & Media Management\n\n### Cloud Storage Strategy\n\n```typescript\ninterface StorageProvider {\n  upload(file: Buffer, key: string, metadata: FileMetadata): Promise<string>;\n  download(key: string): Promise<Buffer>;\n  delete(key: string): Promise<void>;\n  generateSignedUrl(key: string, expiresIn: number): Promise<string>;\n}\n\nclass S3StorageProvider implements StorageProvider {\n  private s3: AWS.S3;\n  private bucket: string;\n\n  constructor() {\n    this.s3 = new AWS.S3({\n      region: process.env.AWS_REGION,\n      accessKeyId: process.env.AWS_ACCESS_KEY_ID,\n      secretAccessKey: process.env.AWS_SECRET_ACCESS_KEY\n    });\n    this.bucket = process.env.S3_BUCKET!;\n  }\n\n  async upload(file: Buffer, key: string, metadata: FileMetadata): Promise<string> {\n    const result = await this.s3.upload({\n      Bucket: this.bucket,\n      Key: key,\n      Body: file,\n      ContentType: metadata.mimeType,\n      Metadata: {\n        originalName: metadata.originalName,\n        uploadedBy: metadata.userId.toString(),\n        uploadedAt: new Date().toISOString()\n      },\n      ServerSideEncryption: 'AES256'\n    }).promise();\n\n    return result.Location;\n  }\n\n  async generateSignedUrl(key: string, expiresIn: number = 3600): Promise<string> {\n    return this.s3.getSignedUrl('getObject', {\n      Bucket: this.bucket,\n      Key: key,\n      Expires: expiresIn\n    });\n  }\n}\n\n// Image processing pipeline\nclass ImageProcessor {\n  async processImage(buffer: Buffer, options: ImageProcessingOptions): Promise<ProcessedImage[]> {\n    const variants: ProcessedImage[] = [];\n\n    // Original\n    variants.push({\n      size: 'original',\n      buffer: buffer,\n      width: options.originalWidth,\n      height: options.originalHeight\n    });\n\n    // Thumbnail\n    variants.push({\n      size: 'thumbnail',\n      buffer: await sharp(buffer)\n        .resize(150, 150, { fit: 'cover' })\n        .jpeg({ quality: 80 })\n        .toBuffer(),\n      width: 150,\n      height: 150\n    });\n\n    // Medium\n    variants.push({\n      size: 'medium',\n      buffer: await sharp(buffer)\n        .resize(800, 600, { fit: 'inside', withoutEnlargement: true })\n        .jpeg({ quality: 85 })\n        .toBuffer(),\n      width: 800,\n      height: 600\n    });\n\n    // Large\n    variants.push({\n      size: 'large',\n      buffer: await sharp(buffer)\n        .resize(1200, 900, { fit: 'inside', withoutEnlargement: true })\n        .jpeg({ quality: 90 })\n        .toBuffer(),\n      width: 1200,\n      height: 900\n    });\n\n    return variants;\n  }\n}\n```\n\n### Document Processing\n\n```typescript\nclass DocumentProcessor {\n  private ocrService: OCRService;\n  private virusScanner: VirusScanner;\n\n  async processDocument(file: Express.Multer.File, motorcycleId: number): Promise<Document> {\n    // Virus scan\n    const isSafe = await this.virusScanner.scan(file.buffer);\n    if (!isSafe) {\n      throw new Error('File failed security scan');\n    }\n\n    // Extract text if PDF or image\n    let extractedText = '';\n    if (this.isImageOrPDF(file.mimetype)) {\n      extractedText = await this.ocrService.extractText(file.buffer);\n    }\n\n    // Parse document metadata\n    const metadata = await this.parseDocumentMetadata(extractedText, file.originalname);\n\n    // Upload to storage\n    const fileKey = `documents/${motorcycleId}/${generateUUID()}.${this.getFileExtension(file.originalname)}`;\n    const fileUrl = await this.storageProvider.upload(file.buffer, fileKey, {\n      mimeType: file.mimetype,\n      originalName: file.originalname,\n      motorcycleId\n    });\n\n    // Save to database\n    const document = await this.db.insert(documents).values({\n      motorcycleId,\n      documentType: metadata.type,\n      title: metadata.title || file.originalname,\n      fileUrl,\n      fileSize: file.size,\n      mimeType: file.mimetype,\n      issueDate: metadata.issueDate,\n      expiryDate: metadata.expiryDate,\n      documentNumber: metadata.documentNumber,\n      extractedData: { text: extractedText, metadata }\n    }).returning();\n\n    // Schedule expiry reminder\n    if (metadata.expiryDate) {\n      await this.scheduleExpiryReminder(document.id, metadata.expiryDate);\n    }\n\n    return document;\n  }\n\n  private async parseDocumentMetadata(text: string, filename: string): Promise<DocumentMetadata> {\n    // Use AI/ML to extract structured data from OCR text\n    const patterns = {\n      registration: /registration|license|plate/i,\n      insurance: /insurance|policy/i,\n      service: /service|maintenance|repair/i,\n      \n      // Date patterns\n      expiryDate: /(?:expir|valid until|due)[:\\s]*(\\d{1,2}[\\/\\-]\\d{1,2}[\\/\\-]\\d{2,4})/i,\n      issueDate: /(?:issue|date)[:\\s]*(\\d{1,2}[\\/\\-]\\d{1,2}[\\/\\-]\\d{2,4})/i,\n      \n      // Number patterns\n      policyNumber: /(?:policy|ref|number)[:\\s]*([A-Z0-9\\-]+)/i,\n      licenseNumber: /(?:license|plate)[:\\s]*([A-Z0-9\\-]+)/i\n    };\n\n    const metadata: DocumentMetadata = {\n      type: this.detectDocumentType(text, filename),\n      title: filename,\n      issueDate: this.extractDate(text, patterns.issueDate),\n      expiryDate: this.extractDate(text, patterns.expiryDate),\n      documentNumber: this.extractPattern(text, patterns.policyNumber) || \n                     this.extractPattern(text, patterns.licenseNumber)\n    };\n\n    return metadata;\n  }\n}\n```\n\n## Monitoring & Logging\n\n### Application Monitoring\n\n```typescript\n// Metrics collection\nclass MetricsCollector {\n  private prometheus: PrometheusRegistry;\n  private httpRequestDuration: Histogram;\n  private httpRequestTotal: Counter;\n  private activeConnections: Gauge;\n  private errorRate: Counter;\n\n  constructor() {\n    this.prometheus = new PrometheusRegistry();\n    \n    this.httpRequestDuration = new Histogram({\n      name: 'http_request_duration_seconds',\n      help: 'Duration of HTTP requests in seconds',\n      labelNames: ['method', 'route', 'status_code'],\n      buckets: [0.1, 0.5, 1, 2, 5, 10]\n    });\n\n    this.httpRequestTotal = new Counter({\n      name: 'http_requests_total',\n      help: 'Total number of HTTP requests',\n      labelNames: ['method', 'route', 'status_code']\n    });\n\n    this.activeConnections = new Gauge({\n      name: 'active_connections',\n      help: 'Number of active connections'\n    });\n\n    this.errorRate = new Counter({\n      name: 'errors_total',\n      help: 'Total number of errors',\n      labelNames: ['type', 'service']\n    });\n\n    this.prometheus.registerMetric(this.httpRequestDuration);\n    this.prometheus.registerMetric(this.httpRequestTotal);\n    this.prometheus.registerMetric(this.activeConnections);\n    this.prometheus.registerMetric(this.errorRate);\n  }\n\n  recordHttpRequest(method: string, route: string, statusCode: number, duration: number): void {\n    this.httpRequestDuration.observe({ method, route, status_code: statusCode.toString() }, duration);\n    this.httpRequestTotal.inc({ method, route, status_code: statusCode.toString() });\n  }\n\n  recordError(type: string, service: string): void {\n    this.errorRate.inc({ type, service });\n  }\n}\n\n// Middleware for request tracking\nconst metricsMiddleware = (metrics: MetricsCollector) => {\n  return (req: Request, res: Response, next: NextFunction) => {\n    const startTime = Date.now();\n    \n    res.on('finish', () => {\n      const duration = (Date.now() - startTime) / 1000;\n      metrics.recordHttpRequest(\n        req.method,\n        req.route?.path || req.path,\n        res.statusCode,\n        duration\n      );\n    });\n\n    next();\n  };\n};\n```\n\n### Structured Logging\n\n```typescript\nimport winston from 'winston';\n\nconst logger = winston.createLogger({\n  level: process.env.LOG_LEVEL || 'info',\n  format: winston.format.combine(\n    winston.format.timestamp(),\n    winston.format.errors({ stack: true }),\n    winston.format.json()\n  ),\n  defaultMeta: {\n    service: 'throttlecove-api',\n    version: process.env.APP_VERSION\n  },\n  transports: [\n    new winston.transports.File({ filename: 'error.log', level: 'error' }),\n    new winston.transports.File({ filename: 'combined.log' }),\n    new winston.transports.Console({\n      format: winston.format.combine(\n        winston.format.colorize(),\n        winston.format.simple()\n      )\n    })\n  ]\n});\n\n// Request logging middleware\nconst requestLogger = (req: Request, res: Response, next: NextFunction) => {\n  const requestId = generateUUID();\n  req.requestId = requestId;\n\n  logger.info('Request started', {\n    requestId,\n    method: req.method,\n    url: req.url,\n    userAgent: req.get('User-Agent'),\n    ip: req.ip,\n    userId: req.user?.id\n  });\n\n  const originalJson = res.json;\n  res.json = function(body) {\n    logger.info('Request completed', {\n      requestId,\n      statusCode: res.statusCode,\n      responseTime: Date.now() - req.startTime\n    });\n    return originalJson.call(this, body);\n  };\n\n  next();\n};\n```\n\n### Health Checks\n\n```typescript\ninterface HealthCheck {\n  name: string;\n  check(): Promise<HealthStatus>;\n}\n\ninterface HealthStatus {\n  status: 'healthy' | 'unhealthy' | 'degraded';\n  message?: string;\n  details?: any;\n}\n\nclass DatabaseHealthCheck implements HealthCheck {\n  name = 'database';\n\n  async check(): Promise<HealthStatus> {\n    try {\n      await this.db.raw('SELECT 1');\n      return { status: 'healthy' };\n    } catch (error) {\n      return {\n        status: 'unhealthy',\n        message: 'Database connection failed',\n        details: error.message\n      };\n    }\n  }\n}\n\nclass RedisHealthCheck implements HealthCheck {\n  name = 'redis';\n\n  async check(): Promise<HealthStatus> {\n    try {\n      await this.redis.ping();\n      return { status: 'healthy' };\n    } catch (error) {\n      return {\n        status: 'unhealthy',\n        message: 'Redis connection failed',\n        details: error.message\n      };\n    }\n  }\n}\n\nclass HealthService {\n  private checks: HealthCheck[] = [];\n\n  addCheck(check: HealthCheck): void {\n    this.checks.push(check);\n  }\n\n  async runHealthChecks(): Promise<{ status: string; checks: Record<string, HealthStatus> }> {\n    const results: Record<string, HealthStatus> = {};\n    let overallStatus = 'healthy';\n\n    for (const check of this.checks) {\n      try {\n        results[check.name] = await check.check();\n        if (results[check.name].status === 'unhealthy') {\n          overallStatus = 'unhealthy';\n        } else if (results[check.name].status === 'degraded' && overallStatus === 'healthy') {\n          overallStatus = 'degraded';\n        }\n      } catch (error) {\n        results[check.name] = {\n          status: 'unhealthy',\n          message: 'Health check failed',\n          details: error.message\n        };\n        overallStatus = 'unhealthy';\n      }\n    }\n\n    return { status: overallStatus, checks: results };\n  }\n}\n\n// Health check endpoint\napp.get('/health', async (req, res) => {\n  const health = await healthService.runHealthChecks();\n  const statusCode = health.status === 'healthy' ? 200 : \n                    health.status === 'degraded' ? 200 : 503;\n  res.status(statusCode).json(health);\n});\n```\n\n## Deployment Architecture\n\n### Container Strategy\n\n```dockerfile\n# Production Dockerfile\nFROM node:18-alpine AS builder\n\nWORKDIR /app\nCOPY package*.json ./\nRUN npm ci --only=production\n\nFROM node:18-alpine AS runtime\n\nRUN addgroup -g 1001 -S nodejs\nRUN adduser -S nextjs -u 1001\n\nWORKDIR /app\n\nCOPY --from=builder /app/node_modules ./node_modules\nCOPY --chown=nextjs:nodejs . .\n\nUSER nextjs\n\nEXPOSE 3000\n\nENV NODE_ENV=production\nENV PORT=3000\n\nCMD [\"npm\", \"start\"]\n```\n\n### Kubernetes Deployment\n\n```yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: throttlecove-api\n  labels:\n    app: throttlecove-api\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: throttlecove-api\n  template:\n    metadata:\n      labels:\n        app: throttlecove-api\n    spec:\n      containers:\n      - name: api\n        image: throttlecove/api:latest\n        ports:\n        - containerPort: 3000\n        env:\n        - name: NODE_ENV\n          value: \"production\"\n        - name: DATABASE_URL\n          valueFrom:\n            secretKeyRef:\n              name: db-secret\n              key: url\n        - name: REDIS_URL\n          valueFrom:\n            secretKeyRef:\n              name: redis-secret\n              key: url\n        - name: JWT_SECRET\n          valueFrom:\n            secretKeyRef:\n              name: jwt-secret\n              key: secret\n        resources:\n          requests:\n            memory: \"256Mi\"\n            cpu: \"250m\"\n          limits:\n            memory: \"512Mi\"\n            cpu: \"500m\"\n        livenessProbe:\n          httpGet:\n            path: /health\n            port: 3000\n          initialDelaySeconds: 30\n          periodSeconds: 10\n        readinessProbe:\n          httpGet:\n            path: /health\n            port: 3000\n          initialDelaySeconds: 5\n          periodSeconds: 5\n      imagePullSecrets:\n      - name: registry-secret\n```\n\n### CI/CD Pipeline\n\n```yaml\n# GitHub Actions workflow\nname: Deploy to Production\n\non:\n  push:\n    branches: [main]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    steps:\n    - uses: actions/checkout@v3\n    - uses: actions/setup-node@v3\n      with:\n        node-version: 18\n        cache: 'npm'\n    - run: npm ci\n    - run: npm run test\n    - run: npm run lint\n    - run: npm run type-check\n\n  security:\n    runs-on: ubuntu-latest\n    steps:\n    - uses: actions/checkout@v3\n    - name: Run security audit\n      run: npm audit --audit-level high\n    - name: Run SAST scan\n      uses: github/super-linter@v4\n      env:\n        DEFAULT_BRANCH: main\n        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n\n  build:\n    needs: [test, security]\n    runs-on: ubuntu-latest\n    steps:\n    - uses: actions/checkout@v3\n    - name: Build Docker image\n      run: |\n        docker build -t throttlecove/api:${{ github.sha }} .\n        docker tag throttlecove/api:${{ github.sha }} throttlecove/api:latest\n    - name: Push to registry\n      run: |\n        echo ${{ secrets.DOCKER_PASSWORD }} | docker login -u ${{ secrets.DOCKER_USERNAME }} --password-stdin\n        docker push throttlecove/api:${{ github.sha }}\n        docker push throttlecove/api:latest\n\n  deploy:\n    needs: build\n    runs-on: ubuntu-latest\n    steps:\n    - name: Deploy to Kubernetes\n      run: |\n        kubectl set image deployment/throttlecove-api api=throttlecove/api:${{ github.sha }}\n        kubectl rollout status deployment/throttlecove-api\n```\n\n## Performance Optimization\n\n### Database Optimization\n\n```sql\n-- Query optimization examples\n\n-- Efficient user motorcycle lookup with pagination\nCREATE INDEX idx_motorcycles_user_created ON motorcycles(user_id, created_at DESC);\n\n-- Maintenance due query optimization\nCREATE INDEX idx_maintenance_due ON maintenance_schedules(\n  motorcycle_id, \n  (CASE WHEN interval_type = 'mileage' THEN mileage_interval ELSE NULL END),\n  (CASE WHEN interval_type = 'time' THEN time_interval ELSE NULL END)\n);\n\n-- Geospatial queries for nearby events\nCREATE INDEX idx_events_location_time ON events USING GIST(location, daterange(start_time, end_time));\n\n-- Full-text search optimization\nCREATE INDEX idx_motorcycles_fts ON motorcycles USING GIN(\n  to_tsvector('english', \n    coalesce(name, '') || ' ' || \n    coalesce(make, '') || ' ' || \n    coalesce(model, '')\n  )\n);\n```\n\n### Connection Pooling\n\n```typescript\nclass DatabasePool {\n  private pools: Map<string, pg.Pool> = new Map();\n\n  getPool(type: 'primary' | 'replica' = 'primary'): pg.Pool {\n    if (!this.pools.has(type)) {\n      const config = type === 'primary' ? primaryConfig : replicaConfig;\n      this.pools.set(type, new pg.Pool({\n        ...config,\n        max: 20,\n        idleTimeoutMillis: 30000,\n        connectionTimeoutMillis: 2000,\n        statement_timeout: 30000,\n        query_timeout: 30000\n      }));\n    }\n    return this.pools.get(type)!;\n  }\n\n  async query(text: string, params?: any[], readOnly: boolean = false): Promise<any> {\n    const pool = this.getPool(readOnly ? 'replica' : 'primary');\n    const client = await pool.connect();\n    \n    try {\n      const start = Date.now();\n      const result = await client.query(text, params);\n      const duration = Date.now() - start;\n      \n      // Log slow queries\n      if (duration > 1000) {\n        logger.warn('Slow query detected', {\n          query: text,\n          duration,\n          params: params?.length\n        });\n      }\n      \n      return result;\n    } finally {\n      client.release();\n    }\n  }\n}\n```\n\n### Background Jobs\n\n```typescript\nimport Bull from 'bull';\n\n// Job queue setup\nconst jobQueue = new Bull('background jobs', {\n  redis: {\n    host: process.env.REDIS_HOST,\n    port: parseInt(process.env.REDIS_PORT!),\n    password: process.env.REDIS_PASSWORD\n  },\n  defaultJobOptions: {\n    removeOnComplete: 100,\n    removeOnFail: 50,\n    attempts: 3,\n    backoff: {\n      type: 'exponential',\n      delay: 2000\n    }\n  }\n});\n\n// Job processors\njobQueue.process('send-email', 5, async (job) => {\n  const { to, subject, template, data } = job.data;\n  await emailService.send(to, subject, template, data);\n});\n\njobQueue.process('process-image', 2, async (job) => {\n  const { imageUrl, motorcycleId } = job.data;\n  await imageProcessor.processAndStore(imageUrl, motorcycleId);\n});\n\njobQueue.process('maintenance-reminder', 1, async (job) => {\n  const { userId, motorcycleId, maintenanceType } = job.data;\n  await notificationService.sendMaintenanceReminder(userId, motorcycleId, maintenanceType);\n});\n\n// Cron jobs\njobQueue.add('daily-maintenance-check', {}, {\n  repeat: { cron: '0 9 * * *' } // 9 AM daily\n});\n\njobQueue.add('weekly-analytics', {}, {\n  repeat: { cron: '0 0 * * 0' } // Sunday midnight\n});\n```\n\nThis comprehensive backend architecture provides a solid foundation for ThrottleCove's growth, ensuring security, scalability, and maintainability while supporting all the platform's features and future expansion.","size_bytes":46371},"attached_assets/COMPLETE_PROJECT_DOCUMENTATION.md":{"content":"# ThrottleCove Complete Project Documentation\n\n## Table of Contents\n1. [Project Overview](#project-overview)\n2. [System Architecture](#system-architecture)\n3. [Technology Stack](#technology-stack)\n4. [Environment Setup](#environment-setup)\n5. [Database Schema](#database-schema)\n6. [Backend Implementation](#backend-implementation)\n7. [Frontend Implementation](#frontend-implementation)\n8. [Authentication System](#authentication-system)\n9. [API Documentation](#api-documentation)\n10. [Security Implementation](#security-implementation)\n11. [File Structure](#file-structure)\n12. [Configuration Files](#configuration-files)\n13. [Deployment Guide](#deployment-guide)\n14. [Testing & Development](#testing--development)\n15. [Troubleshooting](#troubleshooting)\n\n---\n\n## 1. Project Overview\n\nThrottleCove is a comprehensive digital platform for motorcycle enthusiasts that provides an advanced garage management and community engagement experience. The platform features:\n\n- **Digital Garage Management**: Store and manage multiple motorcycles per user\n- **Maintenance Tracking**: Record service history and schedule maintenance\n- **Ride Management**: Track rides and connect with other riders\n- **Community Features**: User profiles, rankings, and social interactions\n- **Document Management**: Store vehicle paperwork and documentation\n- **Metric System**: All measurements in kilometers for international use\n\n### Core Features\n- User authentication and authorization\n- Vehicle information management (make, model, year, mileage in km)\n- Maintenance records and scheduling\n- Photo upload capabilities\n- User ranking system based on kilometers ridden\n- Responsive design for mobile, tablet, and desktop\n\n---\n\n## 2. System Architecture\n\n### Architecture Pattern\n- **Frontend**: Single Page Application (SPA) using React\n- **Backend**: Express.js REST API server\n- **Database**: PostgreSQL with Drizzle ORM\n- **Authentication**: Session-based with Passport.js\n- **Storage**: In-memory fallback for development, PostgreSQL for production\n\n### Data Flow\n```\nClient (React) ‚Üí API (Express) ‚Üí Storage Layer ‚Üí Database (PostgreSQL)\n     ‚Üì              ‚Üì               ‚Üì              ‚Üì\n  UI State     Business Logic   Data Access    Persistence\n```\n\n### Security Layers\n1. **Transport Security**: HTTPS/TLS encryption\n2. **Application Security**: Helmet.js security headers\n3. **Authentication**: bcrypt password hashing, session management\n4. **Rate Limiting**: API endpoint protection\n5. **Input Validation**: Zod schema validation\n6. **CORS**: Cross-origin request protection\n\n---\n\n## 3. Technology Stack\n\n### Frontend Technologies\n- **React 18**: Modern UI library with hooks\n- **TypeScript**: Type-safe JavaScript\n- **Vite**: Fast build tool and dev server\n- **Tailwind CSS**: Utility-first CSS framework\n- **shadcn/ui**: Component library based on Radix UI\n- **TanStack Query**: Server state management\n- **Wouter**: Lightweight routing\n- **Framer Motion**: Animation library\n- **React Hook Form**: Form management\n- **Zod**: Schema validation\n\n### Backend Technologies\n- **Node.js**: Runtime environment\n- **Express.js**: Web application framework\n- **TypeScript**: Type-safe server code\n- **Passport.js**: Authentication middleware\n- **bcryptjs**: Password hashing\n- **Express Session**: Session management\n- **Helmet.js**: Security headers\n- **Express Rate Limit**: API protection\n- **Winston**: Logging framework\n- **Joi/Zod**: Input validation\n\n### Database & ORM\n- **PostgreSQL**: Primary database\n- **Drizzle ORM**: Type-safe database operations\n- **Drizzle Kit**: Schema management and migrations\n- **Neon**: Serverless PostgreSQL hosting\n\n### Development Tools\n- **ESLint**: Code linting\n- **Prettier**: Code formatting\n- **PostCSS**: CSS processing\n- **tsx**: TypeScript execution\n\n---\n\n## 4. Environment Setup\n\n### Prerequisites\n- Node.js 18+ installed\n- PostgreSQL database (local or hosted)\n- Git for version control\n\n### Initial Setup Steps\n\n1. **Create Project Directory**\n```bash\nmkdir throttlecove\ncd throttlecove\n```\n\n2. **Initialize Package.json**\n```json\n{\n  \"name\": \"throttlecove\",\n  \"version\": \"1.0.0\",\n  \"type\": \"module\",\n  \"scripts\": {\n    \"dev\": \"tsx watch server/index.ts\",\n    \"build\": \"vite build\",\n    \"start\": \"node dist/index.js\",\n    \"db:push\": \"drizzle-kit push\",\n    \"db:studio\": \"drizzle-kit studio\"\n  }\n}\n```\n\n3. **Install Dependencies**\n```bash\n# Core dependencies\nnpm install express react react-dom typescript\n\n# Backend dependencies\nnpm install @types/express @types/node @types/bcryptjs @types/passport @types/passport-local\nnpm install bcryptjs passport passport-local express-session express-rate-limit helmet\nnpm install drizzle-orm @neondatabase/serverless postgres winston joi\n\n# Frontend dependencies\nnpm install @tanstack/react-query wouter framer-motion react-hook-form @hookform/resolvers\nnpm install @radix-ui/react-* tailwindcss @tailwindcss/typography lucide-react\n\n# Development dependencies\nnpm install -D vite @vitejs/plugin-react tsx drizzle-kit eslint prettier\nnpm install -D @types/express-session memorystore\n```\n\n4. **Environment Variables**\nCreate `.env` file:\n```env\nDATABASE_URL=postgresql://username:password@host:port/database\nSESSION_SECRET=your-super-secret-session-key\nJWT_SECRET=your-jwt-secret-key\nJWT_REFRESH_SECRET=your-jwt-refresh-secret\nNODE_ENV=development\nPORT=3000\n```\n\n---\n\n## 5. Database Schema\n\n### Core Tables Structure\n\n#### Users Table\n```typescript\nexport const users = pgTable(\"users\", {\n  id: serial(\"id\").primaryKey(),\n  username: varchar(\"username\", { length: 50 }).notNull().unique(),\n  passwordHash: varchar(\"password_hash\", { length: 255 }).notNull(),\n  fullName: varchar(\"full_name\", { length: 100 }).notNull(),\n  email: varchar(\"email\", { length: 255 }).notNull().unique(),\n  avatarUrl: varchar(\"avatar_url\", { length: 500 }),\n  bio: text(\"bio\"),\n  location: varchar(\"location\", { length: 100 }),\n  totalKilometers: integer(\"total_kilometers\").default(0),\n  rank: integer(\"rank\").default(1),\n  isActive: boolean(\"is_active\").default(true),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n```\n\n#### Motorcycles Table\n```typescript\nexport const motorcycles = pgTable(\"motorcycles\", {\n  id: serial(\"id\").primaryKey(),\n  userId: integer(\"user_id\").references(() => users.id, { onDelete: \"cascade\" }),\n  make: varchar(\"make\", { length: 50 }).notNull(),\n  model: varchar(\"model\", { length: 100 }).notNull(),\n  year: integer(\"year\").notNull(),\n  color: varchar(\"color\", { length: 30 }),\n  engineSize: varchar(\"engine_size\", { length: 20 }),\n  currentKilometers: integer(\"current_kilometers\").default(0),\n  vin: varchar(\"vin\", { length: 17 }),\n  licensePlate: varchar(\"license_plate\", { length: 20 }),\n  insuranceProvider: varchar(\"insurance_provider\", { length: 100 }),\n  insurancePolicyNumber: varchar(\"insurance_policy_number\", { length: 50 }),\n  status: varchar(\"status\", { length: 20 }).default(\"active\"),\n  notes: text(\"notes\"),\n  imageUrl: varchar(\"image_url\", { length: 500 }),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n```\n\n#### Maintenance Records Table\n```typescript\nexport const maintenanceRecords = pgTable(\"maintenance_records\", {\n  id: serial(\"id\").primaryKey(),\n  motorcycleId: integer(\"motorcycle_id\").references(() => motorcycles.id, { onDelete: \"cascade\" }),\n  serviceType: varchar(\"service_type\", { length: 100 }).notNull(),\n  description: text(\"description\"),\n  cost: decimal(\"cost\", { precision: 10, scale: 2 }),\n  serviceDate: date(\"service_date\").notNull(),\n  kilometers: integer(\"kilometers\"),\n  serviceProvider: varchar(\"service_provider\", { length: 100 }),\n  notes: text(\"notes\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n```\n\n#### Maintenance Schedules Table\n```typescript\nexport const maintenanceSchedules = pgTable(\"maintenance_schedules\", {\n  id: serial(\"id\").primaryKey(),\n  motorcycleId: integer(\"motorcycle_id\").references(() => motorcycles.id, { onDelete: \"cascade\" }),\n  taskName: varchar(\"task_name\", { length: 100 }).notNull(),\n  description: text(\"description\"),\n  intervalKilometers: integer(\"interval_kilometers\"),\n  intervalDays: integer(\"interval_days\"),\n  lastCompletedKilometers: integer(\"last_completed_kilometers\").default(0),\n  lastCompletedDate: date(\"last_completed_date\"),\n  isActive: boolean(\"is_active\").default(true),\n  priority: varchar(\"priority\", { length: 20 }).default(\"medium\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n```\n\n#### Rides Table\n```typescript\nexport const rides = pgTable(\"rides\", {\n  id: serial(\"id\").primaryKey(),\n  userId: integer(\"user_id\").references(() => users.id, { onDelete: \"cascade\" }),\n  title: varchar(\"title\", { length: 200 }).notNull(),\n  description: text(\"description\"),\n  startLocation: varchar(\"start_location\", { length: 200 }),\n  endLocation: varchar(\"end_location\", { length: 200 }),\n  distanceKilometers: decimal(\"distance_kilometers\", { precision: 8, scale: 2 }),\n  duration: integer(\"duration\"), // minutes\n  rideDate: date(\"ride_date\").notNull(),\n  difficulty: varchar(\"difficulty\", { length: 20 }),\n  isPublic: boolean(\"is_public\").default(true),\n  maxParticipants: integer(\"max_participants\"),\n  currentParticipants: integer(\"current_participants\").default(1),\n  status: varchar(\"status\", { length: 20 }).default(\"planned\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n```\n\n### Relationships\n- Users ‚Üí Motorcycles (One-to-Many)\n- Motorcycles ‚Üí Maintenance Records (One-to-Many)\n- Motorcycles ‚Üí Maintenance Schedules (One-to-Many)\n- Users ‚Üí Rides (One-to-Many)\n- Users ‚Üí Rider Relationships (Many-to-Many)\n\n---\n\n## 6. Backend Implementation\n\n### Server Configuration (`server/config.ts`)\n```typescript\nimport { z } from 'zod';\n\nconst configSchema = z.object({\n  NODE_ENV: z.enum(['development', 'production', 'test']).default('development'),\n  PORT: z.coerce.number().default(3000),\n  DATABASE_URL: z.string().min(1),\n  SESSION_SECRET: z.string().min(32),\n  JWT_SECRET: z.string().min(32),\n  JWT_REFRESH_SECRET: z.string().min(32),\n});\n\nfunction validateConfig() {\n  try {\n    return configSchema.parse(process.env);\n  } catch (error) {\n    console.error('‚ùå Invalid configuration:', error);\n    process.exit(1);\n  }\n}\n\nexport const config = validateConfig();\n```\n\n### Database Connection (`server/database.ts`)\n```typescript\nimport { drizzle } from 'drizzle-orm/neon-http';\nimport { neon } from '@neondatabase/serverless';\nimport * as schema from '../shared/schema.js';\nimport { config } from './config.js';\n\nconst sql = neon(config.DATABASE_URL);\nexport const db = drizzle(sql, { schema });\n\nexport async function checkDatabaseHealth(): Promise<boolean> {\n  try {\n    await sql`SELECT 1`;\n    return true;\n  } catch (error) {\n    console.error('Database health check failed:', error);\n    return false;\n  }\n}\n```\n\n### Main Server (`server/index.ts`)\n```typescript\nimport express from 'express';\nimport cors from 'cors';\nimport { config } from './config.js';\nimport { securityHeaders, corsOptions } from './middleware/security.js';\nimport { registerRoutes } from './routes.js';\nimport { setupVite, serveStatic } from './vite.js';\n\nconst app = express();\n\n// Security middleware\napp.use(securityHeaders);\napp.use(cors(corsOptions));\n\n// Body parsing middleware\napp.use(express.json({ limit: '10mb' }));\napp.use(express.urlencoded({ extended: true, limit: '10mb' }));\n\n// Setup routes\nconst server = await registerRoutes(app);\n\n// Setup Vite in development or serve static files in production\nif (config.NODE_ENV === 'development') {\n  await setupVite(app, server);\n} else {\n  serveStatic(app);\n}\n\nconst PORT = config.PORT;\nserver.listen(PORT, '0.0.0.0', () => {\n  console.log(`üöÄ Server running on http://0.0.0.0:${PORT}`);\n});\n```\n\n### Authentication Service (`server/services/AuthService.ts`)\n```typescript\nimport bcrypt from 'bcryptjs';\nimport { BaseService } from './BaseService.js';\nimport { users, type User, type InsertUser } from '../../shared/schema.js';\nimport { eq } from 'drizzle-orm';\n\nexport class AuthService extends BaseService {\n  async register(userData: RegisterData): Promise<{ user: Omit<User, 'passwordHash'> }> {\n    return this.handleErrors('User registration', async () => {\n      const existingUser = await this.db\n        .select()\n        .from(users)\n        .where(eq(users.username, userData.username))\n        .limit(1);\n\n      if (existingUser.length > 0) {\n        throw new Error('Username already exists');\n      }\n\n      const passwordHash = await bcrypt.hash(userData.password, 12);\n      \n      const [newUser] = await this.db\n        .insert(users)\n        .values({\n          ...userData,\n          passwordHash,\n        })\n        .returning();\n\n      const { passwordHash: _, ...userWithoutPassword } = newUser;\n      return { user: userWithoutPassword };\n    });\n  }\n\n  async login(credentials: LoginData): Promise<{ user: Omit<User, 'passwordHash'> }> {\n    return this.handleErrors('User login', async () => {\n      const [user] = await this.db\n        .select()\n        .from(users)\n        .where(eq(users.username, credentials.username))\n        .limit(1);\n\n      if (!user) {\n        throw new Error('Invalid credentials');\n      }\n\n      const isValidPassword = await bcrypt.compare(credentials.password, user.passwordHash);\n      if (!isValidPassword) {\n        throw new Error('Invalid credentials');\n      }\n\n      const { passwordHash: _, ...userWithoutPassword } = user;\n      return { user: userWithoutPassword };\n    });\n  }\n}\n```\n\n---\n\n## 7. Frontend Implementation\n\n### Main App Component (`client/src/App.tsx`)\n```typescript\nimport { BrowserRouter as Router, Route, Switch } from 'wouter';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { Toaster } from '@/components/ui/toaster';\nimport { AuthProvider } from '@/hooks/useAuth';\n\n// Pages\nimport Home from '@/pages/Home';\nimport Login from '@/pages/Login';\nimport Register from '@/pages/Register';\nimport Garage from '@/pages/Garage';\nimport Maintenance from '@/pages/Maintenance';\nimport Community from '@/pages/Community';\nimport Shop from '@/pages/Shop';\n\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      staleTime: 5 * 60 * 1000, // 5 minutes\n      retry: 1,\n    },\n  },\n});\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <AuthProvider>\n        <Router>\n          <div className=\"min-h-screen bg-background\">\n            <Switch>\n              <Route path=\"/\" component={Home} />\n              <Route path=\"/login\" component={Login} />\n              <Route path=\"/register\" component={Register} />\n              <Route path=\"/garage\" component={Garage} />\n              <Route path=\"/maintenance\" component={Maintenance} />\n              <Route path=\"/community\" component={Community} />\n              <Route path=\"/shop\" component={Shop} />\n              <Route component={NotFound} />\n            </Switch>\n          </div>\n          <Toaster />\n        </Router>\n      </AuthProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n```\n\n### Authentication Hook (`client/src/hooks/useAuth.ts`)\n```typescript\nimport { createContext, useContext, useState, useEffect } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\n\ninterface User {\n  id: number;\n  username: string;\n  fullName: string;\n  email: string;\n  avatarUrl?: string;\n}\n\ninterface AuthContextType {\n  user: User | null;\n  login: (credentials: LoginData) => Promise<void>;\n  logout: () => Promise<void>;\n  register: (userData: RegisterData) => Promise<void>;\n  isLoading: boolean;\n}\n\nconst AuthContext = createContext<AuthContextType | null>(null);\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [user, setUser] = useState<User | null>(null);\n  const queryClient = useQueryClient();\n\n  // Check current session\n  const { data: sessionData, isLoading } = useQuery({\n    queryKey: ['/api/auth/session'],\n    retry: false,\n  });\n\n  useEffect(() => {\n    if (sessionData) {\n      setUser(sessionData);\n    }\n  }, [sessionData]);\n\n  const loginMutation = useMutation({\n    mutationFn: async (credentials: LoginData) => {\n      const response = await fetch('/api/auth/login', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(credentials),\n      });\n      \n      if (!response.ok) {\n        throw new Error('Login failed');\n      }\n      \n      return response.json();\n    },\n    onSuccess: (data) => {\n      setUser(data.user);\n      queryClient.invalidateQueries();\n    },\n  });\n\n  const logoutMutation = useMutation({\n    mutationFn: async () => {\n      await fetch('/api/auth/logout', { method: 'POST' });\n    },\n    onSuccess: () => {\n      setUser(null);\n      queryClient.clear();\n    },\n  });\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user,\n        login: loginMutation.mutateAsync,\n        logout: logoutMutation.mutateAsync,\n        isLoading,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within AuthProvider');\n  }\n  return context;\n}\n```\n\n### Garage Page (`client/src/pages/Garage.tsx`)\n```typescript\nimport { useState } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { Plus, Edit, Trash2 } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { useAuth } from '@/hooks/useAuth';\nimport { MotorcycleForm } from '@/components/forms/MotorcycleForm';\n\nexport default function Garage() {\n  const { user } = useAuth();\n  const [selectedMotorcycle, setSelectedMotorcycle] = useState(null);\n  const [isFormOpen, setIsFormOpen] = useState(false);\n  const queryClient = useQueryClient();\n\n  const { data: motorcycles, isLoading } = useQuery({\n    queryKey: ['/api/motorcycles'],\n    enabled: !!user,\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (id: number) => {\n      await fetch(`/api/motorcycles/${id}`, { method: 'DELETE' });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/motorcycles'] });\n    },\n  });\n\n  if (isLoading) {\n    return <div>Loading motorcycles...</div>;\n  }\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <div className=\"flex justify-between items-center mb-8\">\n        <h1 className=\"text-3xl font-bold\">My Garage</h1>\n        <Dialog open={isFormOpen} onOpenChange={setIsFormOpen}>\n          <DialogTrigger asChild>\n            <Button>\n              <Plus className=\"w-4 h-4 mr-2\" />\n              Add Motorcycle\n            </Button>\n          </DialogTrigger>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>Add New Motorcycle</DialogTitle>\n            </DialogHeader>\n            <MotorcycleForm\n              onSuccess={() => setIsFormOpen(false)}\n              motorcycle={selectedMotorcycle}\n            />\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {motorcycles?.map((motorcycle) => (\n          <Card key={motorcycle.id} className=\"relative\">\n            <CardHeader>\n              <CardTitle className=\"flex justify-between items-start\">\n                <span>{motorcycle.year} {motorcycle.make} {motorcycle.model}</span>\n                <div className=\"flex gap-2\">\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => {\n                      setSelectedMotorcycle(motorcycle);\n                      setIsFormOpen(true);\n                    }}\n                  >\n                    <Edit className=\"w-4 h-4\" />\n                  </Button>\n                  <Button\n                    variant=\"destructive\"\n                    size=\"sm\"\n                    onClick={() => deleteMutation.mutate(motorcycle.id)}\n                  >\n                    <Trash2 className=\"w-4 h-4\" />\n                  </Button>\n                </div>\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              {motorcycle.imageUrl && (\n                <img\n                  src={motorcycle.imageUrl}\n                  alt={`${motorcycle.make} ${motorcycle.model}`}\n                  className=\"w-full h-48 object-cover rounded-md mb-4\"\n                />\n              )}\n              <div className=\"space-y-2 text-sm\">\n                <p><strong>Color:</strong> {motorcycle.color}</p>\n                <p><strong>Engine:</strong> {motorcycle.engineSize}</p>\n                <p><strong>Kilometers:</strong> {motorcycle.currentKilometers?.toLocaleString()} km</p>\n                <p><strong>Status:</strong> {motorcycle.status}</p>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n    </div>\n  );\n}\n```\n\n---\n\n## 8. Authentication System\n\n### Session Configuration\n```typescript\n// server/routes.ts\napp.use(session({\n  secret: config.SESSION_SECRET,\n  resave: false,\n  saveUninitialized: false,\n  store: new MemoryStoreSession({\n    checkPeriod: 86400000 // 24 hours\n  }),\n  cookie: {\n    maxAge: 7 * 24 * 60 * 60 * 1000, // 1 week\n    secure: config.NODE_ENV === 'production',\n    httpOnly: true,\n    sameSite: 'lax'\n  }\n}));\n```\n\n### Passport Strategy\n```typescript\npassport.use(new LocalStrategy(async (username, password, done) => {\n  try {\n    const user = await storage.getUserByUsername(username);\n    \n    if (!user) {\n      return done(null, false, { message: \"Invalid credentials\" });\n    }\n    \n    const isValidPassword = await bcrypt.compare(password, user.passwordHash);\n    if (!isValidPassword) {\n      return done(null, false, { message: \"Invalid credentials\" });\n    }\n    \n    return done(null, user);\n  } catch (error) {\n    return done(error);\n  }\n}));\n```\n\n### Authentication Middleware\n```typescript\nconst isAuthenticated = (req: Request, res: Response, next: NextFunction) => {\n  if (req.isAuthenticated()) {\n    return next();\n  }\n  res.status(401).json({ error: \"Authentication required\" });\n};\n```\n\n---\n\n## 9. API Documentation\n\n### Authentication Endpoints\n\n#### POST /api/auth/register\nRegister a new user account.\n\n**Request Body:**\n```json\n{\n  \"username\": \"string\",\n  \"password\": \"string\",\n  \"fullName\": \"string\",\n  \"email\": \"string\"\n}\n```\n\n**Response (201):**\n```json\n{\n  \"user\": {\n    \"id\": 1,\n    \"username\": \"newuser\",\n    \"fullName\": \"New User\",\n    \"email\": \"user@example.com\",\n    \"avatarUrl\": null\n  }\n}\n```\n\n#### POST /api/auth/login\nAuthenticate user and create session.\n\n**Request Body:**\n```json\n{\n  \"username\": \"string\",\n  \"password\": \"string\"\n}\n```\n\n**Response (200):**\n```json\n{\n  \"user\": {\n    \"id\": 1,\n    \"username\": \"demo\",\n    \"fullName\": \"Demo User\",\n    \"email\": \"demo@throttlecove.com\"\n  }\n}\n```\n\n#### POST /api/auth/logout\nEnd user session.\n\n**Response (200):**\n```json\n{\n  \"message\": \"Logged out successfully\"\n}\n```\n\n#### GET /api/auth/session\nGet current user session information.\n\n**Response (200):**\n```json\n{\n  \"id\": 1,\n  \"username\": \"demo\",\n  \"fullName\": \"Demo User\",\n  \"email\": \"demo@throttlecove.com\"\n}\n```\n\n### Motorcycle Endpoints\n\n#### GET /api/motorcycles\nGet all motorcycles for authenticated user.\n\n**Response (200):**\n```json\n[\n  {\n    \"id\": 1,\n    \"userId\": 1,\n    \"make\": \"Honda\",\n    \"model\": \"CBR600RR\",\n    \"year\": 2022,\n    \"color\": \"Red\",\n    \"engineSize\": \"600cc\",\n    \"currentKilometers\": 5000,\n    \"status\": \"active\",\n    \"createdAt\": \"2025-01-15T10:00:00Z\"\n  }\n]\n```\n\n#### POST /api/motorcycles\nCreate a new motorcycle entry.\n\n**Request Body:**\n```json\n{\n  \"make\": \"string\",\n  \"model\": \"string\",\n  \"year\": \"number\",\n  \"color\": \"string\",\n  \"engineSize\": \"string\",\n  \"currentKilometers\": \"number\",\n  \"vin\": \"string\",\n  \"licensePlate\": \"string\"\n}\n```\n\n#### GET /api/motorcycles/:id\nGet specific motorcycle by ID.\n\n#### PUT /api/motorcycles/:id\nUpdate motorcycle information.\n\n#### DELETE /api/motorcycles/:id\nRemove motorcycle from garage.\n\n### Maintenance Endpoints\n\n#### GET /api/motorcycles/:id/maintenance\nGet maintenance records for specific motorcycle.\n\n#### POST /api/motorcycles/:id/maintenance\nCreate new maintenance record.\n\n**Request Body:**\n```json\n{\n  \"serviceType\": \"Oil Change\",\n  \"description\": \"Regular oil and filter change\",\n  \"cost\": \"75.00\",\n  \"serviceDate\": \"2025-01-15\",\n  \"kilometers\": 5000,\n  \"serviceProvider\": \"Local Shop\"\n}\n```\n\n### Ride Endpoints\n\n#### GET /api/rides\nGet all rides for authenticated user.\n\n#### POST /api/rides\nCreate new ride entry.\n\n**Request Body:**\n```json\n{\n  \"title\": \"Mountain Road Adventure\",\n  \"description\": \"Scenic ride through mountain passes\",\n  \"startLocation\": \"City Center\",\n  \"endLocation\": \"Mountain Peak\",\n  \"distanceKilometers\": \"120.5\",\n  \"rideDate\": \"2025-01-20\",\n  \"difficulty\": \"intermediate\"\n}\n```\n\n---\n\n## 10. Security Implementation\n\n### Password Security\n```typescript\n// Hash passwords with bcrypt (salt rounds: 10-12)\nconst passwordHash = await bcrypt.hash(password, 12);\n\n// Verify passwords\nconst isValid = await bcrypt.compare(password, storedHash);\n```\n\n### Rate Limiting\n```typescript\nexport const apiRateLimit = rateLimit({\n  windowMs: 15 * 60 * 1000, // 15 minutes\n  max: 100, // limit each IP to 100 requests per windowMs\n  message: 'Too many requests from this IP',\n  standardHeaders: true,\n  legacyHeaders: false,\n});\n\nexport const authRateLimit = rateLimit({\n  windowMs: 15 * 60 * 1000, // 15 minutes\n  max: 5, // limit each IP to 5 login attempts per windowMs\n  skipSuccessfulRequests: true,\n});\n```\n\n### Input Validation\n```typescript\n// Use Zod schemas for validation\nconst motorcycleSchema = z.object({\n  make: z.string().min(1).max(50),\n  model: z.string().min(1).max(100),\n  year: z.number().int().min(1900).max(new Date().getFullYear() + 1),\n  currentKilometers: z.number().int().min(0).optional(),\n});\n\n// Validate in route handlers\napp.post('/api/motorcycles', async (req, res) => {\n  try {\n    const validatedData = motorcycleSchema.parse(req.body);\n    // Process validated data...\n  } catch (error) {\n    return res.status(400).json({ error: 'Invalid input data' });\n  }\n});\n```\n\n### Security Headers\n```typescript\napp.use(helmet({\n  contentSecurityPolicy: config.NODE_ENV === 'production' ? {\n    directives: {\n      defaultSrc: [\"'self'\"],\n      styleSrc: [\"'self'\", \"'unsafe-inline'\", \"https:\"],\n      scriptSrc: [\"'self'\"],\n      imgSrc: [\"'self'\", \"data:\", \"https:\"],\n      connectSrc: [\"'self'\", \"https:\"],\n    },\n  } : false,\n  hsts: config.NODE_ENV === 'production',\n}));\n```\n\n---\n\n## 11. File Structure\n\n```\nthrottlecove/\n‚îú‚îÄ‚îÄ client/                          # Frontend application\n‚îÇ   ‚îú‚îÄ‚îÄ src/\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/              # Reusable UI components\n‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui/                  # Base UI components (shadcn)\n‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ button.tsx\n‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ card.tsx\n‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dialog.tsx\n‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ form.tsx\n‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ input.tsx\n‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...\n‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ forms/               # Form components\n‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MotorcycleForm.tsx\n‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MaintenanceForm.tsx\n‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ RideForm.tsx\n‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ layout/              # Layout components\n‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ Header.tsx\n‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ Navigation.tsx\n‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ Footer.tsx\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/                   # Page components\n‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Home.tsx\n‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Login.tsx\n‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Register.tsx\n‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Garage.tsx\n‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Maintenance.tsx\n‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Community.tsx\n‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Shop.tsx\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/                   # Custom React hooks\n‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useAuth.ts\n‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useMotorcycles.ts\n‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ useMaintenance.ts\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ lib/                     # Utility libraries\n‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils.ts\n‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ queryClient.ts\n‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ constants.ts\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ assets/                  # Static assets\n‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ images/\n‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ icons/\n‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logos/\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ App.tsx                  # Main app component\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.tsx                 # App entry point\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.css                # Global styles\n‚îÇ   ‚îî‚îÄ‚îÄ index.html                   # HTML template\n‚îú‚îÄ‚îÄ server/                          # Backend application\n‚îÇ   ‚îú‚îÄ‚îÄ middleware/                  # Express middleware\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ security.ts              # Security headers, rate limiting\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.ts                  # Authentication middleware\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validation.ts            # Input validation\n‚îÇ   ‚îú‚îÄ‚îÄ services/                    # Business logic services\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AuthService.ts           # Authentication service\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ VehicleService.ts        # Vehicle management service\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MaintenanceService.ts    # Maintenance service\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ BaseService.ts           # Base service class\n‚îÇ   ‚îú‚îÄ‚îÄ utils/                       # Server utilities\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logger.ts                # Winston logging setup\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ validation.ts            # Zod validation schemas\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ crypto.ts                # Cryptographic utilities\n‚îÇ   ‚îú‚îÄ‚îÄ config.ts                    # Environment configuration\n‚îÇ   ‚îú‚îÄ‚îÄ database.ts                  # Database connection\n‚îÇ   ‚îú‚îÄ‚îÄ storage.ts                   # Storage interface & implementation\n‚îÇ   ‚îú‚îÄ‚îÄ routes.ts                    # API route definitions\n‚îÇ   ‚îú‚îÄ‚îÄ index.ts                     # Server entry point\n‚îÇ   ‚îî‚îÄ‚îÄ vite.ts                      # Vite development integration\n‚îú‚îÄ‚îÄ shared/                          # Shared code between client/server\n‚îÇ   ‚îî‚îÄ‚îÄ schema.ts                    # Database schema & types\n‚îú‚îÄ‚îÄ .env                             # Environment variables\n‚îú‚îÄ‚îÄ .gitignore                       # Git ignore rules\n‚îú‚îÄ‚îÄ drizzle.config.ts                # Drizzle ORM configuration\n‚îú‚îÄ‚îÄ package.json                     # Project dependencies\n‚îú‚îÄ‚îÄ tsconfig.json                    # TypeScript configuration\n‚îú‚îÄ‚îÄ tailwind.config.ts               # Tailwind CSS configuration\n‚îú‚îÄ‚îÄ vite.config.ts                   # Vite build configuration\n‚îú‚îÄ‚îÄ postcss.config.js                # PostCSS configuration\n‚îî‚îÄ‚îÄ README.md                        # Project documentation\n```\n\n---\n\n## 12. Configuration Files\n\n### Vite Configuration (`vite.config.ts`)\n```typescript\nimport { defineConfig } from 'vite';\nimport react from '@vitejs/plugin-react';\nimport path from 'path';\n\nexport default defineConfig({\n  plugins: [react()],\n  resolve: {\n    alias: {\n      '@': path.resolve(__dirname, './client/src'),\n      '@assets': path.resolve(__dirname, './attached_assets'),\n    },\n  },\n  server: {\n    host: '0.0.0.0',\n    port: 5173,\n  },\n  build: {\n    outDir: 'dist/public',\n    sourcemap: true,\n  },\n});\n```\n\n### Tailwind Configuration (`tailwind.config.ts`)\n```typescript\nimport type { Config } from 'tailwindcss';\n\nconst config: Config = {\n  darkMode: ['class'],\n  content: [\n    './client/**/*.{ts,tsx}',\n    './client/src/**/*.{ts,tsx}',\n  ],\n  theme: {\n    extend: {\n      colors: {\n        border: 'hsl(var(--border))',\n        input: 'hsl(var(--input))',\n        ring: 'hsl(var(--ring))',\n        background: 'hsl(var(--background))',\n        foreground: 'hsl(var(--foreground))',\n        primary: {\n          DEFAULT: 'hsl(var(--primary))',\n          foreground: 'hsl(var(--primary-foreground))',\n        },\n        secondary: {\n          DEFAULT: 'hsl(var(--secondary))',\n          foreground: 'hsl(var(--secondary-foreground))',\n        },\n        destructive: {\n          DEFAULT: 'hsl(var(--destructive))',\n          foreground: 'hsl(var(--destructive-foreground))',\n        },\n        muted: {\n          DEFAULT: 'hsl(var(--muted))',\n          foreground: 'hsl(var(--muted-foreground))',\n        },\n        accent: {\n          DEFAULT: 'hsl(var(--accent))',\n          foreground: 'hsl(var(--accent-foreground))',\n        },\n        popover: {\n          DEFAULT: 'hsl(var(--popover))',\n          foreground: 'hsl(var(--popover-foreground))',\n        },\n        card: {\n          DEFAULT: 'hsl(var(--card))',\n          foreground: 'hsl(var(--card-foreground))',\n        },\n      },\n      borderRadius: {\n        lg: 'var(--radius)',\n        md: 'calc(var(--radius) - 2px)',\n        sm: 'calc(var(--radius) - 4px)',\n      },\n    },\n  },\n  plugins: [require('tailwindcss-animate')],\n};\n\nexport default config;\n```\n\n### TypeScript Configuration (`tsconfig.json`)\n```json\n{\n  \"compilerOptions\": {\n    \"target\": \"ES2022\",\n    \"lib\": [\"ES2022\", \"DOM\", \"DOM.Iterable\"],\n    \"module\": \"ESNext\",\n    \"skipLibCheck\": true,\n    \"moduleResolution\": \"bundler\",\n    \"allowImportingTsExtensions\": true,\n    \"resolveJsonModule\": true,\n    \"isolatedModules\": true,\n    \"noEmit\": true,\n    \"jsx\": \"react-jsx\",\n    \"strict\": true,\n    \"noUnusedLocals\": true,\n    \"noUnusedParameters\": true,\n    \"noFallthroughCasesInSwitch\": true,\n    \"baseUrl\": \".\",\n    \"paths\": {\n      \"@/*\": [\"./client/src/*\"],\n      \"@assets/*\": [\"./attached_assets/*\"]\n    }\n  },\n  \"include\": [\n    \"client/src\",\n    \"server\",\n    \"shared\",\n    \"*.ts\",\n    \"*.tsx\"\n  ],\n  \"exclude\": [\"node_modules\", \"dist\"]\n}\n```\n\n### Drizzle Configuration (`drizzle.config.ts`)\n```typescript\nimport type { Config } from 'drizzle-kit';\n\nexport default {\n  schema: './shared/schema.ts',\n  out: './drizzle',\n  driver: 'pg',\n  dbCredentials: {\n    connectionString: process.env.DATABASE_URL!,\n  },\n  verbose: true,\n  strict: true,\n} satisfies Config;\n```\n\n---\n\n## 13. Deployment Guide\n\n### Production Environment Setup\n\n1. **Database Setup**\n   - Create PostgreSQL database (Neon, Supabase, or self-hosted)\n   - Run migrations: `npm run db:push`\n   - Set up database indexes for performance\n\n2. **Environment Variables**\n```env\nNODE_ENV=production\nDATABASE_URL=postgresql://user:password@host:port/database\nSESSION_SECRET=production-session-secret-minimum-32-characters\nJWT_SECRET=production-jwt-secret-minimum-32-characters\nJWT_REFRESH_SECRET=production-refresh-secret-minimum-32-characters\nPORT=3000\n```\n\n3. **Build Process**\n```bash\n# Install dependencies\nnpm ci --only=production\n\n# Build frontend\nnpm run build\n\n# Start production server\nnpm start\n```\n\n4. **Docker Deployment** (Optional)\n```dockerfile\nFROM node:18-alpine\n\nWORKDIR /app\n\nCOPY package*.json ./\nRUN npm ci --only=production\n\nCOPY . .\nRUN npm run build\n\nEXPOSE 3000\n\nCMD [\"npm\", \"start\"]\n```\n\n5. **Reverse Proxy Setup** (Nginx)\n```nginx\nserver {\n    listen 80;\n    server_name your-domain.com;\n\n    location / {\n        proxy_pass http://localhost:3000;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection 'upgrade';\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_cache_bypass $http_upgrade;\n    }\n}\n```\n\n### Platform-Specific Deployment\n\n#### Replit Deployment\n1. Set environment variables in Replit Secrets\n2. Configure `.replit` file:\n```toml\nrun = \"npm run dev\"\nentrypoint = \"server/index.ts\"\n\n[nix]\nchannel = \"stable-22_11\"\n\n[deployment]\nrun = [\"sh\", \"-c\", \"npm run build && npm start\"]\n```\n\n#### Vercel Deployment\n1. Configure `vercel.json`:\n```json\n{\n  \"version\": 2,\n  \"builds\": [\n    {\n      \"src\": \"server/index.ts\",\n      \"use\": \"@vercel/node\"\n    },\n    {\n      \"src\": \"client/**/*\",\n      \"use\": \"@vercel/static\"\n    }\n  ],\n  \"routes\": [\n    {\n      \"src\": \"/api/(.*)\",\n      \"dest\": \"/server/index.ts\"\n    },\n    {\n      \"src\": \"/(.*)\",\n      \"dest\": \"/client/$1\"\n    }\n  ]\n}\n```\n\n#### Railway Deployment\n1. Connect GitHub repository\n2. Set environment variables\n3. Configure build command: `npm run build`\n4. Configure start command: `npm start`\n\n---\n\n## 14. Testing & Development\n\n### Development Workflow\n\n1. **Start Development Server**\n```bash\nnpm run dev\n```\n\n2. **Database Development**\n```bash\n# Push schema changes\nnpm run db:push\n\n# Open database studio\nnpm run db:studio\n```\n\n3. **Code Quality**\n```bash\n# Run linting\nnpm run lint\n\n# Format code\nnpm run format\n\n# Type checking\nnpm run type-check\n```\n\n### Testing Strategy\n\n#### Unit Testing Setup\n```bash\nnpm install -D vitest @testing-library/react @testing-library/jest-dom\n```\n\n#### Test Configuration (`vitest.config.ts`)\n```typescript\nimport { defineConfig } from 'vitest/config';\nimport react from '@vitejs/plugin-react';\n\nexport default defineConfig({\n  plugins: [react()],\n  test: {\n    environment: 'jsdom',\n    setupFiles: ['./test/setup.ts'],\n  },\n});\n```\n\n#### Sample Component Test\n```typescript\nimport { render, screen } from '@testing-library/react';\nimport { describe, it, expect } from 'vitest';\nimport { Button } from '@/components/ui/button';\n\ndescribe('Button Component', () => {\n  it('renders correctly', () => {\n    render(<Button>Click me</Button>);\n    expect(screen.getByRole('button')).toHaveTextContent('Click me');\n  });\n});\n```\n\n#### API Testing\n```typescript\nimport { describe, it, expect, beforeEach } from 'vitest';\nimport request from 'supertest';\nimport { app } from '../server/index';\n\ndescribe('Authentication API', () => {\n  it('should register a new user', async () => {\n    const response = await request(app)\n      .post('/api/auth/register')\n      .send({\n        username: 'testuser',\n        password: 'password123',\n        fullName: 'Test User',\n        email: 'test@example.com'\n      });\n\n    expect(response.status).toBe(201);\n    expect(response.body.user).toHaveProperty('id');\n  });\n});\n```\n\n### Performance Monitoring\n\n#### Frontend Performance\n- Use React DevTools Profiler\n- Monitor bundle size with `npm run build -- --analyze`\n- Implement lazy loading for routes\n- Optimize images and assets\n\n#### Backend Performance\n- Monitor API response times\n- Use database query analysis\n- Implement caching strategies\n- Monitor memory usage\n\n---\n\n## 15. Troubleshooting\n\n### Common Issues and Solutions\n\n#### Database Connection Issues\n**Problem**: \"Connection failed\" or timeout errors\n\n**Solutions**:\n1. Verify DATABASE_URL format: `postgresql://user:password@host:port/database`\n2. Check network connectivity to database\n3. Verify SSL settings for cloud databases\n4. Use connection pooling for production\n\n#### Authentication Problems\n**Problem**: Login fails or sessions not persisting\n\n**Solutions**:\n1. Check SESSION_SECRET is set and consistent\n2. Verify cookie settings (secure flag in production)\n3. Clear browser cookies and session storage\n4. Check bcrypt hash comparison\n\n#### Build Errors\n**Problem**: TypeScript or build failures\n\n**Solutions**:\n1. Clear node_modules and reinstall: `rm -rf node_modules && npm install`\n2. Check TypeScript configuration paths\n3. Verify all dependencies are compatible\n4. Update outdated packages\n\n#### Performance Issues\n**Problem**: Slow page loads or API responses\n\n**Solutions**:\n1. Implement database indexes on frequently queried columns\n2. Add API response caching\n3. Optimize bundle size with code splitting\n4. Use CDN for static assets\n\n#### CORS Errors\n**Problem**: Frontend can't connect to backend\n\n**Solutions**:\n1. Configure CORS middleware properly\n2. Set correct origin URLs\n3. Check for trailing slashes in URLs\n4. Verify request headers and methods\n\n### Development Tips\n\n1. **Hot Reload Issues**: Restart dev server if changes don't reflect\n2. **Database Schema Changes**: Always run `npm run db:push` after schema updates\n3. **Environment Variables**: Restart server after changing .env file\n4. **TypeScript Errors**: Check import paths and type definitions\n5. **UI Components**: Use Storybook for component development\n\n### Debugging Tools\n\n1. **Backend Debugging**:\n   - Use Winston logger for structured logging\n   - Enable Express request logging\n   - Use debugger or console.log strategically\n\n2. **Frontend Debugging**:\n   - React Developer Tools\n   - Browser Network tab for API calls\n   - TanStack Query DevTools\n\n3. **Database Debugging**:\n   - Drizzle Studio for database inspection\n   - PostgreSQL logs for query analysis\n   - Enable query logging in development\n\n---\n\n## Conclusion\n\nThis documentation provides a comprehensive guide to recreate the ThrottleCove motorcycle enthusiast platform. The application follows modern web development best practices with a focus on:\n\n- **Security**: Proper authentication, input validation, and secure headers\n- **Performance**: Optimized queries, caching, and code splitting\n- **Maintainability**: Clean architecture, TypeScript, and modular code\n- **User Experience**: Responsive design, intuitive UI, and metric system\n- **Scalability**: Microservices-ready architecture with proper separation of concerns\n\nFollow this documentation step-by-step to build a production-ready motorcycle management platform that serves the global riding community with all measurements in kilometers.\n\nFor support or questions about implementation, refer to the individual component documentation and API specifications provided in each section.","size_bytes":42073},"server/config.ts":{"content":"import { z } from 'zod';\n\n// Environment configuration schema\nconst configSchema = z.object({\n  NODE_ENV: z.enum(['development', 'production', 'test']).default('development'),\n  PORT: z.string().transform(Number).default('5000'),\n  \n  // Database\n  DATABASE_URL: z.string().default(process.env.DATABASE_URL || 'postgresql://user:password@localhost:5432/db'),\n  \n  // JWT Secrets\n  JWT_SECRET: z.string().min(32),\n  JWT_REFRESH_SECRET: z.string().min(32),\n  JWT_EXPIRES_IN: z.string().default('15m'),\n  JWT_REFRESH_EXPIRES_IN: z.string().default('7d'),\n  \n  // Session\n  SESSION_SECRET: z.string().min(32),\n  \n  // Redis (optional for development)\n  REDIS_URL: z.string().optional(),\n  \n  // File Storage\n  AWS_REGION: z.string().optional(),\n  AWS_ACCESS_KEY_ID: z.string().optional(),\n  AWS_SECRET_ACCESS_KEY: z.string().optional(),\n  S3_BUCKET: z.string().optional(),\n  \n  // Email (optional)\n  SMTP_HOST: z.string().optional(),\n  SMTP_PORT: z.string().transform(Number).optional(),\n  SMTP_USER: z.string().optional(),\n  SMTP_PASS: z.string().optional(),\n  \n  // Rate Limiting\n  RATE_LIMIT_WINDOW_MS: z.string().transform(Number).default('900000'), // 15 minutes\n  RATE_LIMIT_MAX_REQUESTS: z.string().transform(Number).default('100'),\n  \n  // Security\n  BCRYPT_ROUNDS: z.string().transform(Number).default('12'),\n  MAX_LOGIN_ATTEMPTS: z.string().transform(Number).default('5'),\n  ACCOUNT_LOCK_TIME: z.string().transform(Number).default('1800000'), // 30 minutes\n});\n\nfunction validateConfig() {\n  try {\n    return configSchema.parse(process.env);\n  } catch (error) {\n    console.error('Invalid environment configuration:', error);\n    process.exit(1);\n  }\n}\n\nexport const config = validateConfig();\n\n// Database configuration\nexport const dbConfig = {\n  connectionString: config.DATABASE_URL,\n  ssl: config.NODE_ENV === 'production',\n};\n\n// JWT configuration\nexport const jwtConfig = {\n  secret: config.JWT_SECRET,\n  refreshSecret: config.JWT_REFRESH_SECRET,\n  expiresIn: config.JWT_EXPIRES_IN,\n  refreshExpiresIn: config.JWT_REFRESH_EXPIRES_IN,\n};\n\n// Rate limiting configuration\nexport const rateLimitConfig = {\n  windowMs: config.RATE_LIMIT_WINDOW_MS,\n  max: config.RATE_LIMIT_MAX_REQUESTS,\n  message: {\n    error: 'Too many requests',\n    message: 'Rate limit exceeded. Please try again later.',\n  },\n  standardHeaders: true,\n  legacyHeaders: false,\n};\n\n// Security configuration\nexport const securityConfig = {\n  bcryptRounds: config.BCRYPT_ROUNDS,\n  maxLoginAttempts: config.MAX_LOGIN_ATTEMPTS,\n  accountLockTime: config.ACCOUNT_LOCK_TIME,\n};","size_bytes":2549},"server/database.ts":{"content":"import { drizzle } from 'drizzle-orm/postgres-js';\nimport postgres from 'postgres';\nimport * as schema from '../shared/schema.js';\nimport { config } from './config.js';\nimport { logger } from './utils/logger.js';\n\n// Create the database connection\nconst sql = postgres(config.DATABASE_URL, { \n  ssl: config.NODE_ENV === 'production' ? 'require' : false,\n  max: 10,\n  idle_timeout: 20,\n  connect_timeout: 60,\n});\nexport const db = drizzle(sql, { schema });\n\n// Health check function\nexport async function checkDatabaseHealth(): Promise<boolean> {\n  try {\n    await sql`SELECT 1`;\n    logger.info('Database health check passed');\n    return true;\n  } catch (error) {\n    logger.error('Database health check failed:', error);\n    return false;\n  }\n}\n\n// Connection pool stats (for monitoring)\nexport function getDatabaseStats() {\n  return {\n    connectionString: config.DATABASE_URL.replace(/:[^:@]*@/, ':***@'), // Hide password\n    ssl: config.NODE_ENV === 'production',\n    schema: Object.keys(schema).length,\n  };\n}\n\n// Database initialization\nexport async function initializeDatabase() {\n  try {\n    logger.info('Initializing database connection...');\n    \n    // Test the connection\n    const isHealthy = await checkDatabaseHealth();\n    if (!isHealthy) {\n      throw new Error('Database connection failed');\n    }\n    \n    logger.info('Database initialized successfully');\n    return db;\n  } catch (error) {\n    logger.error('Failed to initialize database:', error);\n    throw error;\n  }\n}\n\nexport type Database = typeof db;","size_bytes":1528},"server/middleware/security.ts":{"content":"import helmet from 'helmet';\nimport rateLimit from 'express-rate-limit';\nimport slowDown from 'express-slow-down';\nimport { Request, Response, NextFunction } from 'express';\nimport { rateLimitConfig, config } from '../config.js';\nimport { logger, securityLogger } from '../utils/logger.js';\n\n// Security headers middleware\nexport const securityHeaders = helmet({\n  contentSecurityPolicy: false, // Disable CSP for development to allow Vite HMR\n  hsts: config.NODE_ENV === 'production' ? {\n    maxAge: 31536000, // 1 year\n    includeSubDomains: true,\n    preload: true,\n  } : false,\n  crossOriginEmbedderPolicy: false,\n  crossOriginResourcePolicy: { policy: \"cross-origin\" },\n});\n\n// Rate limiting for API endpoints\nexport const apiRateLimit = rateLimit({\n  windowMs: rateLimitConfig.windowMs,\n  max: rateLimitConfig.max,\n  message: rateLimitConfig.message,\n  standardHeaders: rateLimitConfig.standardHeaders,\n  legacyHeaders: rateLimitConfig.legacyHeaders,\n  handler: (req: Request, res: Response) => {\n    securityLogger.warn('Rate limit exceeded', {\n      ip: req.ip,\n      userAgent: req.get('User-Agent'),\n      path: req.path,\n      method: req.method,\n    });\n\n    res.status(429).json(rateLimitConfig.message);\n  },\n});\n\n// Strict rate limiting for authentication endpoints\nexport const authRateLimit = rateLimit({\n  windowMs: 15 * 60 * 1000, // 15 minutes\n  max: 5, // 5 attempts per window\n  skipSuccessfulRequests: true,\n  message: {\n    error: 'Too many authentication attempts',\n    message: 'Please try again later',\n  },\n  handler: (req: Request, res: Response) => {\n    securityLogger.warn('Auth rate limit exceeded', {\n      ip: req.ip,\n      userAgent: req.get('User-Agent'),\n      path: req.path,\n    });\n\n    res.status(429).json({\n      error: 'Too many authentication attempts',\n      message: 'Please try again later',\n    });\n  },\n});\n\n// Progressive delay for repeated requests\nexport const speedLimiter = slowDown({\n  windowMs: 15 * 60 * 1000, // 15 minutes\n  delayAfter: 5, // Allow 5 requests per window without delay\n  delayMs: () => 500, // Add 500ms delay per request after delayAfter\n  maxDelayMs: 20000, // Maximum delay of 20 seconds\n  validate: { delayMs: false }, // Disable the warning\n});\n\n// Request size limiting\nexport const requestSizeLimit = (maxSize: number) => {\n  return (req: Request, res: Response, next: NextFunction) => {\n    const contentLength = parseInt(req.get('Content-Length') || '0', 10);\n    \n    if (contentLength > maxSize) {\n      securityLogger.warn('Request size limit exceeded', {\n        ip: req.ip,\n        contentLength,\n        maxSize,\n        path: req.path,\n      });\n\n      return res.status(413).json({\n        error: 'Payload too large',\n        message: `Maximum request size: ${maxSize / 1024 / 1024}MB`,\n      });\n    }\n\n    next();\n  };\n};\n\n// IP whitelist/blacklist middleware\nexport const ipFilter = (whitelist?: string[], blacklist?: string[]) => {\n  return (req: Request, res: Response, next: NextFunction) => {\n    const clientIp = req.ip;\n\n    // Check blacklist first\n    if (blacklist && blacklist.includes(clientIp)) {\n      securityLogger.warn('Blocked IP attempt', {\n        ip: clientIp,\n        path: req.path,\n        userAgent: req.get('User-Agent'),\n      });\n\n      return res.status(403).json({\n        error: 'Access denied',\n        message: 'Your IP address is blocked',\n      });\n    }\n\n    // Check whitelist if provided\n    if (whitelist && whitelist.length > 0 && !whitelist.includes(clientIp)) {\n      securityLogger.warn('Non-whitelisted IP attempt', {\n        ip: clientIp,\n        path: req.path,\n      });\n\n      return res.status(403).json({\n        error: 'Access denied',\n        message: 'Your IP address is not whitelisted',\n      });\n    }\n\n    next();\n  };\n};\n\n// Security event logging middleware\nexport const securityEventLogger = (req: Request, res: Response, next: NextFunction) => {\n  // Log security-sensitive endpoints\n  const securityEndpoints = ['/auth/', '/admin/', '/api/users/'];\n  const isSecurityEndpoint = securityEndpoints.some(endpoint => \n    req.path.startsWith(endpoint)\n  );\n\n  if (isSecurityEndpoint) {\n    securityLogger.info('Security endpoint accessed', {\n      ip: req.ip,\n      userAgent: req.get('User-Agent'),\n      path: req.path,\n      method: req.method,\n      timestamp: new Date().toISOString(),\n    });\n  }\n\n  next();\n};\n\n// CORS configuration for production\nexport const corsOptions = {\n  origin: (origin: string | undefined, callback: (err: Error | null, allow?: boolean) => void) => {\n    // In development, allow all origins\n    if (config.NODE_ENV === 'development') {\n      return callback(null, true);\n    }\n\n    // In production, check against allowed origins\n    const allowedOrigins = [\n      'https://throttlecove.com',\n      'https://www.throttlecove.com',\n      'https://app.throttlecove.com',\n    ];\n\n    if (!origin || allowedOrigins.includes(origin)) {\n      callback(null, true);\n    } else {\n      securityLogger.warn('CORS violation', { origin, ip: 'unknown' });\n      callback(new Error('Not allowed by CORS'));\n    }\n  },\n  credentials: true,\n  optionsSuccessStatus: 200,\n};\n\n// Request timeout middleware\nexport const requestTimeout = (timeout: number = 30000) => {\n  return (req: Request, res: Response, next: NextFunction) => {\n    const timer = setTimeout(() => {\n      if (!res.headersSent) {\n        logger.warn('Request timeout', {\n          path: req.path,\n          method: req.method,\n          ip: req.ip,\n          timeout,\n        });\n\n        res.status(408).json({\n          error: 'Request timeout',\n          message: 'Request took too long to process',\n        });\n      }\n    }, timeout);\n\n    res.on('finish', () => {\n      clearTimeout(timer);\n    });\n\n    next();\n  };\n};","size_bytes":5763},"server/services/AuthService.ts":{"content":"import { eq, and } from 'drizzle-orm';\nimport { Request } from 'express';\nimport { BaseService } from './BaseService.js';\nimport { users } from '../../shared/schema.js';\nimport type { LoginData, RegisterData, User } from '../../shared/schema.js';\nimport {\n  hashPassword,\n  verifyPassword,\n  generateTokens,\n  checkAccountLock,\n  handleFailedLogin,\n  handleSuccessfulLogin,\n  logout,\n  TokenPair,\n} from '../utils/auth.js';\nimport { logger, securityLogger } from '../utils/logger.js';\n\nexport class AuthService extends BaseService {\n  // Register a new user\n  async register(userData: RegisterData): Promise<{ user: Omit<User, 'passwordHash'>; tokens: TokenPair }> {\n    return this.handleErrors('User registration', async () => {\n      // Check if user already exists\n      const existingUser = await this.db\n        .select()\n        .from(users)\n        .where(\n          and(\n            eq(users.username, userData.username),\n            eq(users.email, userData.email)\n          )\n        )\n        .limit(1);\n\n      if (existingUser.length > 0) {\n        if (existingUser[0].username === userData.username) {\n          throw new Error('Username already exists');\n        }\n        if (existingUser[0].email === userData.email) {\n          throw new Error('Email already exists');\n        }\n      }\n\n      // Hash password\n      const passwordHash = await hashPassword(userData.password);\n\n      // Create user\n      const newUser = await this.db\n        .insert(users)\n        .values({\n          username: userData.username,\n          email: userData.email,\n          passwordHash,\n          fullName: userData.fullName,\n          emailVerified: false,\n          role: 'user',\n        })\n        .returning();\n\n      if (!newUser.length) {\n        throw new Error('Failed to create user');\n      }\n\n      const user = newUser[0];\n\n      securityLogger.info('User registered', {\n        userId: user.id,\n        username: user.username,\n        email: user.email,\n      });\n\n      // Generate tokens (we'll need to pass a mock request for this)\n      const mockReq = { ip: '127.0.0.1', get: () => 'Registration' } as Request;\n      const tokens = await generateTokens(user, mockReq);\n\n      // Remove password hash from response\n      const { passwordHash: _, ...userWithoutPassword } = user;\n\n      return {\n        user: userWithoutPassword,\n        tokens,\n      };\n    });\n  }\n\n  // Login user\n  async login(loginData: LoginData, req: Request): Promise<{ user: Omit<User, 'passwordHash'>; tokens: TokenPair }> {\n    return this.handleErrors('User login', async () => {\n      // Find user by username or email\n      const user = await this.db\n        .select()\n        .from(users)\n        .where(eq(users.username, loginData.username))\n        .limit(1);\n\n      if (!user.length) {\n        // Check by email as well\n        const userByEmail = await this.db\n          .select()\n          .from(users)\n          .where(eq(users.email, loginData.username))\n          .limit(1);\n\n        if (!userByEmail.length) {\n          securityLogger.warn('Login attempt with invalid username/email', {\n            username: loginData.username,\n            ip: req.ip,\n            userAgent: req.get('User-Agent'),\n          });\n          throw new Error('Invalid credentials');\n        }\n\n        return this.authenticateUser(userByEmail[0], loginData.password, req);\n      }\n\n      return this.authenticateUser(user[0], loginData.password, req);\n    });\n  }\n\n  // Authenticate user with password\n  private async authenticateUser(\n    user: User,\n    password: string,\n    req: Request\n  ): Promise<{ user: Omit<User, 'passwordHash'>; tokens: TokenPair }> {\n    // Check if account is locked\n    const isLocked = await checkAccountLock(user.id);\n    if (isLocked) {\n      securityLogger.warn('Login attempt on locked account', {\n        userId: user.id,\n        username: user.username,\n        ip: req.ip,\n      });\n      throw new Error('Account is temporarily locked due to too many failed login attempts');\n    }\n\n    // Verify password\n    const isValidPassword = await verifyPassword(password, user.passwordHash);\n\n    if (!isValidPassword) {\n      await handleFailedLogin(user.id);\n      \n      securityLogger.warn('Failed login attempt', {\n        userId: user.id,\n        username: user.username,\n        ip: req.ip,\n        userAgent: req.get('User-Agent'),\n      });\n\n      throw new Error('Invalid credentials');\n    }\n\n    // Successful login\n    await handleSuccessfulLogin(user.id);\n\n    securityLogger.info('Successful login', {\n      userId: user.id,\n      username: user.username,\n      ip: req.ip,\n      userAgent: req.get('User-Agent'),\n    });\n\n    // Generate tokens\n    const tokens = await generateTokens(user, req);\n\n    // Remove password hash from response\n    const { passwordHash: _, ...userWithoutPassword } = user;\n\n    return {\n      user: userWithoutPassword,\n      tokens,\n    };\n  }\n\n  // Logout user\n  async logout(sessionId: string): Promise<void> {\n    return this.handleErrors('User logout', async () => {\n      await logout(sessionId);\n      \n      logger.info('User logged out', { sessionId });\n    });\n  }\n\n  // Get user by ID\n  async getUserById(userId: number): Promise<Omit<User, 'passwordHash'> | null> {\n    return this.handleErrors('Get user by ID', async () => {\n      const user = await this.db\n        .select()\n        .from(users)\n        .where(eq(users.id, userId))\n        .limit(1);\n\n      if (!user.length) {\n        return null;\n      }\n\n      // Remove password hash from response\n      const { passwordHash: _, ...userWithoutPassword } = user[0];\n      return userWithoutPassword;\n    });\n  }\n\n  // Update user profile\n  async updateProfile(\n    userId: number,\n    updateData: Partial<Pick<User, 'fullName' | 'email' | 'phone' | 'avatarUrl'>>\n  ): Promise<Omit<User, 'passwordHash'>> {\n    return this.handleErrors('Update user profile', async () => {\n      // If email is being updated, check if it's already taken\n      if (updateData.email) {\n        const existingUser = await this.db\n          .select()\n          .from(users)\n          .where(\n            and(\n              eq(users.email, updateData.email),\n              // Make sure it's not the same user\n              eq(users.id, userId)\n            )\n          )\n          .limit(1);\n\n        if (existingUser.length > 0 && existingUser[0].id !== userId) {\n          throw new Error('Email already exists');\n        }\n      }\n\n      const updatedUser = await this.db\n        .update(users)\n        .set({\n          ...updateData,\n          updatedAt: new Date(),\n        })\n        .where(eq(users.id, userId))\n        .returning();\n\n      if (!updatedUser.length) {\n        throw new Error('User not found');\n      }\n\n      logger.info('User profile updated', {\n        userId,\n        updatedFields: Object.keys(updateData),\n      });\n\n      // Remove password hash from response\n      const { passwordHash: _, ...userWithoutPassword } = updatedUser[0];\n      return userWithoutPassword;\n    });\n  }\n\n  // Change password\n  async changePassword(\n    userId: number,\n    currentPassword: string,\n    newPassword: string\n  ): Promise<void> {\n    return this.handleErrors('Change password', async () => {\n      // Get current user\n      const user = await this.db\n        .select()\n        .from(users)\n        .where(eq(users.id, userId))\n        .limit(1);\n\n      if (!user.length) {\n        throw new Error('User not found');\n      }\n\n      // Verify current password\n      const isValidPassword = await verifyPassword(currentPassword, user[0].passwordHash);\n      if (!isValidPassword) {\n        securityLogger.warn('Invalid current password in change password attempt', {\n          userId,\n          username: user[0].username,\n        });\n        throw new Error('Current password is incorrect');\n      }\n\n      // Hash new password\n      const passwordHash = await hashPassword(newPassword);\n\n      // Update password\n      await this.db\n        .update(users)\n        .set({\n          passwordHash,\n          updatedAt: new Date(),\n        })\n        .where(eq(users.id, userId));\n\n      securityLogger.info('Password changed', {\n        userId,\n        username: user[0].username,\n      });\n    });\n  }\n\n  // Delete user account\n  async deleteAccount(userId: number): Promise<void> {\n    return this.handleErrors('Delete user account', async () => {\n      await this.withTransaction(async (tx) => {\n        // Delete user (cascading will handle related records)\n        const result = await tx\n          .delete(users)\n          .where(eq(users.id, userId));\n\n        securityLogger.info('User account deleted', { userId });\n      });\n    });\n  }\n}","size_bytes":8680},"server/services/BaseService.ts":{"content":"import { Database } from '../database.js';\nimport { logger } from '../utils/logger.js';\nimport { v4 as uuidv4 } from 'uuid';\n\n// Base service class with common functionality\nexport abstract class BaseService {\n  protected db: Database;\n\n  constructor(db: Database) {\n    this.db = db;\n  }\n\n  // Transaction wrapper\n  protected async withTransaction<T>(\n    callback: (tx: Database) => Promise<T>\n  ): Promise<T> {\n    return await this.db.transaction(async (tx) => {\n      try {\n        return await callback(tx);\n      } catch (error) {\n        logger.error('Transaction failed:', error);\n        throw error;\n      }\n    });\n  }\n\n  // Error handling wrapper\n  protected async handleErrors<T>(\n    operation: string,\n    callback: () => Promise<T>\n  ): Promise<T> {\n    try {\n      return await callback();\n    } catch (error) {\n      logger.error(`${operation} failed:`, error);\n      throw error;\n    }\n  }\n\n  // Generate unique ID\n  protected generateId(): string {\n    return uuidv4();\n  }\n\n  // Pagination helper\n  protected calculatePagination(page: number = 1, limit: number = 10) {\n    const offset = (page - 1) * limit;\n    return { offset, limit: Math.min(limit, 100) }; // Max 100 items per page\n  }\n\n  // Validate ownership\n  protected async validateOwnership(\n    resourceUserId: number,\n    requestUserId: number,\n    resourceType: string\n  ): Promise<void> {\n    if (resourceUserId !== requestUserId) {\n      logger.warn('Ownership validation failed', {\n        resourceType,\n        resourceUserId,\n        requestUserId,\n      });\n      throw new Error(`Access denied: You don't own this ${resourceType}`);\n    }\n  }\n\n  // Format response with metadata\n  protected formatResponse<T>(\n    data: T,\n    pagination?: { page: number; limit: number; total: number }\n  ) {\n    const response: any = {\n      data,\n      timestamp: new Date().toISOString(),\n    };\n\n    if (pagination) {\n      response.pagination = {\n        ...pagination,\n        totalPages: Math.ceil(pagination.total / pagination.limit),\n      };\n    }\n\n    return response;\n  }\n}","size_bytes":2061},"server/services/VehicleService.ts":{"content":"import { eq, and, desc, sql } from 'drizzle-orm';\nimport { BaseService } from './BaseService.js';\nimport { motorcycles } from '../../shared/schema.js';\nimport type { Motorcycle, InsertMotorcycle } from '../../shared/schema.js';\nimport { logger } from '../utils/logger.js';\n\nexport class VehicleService extends BaseService {\n  // Get all motorcycles for a user\n  async getUserMotorcycles(\n    userId: number,\n    page: number = 1,\n    limit: number = 10\n  ): Promise<{ motorcycles: Motorcycle[]; total: number }> {\n    return this.handleErrors('Get user motorcycles', async () => {\n      const { offset, limit: actualLimit } = this.calculatePagination(page, limit);\n\n      // Get motorcycles with pagination\n      const userMotorcycles = await this.db\n        .select()\n        .from(motorcycles)\n        .where(eq(motorcycles.userId, userId))\n        .orderBy(desc(motorcycles.createdAt))\n        .limit(actualLimit)\n        .offset(offset);\n\n      // Get total count\n      const totalResult = await this.db\n        .select({ count: sql<number>`count(*)` })\n        .from(motorcycles)\n        .where(eq(motorcycles.userId, userId));\n\n      const total = totalResult[0]?.count || 0;\n\n      return {\n        motorcycles: userMotorcycles,\n        total,\n      };\n    });\n  }\n\n  // Get motorcycle by ID\n  async getMotorcycleById(motorcycleId: number, userId: number): Promise<Motorcycle> {\n    return this.handleErrors('Get motorcycle by ID', async () => {\n      const motorcycle = await this.db\n        .select()\n        .from(motorcycles)\n        .where(\n          and(\n            eq(motorcycles.id, motorcycleId),\n            eq(motorcycles.userId, userId)\n          )\n        )\n        .limit(1);\n\n      if (!motorcycle.length) {\n        throw new Error('Motorcycle not found or access denied');\n      }\n\n      return motorcycle[0];\n    });\n  }\n\n  // Create a new motorcycle\n  async createMotorcycle(userId: number, motorcycleData: InsertMotorcycle): Promise<Motorcycle> {\n    return this.handleErrors('Create motorcycle', async () => {\n      // Check user's motorcycle limit (max 10 for basic users)\n      const existingCount = await this.getUserMotorcycleCount(userId);\n      if (existingCount >= 10) {\n        throw new Error('Maximum motorcycle limit reached (10 motorcycles)');\n      }\n\n      // Validate VIN uniqueness if provided\n      if (motorcycleData.vin) {\n        const existingVin = await this.db\n          .select()\n          .from(motorcycles)\n          .where(eq(motorcycles.vin, motorcycleData.vin))\n          .limit(1);\n\n        if (existingVin.length > 0) {\n          throw new Error('VIN already exists in the system');\n        }\n      }\n\n      // Create motorcycle\n      const newMotorcycle = await this.db\n        .insert(motorcycles)\n        .values({\n          ...motorcycleData,\n          userId,\n        })\n        .returning();\n\n      if (!newMotorcycle.length) {\n        throw new Error('Failed to create motorcycle');\n      }\n\n      logger.info('Motorcycle created', {\n        userId,\n        motorcycleId: newMotorcycle[0].id,\n        make: motorcycleData.make,\n        model: motorcycleData.model,\n      });\n\n      return newMotorcycle[0];\n    });\n  }\n\n  // Update motorcycle\n  async updateMotorcycle(\n    motorcycleId: number,\n    userId: number,\n    updateData: Partial<InsertMotorcycle>\n  ): Promise<Motorcycle> {\n    return this.handleErrors('Update motorcycle', async () => {\n      // Verify ownership\n      await this.getMotorcycleById(motorcycleId, userId);\n\n      // Validate VIN uniqueness if being updated\n      if (updateData.vin) {\n        const existingVin = await this.db\n          .select()\n          .from(motorcycles)\n          .where(\n            and(\n              eq(motorcycles.vin, updateData.vin),\n              // Exclude current motorcycle\n              sql`${motorcycles.id} != ${motorcycleId}`\n            )\n          )\n          .limit(1);\n\n        if (existingVin.length > 0) {\n          throw new Error('VIN already exists in the system');\n        }\n      }\n\n      // Update motorcycle\n      const updatedMotorcycle = await this.db\n        .update(motorcycles)\n        .set({\n          ...updateData,\n          updatedAt: new Date(),\n        })\n        .where(\n          and(\n            eq(motorcycles.id, motorcycleId),\n            eq(motorcycles.userId, userId)\n          )\n        )\n        .returning();\n\n      if (!updatedMotorcycle.length) {\n        throw new Error('Failed to update motorcycle');\n      }\n\n      logger.info('Motorcycle updated', {\n        userId,\n        motorcycleId,\n        updatedFields: Object.keys(updateData),\n      });\n\n      return updatedMotorcycle[0];\n    });\n  }\n\n  // Delete motorcycle\n  async deleteMotorcycle(motorcycleId: number, userId: number): Promise<void> {\n    return this.handleErrors('Delete motorcycle', async () => {\n      await this.withTransaction(async (tx) => {\n        // Verify ownership first\n        const motorcycle = await tx\n          .select()\n          .from(motorcycles)\n          .where(\n            and(\n              eq(motorcycles.id, motorcycleId),\n              eq(motorcycles.userId, userId)\n            )\n          )\n          .limit(1);\n\n        if (!motorcycle.length) {\n          throw new Error('Motorcycle not found or access denied');\n        }\n\n        // Delete motorcycle (cascading will handle related records)\n        await tx\n          .delete(motorcycles)\n          .where(eq(motorcycles.id, motorcycleId));\n\n        logger.info('Motorcycle deleted', {\n          userId,\n          motorcycleId,\n          make: motorcycle[0].make,\n          model: motorcycle[0].model,\n        });\n      });\n    });\n  }\n\n  // Get motorcycle count for user\n  async getUserMotorcycleCount(userId: number): Promise<number> {\n    return this.handleErrors('Get user motorcycle count', async () => {\n      const result = await this.db\n        .select({ count: sql<number>`count(*)` })\n        .from(motorcycles)\n        .where(eq(motorcycles.userId, userId));\n\n      return result[0]?.count || 0;\n    });\n  }\n\n  // Update motorcycle mileage\n  async updateMileage(motorcycleId: number, userId: number, newMileage: number): Promise<Motorcycle> {\n    return this.handleErrors('Update motorcycle mileage', async () => {\n      // Validate mileage\n      if (newMileage < 0) {\n        throw new Error('Mileage cannot be negative');\n      }\n\n      // Get current motorcycle to check current mileage\n      const currentMotorcycle = await this.getMotorcycleById(motorcycleId, userId);\n      \n      if (newMileage < (currentMotorcycle.mileage || 0)) {\n        logger.warn('Mileage decreased', {\n          userId,\n          motorcycleId,\n          currentMileage: currentMotorcycle.mileage,\n          newMileage,\n        });\n        // Allow but log the decrease\n      }\n\n      // Update mileage\n      const updatedMotorcycle = await this.db\n        .update(motorcycles)\n        .set({\n          mileage: newMileage,\n          updatedAt: new Date(),\n        })\n        .where(\n          and(\n            eq(motorcycles.id, motorcycleId),\n            eq(motorcycles.userId, userId)\n          )\n        )\n        .returning();\n\n      if (!updatedMotorcycle.length) {\n        throw new Error('Failed to update mileage');\n      }\n\n      logger.info('Motorcycle mileage updated', {\n        userId,\n        motorcycleId,\n        previousMileage: currentMotorcycle.mileage,\n        newMileage,\n      });\n\n      return updatedMotorcycle[0];\n    });\n  }\n\n  // Search motorcycles\n  async searchMotorcycles(\n    userId: number,\n    query: string,\n    page: number = 1,\n    limit: number = 10\n  ): Promise<{ motorcycles: Motorcycle[]; total: number }> {\n    return this.handleErrors('Search motorcycles', async () => {\n      const { offset, limit: actualLimit } = this.calculatePagination(page, limit);\n\n      // Search in name, make, and model\n      const searchResults = await this.db\n        .select()\n        .from(motorcycles)\n        .where(\n          and(\n            eq(motorcycles.userId, userId),\n            sql`(\n              ${motorcycles.name} ILIKE ${`%${query}%`} OR\n              ${motorcycles.make} ILIKE ${`%${query}%`} OR\n              ${motorcycles.model} ILIKE ${`%${query}%`}\n            )`\n          )\n        )\n        .orderBy(desc(motorcycles.createdAt))\n        .limit(actualLimit)\n        .offset(offset);\n\n      // Get total count for search\n      const totalResult = await this.db\n        .select({ count: sql<number>`count(*)` })\n        .from(motorcycles)\n        .where(\n          and(\n            eq(motorcycles.userId, userId),\n            sql`(\n              ${motorcycles.name} ILIKE ${`%${query}%`} OR\n              ${motorcycles.make} ILIKE ${`%${query}%`} OR\n              ${motorcycles.model} ILIKE ${`%${query}%`}\n            )`\n          )\n        );\n\n      const total = totalResult[0]?.count || 0;\n\n      return {\n        motorcycles: searchResults,\n        total,\n      };\n    });\n  }\n\n  // Get motorcycle statistics for user\n  async getUserMotorcycleStats(userId: number): Promise<{\n    totalMotorcycles: number;\n    totalMileage: number;\n    averageMileage: number;\n    newestMotorcycle?: Motorcycle;\n    highestMileage?: Motorcycle;\n  }> {\n    return this.handleErrors('Get user motorcycle statistics', async () => {\n      const userMotorcycles = await this.db\n        .select()\n        .from(motorcycles)\n        .where(eq(motorcycles.userId, userId));\n\n      if (!userMotorcycles.length) {\n        return {\n          totalMotorcycles: 0,\n          totalMileage: 0,\n          averageMileage: 0,\n        };\n      }\n\n      const totalMileage = userMotorcycles.reduce((sum, bike) => sum + (bike.mileage || 0), 0);\n      const averageMileage = totalMileage / userMotorcycles.length;\n\n      // Find newest motorcycle\n      const newestMotorcycle = userMotorcycles.reduce((newest, current) => \n        current.createdAt > newest.createdAt ? current : newest\n      );\n\n      // Find highest mileage motorcycle\n      const highestMileage = userMotorcycles.reduce((highest, current) => \n        (current.mileage || 0) > (highest.mileage || 0) ? current : highest\n      );\n\n      return {\n        totalMotorcycles: userMotorcycles.length,\n        totalMileage,\n        averageMileage: Math.round(averageMileage),\n        newestMotorcycle,\n        highestMileage: highestMileage.mileage ? highestMileage : undefined,\n      };\n    });\n  }\n}","size_bytes":10382},"server/utils/auth.ts":{"content":"import jwt from 'jsonwebtoken';\nimport bcrypt from 'bcryptjs';\nimport { Request, Response, NextFunction } from 'express';\nimport { eq, and, lt } from 'drizzle-orm';\nimport { db } from '../database.js';\nimport { users, userSessions } from '../../shared/schema.js';\nimport { jwtConfig, securityConfig } from '../config.js';\nimport { logger, securityLogger } from './logger.js';\nimport { v4 as uuidv4 } from 'uuid';\n\n// JWT payload interface\nexport interface JWTPayload {\n  userId: number;\n  username: string;\n  email: string;\n  role: string;\n  sessionId: string;\n  iat: number;\n  exp: number;\n}\n\n// Token pair interface\nexport interface TokenPair {\n  accessToken: string;\n  refreshToken: string;\n}\n\n// Enhanced request interface\nexport interface AuthenticatedRequest extends Request {\n  user?: JWTPayload;\n  sessionId?: string;\n}\n\n// Hash password\nexport async function hashPassword(password: string): Promise<string> {\n  return bcrypt.hash(password, securityConfig.bcryptRounds);\n}\n\n// Verify password\nexport async function verifyPassword(password: string, hash: string): Promise<boolean> {\n  return bcrypt.compare(password, hash);\n}\n\n// Generate access and refresh tokens\nexport async function generateTokens(user: any, req: Request): Promise<TokenPair> {\n  const sessionId = uuidv4();\n  \n  // Create JWT payload\n  const payload: Omit<JWTPayload, 'iat' | 'exp'> = {\n    userId: user.id,\n    username: user.username,\n    email: user.email,\n    role: user.role || 'user',\n    sessionId,\n  };\n\n  // Generate tokens\n  const accessToken = jwt.sign(payload, jwtConfig.secret, {\n    expiresIn: jwtConfig.expiresIn,\n  });\n\n  const refreshToken = jwt.sign(\n    { sessionId, userId: user.id },\n    jwtConfig.refreshSecret,\n    { expiresIn: jwtConfig.refreshExpiresIn }\n  );\n\n  // Store session in database\n  const expiresAt = new Date();\n  expiresAt.setDate(expiresAt.getDate() + 7); // 7 days\n\n  try {\n    await db.insert(userSessions).values({\n      userId: user.id,\n      sessionToken: accessToken,\n      refreshToken,\n      ipAddress: req.ip,\n      userAgent: req.get('User-Agent') || '',\n      expiresAt,\n    });\n\n    securityLogger.info('Session created', {\n      userId: user.id,\n      username: user.username,\n      ip: req.ip,\n      userAgent: req.get('User-Agent'),\n      sessionId,\n    });\n  } catch (error) {\n    logger.error('Failed to store session:', error);\n    throw new Error('Failed to create session');\n  }\n\n  return { accessToken, refreshToken };\n}\n\n// Verify JWT token\nexport function verifyToken(token: string): JWTPayload {\n  try {\n    return jwt.verify(token, jwtConfig.secret) as JWTPayload;\n  } catch (error) {\n    throw new Error('Invalid token');\n  }\n}\n\n// Verify refresh token\nexport function verifyRefreshToken(token: string): { sessionId: string; userId: number } {\n  try {\n    return jwt.verify(token, jwtConfig.refreshSecret) as { sessionId: string; userId: number };\n  } catch (error) {\n    throw new Error('Invalid refresh token');\n  }\n}\n\n// Authentication middleware\nexport function authenticateToken(req: AuthenticatedRequest, res: Response, next: NextFunction) {\n  const authHeader = req.headers.authorization;\n  const token = authHeader && authHeader.split(' ')[1]; // Bearer TOKEN\n\n  if (!token) {\n    return res.status(401).json({\n      error: 'Access denied',\n      message: 'No token provided',\n    });\n  }\n\n  try {\n    const payload = verifyToken(token);\n    req.user = payload;\n    req.sessionId = payload.sessionId;\n    next();\n  } catch (error) {\n    securityLogger.warn('Invalid token attempt', {\n      ip: req.ip,\n      userAgent: req.get('User-Agent'),\n      token: token.substring(0, 20) + '...',\n    });\n\n    return res.status(403).json({\n      error: 'Access denied',\n      message: 'Invalid or expired token',\n    });\n  }\n}\n\n// Optional authentication middleware (doesn't fail if no token)\nexport function optionalAuth(req: AuthenticatedRequest, res: Response, next: NextFunction) {\n  const authHeader = req.headers.authorization;\n  const token = authHeader && authHeader.split(' ')[1];\n\n  if (token) {\n    try {\n      const payload = verifyToken(token);\n      req.user = payload;\n      req.sessionId = payload.sessionId;\n    } catch (error) {\n      // Token is invalid but we don't fail the request\n      logger.debug('Invalid token in optional auth:', error);\n    }\n  }\n\n  next();\n}\n\n// Role-based authorization middleware\nexport function requireRole(roles: string | string[]) {\n  const roleArray = Array.isArray(roles) ? roles : [roles];\n  \n  return (req: AuthenticatedRequest, res: Response, next: NextFunction) => {\n    if (!req.user) {\n      return res.status(401).json({\n        error: 'Access denied',\n        message: 'Authentication required',\n      });\n    }\n\n    if (!roleArray.includes(req.user.role)) {\n      securityLogger.warn('Unauthorized role access attempt', {\n        userId: req.user.userId,\n        username: req.user.username,\n        userRole: req.user.role,\n        requiredRoles: roleArray,\n        endpoint: req.path,\n        ip: req.ip,\n      });\n\n      return res.status(403).json({\n        error: 'Access denied',\n        message: 'Insufficient permissions',\n      });\n    }\n\n    next();\n  };\n}\n\n// Check if user account is locked\nexport async function checkAccountLock(userId: number): Promise<boolean> {\n  const user = await db\n    .select()\n    .from(users)\n    .where(eq(users.id, userId))\n    .limit(1);\n\n  if (!user.length) return false;\n\n  const userData = user[0];\n  \n  // Check if account is locked\n  if (userData.lockedUntil && userData.lockedUntil > new Date()) {\n    return true;\n  }\n\n  // Reset login attempts if lock time has passed\n  if (userData.lockedUntil && userData.lockedUntil <= new Date()) {\n    await db\n      .update(users)\n      .set({\n        loginAttempts: 0,\n        lockedUntil: null,\n      })\n      .where(eq(users.id, userId));\n  }\n\n  return false;\n}\n\n// Handle failed login attempt\nexport async function handleFailedLogin(userId: number): Promise<void> {\n  const user = await db\n    .select()\n    .from(users)\n    .where(eq(users.id, userId))\n    .limit(1);\n\n  if (!user.length) return;\n\n  const userData = user[0];\n  const attempts = (userData.loginAttempts || 0) + 1;\n\n  let updateData: any = { loginAttempts: attempts };\n\n  // Lock account if max attempts reached\n  if (attempts >= securityConfig.maxLoginAttempts) {\n    updateData.lockedUntil = new Date(Date.now() + securityConfig.accountLockTime);\n    \n    securityLogger.warn('Account locked due to failed login attempts', {\n      userId,\n      username: userData.username,\n      attempts,\n      lockedUntil: updateData.lockedUntil,\n    });\n  }\n\n  await db\n    .update(users)\n    .set(updateData)\n    .where(eq(users.id, userId));\n}\n\n// Handle successful login\nexport async function handleSuccessfulLogin(userId: number): Promise<void> {\n  await db\n    .update(users)\n    .set({\n      loginAttempts: 0,\n      lockedUntil: null,\n      lastLogin: new Date(),\n    })\n    .where(eq(users.id, userId));\n}\n\n// Logout (invalidate session)\nexport async function logout(sessionId: string): Promise<void> {\n  try {\n    await db\n      .delete(userSessions)\n      .where(eq(userSessions.sessionToken, sessionId));\n\n    securityLogger.info('Session invalidated', { sessionId });\n  } catch (error) {\n    logger.error('Failed to invalidate session:', error);\n  }\n}\n\n// Clean up expired sessions\nexport async function cleanupExpiredSessions(): Promise<void> {\n  try {\n    const result = await db\n      .delete(userSessions)\n      .where(lt(userSessions.expiresAt, new Date()));\n\n    logger.info(`Cleaned up expired sessions: ${result.rowCount || 0}`);\n  } catch (error) {\n    logger.error('Failed to cleanup expired sessions:', error);\n  }\n}\n\n// Get user sessions\nexport async function getUserSessions(userId: number) {\n  return db\n    .select({\n      id: userSessions.id,\n      ipAddress: userSessions.ipAddress,\n      userAgent: userSessions.userAgent,\n      createdAt: userSessions.createdAt,\n      expiresAt: userSessions.expiresAt,\n    })\n    .from(userSessions)\n    .where(\n      and(\n        eq(userSessions.userId, userId),\n        lt(new Date(), userSessions.expiresAt)\n      )\n    )\n    .orderBy(userSessions.createdAt);\n}","size_bytes":8182},"server/utils/logger.ts":{"content":"import winston from 'winston';\nimport { config } from '../config.js';\n\n// Create logger configuration\nconst logFormat = winston.format.combine(\n  winston.format.timestamp({\n    format: 'YYYY-MM-DD HH:mm:ss',\n  }),\n  winston.format.errors({ stack: true }),\n  winston.format.json(),\n  winston.format.printf(({ timestamp, level, message, stack, ...meta }) => {\n    let log = `${timestamp} [${level.toUpperCase()}]: ${message}`;\n    \n    if (Object.keys(meta).length > 0) {\n      log += ` ${JSON.stringify(meta)}`;\n    }\n    \n    if (stack) {\n      log += `\\n${stack}`;\n    }\n    \n    return log;\n  })\n);\n\n// Create logger instance\nexport const logger = winston.createLogger({\n  level: config.NODE_ENV === 'development' ? 'debug' : 'info',\n  format: logFormat,\n  defaultMeta: {\n    service: 'throttlecove-api',\n    environment: config.NODE_ENV,\n  },\n  transports: [\n    // Console output for development\n    new winston.transports.Console({\n      format: winston.format.combine(\n        winston.format.colorize(),\n        winston.format.simple()\n      ),\n    }),\n  ],\n});\n\n// Add file transports for production\nif (config.NODE_ENV === 'production') {\n  logger.add(\n    new winston.transports.File({\n      filename: 'logs/error.log',\n      level: 'error',\n      maxsize: 5242880, // 5MB\n      maxFiles: 5,\n    })\n  );\n  \n  logger.add(\n    new winston.transports.File({\n      filename: 'logs/combined.log',\n      maxsize: 5242880, // 5MB\n      maxFiles: 5,\n    })\n  );\n}\n\n// Request logger middleware\nexport const requestLogger = winston.createLogger({\n  level: 'info',\n  format: winston.format.combine(\n    winston.format.timestamp(),\n    winston.format.json()\n  ),\n  defaultMeta: { type: 'request' },\n  transports: [\n    new winston.transports.Console({\n      format: winston.format.simple(),\n    }),\n  ],\n});\n\n// Security logger for auth events\nexport const securityLogger = winston.createLogger({\n  level: 'info',\n  format: winston.format.combine(\n    winston.format.timestamp(),\n    winston.format.json()\n  ),\n  defaultMeta: { type: 'security' },\n  transports: [\n    new winston.transports.Console(),\n    ...(config.NODE_ENV === 'production' ? [\n      new winston.transports.File({\n        filename: 'logs/security.log',\n        maxsize: 5242880,\n        maxFiles: 10,\n      })\n    ] : []),\n  ],\n});\n\nexport default logger;","size_bytes":2322},"server/utils/validation.ts":{"content":"import { Request, Response, NextFunction } from 'express';\nimport { ZodSchema, ZodError } from 'zod';\nimport { logger } from './logger.js';\n\n// Validation middleware factory\nexport function validateBody(schema: ZodSchema) {\n  return (req: Request, res: Response, next: NextFunction) => {\n    try {\n      req.body = schema.parse(req.body);\n      next();\n    } catch (error) {\n      if (error instanceof ZodError) {\n        logger.warn('Validation error:', {\n          path: req.path,\n          method: req.method,\n          errors: error.errors,\n          body: req.body,\n        });\n\n        return res.status(400).json({\n          error: 'Validation failed',\n          message: 'Invalid request data',\n          details: error.errors.map(err => ({\n            field: err.path.join('.'),\n            message: err.message,\n            code: err.code,\n          })),\n        });\n      }\n\n      logger.error('Unexpected validation error:', error);\n      return res.status(500).json({\n        error: 'Internal server error',\n        message: 'Validation processing failed',\n      });\n    }\n  };\n}\n\n// Query parameter validation\nexport function validateQuery(schema: ZodSchema) {\n  return (req: Request, res: Response, next: NextFunction) => {\n    try {\n      req.query = schema.parse(req.query);\n      next();\n    } catch (error) {\n      if (error instanceof ZodError) {\n        return res.status(400).json({\n          error: 'Invalid query parameters',\n          details: error.errors,\n        });\n      }\n\n      return res.status(500).json({\n        error: 'Query validation failed',\n      });\n    }\n  };\n}\n\n// Path parameter validation\nexport function validateParams(schema: ZodSchema) {\n  return (req: Request, res: Response, next: NextFunction) => {\n    try {\n      req.params = schema.parse(req.params);\n      next();\n    } catch (error) {\n      if (error instanceof ZodError) {\n        return res.status(400).json({\n          error: 'Invalid path parameters',\n          details: error.errors,\n        });\n      }\n\n      return res.status(500).json({\n        error: 'Parameter validation failed',\n      });\n    }\n  };\n}\n\n// Sanitization utilities\nexport function sanitizeString(str: string): string {\n  return str\n    .trim()\n    .replace(/[<>]/g, '') // Remove potential HTML tags\n    .substring(0, 1000); // Limit length\n}\n\nexport function sanitizeNumber(num: any): number | null {\n  const parsed = parseInt(num, 10);\n  return isNaN(parsed) ? null : parsed;\n}\n\n// File validation\nexport function validateFileUpload(allowedTypes: string[], maxSize: number) {\n  return (req: Request, res: Response, next: NextFunction) => {\n    if (!req.file && !req.files) {\n      return next();\n    }\n\n    const files = req.files ? (Array.isArray(req.files) ? req.files : [req.file]) : [req.file];\n\n    for (const file of files) {\n      if (!file) continue;\n\n      // Check file type\n      if (!allowedTypes.includes(file.mimetype)) {\n        return res.status(400).json({\n          error: 'Invalid file type',\n          message: `Allowed types: ${allowedTypes.join(', ')}`,\n          received: file.mimetype,\n        });\n      }\n\n      // Check file size\n      if (file.size > maxSize) {\n        return res.status(400).json({\n          error: 'File too large',\n          message: `Maximum size: ${maxSize / 1024 / 1024}MB`,\n          received: `${Math.round(file.size / 1024 / 1024)}MB`,\n        });\n      }\n    }\n\n    next();\n  };\n}","size_bytes":3421},"client/src/pages/DocumentUpload.tsx":{"content":"import { useState } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { ArrowLeft, Upload, FileText, AlertCircle } from \"lucide-react\";\n\nexport default function DocumentUpload() {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [documentType, setDocumentType] = useState(\"\");\n  const [vehicleId, setVehicleId] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [expirationDate, setExpirationDate] = useState(\"\");\n\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      if (file.size > 10 * 1024 * 1024) { // 10MB limit\n        toast({\n          title: \"File too large\",\n          description: \"Please select a file smaller than 10MB\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n      setSelectedFile(file);\n    }\n  };\n\n  const handleUpload = async () => {\n    if (!selectedFile || !documentType || !vehicleId) {\n      toast({\n        title: \"Missing information\",\n        description: \"Please fill in all required fields and select a file\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    // Simulate upload process\n    toast({\n      title: \"Uploading document...\",\n      description: \"Please wait while we process your document\",\n    });\n\n    // Simulate API call\n    setTimeout(() => {\n      toast({\n        title: \"Document uploaded successfully!\",\n        description: `${documentType} document has been saved for your vehicle`,\n      });\n      \n      // Reset form\n      setSelectedFile(null);\n      setDocumentType(\"\");\n      setVehicleId(\"\");\n      setDescription(\"\");\n      setExpirationDate(\"\");\n      \n      // Redirect back to document viewer after 2 seconds\n      setTimeout(() => {\n        setLocation(`/documents/view/${documentType}`);\n      }, 2000);\n    }, 2000);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 p-4\">\n      <div className=\"max-w-2xl mx-auto\">\n        {/* Header */}\n        <div className=\"flex items-center gap-4 mb-6\">\n          <Button\n            variant=\"outline\"\n            size=\"icon\"\n            onClick={() => setLocation(\"/garage\")}\n            className=\"h-10 w-10\"\n          >\n            <ArrowLeft className=\"h-4 w-4\" />\n          </Button>\n          <div>\n            <h1 className=\"text-2xl font-bold text-[#1A1A1A]\">Document Upload</h1>\n            <p className=\"text-gray-600\">Upload documents for your vehicles</p>\n          </div>\n        </div>\n\n        <Card className=\"shadow-lg\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <FileText className=\"h-5 w-5 text-[#FF3B30]\" />\n              Upload Vehicle Document\n            </CardTitle>\n            <CardDescription>\n              Upload important documents like license, insurance, registration, or service records\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-6\">\n            {/* Document Type Selection */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"document-type\">Document Type *</Label>\n              <Select value={documentType} onValueChange={setDocumentType}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Select document type\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"license\">Driver's License</SelectItem>\n                  <SelectItem value=\"insurance\">Insurance Policy</SelectItem>\n                  <SelectItem value=\"registration\">Vehicle Registration</SelectItem>\n                  <SelectItem value=\"service\">Service Record</SelectItem>\n                  <SelectItem value=\"warranty\">Warranty Document</SelectItem>\n                  <SelectItem value=\"other\">Other</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            {/* Vehicle Selection */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"vehicle\">Vehicle *</Label>\n              <Select value={vehicleId} onValueChange={setVehicleId}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Select vehicle\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"1\">2021 Yamaha MT-07</SelectItem>\n                  <SelectItem value=\"2\">2019 Honda CBR600RR</SelectItem>\n                  <SelectItem value=\"all\">All Vehicles</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            {/* File Upload */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"file\">Document File *</Label>\n              <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-[#FF3B30] transition-colors\">\n                <input\n                  type=\"file\"\n                  id=\"file\"\n                  accept=\".pdf,.jpg,.jpeg,.png,.doc,.docx\"\n                  onChange={handleFileSelect}\n                  className=\"hidden\"\n                />\n                <label htmlFor=\"file\" className=\"cursor-pointer\">\n                  <Upload className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n                  <p className=\"text-sm text-gray-600 mb-2\">\n                    {selectedFile ? selectedFile.name : \"Click to upload or drag and drop\"}\n                  </p>\n                  <p className=\"text-xs text-gray-500\">\n                    PDF, DOC, DOCX, JPG, PNG (max 10MB)\n                  </p>\n                </label>\n              </div>\n            </div>\n\n            {/* Expiration Date */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"expiration\">Expiration Date (if applicable)</Label>\n              <Input\n                type=\"date\"\n                id=\"expiration\"\n                value={expirationDate}\n                onChange={(e) => setExpirationDate(e.target.value)}\n              />\n            </div>\n\n            {/* Description */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"description\">Description</Label>\n              <Textarea\n                id=\"description\"\n                placeholder=\"Add any additional notes about this document...\"\n                value={description}\n                onChange={(e) => setDescription(e.target.value)}\n                rows={3}\n              />\n            </div>\n\n            {/* Alert about document security */}\n            <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 flex gap-3\">\n              <AlertCircle className=\"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5\" />\n              <div className=\"text-sm\">\n                <p className=\"font-medium text-blue-900\">Document Security</p>\n                <p className=\"text-blue-700\">\n                  Your documents are encrypted and stored securely. Only you can access your uploaded files.\n                </p>\n              </div>\n            </div>\n\n            {/* Upload Button */}\n            <Button \n              onClick={handleUpload}\n              className=\"w-full bg-[#FF3B30] hover:bg-[#FF3B30]/90\"\n              size=\"lg\"\n            >\n              Upload Document\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}","size_bytes":7818},"client/src/pages/DocumentViewer.tsx":{"content":"import { useLocation, useParams } from \"wouter\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ArrowLeft, FileText, Download, Edit, Trash2, AlertTriangle, CheckCircle } from \"lucide-react\";\n\nexport default function DocumentViewer() {\n  const [, setLocation] = useLocation();\n  const params = useParams<{ type: string }>();\n  const documentType = params?.type || 'all';\n\n  // Mock document data - in real app this would come from API\n  const documents = {\n    license: [\n      {\n        id: 1,\n        name: \"Driver's License\",\n        type: \"license\",\n        fileName: \"drivers_license.pdf\",\n        uploadDate: \"2024-01-15\",\n        expirationDate: \"2024-12-31\",\n        isExpired: true,\n        size: \"2.1 MB\",\n        vehicle: \"All Vehicles\"\n      }\n    ],\n    insurance: [\n      {\n        id: 2,\n        name: \"Insurance Policy\",\n        type: \"insurance\",\n        fileName: \"insurance_policy.pdf\",\n        uploadDate: \"2024-02-01\",\n        expirationDate: \"2025-02-01\",\n        isExpired: false,\n        size: \"1.8 MB\",\n        vehicle: \"2021 Yamaha MT-07\"\n      }\n    ],\n    registration: [\n      {\n        id: 3,\n        name: \"Vehicle Registration\",\n        type: \"registration\",\n        fileName: \"vehicle_registration.pdf\",\n        uploadDate: \"2024-03-10\",\n        expirationDate: \"2025-03-10\",\n        isExpired: false,\n        size: \"1.2 MB\",\n        vehicle: \"2021 Yamaha MT-07\"\n      }\n    ],\n    service: [\n      {\n        id: 4,\n        name: \"Last Service Record\",\n        type: \"service\",\n        fileName: \"service_record_2024.pdf\",\n        uploadDate: \"2024-11-15\",\n        expirationDate: null,\n        isExpired: false,\n        size: \"3.4 MB\",\n        vehicle: \"2021 Yamaha MT-07\"\n      }\n    ]\n  };\n\n  const allDocuments = Object.values(documents).flat();\n  const filteredDocuments = documentType === 'all' ? allDocuments : documents[documentType as keyof typeof documents] || [];\n\n  const getDocumentIcon = (type: string) => {\n    const icons = {\n      license: \"üìã\",\n      insurance: \"üõ°Ô∏è\",\n      registration: \"üìã\",\n      service: \"üîß\"\n    };\n    return icons[type as keyof typeof icons] || \"üìÑ\";\n  };\n\n  const getTypeColor = (type: string) => {\n    const colors = {\n      license: \"bg-blue-100 text-blue-800\",\n      insurance: \"bg-green-100 text-green-800\",\n      registration: \"bg-purple-100 text-purple-800\",\n      service: \"bg-orange-100 text-orange-800\"\n    };\n    return colors[type as keyof typeof colors] || \"bg-gray-100 text-gray-800\";\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 p-4\">\n      <div className=\"max-w-4xl mx-auto\">\n        {/* Header */}\n        <div className=\"flex items-center gap-4 mb-6\">\n          <Button\n            variant=\"outline\"\n            size=\"icon\"\n            onClick={() => setLocation(\"/garage\")}\n            className=\"h-10 w-10\"\n          >\n            <ArrowLeft className=\"h-4 w-4\" />\n          </Button>\n          <div>\n            <h1 className=\"text-2xl font-bold text-[#1A1A1A]\">\n              {documentType === 'all' ? 'All Documents' : `${documentType.charAt(0).toUpperCase() + documentType.slice(1)} Documents`}\n            </h1>\n            <p className=\"text-gray-600\">\n              {filteredDocuments.length} document{filteredDocuments.length !== 1 ? 's' : ''} found\n            </p>\n          </div>\n        </div>\n\n        {/* Upload Button */}\n        <div className=\"mb-6\">\n          <Button \n            onClick={() => setLocation(\"/documents/upload\")}\n            className=\"bg-[#FF3B30] hover:bg-[#FF3B30]/90\"\n          >\n            <FileText className=\"h-4 w-4 mr-2\" />\n            Upload New Document\n          </Button>\n        </div>\n\n        {/* Documents List */}\n        <div className=\"space-y-4\">\n          {filteredDocuments.length === 0 ? (\n            <Card className=\"text-center py-12\">\n              <CardContent>\n                <FileText className=\"h-16 w-16 text-gray-400 mx-auto mb-4\" />\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">No documents found</h3>\n                <p className=\"text-gray-600 mb-4\">\n                  You haven't uploaded any {documentType === 'all' ? '' : documentType} documents yet.\n                </p>\n                <Button \n                  onClick={() => setLocation(\"/documents/upload\")}\n                  className=\"bg-[#FF3B30] hover:bg-[#FF3B30]/90\"\n                >\n                  Upload Your First Document\n                </Button>\n              </CardContent>\n            </Card>\n          ) : (\n            filteredDocuments.map((doc) => (\n              <Card key={doc.id} className=\"shadow-lg hover:shadow-xl transition-shadow\">\n                <CardHeader>\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"text-2xl\">{getDocumentIcon(doc.type)}</div>\n                      <div>\n                        <CardTitle className=\"text-lg\">{doc.name}</CardTitle>\n                        <CardDescription className=\"flex items-center gap-2 mt-1\">\n                          <Badge variant=\"secondary\" className={getTypeColor(doc.type)}>\n                            {doc.type.charAt(0).toUpperCase() + doc.type.slice(1)}\n                          </Badge>\n                          <span>‚Ä¢</span>\n                          <span>{doc.vehicle}</span>\n                        </CardDescription>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      {doc.expirationDate && (\n                        <div className=\"flex items-center gap-1\">\n                          {doc.isExpired ? (\n                            <>\n                              <AlertTriangle className=\"h-4 w-4 text-red-600\" />\n                              <span className=\"text-red-600 text-sm font-medium\">Expired</span>\n                            </>\n                          ) : (\n                            <>\n                              <CheckCircle className=\"h-4 w-4 text-green-600\" />\n                              <span className=\"text-green-600 text-sm font-medium\">Valid</span>\n                            </>\n                          )}\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4 text-sm\">\n                    <div>\n                      <p className=\"text-gray-500\">File Name</p>\n                      <p className=\"font-medium\">{doc.fileName}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-gray-500\">Upload Date</p>\n                      <p className=\"font-medium\">{new Date(doc.uploadDate).toLocaleDateString()}</p>\n                    </div>\n                    {doc.expirationDate && (\n                      <div>\n                        <p className=\"text-gray-500\">Expires</p>\n                        <p className={`font-medium ${doc.isExpired ? 'text-red-600' : 'text-green-600'}`}>\n                          {new Date(doc.expirationDate).toLocaleDateString()}\n                        </p>\n                      </div>\n                    )}\n                    <div>\n                      <p className=\"text-gray-500\">File Size</p>\n                      <p className=\"font-medium\">{doc.size}</p>\n                    </div>\n                  </div>\n\n                  <div className=\"flex gap-2 pt-4 border-t\">\n                    <Button variant=\"outline\" size=\"sm\">\n                      <Download className=\"h-4 w-4 mr-2\" />\n                      Download\n                    </Button>\n                    <Button variant=\"outline\" size=\"sm\">\n                      <Edit className=\"h-4 w-4 mr-2\" />\n                      Edit\n                    </Button>\n                    <Button variant=\"outline\" size=\"sm\" className=\"text-red-600 hover:text-red-700\">\n                      <Trash2 className=\"h-4 w-4 mr-2\" />\n                      Delete\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n            ))\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":8449},"client/src/components/ui/RankDetailsModal.tsx":{"content":"import { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { bikerRanks, getUserRank, getNextRank, getKmToNextRank, getTierColor } from \"@/utils/ranking\";\nimport { Info } from \"lucide-react\";\n\ninterface RankDetailsModalProps {\n  totalKilometers: number;\n  children: React.ReactNode;\n}\n\nexport const RankDetailsModal = ({ totalKilometers, children }: RankDetailsModalProps) => {\n  const currentRank = getUserRank(totalKilometers);\n  const nextRank = getNextRank(totalKilometers);\n  const kmToNext = getKmToNextRank(totalKilometers);\n  \n  const currentProgress = nextRank \n    ? ((totalKilometers - currentRank.minKm) / (nextRank.minKm - currentRank.minKm)) * 100\n    : 100;\n\n  return (\n    <Dialog>\n      <DialogTrigger asChild>\n        {children}\n      </DialogTrigger>\n      <DialogContent className=\"max-w-2xl max-h-[80vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <Info className=\"w-5 h-5\" />\n            Ranking System & Progression\n          </DialogTitle>\n        </DialogHeader>\n        \n        <div className=\"space-y-6\">\n          {/* Current Rank Info */}\n          <div className=\"p-4 bg-gray-50 rounded-lg\">\n            <div className=\"flex items-center gap-3 mb-3\">\n              <div className={`w-12 h-12 ${getTierColor(currentRank.tier)} rounded-full flex items-center justify-center`}>\n                <span className=\"text-white text-xl font-bold\">{currentRank.patch}</span>\n              </div>\n              <div>\n                <h3 className=\"font-bold text-lg\">{currentRank.name}</h3>\n                <p className=\"text-gray-600\">{currentRank.tier} Tier</p>\n              </div>\n            </div>\n            <p className=\"text-sm text-gray-700 mb-3\">{currentRank.description}</p>\n            <div className=\"text-sm text-gray-600\">\n              <p>Total Kilometers: <span className=\"font-semibold\">{totalKilometers.toLocaleString()} km</span></p>\n              {nextRank && (\n                <>\n                  <p>Next Rank: <span className=\"font-semibold\">{nextRank.name}</span></p>\n                  <p>Kilometers to Next: <span className=\"font-semibold\">{kmToNext.toLocaleString()} km</span></p>\n                  <div className=\"mt-2\">\n                    <Progress value={currentProgress} className=\"h-2\" />\n                    <p className=\"text-xs text-gray-500 mt-1\">{currentProgress.toFixed(1)}% to next rank</p>\n                  </div>\n                </>\n              )}\n            </div>\n          </div>\n\n          {/* Roadmap Visualization */}\n          <div>\n            <div className=\"flex items-center justify-between mb-3\">\n              <h4 className=\"font-semibold\">Rider's Journey Roadmap</h4>\n              <div className=\"text-xs text-gray-500\">üèÅ {totalKilometers.toLocaleString()} km traveled</div>\n            </div>\n            \n            {/* Legend */}\n            <div className=\"mb-4 p-3 bg-gray-50 rounded-lg\">\n              <div className=\"grid grid-cols-3 gap-2 text-xs\">\n                <div className=\"flex items-center gap-1\">\n                  <div className=\"w-3 h-3 bg-green-500 rounded-full\"></div>\n                  <span>Achieved</span>\n                </div>\n                <div className=\"flex items-center gap-1\">\n                  <div className=\"w-3 h-3 bg-[#FF3B30] rounded-full ring-2 ring-[#FF3B30] ring-opacity-30\"></div>\n                  <span>Current</span>\n                </div>\n                <div className=\"flex items-center gap-1\">\n                  <div className=\"w-3 h-3 bg-gray-300 rounded-full\"></div>\n                  <span>Upcoming</span>\n                </div>\n              </div>\n            </div>\n            <div className=\"max-h-96 overflow-y-auto\">\n              <div className=\"relative\">\n                {/* Roadmap path - curved journey line */}\n                <div className=\"absolute left-6 top-6 bottom-6 w-1 bg-gradient-to-b from-green-400 via-yellow-400 via-orange-400 to-red-500 rounded-full opacity-60\"></div>\n                <div className=\"absolute left-6 top-6 bottom-6 w-0.5 bg-gray-300 rounded-full\"></div>\n                \n                {bikerRanks.map((rank, index) => {\n                  const isAchieved = totalKilometers >= rank.minKm;\n                  const isCurrent = currentRank.id === rank.id;\n                  const isLast = index === bikerRanks.length - 1;\n                  \n                  return (\n                    <div key={rank.id} className=\"relative flex items-start gap-4 pb-8\">\n                      {/* Roadmap node */}\n                      <div className=\"relative z-10 flex-shrink-0\">\n                        {/* Distance marker */}\n                        <div className=\"absolute -left-8 top-1/2 transform -translate-y-1/2 bg-white px-2 py-1 rounded-md border text-xs font-medium text-gray-600 shadow-sm\">\n                          {rank.minKm >= 1000 ? `${(rank.minKm / 1000).toFixed(0)}K` : rank.minKm}\n                        </div>\n                        \n                        <div \n                          className={`w-14 h-14 rounded-full border-4 flex items-center justify-center transition-all duration-300 relative ${\n                            isCurrent\n                              ? `${getTierColor(rank.tier)} border-white shadow-lg ring-4 ring-[#FF3B30] ring-opacity-30 scale-110`\n                              : isAchieved\n                              ? `${getTierColor(rank.tier)} border-white shadow-md`\n                              : 'bg-gray-100 border-gray-300'\n                          }`}\n                        >\n                          <span className={`text-xl font-bold ${\n                            isAchieved ? 'text-white' : 'text-gray-400'\n                          }`}>\n                            {rank.patch}\n                          </span>\n                          \n                          {/* Tier indicator ring */}\n                          {isAchieved && (\n                            <div className={`absolute -inset-1 rounded-full border-2 ${\n                              rank.tier === 'Bronze' ? 'border-amber-400' :\n                              rank.tier === 'Silver' ? 'border-gray-400' :\n                              rank.tier === 'Gold' ? 'border-yellow-400' :\n                              rank.tier === 'Platinum' ? 'border-blue-400' :\n                              rank.tier === 'Diamond' ? 'border-purple-400' :\n                              'border-red-400'\n                            } opacity-50`}></div>\n                          )}\n                        </div>\n                        \n                        {/* Progress indicator for current rank */}\n                        {isCurrent && nextRank && (\n                          <div className=\"absolute -bottom-1 -right-1 w-4 h-4 bg-[#FF3B30] rounded-full border-2 border-white flex items-center justify-center\">\n                            <div className=\"w-1.5 h-1.5 bg-white rounded-full animate-pulse\"></div>\n                          </div>\n                        )}\n                        \n                        {/* Achievement checkmark */}\n                        {isAchieved && !isCurrent && (\n                          <div className=\"absolute -top-1 -right-1 w-5 h-5 bg-green-500 rounded-full border-2 border-white flex items-center justify-center\">\n                            <svg className=\"w-2.5 h-2.5 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                              <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n                            </svg>\n                          </div>\n                        )}\n                      </div>\n\n                      {/* Rank details card */}\n                      <div className={`flex-1 p-3 rounded-lg border transition-all ${\n                        isCurrent \n                          ? 'border-[#FF3B30] bg-red-50 shadow-md' \n                          : isAchieved \n                            ? 'border-green-200 bg-green-50' \n                            : 'border-gray-200 bg-gray-50 opacity-75'\n                      }`}>\n                        <div className=\"flex items-center gap-2 mb-1\">\n                          <h5 className={`font-semibold ${\n                            isCurrent ? 'text-[#FF3B30]' : isAchieved ? 'text-green-700' : 'text-gray-500'\n                          }`}>\n                            {rank.name}\n                          </h5>\n                          <Badge variant=\"outline\" className={`text-xs ${\n                            isCurrent ? 'border-[#FF3B30] text-[#FF3B30]' : ''\n                          }`}>\n                            {rank.tier}\n                          </Badge>\n                          {isCurrent && (\n                            <Badge className=\"bg-[#FF3B30] text-white text-xs\">Current</Badge>\n                          )}\n                        </div>\n                        \n                        <p className={`text-sm mb-2 ${\n                          isAchieved ? 'text-gray-700' : 'text-gray-500'\n                        }`}>\n                          {rank.description}\n                        </p>\n                        \n                        <div className=\"flex items-center justify-between text-xs\">\n                          <span className={`font-medium ${\n                            isAchieved ? 'text-gray-600' : 'text-gray-400'\n                          }`}>\n                            {rank.minKm.toLocaleString()} km\n                            {rank.maxKm !== Infinity && ` - ${rank.maxKm.toLocaleString()} km`}\n                          </span>\n                          \n                          {isCurrent && nextRank && (\n                            <span className=\"text-[#FF3B30] font-medium\">\n                              {kmToNext.toLocaleString()} km to next\n                            </span>\n                          )}\n                          \n                          {isAchieved && !isCurrent && (\n                            <span className=\"text-green-600 font-medium flex items-center gap-1\">\n                              <svg className=\"w-3 h-3\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                                <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n                              </svg>\n                              Achieved\n                            </span>\n                          )}\n                        </div>\n\n                        {/* Progress bar for current rank */}\n                        {isCurrent && nextRank && (\n                          <div className=\"mt-2\">\n                            <div className=\"w-full bg-gray-200 rounded-full h-1.5\">\n                              <div \n                                className=\"bg-[#FF3B30] h-1.5 rounded-full transition-all duration-300\"\n                                style={{ width: `${currentProgress}%` }}\n                              ></div>\n                            </div>\n                            <p className=\"text-xs text-[#FF3B30] mt-1\">\n                              {currentProgress.toFixed(1)}% progress to {nextRank.name}\n                            </p>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n          </div>\n\n          {/* Progress Summary */}\n          <div className=\"p-4 bg-blue-50 rounded-lg\">\n            <h4 className=\"font-semibold mb-2\">Progress Summary</h4>\n            <div className=\"grid grid-cols-2 gap-4 text-sm\">\n              <div>\n                <p className=\"text-gray-600\">Current Level:</p>\n                <p className=\"font-semibold\">{currentRank.id}/20</p>\n              </div>\n              <div>\n                <p className=\"text-gray-600\">Total Progress:</p>\n                <p className=\"font-semibold\">{((totalKilometers / 300000) * 100).toFixed(1)}%</p>\n              </div>\n              <div>\n                <p className=\"text-gray-600\">Kilometers Remaining:</p>\n                <p className=\"font-semibold\">{Math.max(0, 300000 - totalKilometers).toLocaleString()} km</p>\n              </div>\n              <div>\n                <p className=\"text-gray-600\">Max Level:</p>\n                <p className=\"font-semibold\">300,000 km</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};","size_bytes":12828},"client/src/components/ui/DocumentPreview.tsx":{"content":"import { motion, AnimatePresence } from \"framer-motion\";\nimport { Button } from \"@/components/ui/button\";\nimport { X } from \"lucide-react\";\n\ninterface Document {\n  id: string;\n  name: string;\n  type: string;\n  uploadDate: Date;\n  expiryDate?: Date;\n  size: number;\n  url: string;\n  isSecure: boolean;\n  notes?: string;\n  vehicleId?: string;\n}\n\ninterface DocumentPreviewProps {\n  isOpen: boolean;\n  onClose: () => void;\n  document: Document | null;\n}\n\nexport const DocumentPreview: React.FC<DocumentPreviewProps> = ({ \n  isOpen, \n  onClose, \n  document \n}) => {\n  if (!document) return null;\n\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          className=\"fixed inset-0 bg-black z-50 flex items-center justify-center\"\n          onClick={onClose}\n        >\n          {/* Close button */}\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={onClose}\n            className=\"absolute top-4 right-4 z-10 bg-black/50 hover:bg-black/70 text-white rounded-full w-10 h-10\"\n          >\n            <X className=\"w-5 h-5\" />\n          </Button>\n\n          {/* Document title overlay */}\n          <div className=\"absolute top-4 left-4 z-10 bg-black/50 text-white px-4 py-2 rounded-lg\">\n            <p className=\"text-sm font-medium\">{document.name}</p>\n            <p className=\"text-xs opacity-75\">\n              {document.type.charAt(0).toUpperCase() + document.type.slice(1)}\n            </p>\n          </div>\n\n          {/* Fullscreen document */}\n          <div className=\"w-full h-full flex items-center justify-center p-4\">\n            {document.url.endsWith('.pdf') ? (\n              <iframe\n                src={document.url}\n                className=\"w-full h-full border-0 rounded-lg\"\n                title={document.name}\n              />\n            ) : (\n              <img \n                src={document.url} \n                alt={document.name}\n                className=\"max-w-full max-h-full object-contain\"\n                onClick={(e) => e.stopPropagation()}\n              />\n            )}\n          </div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n};","size_bytes":2247},"client/src/components/ui/DocumentVault.tsx":{"content":"import { useState, useRef } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { \n  Upload, \n  Shield, \n  FileText, \n  Calendar, \n  AlertTriangle, \n  CheckCircle, \n  Eye,\n  Download,\n  Trash2,\n  Lock,\n  Plus\n} from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\n\n// Document types for the vault\nconst DOCUMENT_TYPES = [\n  { key: 'license', name: 'Driver License', icon: 'ü™™', color: 'bg-blue-500' },\n  { key: 'registration', name: 'Vehicle Registration', icon: 'üìã', color: 'bg-green-500' },\n  { key: 'insurance', name: 'Insurance Certificate', icon: 'üõ°Ô∏è', color: 'bg-purple-500' },\n  { key: 'service', name: 'Service Record', icon: 'üîß', color: 'bg-orange-500' },\n  { key: 'warranty', name: 'Warranty Document', icon: 'üìÑ', color: 'bg-cyan-500' },\n  { key: 'manual', name: 'Owner Manual', icon: 'üìñ', color: 'bg-gray-500' },\n  { key: 'receipt', name: 'Purchase Receipt', icon: 'üßæ', color: 'bg-yellow-500' },\n  { key: 'other', name: 'Other Document', icon: 'üìÅ', color: 'bg-indigo-500' }\n];\n\ninterface Document {\n  id: string;\n  name: string;\n  type: string;\n  uploadDate: Date;\n  expiryDate?: Date;\n  size: number;\n  url: string;\n  isSecure: boolean;\n  notes?: string;\n  vehicleId?: string;\n}\n\ninterface DocumentVaultProps {\n  isOpen: boolean;\n  onClose: () => void;\n  documents: Document[];\n  onDocumentsChange: (documents: Document[]) => void;\n  selectedDocumentType?: string | null;\n}\n\nexport const DocumentVault: React.FC<DocumentVaultProps> = ({ \n  isOpen, \n  onClose, \n  documents, \n  onDocumentsChange, \n  selectedDocumentType \n}) => {\n  const [isUploading, setIsUploading] = useState(false);\n  const [selectedDocument, setSelectedDocument] = useState<Document | null>(null);\n  const [showUploadForm, setShowUploadForm] = useState(false);\n  const [deleteConfirmId, setDeleteConfirmId] = useState<string | null>(null);\n  const [isDocumentViewOpen, setIsDocumentViewOpen] = useState(false);\n\n  // Upload form state\n  const [uploadForm, setUploadForm] = useState({\n    type: \"\",\n    expiryDate: \"\",\n    isSecure: true\n  });\n\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const { toast } = useToast();\n\n  // Get document status\n  const getDocumentStatus = (doc: Document) => {\n    if (!doc.expiryDate) return { status: 'no-expiry', color: 'text-gray-500', bgColor: 'bg-gray-100', icon: CheckCircle };\n\n    const daysUntilExpiry = Math.ceil((doc.expiryDate.getTime() - new Date().getTime()) / (1000 * 60 * 60 * 24));\n\n    if (daysUntilExpiry <= 0) {\n      return { status: 'expired', color: 'text-red-600', bgColor: 'bg-red-50', icon: AlertTriangle };\n    } else if (daysUntilExpiry <= 30) {\n      return { status: 'expiring', color: 'text-yellow-600', bgColor: 'bg-yellow-50', icon: AlertTriangle };\n    } else {\n      return { status: 'valid', color: 'text-green-600', bgColor: 'bg-green-50', icon: CheckCircle };\n    }\n  };\n\n  const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const files = event.target.files;\n    if (!files || files.length === 0) return;\n\n    const file = files[0];\n\n    // Validate file size (max 10MB)\n    if (file.size > 10 * 1024 * 1024) {\n      toast({\n        title: \"File too large\",\n        description: \"Please select a file smaller than 10MB.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setIsUploading(true);\n\n    try {\n      // Simulate file upload - in real app this would upload to server\n      const newDocument: Document = {\n        id: Math.random().toString(36).substr(2, 9),\n        name: file.name,\n        type: uploadForm.type,\n        uploadDate: new Date(),\n        expiryDate: uploadForm.expiryDate ? new Date(uploadForm.expiryDate) : undefined,\n        size: file.size,\n        url: URL.createObjectURL(file),\n        isSecure: uploadForm.isSecure\n      };\n\n      onDocumentsChange([...documents, newDocument]);\n\n      toast({\n        title: \"Document uploaded\",\n        description: `${newDocument.name} has been securely stored in your vault.`,\n      });\n\n      // Reset form\n      setUploadForm({\n        type: \"\",\n        expiryDate: \"\",\n        isSecure: true\n      });\n      setShowUploadForm(false);\n\n    } catch (error) {\n      toast({\n        title: \"Upload failed\",\n        description: \"Failed to upload document. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsUploading(false);\n    }\n  };\n\n  const handleDeleteDocument = (docId: string) => {\n    onDocumentsChange(documents.filter(doc => doc.id !== docId));\n    setDeleteConfirmId(null);\n    toast({\n      title: \"Document deleted\",\n      description: \"Document has been permanently removed from your vault.\",\n    });\n  };\n\n  const handleViewDocument = (doc: Document) => {\n    setSelectedDocument(doc);\n    setIsDocumentViewOpen(true);\n  };\n\n  const formatFileSize = (bytes: number) => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  const formatDate = (date: Date) => {\n    return date.toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric'\n    });\n  };\n\n  return (\n    <>\n      {/* Main Vault Dialog */}\n      <Dialog open={isOpen} onOpenChange={onClose}>\n        <DialogContent className=\"w-[95vw] max-w-4xl max-h-[90vh] overflow-hidden flex flex-col mx-auto\">\n          <DialogHeader className=\"pb-4\">\n            <DialogTitle className=\"flex items-center gap-2 text-lg\">\n              <Shield className=\"h-5 w-5 text-blue-500\" />\n              Document Vault\n            </DialogTitle>\n            <DialogDescription className=\"text-sm\">\n              Securely store and manage your vehicle documents, licenses, and important paperwork.\n            </DialogDescription>\n          </DialogHeader>\n\n          <div className=\"flex-1 overflow-hidden flex flex-col\">\n            {/* Document Grid */}\n            <div className=\"flex-1 overflow-y-auto px-2 sm:px-0 pb-24\">\n              {documents.length === 0 ? (\n                <div className=\"text-center py-8 sm:py-12\">\n                  <Shield className=\"h-12 w-12 sm:h-16 sm:w-16 text-gray-300 mx-auto mb-4\" />\n                  <h3 className=\"text-base sm:text-lg font-semibold text-gray-900 mb-2\">\n                    Your vault is empty\n                  </h3>\n                  <p className=\"text-sm sm:text-base text-gray-500 px-4\">\n                    Upload your first document to get started with secure storage.\n                  </p>\n                </div>\n              ) : (\n                <div className=\"space-y-3\">\n                  {documents.map((doc) => {\n                    const docType = DOCUMENT_TYPES.find(type => type.key === doc.type);\n                    const statusInfo = getDocumentStatus(doc);\n\n                    return (\n                      <motion.div\n                        key={doc.id}\n                        initial={{ opacity: 0, y: 10 }}\n                        animate={{ opacity: 1, y: 0 }}\n                        transition={{ duration: 0.2 }}\n                      >\n                        <Card className={`transition-all duration-200 hover:shadow-md ${statusInfo.bgColor} rounded-2xl sm:rounded-full`}>\n                          <CardContent className=\"p-3 sm:p-4\">\n                            {/* Mobile: Stack vertically, Desktop: Horizontal */}\n                            <div className=\"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4\">\n                              {/* Document info section */}\n                              <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n                                <div className={`w-10 h-10 sm:w-12 sm:h-12 rounded-full ${docType?.color || 'bg-gray-500'} flex items-center justify-center text-white text-base sm:text-lg shrink-0`}>\n                                  {docType?.icon || 'üìÑ'}\n                                </div>\n                                <div className=\"min-w-0 flex-1\">\n                                  <h4 className=\"font-semibold text-gray-900 truncate text-sm sm:text-base\">\n                                    {doc.name}\n                                  </h4>\n                                  <p className=\"text-xs sm:text-sm text-gray-500 truncate\">\n                                    {docType?.name || 'Document'} ‚Ä¢ {formatFileSize(doc.size)}\n                                  </p>\n                                </div>\n                              </div>\n\n                              {/* Status and actions section */}\n                              <div className=\"flex items-center justify-between sm:justify-end gap-3 sm:gap-4 flex-wrap\">\n                                {/* Expiry status */}\n                                {doc.expiryDate && (\n                                  <div className=\"flex items-center gap-2\">\n                                    <span className=\"text-xs text-gray-500 font-medium\">\n                                      {statusInfo.status === 'expired' ? 'Expired' : 'Expires'}\n                                    </span>\n                                    <statusInfo.icon className={`h-3 w-3 ${statusInfo.color}`} />\n                                    <span className={`text-xs font-medium ${statusInfo.color}`}>\n                                      {formatDate(doc.expiryDate)}\n                                    </span>\n                                  </div>\n                                )}\n\n                                {/* No expiry status */}\n                                {!doc.expiryDate && (\n                                  <div className=\"flex items-center gap-1 px-2 py-1 rounded-full bg-gray-100\">\n                                    <CheckCircle className=\"h-3 w-3 text-gray-500\" />\n                                    <span className=\"text-xs font-medium text-gray-500\">No Expiry</span>\n                                  </div>\n                                )}\n\n                                {/* Actions */}\n                                <div className=\"flex gap-2\">\n                                  <Button\n                                    size=\"sm\"\n                                    variant=\"outline\"\n                                    onClick={() => handleViewDocument(doc)}\n                                    className=\"h-8 px-2 sm:px-3 rounded-full text-xs sm:text-sm\"\n                                  >\n                                    <Eye className=\"h-3 w-3 sm:mr-1\" />\n                                    <span className=\"hidden sm:inline\">View</span>\n                                  </Button>\n                                  <Button\n                                    size=\"sm\"\n                                    variant=\"outline\"\n                                    onClick={() => setDeleteConfirmId(doc.id)}\n                                    className=\"h-8 px-2 rounded-full text-red-600 hover:text-red-700 hover:bg-red-50\"\n                                  >\n                                    <Trash2 className=\"h-3 w-3\" />\n                                  </Button>\n                                </div>\n                              </div>\n                            </div>\n                          </CardContent>\n                        </Card>\n                      </motion.div>\n                    );\n                  })}\n                </div>\n              )}\n            </div>\n\n            {/* Floating Add Document Button */}\n            <div className=\"absolute bottom-6 left-1/2 transform -translate-x-1/2\">\n              <Button \n                onClick={() => setShowUploadForm(true)} \n                className=\"rounded-full bg-[#FF3B30] hover:bg-[#FF3B30]/90 shadow-lg hover:shadow-xl transition-all duration-300 px-4 py-2 sm:px-6 sm:py-3 text-sm sm:text-base\"\n              >\n                <Plus className=\"h-4 w-4 mr-1 sm:mr-2\" />\n                New Document\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      {/* Upload Form Dialog */}\n      <Dialog open={showUploadForm} onOpenChange={setShowUploadForm}>\n        <DialogContent className=\"w-[95vw] max-w-md mx-auto max-h-[90vh] overflow-y-auto\">\n          <DialogHeader className=\"pb-4\">\n            <DialogTitle className=\"text-lg\">Upload Document</DialogTitle>\n            <DialogDescription className=\"text-sm\">\n              Add a new document to your secure vault.\n            </DialogDescription>\n          </DialogHeader>\n\n          <div className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"document-type\" className=\"text-sm font-medium\">Document Type</Label>\n              <Select value={uploadForm.type} onValueChange={(value) => setUploadForm(prev => ({ ...prev, type: value }))}>\n                <SelectTrigger className=\"h-11 text-base rounded-full\">\n                  <SelectValue placeholder=\"Select document type...\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {DOCUMENT_TYPES.map(type => (\n                    <SelectItem key={type.key} value={type.key} className=\"text-base py-3\">\n                      {type.icon} {type.name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"expiry-date\" className=\"text-sm font-medium\">Expiry Date (Optional)</Label>\n              <Input\n                id=\"expiry-date\"\n                type=\"date\"\n                value={uploadForm.expiryDate}\n                onChange={(e) => setUploadForm(prev => ({ ...prev, expiryDate: e.target.value }))}\n                className=\"h-11 text-base rounded-full\"\n              />\n            </div>\n\n            {/* File Upload */}\n            <div className=\"space-y-2\">\n              <Label className=\"text-sm font-medium\">Select File</Label>\n              <div>\n                <Button\n                  onClick={() => fileInputRef.current?.click()}\n                  variant=\"outline\"\n                  className=\"w-full h-12 text-base rounded-full\"\n                  disabled={isUploading || !uploadForm.type}\n                >\n                  {isUploading ? (\n                    <>\n                      <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-900 mr-2\"></div>\n                      Uploading...\n                    </>\n                  ) : (\n                    <>\n                      <Upload className=\"h-5 w-5 mr-2\" />\n                      Choose File\n                    </>\n                  )}\n                </Button>\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  onChange={handleFileUpload}\n                  accept=\".pdf,.jpg,.jpeg,.png,.doc,.docx\"\n                  className=\"hidden\"\n                />\n              </div>\n              <p className=\"text-xs text-gray-500\">\n                Supported: PDF, JPG, PNG, DOC, DOCX (Max 10MB)\n              </p>\n            </div>\n\n            <div className=\"flex flex-col-reverse sm:flex-row gap-3 pt-4\">\n              <Button \n                variant=\"outline\" \n                onClick={() => setShowUploadForm(false)}\n                className=\"h-11 text-base rounded-full\"\n              >\n                Cancel\n              </Button>\n              <Button \n                onClick={() => fileInputRef.current?.click()}\n                disabled={isUploading || !uploadForm.type}\n                className=\"h-11 text-base flex-1 rounded-full\"\n              >\n                {isUploading ? 'Uploading...' : 'Upload Document'}\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      {/* Document View Dialog */}\n      <Dialog open={isDocumentViewOpen} onOpenChange={setIsDocumentViewOpen}>\n        <DialogContent className=\"max-w-5xl max-h-[90vh] flex flex-col\">\n          {selectedDocument && (\n            <>\n              <DialogHeader className=\"pb-4\">\n                <DialogTitle className=\"flex items-center gap-2\">\n                  <FileText className=\"h-5 w-5\" />\n                  {selectedDocument.name}\n                </DialogTitle>\n                <DialogDescription className=\"flex items-center justify-between\">\n                  <span>{DOCUMENT_TYPES.find(type => type.key === selectedDocument.type)?.name}</span>\n                  <div className=\"flex gap-2\">\n                    <Button \n                      variant=\"outline\" \n                      size=\"sm\"\n                      onClick={() => {\n                        const link = document.createElement('a');\n                        link.href = selectedDocument.url;\n                        link.download = selectedDocument.name;\n                        link.click();\n                      }}\n                    >\n                      <Download className=\"h-4 w-4 mr-2\" />\n                      Download\n                    </Button>\n                  </div>\n                </DialogDescription>\n              </DialogHeader>\n\n              <div className=\"flex-1 bg-gray-50 rounded-lg overflow-hidden\">\n                {selectedDocument.url.toLowerCase().endsWith('.pdf') ? (\n                  <iframe\n                    src={selectedDocument.url}\n                    className=\"w-full h-[60vh] border-0\"\n                    title={selectedDocument.name}\n                  />\n                ) : selectedDocument.url.toLowerCase().match(/\\.(jpg|jpeg|png|gif|bmp|webp)$/i) ? (\n                  <div className=\"flex items-center justify-center h-[60vh] p-4\">\n                    <img \n                      src={selectedDocument.url} \n                      alt={selectedDocument.name}\n                      className=\"max-w-full max-h-full object-contain rounded-lg shadow-lg\"\n                    />\n                  </div>\n                ) : (\n                  <div className=\"flex flex-col items-center justify-center h-[60vh] p-8\">\n                    <FileText className=\"h-16 w-16 text-gray-300 mb-4\" />\n                    <p className=\"text-gray-600 mb-2 text-center\">\n                      Preview not available for this file type\n                    </p>\n                    <p className=\"text-sm text-gray-500 mb-4\">\n                      File type: {selectedDocument.name.split('.').pop()?.toUpperCase() || 'Unknown'}\n                    </p>\n                    <Button \n                      variant=\"outline\"\n                      onClick={() => {\n                        const link = document.createElement('a');\n                        link.href = selectedDocument.url;\n                        link.download = selectedDocument.name;\n                        link.click();\n                      }}\n                    >\n                      <Download className=\"h-4 w-4 mr-2\" />\n                      Download to View\n                    </Button>\n                  </div>\n                )}\n              </div>\n            </>\n          )}\n        </DialogContent>\n      </Dialog>\n\n      {/* Delete Confirmation Dialog */}\n      <AlertDialog open={!!deleteConfirmId} onOpenChange={() => setDeleteConfirmId(null)}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Delete Document</AlertDialogTitle>\n            <AlertDialogDescription>\n              Are you sure you want to permanently delete this document? This action cannot be undone.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={() => deleteConfirmId && handleDeleteDocument(deleteConfirmId)}\n              className=\"bg-red-600 hover:bg-red-700\"\n            >\n              Delete\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </>\n  );\n};\n\nexport default DocumentVault;","size_bytes":20834},"client/src/pages/Squad.tsx":{"content":"import { useState } from \"react\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Calendar, MapPin, Clock, Users, MessageCircle, Trophy, Route, Settings, Plus, Search, Bell, Phone, Shield, Camera, Navigation } from \"lucide-react\";\nimport { motion } from \"framer-motion\";\n\nconst Squad = () => {\n  const [selectedGroup, setSelectedGroup] = useState(1);\n  const [isCreateEventDialogOpen, setIsCreateEventDialogOpen] = useState(false);\n  const [isCreateGroupDialogOpen, setIsCreateGroupDialogOpen] = useState(false);\n  const [isEmergencyAlertOpen, setIsEmergencyAlertOpen] = useState(false);\n  const [showQuickActions, setShowQuickActions] = useState(false);\n\n  // Mock data for demonstration\n  const groups = [\n    { id: 1, name: \"Coastal Riders\", members: 24, nextRide: \"Tomorrow 8:00 AM\", avatar: \"CR\" },\n    { id: 2, name: \"Mountain Hawks\", members: 18, nextRide: \"Sunday 7:00 AM\", avatar: \"MH\" },\n    { id: 3, name: \"Speed Demons\", members: 32, nextRide: \"Friday 6:30 PM\", avatar: \"SD\" }\n  ];\n\n  const upcomingEvents = [\n    {\n      id: 1,\n      title: \"Pacific Coast Highway Ride\",\n      date: \"Tomorrow\",\n      time: \"8:00 AM\",\n      distance: \"65 km\",\n      pace: \"Moderate\",\n      terrain: \"Road\",\n      rsvps: 8,\n      maxParticipants: 12,\n      meetingPoint: \"Pier 39 Parking\"\n    },\n    {\n      id: 2,\n      title: \"Golden Gate Park Loop\",\n      date: \"Sunday\",\n      time: \"7:00 AM\", \n      distance: \"25 km\",\n      pace: \"Easy\",\n      terrain: \"Mixed\",\n      rsvps: 6,\n      maxParticipants: 10,\n      meetingPoint: \"Conservatory Entrance\"\n    }\n  ];\n\n  const feedPosts = [\n    {\n      id: 1,\n      author: \"Alex Chen\",\n      avatar: \"AC\",\n      time: \"2h ago\",\n      type: \"route\",\n      content: \"Check out this amazing route I discovered! Hidden gems through Marin County.\",\n      attachments: [\"route.gpx\"],\n      likes: 12,\n      comments: 3\n    },\n    {\n      id: 2,\n      author: \"Sarah Miller\",\n      avatar: \"SM\", \n      time: \"4h ago\",\n      type: \"photo\",\n      content: \"Perfect weather for today's ride! Who else is out there?\",\n      attachments: [\"photo1.jpg\", \"photo2.jpg\"],\n      likes: 18,\n      comments: 7\n    },\n    {\n      id: 3,\n      author: \"Mike Rodriguez\",\n      avatar: \"MR\",\n      time: \"1d ago\",\n      type: \"tip\",\n      content: \"Pro tip: Always carry a spare tube and CO2 cartridge. Saved my ride today when I got a flat 20km from home!\",\n      likes: 25,\n      comments: 12\n    }\n  ];\n\n  const leaderboard = [\n    { rank: 1, name: \"Sarah Miller\", avatar: \"SM\", stat: \"482 km\", badge: \"üëë\" },\n    { rank: 2, name: \"Alex Chen\", avatar: \"AC\", stat: \"445 km\", badge: \"ü•à\" },\n    { rank: 3, name: \"Mike Rodriguez\", avatar: \"MR\", stat: \"423 km\", badge: \"ü•â\" },\n    { rank: 4, name: \"You\", avatar: \"YU\", stat: \"387 km\", badge: \"\" },\n  ];\n\n  const riders = [\n    { id: 1, name: \"Sarah Miller\", avatar: \"SM\", style: \"Sprinter\", skill: \"Advanced\", status: \"online\", lastRide: \"2h ago\" },\n    { id: 2, name: \"Alex Chen\", avatar: \"AC\", style: \"Climber\", skill: \"Expert\", status: \"riding\", lastRide: \"Active\" },\n    { id: 3, name: \"Mike Rodriguez\", avatar: \"MR\", style: \"Endurance\", skill: \"Intermediate\", status: \"offline\", lastRide: \"1d ago\" },\n  ];\n\n  const messages = [\n    { id: 1, sender: \"Sarah Miller\", avatar: \"SM\", message: \"Anyone up for an early morning ride tomorrow?\", time: \"5 min ago\", type: \"text\" },\n    { id: 2, sender: \"Alex Chen\", avatar: \"AC\", message: \"I'm in! What route are you thinking?\", time: \"3 min ago\", type: \"text\" },\n    { id: 3, sender: \"Mike Rodriguez\", avatar: \"MR\", message: \"Count me in too. I know a great coffee stop midway.\", time: \"1 min ago\", type: \"text\" },\n  ];\n\n  const handleQuickActionToggle = () => {\n    setShowQuickActions(!showQuickActions);\n  };\n\n  const handleNewGroup = () => {\n    setIsCreateGroupDialogOpen(true);\n    setShowQuickActions(false);\n  };\n\n  const handleNewEvent = () => {\n    setIsCreateEventDialogOpen(true);\n    setShowQuickActions(false);\n  };\n\n  const handleNewRide = () => {\n    // Implementation for creating new ride\n    console.log(\"Creating new ride...\");\n    setShowQuickActions(false);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100\">\n      <div className=\"container mx-auto px-4 py-6\">\n        {/* Header */}\n        <div className=\"flex flex-col lg:flex-row lg:items-center justify-between mb-6\">\n          <div className=\"text-center lg:text-left\">\n            <div className=\"flex justify-center lg:justify-start items-center gap-3 mb-1\">\n              <h1 className=\"text-4xl font-bold text-gray-900\" style={{ fontFamily: 'Kanit, sans-serif' }}>YOUR SQUAD</h1>\n            </div>\n            <p className=\"text-gray-600\">Connect, ride, and conquer together</p>\n          </div>\n        </div>\n\n        {/* Quick Actions Bar */}\n        <div className=\"bg-white rounded-full shadow-sm border p-2 mb-6\">\n          <div className=\"flex items-center justify-between gap-1\">\n            <Button variant=\"ghost\" size=\"sm\" className=\"rounded-full px-2 py-1 h-8 text-xs flex-1 min-w-0\">\n              <Shield className=\"w-3 h-3 mr-1\" />\n              <span className=\"hidden sm:inline\">Emergency</span>\n              <span className=\"sm:hidden\">SOS</span>\n            </Button>\n            <Button variant=\"ghost\" size=\"sm\" className=\"rounded-full px-2 py-1 h-8 text-xs flex-1 min-w-0\">\n              <Phone className=\"w-3 h-3 mr-1\" />\n              <span className=\"hidden sm:inline\">Voice</span>\n              <span className=\"sm:hidden\">Call</span>\n            </Button>\n            <Button variant=\"ghost\" size=\"sm\" className=\"rounded-full px-2 py-1 h-8 text-xs flex-1 min-w-0\">\n              <MapPin className=\"w-3 h-3 mr-1\" />\n              <span className=\"hidden sm:inline\">Location</span>\n              <span className=\"sm:hidden\">GPS</span>\n            </Button>\n            <Button variant=\"ghost\" size=\"sm\" className=\"rounded-full px-2 py-1 h-8 text-xs flex-1 min-w-0\">\n              <Camera className=\"w-3 h-3 mr-1\" />\n              <span className=\"hidden sm:inline\">Photo</span>\n              <span className=\"sm:hidden\">Pic</span>\n            </Button>\n            <Button variant=\"ghost\" size=\"sm\" className=\"rounded-full px-2 py-1 h-8 text-xs flex-1 min-w-0\">\n              <Navigation className=\"w-3 h-3 mr-1\" />\n              <span className=\"hidden sm:inline\">Route</span>\n              <span className=\"sm:hidden\">Nav</span>\n            </Button>\n          </div>\n        </div>\n\n        {/* Quick Stats Cards - Pill-shaped Layout */}\n        <div className=\"bg-white rounded-full shadow-sm border p-3 mb-6\">\n          <div className=\"flex justify-between items-center gap-3\">\n            <div className=\"text-center min-w-0 flex-1\">\n              <p className=\"text-xs font-medium text-gray-500 mb-1\">RIDERS</p>\n              <p className=\"text-lg font-bold text-gray-900\">3</p>\n            </div>\n            <div className=\"text-center min-w-0 flex-1\">\n              <p className=\"text-xs font-medium text-gray-500 mb-1\">RANK</p>\n              <p className=\"text-lg font-bold text-gray-900\">#4</p>\n            </div>\n            <div className=\"text-center min-w-0 flex-1\">\n              <p className=\"text-xs font-medium text-gray-500 mb-1\">THIS MONTH</p>\n              <p className=\"text-lg font-bold text-gray-900\">387km</p>\n            </div>\n          </div>\n        </div>\n\n        {/* Main Content */}\n        <Tabs defaultValue=\"feed\" className=\"space-y-6\">\n          <TabsList className=\"grid w-full grid-cols-6 bg-gray-100 rounded-full p-1\">\n            <TabsTrigger value=\"feed\" className=\"rounded-full data-[state=active]:bg-white data-[state=active]:shadow-sm\">Feed</TabsTrigger>\n            <TabsTrigger value=\"events\" className=\"rounded-full data-[state=active]:bg-white data-[state=active]:shadow-sm\">Events</TabsTrigger>\n            <TabsTrigger value=\"riders\" className=\"rounded-full data-[state=active]:bg-white data-[state=active]:shadow-sm\">Riders</TabsTrigger>\n            <TabsTrigger value=\"leaderboard\" className=\"rounded-full data-[state=active]:bg-white data-[state=active]:shadow-sm\">Stats</TabsTrigger>\n            <TabsTrigger value=\"routes\" className=\"rounded-full data-[state=active]:bg-white data-[state=active]:shadow-sm\">Routes</TabsTrigger>\n            <TabsTrigger value=\"chat\" className=\"rounded-full data-[state=active]:bg-white data-[state=active]:shadow-sm\">Chat</TabsTrigger>\n          </TabsList>\n\n          {/* Feed Tab */}\n          <TabsContent value=\"feed\" className=\"space-y-6\">\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n              <div className=\"lg:col-span-2\">\n                <Card className=\"mb-6 rounded-2xl border-0 shadow-sm bg-gradient-to-r from-blue-50 to-purple-50\">\n                  <CardHeader>\n                    <CardTitle className=\"flex items-center gap-2\">\n                      <MessageCircle className=\"w-5 h-5\" />\n                      Share with your squad\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"flex gap-3\">\n                      <Avatar>\n                        <AvatarFallback>YU</AvatarFallback>\n                      </Avatar>\n                      <div className=\"flex-1\">\n                        <Input placeholder=\"Share a tip, route, or photo...\" className=\"mb-3 rounded-full border-0 bg-white/80\" />\n                        <div className=\"flex gap-2\">\n                          <Button size=\"sm\" variant=\"outline\" className=\"rounded-full border-0 bg-white/60 hover:bg-white\">\n                            <Camera className=\"w-4 h-4 mr-2\" />\n                            Photo\n                          </Button>\n                          <Button size=\"sm\" variant=\"outline\" className=\"rounded-full border-0 bg-white/60 hover:bg-white\">\n                            <Navigation className=\"w-4 h-4 mr-2\" />\n                            Route\n                          </Button>\n                          <Button size=\"sm\" className=\"rounded-full bg-blue-600 hover:bg-blue-700\">Post</Button>\n                        </div>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n\n                <div className=\"space-y-4\">\n                  {feedPosts.map((post) => (\n                    <Card key={post.id} className=\"rounded-2xl border-0 shadow-sm hover:shadow-md transition-shadow\">\n                      <CardContent className=\"p-6\">\n                        <div className=\"flex items-start gap-3\">\n                          <Avatar>\n                            <AvatarFallback>{post.avatar}</AvatarFallback>\n                          </Avatar>\n                          <div className=\"flex-1\">\n                            <div className=\"flex items-center justify-between mb-2\">\n                              <div className=\"flex items-center gap-2\">\n                                <span className=\"font-semibold\">{post.author}</span>\n                                <Badge \n                                  variant={post.type === \"route\" ? \"default\" : post.type === \"photo\" ? \"secondary\" : \"outline\"}\n                                  className=\"rounded-full\"\n                                >\n                                  {post.type}\n                                </Badge>\n                              </div>\n                              <span className=\"text-sm text-gray-500\">{post.time}</span>\n                            </div>\n                            <p className=\"text-gray-800 mb-3\">{post.content}</p>\n                            {post.attachments && (\n                              <div className=\"flex gap-2 mb-3\">\n                                {post.attachments.map((attachment, idx) => (\n                                  <Badge key={idx} variant=\"outline\" className=\"rounded-full\">{attachment}</Badge>\n                                ))}\n                              </div>\n                            )}\n                            <div className=\"flex items-center gap-4 text-sm text-gray-500\">\n                              <span>{post.likes} likes</span>\n                              <span>{post.comments} comments</span>\n                            </div>\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              </div>\n\n              {/* Sidebar */}\n              <div className=\"space-y-6\">\n                <Card className=\"rounded-2xl border-0 shadow-sm\">\n                  <CardHeader>\n                    <CardTitle className=\"text-lg\">Your Groups</CardTitle>\n                  </CardHeader>\n                  <CardContent className=\"space-y-3\">\n                    {groups.map((group) => (\n                      <div key={group.id} className=\"flex items-center justify-between p-3 rounded-2xl bg-gray-50 hover:bg-gray-100 cursor-pointer transition-colors\">\n                        <div className=\"flex items-center gap-3\">\n                          <Avatar className=\"w-8 h-8\">\n                            <AvatarFallback className=\"text-xs\">{group.avatar}</AvatarFallback>\n                          </Avatar>\n                          <div>\n                            <p className=\"font-medium text-sm\">{group.name}</p>\n                            <p className=\"text-xs text-gray-500\">{group.members} members</p>\n                          </div>\n                        </div>\n                        <Badge variant=\"outline\" className=\"text-xs rounded-full\">{group.nextRide}</Badge>\n                      </div>\n                    ))}\n                    <Button variant=\"outline\" size=\"sm\" className=\"w-full rounded-full border-dashed\">\n                      <Plus className=\"w-4 h-4 mr-2\" />\n                      Join Group\n                    </Button>\n                  </CardContent>\n                </Card>\n\n                <Card className=\"rounded-2xl border-0 shadow-sm bg-gradient-to-b from-orange-50 to-red-50\">\n                  <CardHeader>\n                    <CardTitle className=\"text-lg text-orange-800\">Safety First</CardTitle>\n                  </CardHeader>\n                  <CardContent className=\"space-y-2\">\n                    <Button variant=\"outline\" size=\"sm\" className=\"w-full justify-start rounded-full border-orange-200 bg-white/60 hover:bg-white text-orange-700\">\n                      <Shield className=\"w-4 h-4 mr-2\" />\n                      Emergency Alert\n                    </Button>\n                    <Button variant=\"outline\" size=\"sm\" className=\"w-full justify-start rounded-full border-orange-200 bg-white/60 hover:bg-white text-orange-700\">\n                      <Phone className=\"w-4 h-4 mr-2\" />\n                      Emergency Contact\n                    </Button>\n                    <Button variant=\"outline\" size=\"sm\" className=\"w-full justify-start rounded-full border-orange-200 bg-white/60 hover:bg-white text-orange-700\">\n                      <MapPin className=\"w-4 h-4 mr-2\" />\n                      Live Location\n                    </Button>\n                  </CardContent>\n                </Card>\n              </div>\n            </div>\n          </TabsContent>\n\n          {/* Events Tab */}\n          <TabsContent value=\"events\" className=\"space-y-6\">\n            <div className=\"flex items-center justify-between\">\n              <h2 className=\"text-2xl font-semibold\">Upcoming Events</h2>\n              <Button className=\"rounded-full bg-blue-600 hover:bg-blue-700 text-white\">\n                <Plus className=\"w-4 h-4 mr-2\" />\n                Create Event\n              </Button>\n            </div>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              {upcomingEvents.map((event) => (\n                <Card key={event.id} className=\"hover:shadow-lg transition-shadow rounded-2xl border-0 shadow-sm\">\n                  <CardHeader>\n                    <div className=\"flex items-start justify-between\">\n                      <div>\n                        <CardTitle className=\"text-lg\">{event.title}</CardTitle>\n                        <CardDescription className=\"flex items-center gap-2 mt-2\">\n                          <Clock className=\"w-4 h-4\" />\n                          {event.date} at {event.time}\n                        </CardDescription>\n                      </div>\n                      <Badge \n                        variant={event.pace === \"Easy\" ? \"secondary\" : event.pace === \"Moderate\" ? \"default\" : \"destructive\"}\n                        className=\"rounded-full\"\n                      >\n                        {event.pace}\n                      </Badge>\n                    </div>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"space-y-3\">\n                      <div className=\"flex items-center gap-4 text-sm\">\n                        <span className=\"flex items-center gap-1\">\n                          <Route className=\"w-4 h-4\" />\n                          {event.distance}\n                        </span>\n                        <span className=\"flex items-center gap-1\">\n                          <MapPin className=\"w-4 h-4\" />\n                          {event.terrain}\n                        </span>\n                        <span className=\"flex items-center gap-1\">\n                          <Users className=\"w-4 h-4\" />\n                          {event.rsvps}/{event.maxParticipants}\n                        </span>\n                      </div>\n                      <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                        <MapPin className=\"w-4 h-4\" />\n                        Meeting: {event.meetingPoint}\n                      </div>\n                      <div className=\"flex gap-2 pt-2\">\n                        <Button size=\"sm\" className=\"flex-1 rounded-full bg-green-600 hover:bg-green-700\">RSVP Going</Button>\n                        <Button size=\"sm\" variant=\"outline\" className=\"rounded-full\">Maybe</Button>\n                        <Button size=\"sm\" variant=\"outline\" className=\"rounded-full\">\n                          <MessageCircle className=\"w-4 h-4\" />\n                        </Button>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </TabsContent>\n\n          {/* Riders Tab */}\n          <TabsContent value=\"riders\" className=\"space-y-6\">\n            <div className=\"flex items-center justify-between\">\n              <h2 className=\"text-2xl font-semibold\">Squad Members</h2>\n              <div className=\"flex gap-2\">\n                <div className=\"relative\">\n                  <Search className=\"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\n                  <Input placeholder=\"Search riders...\" className=\"pl-10 w-64 rounded-full\" />\n                </div>\n                <Button variant=\"outline\" className=\"rounded-full\">\n                  <Settings className=\"w-4 h-4 mr-2\" />\n                  Filter\n                </Button>\n              </div>\n            </div>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n              {riders.map((rider) => (\n                <Card key={rider.id} className=\"hover:shadow-lg transition-shadow rounded-2xl border-0 shadow-sm\">\n                  <CardContent className=\"p-6\">\n                    <div className=\"flex items-start gap-3\">\n                      <div className=\"relative\">\n                        <Avatar>\n                          <AvatarFallback>{rider.avatar}</AvatarFallback>\n                        </Avatar>\n                        <div className={`absolute -bottom-1 -right-1 w-3 h-3 rounded-full border-2 border-white ${\n                          rider.status === \"online\" ? \"bg-green-500\" : rider.status === \"riding\" ? \"bg-blue-500\" : \"bg-gray-400\"\n                        }`} />\n                      </div>\n                      <div className=\"flex-1\">\n                        <h3 className=\"font-semibold\">{rider.name}</h3>\n                        <div className=\"flex flex-wrap gap-1 mt-1\">\n                          <Badge variant=\"outline\" className=\"text-xs rounded-full\">{rider.style}</Badge>\n                          <Badge variant=\"secondary\" className=\"text-xs rounded-full\">{rider.skill}</Badge>\n                        </div>\n                        <p className=\"text-sm text-gray-500 mt-2\">Last ride: {rider.lastRide}</p>\n                        <div className=\"flex gap-2 mt-3\">\n                          <Button size=\"sm\" variant=\"outline\" className=\"flex-1 rounded-full\">\n                            <MessageCircle className=\"w-4 h-4 mr-1\" />\n                            Chat\n                          </Button>\n                          <Button size=\"sm\" variant=\"outline\" className=\"rounded-full\">\n                            <Users className=\"w-4 h-4\" />\n                          </Button>\n                        </div>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </TabsContent>\n\n          {/* Leaderboard Tab */}\n          <TabsContent value=\"leaderboard\" className=\"space-y-6\">\n            <div className=\"flex items-center justify-between\">\n              <h2 className=\"text-2xl font-semibold\">This Month's Leaderboard</h2>\n              <div className=\"flex gap-2 bg-gray-100 rounded-full p-1\">\n                <Button variant=\"outline\" size=\"sm\" className=\"rounded-full border-0 bg-transparent\">Weekly</Button>\n                <Button size=\"sm\" className=\"rounded-full bg-white shadow-sm\">Monthly</Button>\n                <Button variant=\"outline\" size=\"sm\" className=\"rounded-full border-0 bg-transparent\">All Time</Button>\n              </div>\n            </div>\n            \n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              <Card className=\"rounded-2xl border-0 shadow-sm\">\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Trophy className=\"w-5 h-5\" />\n                    Distance Leaders\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-3\">\n                    {leaderboard.map((rider) => (\n                      <div key={rider.rank} className={`flex items-center justify-between p-3 rounded-2xl ${\n                        rider.name === \"You\" ? \"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200\" : \"bg-gray-50\"\n                      }`}>\n                        <div className=\"flex items-center gap-3\">\n                          <span className=\"text-lg font-bold w-6\">{rider.badge || `#${rider.rank}`}</span>\n                          <Avatar className=\"w-8 h-8\">\n                            <AvatarFallback className=\"text-xs\">{rider.avatar}</AvatarFallback>\n                          </Avatar>\n                          <span className={`font-medium ${rider.name === \"You\" ? \"text-blue-700\" : \"\"}`}>\n                            {rider.name}\n                          </span>\n                        </div>\n                        <span className=\"font-semibold text-gray-900\">{rider.stat}</span>\n                      </div>\n                    ))}\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"rounded-2xl border-0 shadow-sm bg-gradient-to-b from-green-50 to-blue-50\">\n                <CardHeader>\n                  <CardTitle className=\"text-green-800\">Your Stats</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-4\">\n                    <div className=\"flex justify-between items-center p-3 bg-white/60 rounded-2xl\">\n                      <span>Total Distance</span>\n                      <span className=\"font-semibold\">387 km</span>\n                    </div>\n                    <div className=\"flex justify-between items-center p-3 bg-white/60 rounded-2xl\">\n                      <span>Rides Completed</span>\n                      <span className=\"font-semibold\">12</span>\n                    </div>\n                    <div className=\"flex justify-between items-center p-3 bg-white/60 rounded-2xl\">\n                      <span>Avg. Speed</span>\n                      <span className=\"font-semibold\">25.3 km/h</span>\n                    </div>\n                    <div className=\"flex justify-between items-center p-3 bg-white/60 rounded-2xl\">\n                      <span>Max Speed</span>\n                      <span className=\"font-semibold\">48.7 km/h</span>\n                    </div>\n                    <div className=\"flex justify-between items-center p-3 bg-white/60 rounded-2xl\">\n                      <span>Elevation Gained</span>\n                      <span className=\"font-semibold\">2,843 m</span>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </TabsContent>\n\n          {/* Routes Tab */}\n          <TabsContent value=\"routes\" className=\"space-y-6\">\n            <div className=\"flex items-center justify-between\">\n              <h2 className=\"text-2xl font-semibold\">Route Library</h2>\n              <Button className=\"rounded-full bg-blue-600 hover:bg-blue-700 text-white\">\n                <Plus className=\"w-4 h-4 mr-2\" />\n                Upload Route\n              </Button>\n            </div>\n            \n            <Card className=\"rounded-2xl border-0 shadow-sm bg-gradient-to-b from-blue-50 to-purple-50\">\n              <CardContent className=\"text-center py-12\">\n                <div className=\"bg-white/60 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4\">\n                  <Navigation className=\"w-8 h-8 text-blue-600\" />\n                </div>\n                <h3 className=\"text-lg font-semibold text-gray-700 mb-2\">Route sharing coming soon!</h3>\n                <p className=\"text-gray-500 mb-6\">Upload GPX files, discover hidden gems, and share your favorite routes with the squad.</p>\n                <Button variant=\"outline\" className=\"rounded-full border-blue-200 text-blue-700 hover:bg-white\">\n                  <Navigation className=\"w-4 h-4 mr-2\" />\n                  Explore Sample Routes\n                </Button>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          {/* Chat Tab */}\n          <TabsContent value=\"chat\" className=\"space-y-6\">\n            <Card className=\"h-96 rounded-2xl border-0 shadow-sm\">\n              <CardHeader>\n                <CardTitle className=\"flex items-center justify-between\">\n                  <span>Group Chat - Coastal Riders</span>\n                  <div className=\"flex gap-2\">\n                    <Button size=\"sm\" variant=\"outline\" className=\"rounded-full\">\n                      <Phone className=\"w-4 h-4\" />\n                    </Button>\n                    <Button size=\"sm\" variant=\"outline\" className=\"rounded-full bg-red-50 text-red-600 border-red-200 hover:bg-red-100\">\n                      <Shield className=\"w-4 h-4\" />\n                    </Button>\n                  </div>\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"flex flex-col h-full\">\n                <ScrollArea className=\"flex-1 mb-4\">\n                  <div className=\"space-y-3\">\n                    {messages.map((msg) => (\n                      <div key={msg.id} className=\"flex items-start gap-3\">\n                        <Avatar className=\"w-8 h-8\">\n                          <AvatarFallback className=\"text-xs\">{msg.avatar}</AvatarFallback>\n                        </Avatar>\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-2 mb-1\">\n                            <span className=\"font-medium text-sm\">{msg.sender}</span>\n                            <span className=\"text-xs text-gray-500\">{msg.time}</span>\n                          </div>\n                          <div className=\"bg-gray-50 rounded-2xl p-3 max-w-xs\">\n                            <p className=\"text-sm text-gray-800\">{msg.message}</p>\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </ScrollArea>\n                <div className=\"flex gap-2\">\n                  <Input placeholder=\"Type a message...\" className=\"flex-1 rounded-full\" />\n                  <Button size=\"sm\" className=\"rounded-full bg-blue-600 hover:bg-blue-700\">Send</Button>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n        </Tabs>\n\n        {/* Floating Squad Actions */}\n        <div className=\"fixed bottom-6 right-6 z-50\">\n          {/* Quick Action Buttons - Show when expanded */}\n          {showQuickActions && (\n            <motion.div\n              className=\"absolute bottom-20 right-0 space-y-3\"\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: 20 }}\n            >\n              <motion.div whileHover={{ scale: 1.05 }} whileTap={{ scale: 0.95 }}>\n                <Button\n                  onClick={handleNewGroup}\n                  className=\"bg-purple-600 hover:bg-purple-700 text-white rounded-full w-12 h-12 shadow-lg p-0\"\n                  title=\"New Group\"\n                >\n                  <Users className=\"h-5 w-5\" />\n                </Button>\n              </motion.div>\n              \n              <motion.div whileHover={{ scale: 1.05 }} whileTap={{ scale: 0.95 }}>\n                <Button\n                  onClick={handleNewEvent}\n                  className=\"bg-blue-600 hover:bg-blue-700 text-white rounded-full w-12 h-12 shadow-lg p-0\"\n                  title=\"New Event\"\n                >\n                  <Calendar className=\"h-5 w-5\" />\n                </Button>\n              </motion.div>\n              \n              <motion.div whileHover={{ scale: 1.05 }} whileTap={{ scale: 0.95 }}>\n                <Button\n                  onClick={handleNewRide}\n                  className=\"bg-green-600 hover:bg-green-700 text-white rounded-full w-12 h-12 shadow-lg p-0\"\n                  title=\"New Ride\"\n                >\n                  <Route className=\"h-5 w-5\" />\n                </Button>\n              </motion.div>\n            </motion.div>\n          )}\n\n          {/* Main Action Button */}\n          <motion.div\n            className=\"group\"\n            initial={{ scale: 0 }}\n            animate={{ scale: 1 }}\n            whileHover={{ scale: 1.1 }}\n            whileTap={{ scale: 0.9 }}\n          >\n            <Button \n              onClick={handleQuickActionToggle}\n              className={`bg-[#FF3B30] hover:bg-[#FF3B30]/90 text-white rounded-full w-14 h-14 sm:w-16 sm:h-16 shadow-lg hover:shadow-xl transition-all duration-300 p-0 ${\n                showQuickActions ? 'rotate-45' : ''\n              }`}\n            >\n              <Plus className=\"h-6 w-6 sm:h-8 sm:w-8\" />\n            </Button>\n          </motion.div>\n        </div>\n\n        {/* Create Event Dialog */}\n        <Dialog open={isCreateEventDialogOpen} onOpenChange={setIsCreateEventDialogOpen}>\n          <DialogContent className=\"sm:max-w-md\">\n            <DialogHeader>\n              <DialogTitle>Create Squad Event</DialogTitle>\n              <DialogDescription>\n                Plan a new ride or meetup for your squad.\n              </DialogDescription>\n            </DialogHeader>\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"text-sm font-medium\">Event Name</label>\n                <Input placeholder=\"Weekend Mountain Ride\" />\n              </div>\n              <div>\n                <label className=\"text-sm font-medium\">Date & Time</label>\n                <Input type=\"datetime-local\" />\n              </div>\n              <div>\n                <label className=\"text-sm font-medium\">Meeting Point</label>\n                <Input placeholder=\"Pier 39 Parking Lot\" />\n              </div>\n              <div>\n                <label className=\"text-sm font-medium\">Route Distance</label>\n                <Input placeholder=\"45 km\" />\n              </div>\n              <div className=\"flex gap-2 pt-4\">\n                <Button onClick={() => setIsCreateEventDialogOpen(false)} variant=\"outline\" className=\"flex-1\">\n                  Cancel\n                </Button>\n                <Button onClick={() => setIsCreateEventDialogOpen(false)} className=\"flex-1 bg-blue-600 hover:bg-blue-700\">\n                  Create Event\n                </Button>\n              </div>\n            </div>\n          </DialogContent>\n        </Dialog>\n\n        {/* Create Group Dialog */}\n        <Dialog open={isCreateGroupDialogOpen} onOpenChange={setIsCreateGroupDialogOpen}>\n          <DialogContent className=\"sm:max-w-md rounded-3xl\">\n            <DialogHeader>\n              <DialogTitle className=\"text-center text-xl font-bold\">Create New Group</DialogTitle>\n              <DialogDescription className=\"text-center\">\n                Start a new riding group and invite members to join your adventures.\n              </DialogDescription>\n            </DialogHeader>\n            <div className=\"space-y-6 p-2\">\n              <div>\n                <label className=\"text-sm font-medium text-gray-700 mb-2 block\">Group Name</label>\n                <Input \n                  placeholder=\"Mountain Riders\" \n                  className=\"rounded-full h-12 border-2 focus:border-purple-400 transition-colors\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"text-sm font-medium text-gray-700 mb-2 block\">Description</label>\n                <textarea \n                  placeholder=\"A group for mountain biking enthusiasts who love challenging trails and scenic routes...\"\n                  className=\"w-full h-24 p-3 rounded-2xl border-2 focus:border-purple-400 transition-colors resize-none\"\n                />\n              </div>\n\n              <div>\n                <label className=\"text-sm font-medium text-gray-700 mb-3 block\">Group Type</label>\n                <div className=\"flex flex-wrap gap-2\">\n                  <Button variant=\"outline\" size=\"sm\" className=\"rounded-full border-2 hover:bg-purple-50 hover:border-purple-300\">\n                    Casual Rides\n                  </Button>\n                  <Button variant=\"outline\" size=\"sm\" className=\"rounded-full border-2 hover:bg-purple-50 hover:border-purple-300\">\n                    Racing\n                  </Button>\n                  <Button variant=\"outline\" size=\"sm\" className=\"rounded-full border-2 hover:bg-purple-50 hover:border-purple-300\">\n                    Touring\n                  </Button>\n                  <Button variant=\"outline\" size=\"sm\" className=\"rounded-full border-2 hover:bg-purple-50 hover:border-purple-300\">\n                    Off-Road\n                  </Button>\n                  <Button variant=\"outline\" size=\"sm\" className=\"rounded-full border-2 hover:bg-purple-50 hover:border-purple-300\">\n                    Urban\n                  </Button>\n                </div>\n              </div>\n\n              <div>\n                <label className=\"text-sm font-medium text-gray-700 mb-3 block\">Skill Level</label>\n                <div className=\"flex gap-2\">\n                  <Button variant=\"outline\" size=\"sm\" className=\"flex-1 rounded-full border-2 hover:bg-green-50 hover:border-green-300\">\n                    Beginner\n                  </Button>\n                  <Button variant=\"outline\" size=\"sm\" className=\"flex-1 rounded-full border-2 hover:bg-yellow-50 hover:border-yellow-300\">\n                    Intermediate\n                  </Button>\n                  <Button variant=\"outline\" size=\"sm\" className=\"flex-1 rounded-full border-2 hover:bg-red-50 hover:border-red-300\">\n                    Advanced\n                  </Button>\n                </div>\n              </div>\n\n              <div>\n                <label className=\"text-sm font-medium text-gray-700 mb-3 block\">Privacy Settings</label>\n                <div className=\"flex gap-2\">\n                  <Button variant=\"outline\" size=\"sm\" className=\"flex-1 rounded-full border-2 hover:bg-blue-50 hover:border-blue-300\">\n                    <Users className=\"w-4 h-4 mr-2\" />\n                    Public\n                  </Button>\n                  <Button variant=\"outline\" size=\"sm\" className=\"flex-1 rounded-full border-2 hover:bg-gray-50 hover:border-gray-300\">\n                    <Shield className=\"w-4 h-4 mr-2\" />\n                    Private\n                  </Button>\n                </div>\n              </div>\n\n              <div>\n                <label className=\"text-sm font-medium text-gray-700 mb-2 block\">Location (Optional)</label>\n                <Input \n                  placeholder=\"San Francisco, CA\" \n                  className=\"rounded-full h-12 border-2 focus:border-purple-400 transition-colors\"\n                />\n              </div>\n\n              <div className=\"flex gap-3 pt-4\">\n                <Button \n                  onClick={() => setIsCreateGroupDialogOpen(false)} \n                  variant=\"outline\" \n                  className=\"flex-1 rounded-full h-12 border-2\"\n                >\n                  Cancel\n                </Button>\n                <Button \n                  onClick={() => setIsCreateGroupDialogOpen(false)} \n                  className=\"flex-1 rounded-full h-12 bg-purple-600 hover:bg-purple-700 text-white\"\n                >\n                  Create Group\n                </Button>\n              </div>\n            </div>\n          </DialogContent>\n        </Dialog>\n\n        {/* Emergency Alert Dialog */}\n        <Dialog open={isEmergencyAlertOpen} onOpenChange={setIsEmergencyAlertOpen}>\n          <DialogContent className=\"sm:max-w-md\">\n            <DialogHeader>\n              <DialogTitle className=\"text-red-600\">Emergency Alert</DialogTitle>\n              <DialogDescription>\n                Send an emergency alert to your squad members with your current location.\n              </DialogDescription>\n            </DialogHeader>\n            <div className=\"space-y-4\">\n              <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n                <p className=\"text-sm text-red-800\">\n                  This will immediately notify all squad members and share your GPS location.\n                </p>\n              </div>\n              <div>\n                <label className=\"text-sm font-medium\">Emergency Type</label>\n                <select className=\"w-full mt-1 p-2 border rounded-lg\">\n                  <option>Accident</option>\n                  <option>Mechanical Breakdown</option>\n                  <option>Medical Emergency</option>\n                  <option>Lost/Stranded</option>\n                  <option>Other</option>\n                </select>\n              </div>\n              <div>\n                <label className=\"text-sm font-medium\">Additional Details (Optional)</label>\n                <textarea \n                  className=\"w-full mt-1 p-2 border rounded-lg\" \n                  rows={3}\n                  placeholder=\"Describe the situation...\"\n                />\n              </div>\n              <div className=\"flex gap-2 pt-4\">\n                <Button onClick={() => setIsEmergencyAlertOpen(false)} variant=\"outline\" className=\"flex-1\">\n                  Cancel\n                </Button>\n                <Button onClick={() => setIsEmergencyAlertOpen(false)} className=\"flex-1 bg-red-600 hover:bg-red-700\">\n                  Send Alert\n                </Button>\n              </div>\n            </div>\n          </DialogContent>\n        </Dialog>\n      </div>\n    </div>\n  );\n};\n\nexport default Squad;","size_bytes":40562},"server/db.ts":{"content":"import { Pool, neonConfig } from '@neondatabase/serverless';\nimport { drizzle } from 'drizzle-orm/neon-serverless';\nimport ws from \"ws\";\nimport * as schema from \"@shared/schema\";\n\nneonConfig.webSocketConstructor = ws;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ connectionString: process.env.DATABASE_URL });\nexport const db = drizzle({ client: pool, schema });\n","size_bytes":483},"attached_assets/SCALABLE_BACKEND_ARCHITECTURE.md":{"content":"# ThrottleCove: Scalable Backend Architecture Documentation\n\n## Executive Summary\n\nBased on comprehensive analysis of the current ThrottleCove codebase, this document outlines the optimal backend architecture for scaling to support thousands of concurrent users, real-time features, and complex motorcycle community interactions.\n\n## Current Architecture Analysis\n\n### Strengths of Current Implementation\n- **Modern Tech Stack**: Express.js with TypeScript, Drizzle ORM, PostgreSQL\n- **Security-First**: Comprehensive middleware for rate limiting, CORS, helmet security\n- **Structured Codebase**: Clear separation of concerns with services, middleware, utils\n- **Database Design**: Well-designed schema with proper indexing and relationships\n- **Real-time Ready**: WebSocket support and infrastructure in place\n- **Comprehensive Data Model**: 15+ tables covering all motorcycle community features\n\n### Current Limitations for Scale\n- **Monolithic Architecture**: Single server handling all concerns\n- **In-Memory Sessions**: Not suitable for multi-instance deployment\n- **File Storage**: Local filesystem for uploads (non-scalable)\n- **No Caching Layer**: Database queries without Redis/caching\n- **Limited Real-time**: WebSocket implementation needs scaling strategy\n- **No Background Jobs**: Maintenance reminders, notifications need async processing\n\n## Recommended Scalable Architecture\n\n### 1. Microservices Architecture\n\n#### Core Services Breakdown\n\n```\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ   API Gateway   ‚îÇ    ‚îÇ  Load Balancer  ‚îÇ    ‚îÇ   CDN/Static    ‚îÇ\n‚îÇ   (Kong/Nginx)  ‚îÇ    ‚îÇ  (HAProxy/ALB)  ‚îÇ    ‚îÇ  (CloudFront)   ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n         ‚îÇ                       ‚îÇ                       ‚îÇ\n         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n                                 ‚îÇ\n    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n    ‚îÇ                            ‚îÇ                            ‚îÇ\n‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ Auth   ‚îÇ  ‚îÇ User     ‚îÇ  ‚îÇ Vehicle   ‚îÇ  ‚îÇ Social   ‚îÇ  ‚îÇ Real-   ‚îÇ\n‚îÇService ‚îÇ  ‚îÇ Service  ‚îÇ  ‚îÇ Service   ‚îÇ  ‚îÇ Service  ‚îÇ  ‚îÇ time    ‚îÇ\n‚îÇ        ‚îÇ  ‚îÇ          ‚îÇ  ‚îÇ           ‚îÇ  ‚îÇ          ‚îÇ  ‚îÇ Service ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n     ‚îÇ           ‚îÇ              ‚îÇ              ‚îÇ              ‚îÇ\n     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n                 ‚îÇ              ‚îÇ              ‚îÇ\n         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n         ‚îÇ              Shared Data Layer              ‚îÇ\n         ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ\n         ‚îÇ  ‚îÇPostgreSQL‚îÇ  ‚îÇ Redis   ‚îÇ  ‚îÇ Message ‚îÇ     ‚îÇ\n         ‚îÇ  ‚îÇ Cluster ‚îÇ  ‚îÇ Cluster ‚îÇ  ‚îÇ Queue   ‚îÇ     ‚îÇ\n         ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ\n         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n```\n\n#### Service Definitions\n\n**1. Authentication Service**\n- JWT token management\n- Session handling\n- Password reset, MFA\n- Rate limiting for auth attempts\n- OAuth integrations\n\n**2. User Management Service**\n- User profiles and preferences\n- Rider relationships (following/followers)\n- Achievement systems\n- Privacy settings\n\n**3. Vehicle Management Service**\n- Motorcycle registration and management\n- Maintenance records and schedules\n- Document storage and OCR processing\n- Service reminders\n\n**4. Social Service**\n- Groups and communities\n- Events and rides\n- Feed posts and interactions\n- RSVP management\n\n**5. Real-time Service**\n- WebSocket connections\n- Live location tracking\n- Emergency alerts\n- Chat messaging\n- Ride coordination\n\n**6. Notification Service**\n- Push notifications\n- Email notifications\n- SMS alerts\n- Reminder systems\n\n**7. File Storage Service**\n- Image processing and optimization\n- Document storage\n- CDN integration\n- Backup management\n\n### 2. Database Architecture\n\n#### Primary Database: PostgreSQL Cluster\n\n```sql\n-- Master-Slave Replication Setup\n-- Master: All writes\n-- Read Replicas: Read-only queries for better performance\n\n-- Connection Pooling with PgBouncer\n-- Horizontal Scaling with Citus (if needed)\n```\n\n#### Recommended Database Optimizations\n\n**Indexing Strategy:**\n```sql\n-- Critical indexes for performance\nCREATE INDEX CONCURRENTLY idx_users_email_hash ON users USING hash(email);\nCREATE INDEX CONCURRENTLY idx_rides_location_gist ON rides USING gist(start_location);\nCREATE INDEX CONCURRENTLY idx_events_time_status ON events(start_time, status) WHERE status = 'active';\nCREATE INDEX CONCURRENTLY idx_notifications_user_unread ON notifications(user_id) WHERE read = false;\n\n-- Partial indexes for common queries\nCREATE INDEX CONCURRENTLY idx_maintenance_due ON maintenance_schedules(motorcycle_id) \n  WHERE next_service_date <= CURRENT_DATE + INTERVAL '30 days';\n```\n\n**Partitioning Strategy:**\n```sql\n-- Partition large tables by date\nCREATE TABLE rides_y2024m01 PARTITION OF rides \n  FOR VALUES FROM ('2024-01-01') TO ('2024-02-01');\n\n-- Partition messages by group_id\nCREATE TABLE group_messages_g1 PARTITION OF group_messages \n  FOR VALUES WITH (modulus 10, remainder 0);\n```\n\n#### Caching Layer: Redis Cluster\n\n**Cache Strategy:**\n```redis\n# Session storage\nuser:session:{sessionId} -> user data (TTL: 24h)\n\n# Frequently accessed data\nuser:profile:{userId} -> profile data (TTL: 1h)\nmotorcycle:{motorcycleId} -> motorcycle data (TTL: 30m)\ngroup:members:{groupId} -> member list (TTL: 15m)\n\n# Real-time data\nlocation:{userId} -> current location (TTL: 5m)\nactive:riders:{groupId} -> active riders (TTL: 1m)\n\n# Rate limiting\nratelimit:{userId}:{endpoint} -> request count (TTL: 15m)\n```\n\n### 3. Real-time Architecture\n\n#### WebSocket Scaling with Redis Pub/Sub\n\n```javascript\n// Server-side WebSocket scaling\nconst redis = require('redis');\nconst redisAdapter = require('socket.io-redis');\n\n// Multiple server instances share state via Redis\nio.adapter(redisAdapter({\n  host: 'redis-cluster',\n  port: 6379,\n  subEvent: 'messageBuffer',\n  pubEvent: 'message'\n}));\n\n// Channel structure\n// location:updates - Real-time location sharing\n// group:{groupId}:chat - Group chat messages\n// emergency:alerts - Emergency broadcast\n// ride:{rideId}:updates - Live ride coordination\n```\n\n#### Message Queue System\n\n**Bull Queue for Background Jobs:**\n```javascript\n// Job types and priorities\nconst jobTypes = {\n  MAINTENANCE_REMINDER: { priority: 'high', delay: 0 },\n  EMAIL_NOTIFICATION: { priority: 'medium', delay: 0 },\n  IMAGE_PROCESSING: { priority: 'low', delay: 0 },\n  LOCATION_CLEANUP: { priority: 'low', delay: 3600000 }, // 1 hour\n  ANALYTICS_AGGREGATION: { priority: 'low', delay: 86400000 } // 24 hours\n};\n```\n\n### 4. Security Architecture\n\n#### Multi-Layer Security Approach\n\n**1. API Gateway Security:**\n```nginx\n# Rate limiting at gateway level\nlimit_req_zone $binary_remote_addr zone=api:10m rate=10r/s;\nlimit_req_zone $binary_remote_addr zone=auth:10m rate=5r/m;\n\n# DDoS protection\nlimit_conn_zone $binary_remote_addr zone=conn_limit_per_ip:10m;\nlimit_conn conn_limit_per_ip 20;\n```\n\n**2. Service-Level Security:**\n```javascript\n// JWT token validation middleware\nconst authenticateToken = async (req, res, next) => {\n  const token = req.headers.authorization?.split(' ')[1];\n  \n  if (!token) {\n    return res.status(401).json({ error: 'Access token required' });\n  }\n  \n  try {\n    // Verify token with Redis blacklist check\n    const isBlacklisted = await redis.get(`blacklist:${token}`);\n    if (isBlacklisted) {\n      return res.status(401).json({ error: 'Token revoked' });\n    }\n    \n    const decoded = jwt.verify(token, process.env.JWT_SECRET);\n    req.user = decoded;\n    next();\n  } catch (error) {\n    return res.status(403).json({ error: 'Invalid token' });\n  }\n};\n```\n\n**3. Database Security:**\n```sql\n-- Row Level Security (RLS) for multi-tenant data\nALTER TABLE motorcycles ENABLE ROW LEVEL SECURITY;\nCREATE POLICY motorcycle_user_policy ON motorcycles \n  FOR ALL TO app_user \n  USING (user_id = current_user_id());\n\n-- Encrypted sensitive data\nCREATE EXTENSION IF NOT EXISTS pgcrypto;\n-- Store VIN numbers encrypted\nALTER TABLE motorcycles ALTER COLUMN vin TYPE bytea \n  USING pgp_sym_encrypt(vin, 'encryption_key');\n```\n\n### 5. Deployment Architecture\n\n#### Container Orchestration with Kubernetes\n\n```yaml\n# Kubernetes deployment strategy\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: throttlecove-api\nspec:\n  replicas: 3\n  strategy:\n    type: RollingUpdate\n    rollingUpdate:\n      maxSurge: 1\n      maxUnavailable: 0\n  selector:\n    matchLabels:\n      app: throttlecove-api\n  template:\n    metadata:\n      labels:\n        app: throttlecove-api\n    spec:\n      containers:\n      - name: api\n        image: throttlecove/api:latest\n        ports:\n        - containerPort: 5000\n        env:\n        - name: DATABASE_URL\n          valueFrom:\n            secretKeyRef:\n              name: db-secret\n              key: url\n        - name: REDIS_URL\n          valueFrom:\n            secretKeyRef:\n              name: redis-secret\n              key: url\n        resources:\n          requests:\n            memory: \"256Mi\"\n            cpu: \"200m\"\n          limits:\n            memory: \"512Mi\"\n            cpu: \"500m\"\n        livenessProbe:\n          httpGet:\n            path: /health\n            port: 5000\n          initialDelaySeconds: 30\n          periodSeconds: 10\n        readinessProbe:\n          httpGet:\n            path: /ready\n            port: 5000\n          initialDelaySeconds: 5\n          periodSeconds: 5\n```\n\n#### Auto-scaling Configuration\n\n```yaml\napiVersion: autoscaling/v2\nkind: HorizontalPodAutoscaler\nmetadata:\n  name: throttlecove-hpa\nspec:\n  scaleTargetRef:\n    apiVersion: apps/v1\n    kind: Deployment\n    name: throttlecove-api\n  minReplicas: 3\n  maxReplicas: 20\n  metrics:\n  - type: Resource\n    resource:\n      name: cpu\n      target:\n        type: Utilization\n        averageUtilization: 70\n  - type: Resource\n    resource:\n      name: memory\n      target:\n        type: Utilization\n        averageUtilization: 80\n```\n\n### 6. Monitoring and Observability\n\n#### Comprehensive Monitoring Stack\n\n**Metrics Collection:**\n```javascript\n// Prometheus metrics\nconst prometheus = require('prom-client');\n\n// Custom metrics for business logic\nconst activeRidesGauge = new prometheus.Gauge({\n  name: 'throttlecove_active_rides_total',\n  help: 'Total number of active rides',\n  labelNames: ['group_id']\n});\n\nconst apiRequestDuration = new prometheus.Histogram({\n  name: 'throttlecove_api_request_duration_seconds',\n  help: 'Duration of API requests in seconds',\n  labelNames: ['method', 'route', 'status_code'],\n  buckets: [0.1, 0.5, 1, 2, 5]\n});\n```\n\n**Health Check Endpoints:**\n```javascript\n// Health check implementation\napp.get('/health', async (req, res) => {\n  const checks = {\n    database: await checkDatabase(),\n    redis: await checkRedis(),\n    messageQueue: await checkMessageQueue(),\n    externalServices: await checkExternalServices()\n  };\n  \n  const healthy = Object.values(checks).every(check => check.status === 'ok');\n  \n  res.status(healthy ? 200 : 503).json({\n    status: healthy ? 'healthy' : 'unhealthy',\n    checks,\n    timestamp: new Date().toISOString()\n  });\n});\n```\n\n### 7. Performance Optimization\n\n#### Database Query Optimization\n\n```sql\n-- Materialized views for complex queries\nCREATE MATERIALIZED VIEW user_ride_stats AS\nSELECT \n  u.id,\n  u.username,\n  COUNT(r.id) as total_rides,\n  SUM(r.distance) as total_distance,\n  AVG(r.avg_speed) as avg_speed,\n  MAX(r.created_at) as last_ride_date\nFROM users u\nLEFT JOIN rides r ON u.id = r.user_id\nGROUP BY u.id, u.username;\n\n-- Refresh strategy\nCREATE OR REPLACE FUNCTION refresh_user_stats()\nRETURNS void AS $$\nBEGIN\n  REFRESH MATERIALIZED VIEW CONCURRENTLY user_ride_stats;\nEND;\n$$ LANGUAGE plpgsql;\n\n-- Schedule refresh\nSELECT cron.schedule('refresh-stats', '0 0 * * *', 'SELECT refresh_user_stats();');\n```\n\n#### API Response Optimization\n\n```javascript\n// Response compression and caching\nconst compression = require('compression');\nconst apicache = require('apicache');\n\n// Intelligent caching strategy\nconst cacheStrategy = {\n  '/api/motorcycles': '10 minutes',\n  '/api/groups': '5 minutes', \n  '/api/events': '2 minutes',\n  '/api/users/profile': '1 minute'\n};\n\napp.use(compression());\napp.use(apicache.middleware('5 minutes', (req) => {\n  return cacheStrategy[req.route?.path] || null;\n}));\n```\n\n## Implementation Roadmap\n\n### Phase 1: Foundation (Weeks 1-4)\n1. **Database Optimization**\n   - Implement indexing strategy\n   - Set up read replicas\n   - Configure connection pooling\n\n2. **Caching Layer**\n   - Deploy Redis cluster\n   - Implement session caching\n   - Add query result caching\n\n3. **Security Hardening**\n   - JWT implementation\n   - Rate limiting enhancement\n   - Security audit\n\n### Phase 2: Scalability (Weeks 5-8)\n1. **Service Decomposition**\n   - Extract Authentication Service\n   - Separate Real-time Service\n   - Create File Storage Service\n\n2. **Message Queue Implementation**\n   - Set up Bull queues\n   - Background job processing\n   - Notification system\n\n3. **Monitoring Setup**\n   - Prometheus + Grafana\n   - Application logging\n   - Performance metrics\n\n### Phase 3: Advanced Features (Weeks 9-12)\n1. **Real-time Enhancements**\n   - WebSocket clustering\n   - Live location tracking\n   - Emergency alert system\n\n2. **Performance Optimization**\n   - Database query optimization\n   - CDN implementation\n   - Image processing pipeline\n\n3. **High Availability**\n   - Multi-region deployment\n   - Disaster recovery\n   - Automated failover\n\n## Resource Requirements\n\n### Infrastructure Needs\n\n**Production Environment:**\n- **API Servers**: 3-5 instances (2 vCPU, 4GB RAM each)\n- **Database**: PostgreSQL cluster (4 vCPU, 16GB RAM master + 2 read replicas)\n- **Cache**: Redis cluster (3 nodes, 2 vCPU, 8GB RAM each)\n- **Load Balancer**: HAProxy or cloud ALB\n- **Storage**: 1TB SSD for database, 500GB for file storage\n- **CDN**: CloudFront or equivalent\n- **Monitoring**: Grafana + Prometheus stack\n\n**Estimated Monthly Cost**: $800-1500 (AWS/GCP)\n\n### Team Requirements\n- **Backend Developer**: Microservices implementation\n- **DevOps Engineer**: Kubernetes deployment and monitoring\n- **Database Administrator**: Query optimization and scaling\n- **Security Specialist**: Security audit and hardening\n\n## Conclusion\n\nThis architecture provides a solid foundation for scaling ThrottleCove to handle:\n- **10,000+ concurrent users**\n- **Real-time location tracking for 1,000+ active riders**\n- **Millions of maintenance records and documents**\n- **High-frequency messaging and notifications**\n- **Complex social interactions and group management**\n\nThe modular approach allows for incremental implementation while maintaining current functionality, ensuring a smooth transition to a highly scalable platform.","size_bytes":16093},"client/src/components/ui/motorcycle/MotorcycleDetailsDialog.tsx":{"content":"\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { \n  X, \n  Calendar, \n  Gauge, \n  Wrench, \n  FileText, \n  Settings,\n  MapPin,\n  Star,\n  Heart,\n  Share2\n} from \"lucide-react\";\nimport { motion } from \"framer-motion\";\n\ninterface MotorcycleData {\n  id: number;\n  make: string;\n  model: string;\n  year: number;\n  category: string;\n  engineSize: string;\n  power: string;\n  weight: string;\n  price: string;\n  imageUrl: string;\n  color: string;\n}\n\ninterface MotorcycleDetailsDialogProps {\n  motorcycle: MotorcycleData | null;\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n}\n\nconst MotorcycleDetailsDialog = ({ motorcycle, open, onOpenChange }: MotorcycleDetailsDialogProps) => {\n  if (!motorcycle) return null;\n\n  // Mock specifications for demonstration\n  const specifications = [\n    { label: \"Engine Type\", value: \"Liquid-cooled, 4-stroke\" },\n    { label: \"Fuel System\", value: \"Electronic Fuel Injection\" },\n    { label: \"Transmission\", value: \"6-speed manual\" },\n    { label: \"Brakes\", value: \"Dual disc front, single disc rear\" },\n    { label: \"Suspension\", value: \"Adjustable front & rear\" },\n    { label: \"Seat Height\", value: \"32.3 in\" },\n    { label: \"Fuel Capacity\", value: \"4.5 gallons\" },\n    { label: \"Wheelbase\", value: \"55.1 in\" }\n  ];\n\n  const features = [\n    \"ABS Braking System\",\n    \"Traction Control\",\n    \"Multiple Riding Modes\",\n    \"Quick Shifter\",\n    \"LED Headlights\",\n    \"Digital Display\",\n    \"Keyless Ignition\",\n    \"Smartphone Connectivity\"\n  ];\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-[90vw] lg:max-w-[75vw] max-h-[85vh] overflow-y-auto\">\n        <DialogHeader className=\"pb-3\">\n          <div className=\"flex items-center justify-between\">\n            <DialogTitle className=\"text-2xl font-bold text-[#1A1A1A]\">\n              {motorcycle.year} {motorcycle.make} {motorcycle.model}\n            </DialogTitle>\n            <Button \n              variant=\"ghost\" \n              size=\"icon\"\n              onClick={() => onOpenChange(false)}\n              className=\"h-8 w-8 rounded-full\"\n            >\n              <X className=\"h-5 w-5\" />\n            </Button>\n          </div>\n        </DialogHeader>\n\n        <div className=\"space-y-6\">\n          {/* Hero Section */}\n          <div className=\"relative\">\n            <div className=\"h-80 rounded-2xl overflow-hidden bg-gradient-to-br from-gray-100 to-gray-200\">\n              <img \n                src={motorcycle.imageUrl} \n                alt={`${motorcycle.make} ${motorcycle.model}`}\n                className=\"w-full h-full object-cover\"\n              />\n              <div className=\"absolute top-4 right-4 flex space-x-2\">\n                <Button size=\"icon\" variant=\"ghost\" className=\"bg-white/90 backdrop-blur-sm rounded-full\">\n                  <Heart className=\"h-4 w-4\" />\n                </Button>\n                <Button size=\"icon\" variant=\"ghost\" className=\"bg-white/90 backdrop-blur-sm rounded-full\">\n                  <Share2 className=\"h-4 w-4\" />\n                </Button>\n              </div>\n              <div className=\"absolute bottom-4 left-4 right-4\">\n                <div className=\"bg-white/90 backdrop-blur-sm rounded-2xl p-4\">\n                  <div className=\"flex justify-between items-center\">\n                    <div>\n                      <Badge className=\"bg-[#FF3B30] text-white mb-2\">\n                        {motorcycle.category}\n                      </Badge>\n                      <h3 className=\"text-xl font-bold text-[#1A1A1A]\">{motorcycle.color}</h3>\n                      <p className=\"text-gray-600\">{motorcycle.engineSize} ‚Ä¢ {motorcycle.power}</p>\n                    </div>\n                    <div className=\"text-right\">\n                      <p className=\"text-2xl font-bold text-[#FF3B30]\">{motorcycle.price}</p>\n                      <div className=\"flex items-center mt-1\">\n                        <Star className=\"h-4 w-4 text-yellow-400 fill-current\" />\n                        <span className=\"text-sm text-gray-600 ml-1\">4.8 (124 reviews)</span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            {/* Left Column: Specifications */}\n            <div className=\"space-y-6\">\n              {/* Key Stats */}\n              <Card className=\"rounded-2xl\">\n                <CardContent className=\"p-6\">\n                  <h4 className=\"font-bold text-lg text-[#1A1A1A] mb-4 flex items-center\">\n                    <Gauge className=\"h-5 w-5 mr-2 text-[#FF3B30]\" />\n                    Performance\n                  </h4>\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div className=\"bg-gradient-to-br from-blue-400 to-blue-500 rounded-2xl p-4 text-white\">\n                      <p className=\"text-blue-100 text-sm mb-1\">Engine Power</p>\n                      <p className=\"text-2xl font-bold\">{motorcycle.power}</p>\n                    </div>\n                    <div className=\"bg-gradient-to-br from-green-400 to-green-500 rounded-2xl p-4 text-white\">\n                      <p className=\"text-green-100 text-sm mb-1\">Weight</p>\n                      <p className=\"text-2xl font-bold\">{motorcycle.weight}</p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* Detailed Specifications */}\n              <Card className=\"rounded-2xl\">\n                <CardContent className=\"p-6\">\n                  <h4 className=\"font-bold text-lg text-[#1A1A1A] mb-4 flex items-center\">\n                    <Settings className=\"h-5 w-5 mr-2 text-[#FF3B30]\" />\n                    Specifications\n                  </h4>\n                  <div className=\"space-y-3\">\n                    {specifications.map((spec, index) => (\n                      <div key={index} className=\"flex justify-between items-center p-3 bg-gray-50 rounded-xl\">\n                        <span className=\"text-gray-600 font-medium\">{spec.label}</span>\n                        <span className=\"font-semibold text-[#1A1A1A]\">{spec.value}</span>\n                      </div>\n                    ))}\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n\n            {/* Right Column: Features & Actions */}\n            <div className=\"space-y-6\">\n              {/* Features */}\n              <Card className=\"rounded-2xl\">\n                <CardContent className=\"p-6\">\n                  <h4 className=\"font-bold text-lg text-[#1A1A1A] mb-4 flex items-center\">\n                    <Star className=\"h-5 w-5 mr-2 text-[#FF3B30]\" />\n                    Key Features\n                  </h4>\n                  <div className=\"grid grid-cols-2 gap-3\">\n                    {features.map((feature, index) => (\n                      <div key={index} className=\"flex items-center space-x-2 p-3 bg-gray-50 rounded-xl\">\n                        <div className=\"w-2 h-2 bg-[#FF3B30] rounded-full\"></div>\n                        <span className=\"text-sm font-medium text-gray-700\">{feature}</span>\n                      </div>\n                    ))}\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* Availability & Actions */}\n              <Card className=\"rounded-2xl\">\n                <CardContent className=\"p-6\">\n                  <h4 className=\"font-bold text-lg text-[#1A1A1A] mb-4 flex items-center\">\n                    <MapPin className=\"h-5 w-5 mr-2 text-[#FF3B30]\" />\n                    Availability\n                  </h4>\n                  <div className=\"space-y-4\">\n                    <div className=\"p-3 bg-green-50 rounded-xl border border-green-200\">\n                      <div className=\"flex items-center justify-between\">\n                        <div>\n                          <p className=\"font-medium text-green-800\">In Stock</p>\n                          <p className=\"text-sm text-green-600\">Available at 3 nearby dealers</p>\n                        </div>\n                        <Badge className=\"bg-green-100 text-green-800\">\n                          Ready\n                        </Badge>\n                      </div>\n                    </div>\n\n                    <div className=\"grid grid-cols-2 gap-3\">\n                      <Button className=\"bg-[#FF3B30] hover:bg-[#FF3B30]/90 text-white rounded-full\">\n                        Schedule Test Ride\n                      </Button>\n                      <Button variant=\"outline\" className=\"rounded-full border-[#FF3B30] text-[#FF3B30] hover:bg-[#FF3B30] hover:text-white\">\n                        Get Quote\n                      </Button>\n                    </div>\n\n                    <div className=\"text-center pt-3\">\n                      <Button variant=\"ghost\" className=\"text-gray-600 hover:text-[#FF3B30]\">\n                        <FileText className=\"h-4 w-4 mr-2\" />\n                        Download Brochure\n                      </Button>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default MotorcycleDetailsDialog;\n","size_bytes":9517},"COMPLETE_PROJECT_DOCUMENTATION.md":{"content":"# ThrottleCove: Comprehensive Digital Motorcycle Platform\n\n## Executive Summary\n\nThrottleCove is a sophisticated full-stack web application designed for motorcycle enthusiasts, combining personal vehicle management with advanced community features. Built using modern web technologies, it serves as both a digital garage and a comprehensive social platform for riders to connect, plan rides, track maintenance, and share experiences.\n\n## Project Architecture Overview\n\n### Technology Stack\n\n**Frontend:**\n- **React 18.3.1** with TypeScript for type-safe component development\n- **Vite 5.4.14** for lightning-fast development and optimized production builds\n- **Tailwind CSS 3.4.14** with custom design system and responsive utilities\n- **Framer Motion 11.13.1** for smooth animations and micro-interactions\n- **TanStack React Query 5.60.5** for efficient server state management\n- **Wouter 3.3.5** for lightweight client-side routing\n- **React Hook Form 7.53.1** with Zod validation for robust form handling\n\n**Backend:**\n- **Node.js with Express 4.21.2** providing RESTful API architecture\n- **TypeScript 5.6.3** ensuring type safety across the entire stack\n- **Drizzle ORM 0.39.1** for type-safe database operations\n- **Passport.js** with local strategy for session-based authentication\n- **Multer 2.0.2** for secure file upload handling\n- **Express Session** with configurable storage backends\n\n**Database & Storage:**\n- **PostgreSQL** with Neon serverless for scalable data persistence\n- **Drizzle Kit 0.30.4** for schema migrations and database management\n- **File System Storage** for user uploads with size and type validation\n\n**UI Component System:**\n- **Radix UI** primitives for accessible, unstyled components\n- **shadcn/ui** design system with customizable variants\n- **Lucide React** for consistent iconography\n- **Custom component library** built on modern design principles\n\n### System Architecture\n\n#### Frontend Architecture\n```\nclient/src/\n‚îú‚îÄ‚îÄ components/ui/          # Reusable UI components\n‚îÇ   ‚îú‚îÄ‚îÄ layout/            # Navigation, footer, page layouts\n‚îÇ   ‚îú‚îÄ‚îÄ motorcycle/        # Vehicle-specific components\n‚îÇ   ‚îú‚îÄ‚îÄ community/         # Social feature components\n‚îÇ   ‚îî‚îÄ‚îÄ dashboard/         # Analytics and metrics\n‚îú‚îÄ‚îÄ pages/                 # Route-based page components\n‚îú‚îÄ‚îÄ hooks/                 # Custom React hooks\n‚îú‚îÄ‚îÄ lib/                   # Utility functions and configurations\n‚îî‚îÄ‚îÄ assets/                # Static images and resources\n```\n\n#### Backend Architecture\n```\nserver/\n‚îú‚îÄ‚îÄ routes.ts              # API endpoint definitions\n‚îú‚îÄ‚îÄ storage.ts             # Data access layer interface\n‚îú‚îÄ‚îÄ middleware/            # Security and validation middleware\n‚îú‚îÄ‚îÄ services/              # Business logic services\n‚îú‚îÄ‚îÄ utils/                 # Helper functions and utilities\n‚îî‚îÄ‚îÄ config.ts              # Application configuration\n```\n\n#### Shared Resources\n```\nshared/\n‚îî‚îÄ‚îÄ schema.ts              # Database schema and type definitions\n```\n\n## Core Features & Functionality\n\n### 1. Authentication & User Management\n- **Session-based authentication** using Passport.js with local strategy\n- **Secure password hashing** with bcryptjs\n- **User registration and login** with comprehensive validation\n- **Role-based access control** with user, admin, and moderator roles\n- **Multi-factor authentication support** (schema ready)\n- **Account security features** including login attempt tracking and account locking\n\n### 2. Digital Garage Management\n- **Multiple motorcycle support** per user account\n- **Comprehensive vehicle information** tracking:\n  - Basic details (make, model, year, VIN, engine specifications)\n  - Financial tracking (purchase price, current value, insurance details)\n  - Visual documentation with multiple photo uploads\n  - Registration and licensing information\n  - Custom user-defined fields for specialized tracking\n\n### 3. Advanced Maintenance System\n- **Maintenance record tracking** with detailed service history\n- **Proactive scheduling** with customizable reminder systems\n- **Cost analysis** and budgeting for maintenance expenses\n- **Service provider management** and rating system\n- **Parts inventory tracking** with usage history\n- **Warranty period monitoring** with expiration alerts\n- **Document attachment** for receipts and service documentation\n\n### 4. Document Management System\n- **Secure document storage** for vehicle-related paperwork\n- **Document categorization** (registration, insurance, service records, etc.)\n- **Expiration tracking** with automated reminder notifications\n- **OCR capabilities** for text extraction from scanned documents\n- **Document sharing** within user groups and with service providers\n\n### 5. Community & Social Features\n- **User profiles** with riding preferences and skill levels\n- **Group creation and management** with privacy controls\n- **Event planning and RSVP** system for group rides\n- **Real-time messaging** within groups\n- **Social feed** with posts, photos, and ride sharing\n- **Rider relationship management** (following, blocking, etc.)\n- **Achievement system** and leaderboards\n\n### 6. Ride Tracking & Analytics\n- **GPS-based ride tracking** with route recording\n- **Performance metrics** (speed, distance, duration, fuel consumption)\n- **Ride statistics** and personal records\n- **Route sharing** and discovery\n- **Weather data integration** for ride conditions\n- **Safety features** including emergency contacts and crash detection\n\n### 7. Notification System\n- **Multi-channel notifications** (in-app, email, SMS ready)\n- **Customizable preferences** per notification type\n- **Smart scheduling** to avoid notification fatigue\n- **Action-based notifications** with direct links to relevant sections\n\n## Database Schema\n\n### Core Tables\n\n#### Users & Authentication\n```sql\n-- Users table with enhanced security\nusers (\n  id, username, email, passwordHash, fullName, phone, avatarUrl,\n  emailVerified, mfaEnabled, mfaSecret, loginAttempts, lockedUntil,\n  lastLogin, role, createdAt, updatedAt\n)\n\n-- Session management\nuser_sessions (\n  id, userId, sessionToken, refreshToken, ipAddress, userAgent,\n  expiresAt, createdAt\n)\n\n-- User profiles with riding preferences\nuser_profiles (\n  id, userId, ridingStyle, preferredTerrain, skillLevel, availability,\n  maxDistance, bio, achievements, emergencyContact, medicalInfo,\n  notificationPreferences, createdAt, updatedAt\n)\n```\n\n#### Vehicle Management\n```sql\n-- Enhanced motorcycles table\nmotorcycles (\n  id, userId, name, make, model, year, vin, engineSize, engineType,\n  color, mileage, purchaseDate, purchasePrice, currentValue,\n  insuranceProvider, insurancePolicy, registrationNumber, licensePlate,\n  status, photos[], documents, customFields, createdAt, updatedAt\n)\n\n-- Comprehensive maintenance tracking\nmaintenance_records (\n  id, motorcycleId, serviceType, description, mileageAtService,\n  serviceDate, cost, serviceProvider, partsUsed, laborHours,\n  nextServiceDue, nextServiceDate, receiptUrl, notes, warrantyPeriod,\n  createdAt, updatedAt\n)\n\n-- Proactive maintenance scheduling\nmaintenance_schedules (\n  id, motorcycleId, serviceType, intervalType, mileageInterval,\n  timeInterval, description, costEstimate, isCritical,\n  reminderSettings, createdAt, updatedAt\n)\n```\n\n#### Community & Social\n```sql\n-- Groups and communities\ngroups (\n  id, name, description, creatorId, type, location, locationName,\n  memberCount, avatarUrl, coverUrl, rules, tags[], createdAt, updatedAt\n)\n\n-- Group membership management\ngroup_members (\n  id, groupId, userId, role, joinedAt\n)\n\n-- Event and ride planning\nevents (\n  id, groupId, creatorId, title, description, eventType, startTime,\n  endTime, location, locationName, maxParticipants, currentParticipants,\n  difficultyLevel, routeData, estimatedDistance, cost, requirements,\n  status, createdAt, updatedAt\n)\n\n-- Event participation tracking\nevent_rsvps (\n  id, eventId, userId, status, responseAt\n)\n```\n\n#### Document & Content Management\n```sql\n-- Document storage with metadata\ndocuments (\n  id, motorcycleId, documentType, title, fileUrl, fileSize, mimeType,\n  issueDate, expiryDate, issuingAuthority, documentNumber, status,\n  reminderDays, extractedData, createdAt, updatedAt\n)\n\n-- Social content management\ngroup_posts (\n  id, groupId, authorId, content, postType, attachments[], routeData,\n  pollData, createdAt, updatedAt\n)\n\n-- Real-time messaging\ngroup_messages (\n  id, groupId, senderId, message, messageType, metadata,\n  createdAt\n)\n```\n\n#### Analytics & Tracking\n```sql\n-- Comprehensive ride tracking\nrides (\n  id, userId, motorcycleId, title, description, startLocation, endLocation,\n  routeData, distance, duration, startTime, endTime, maxSpeed, avgSpeed,\n  fuelConsumed, cost, photos[], isPublic, tags[], weatherData,\n  createdAt, updatedAt\n)\n\n-- Performance statistics\nride_stats (\n  id, userId, groupId, statType, value, period, achievedAt, updatedAt\n)\n\n-- Notification management\nnotifications (\n  id, userId, type, title, message, data, read, actionUrl,\n  expiresAt, createdAt\n)\n```\n\n## Security Implementation\n\n### Authentication Security\n- **Password hashing** using bcryptjs with configurable salt rounds\n- **Session management** with secure cookies and configurable expiration\n- **CSRF protection** through proper session handling\n- **Rate limiting** on authentication endpoints\n- **Account lockout** mechanisms to prevent brute force attacks\n\n### API Security\n- **Input validation** using Zod schemas for all API endpoints\n- **SQL injection prevention** through parameterized queries via Drizzle ORM\n- **File upload security** with type validation and size limits\n- **CORS configuration** for cross-origin resource sharing\n- **Security headers** including helmet.js integration\n\n### Data Protection\n- **Role-based access control** for resource ownership validation\n- **Data sanitization** on all user inputs\n- **Secure file storage** with access control\n- **Privacy controls** for user data and sharing preferences\n\n## API Documentation\n\n### Authentication Endpoints\n```\nPOST /api/auth/register    # User registration\nPOST /api/auth/login       # User authentication\nPOST /api/auth/logout      # Session termination\nGET  /api/auth/session     # Current session validation\n```\n\n### Vehicle Management\n```\nGET    /api/motorcycles           # List user's motorcycles\nPOST   /api/motorcycles           # Create new motorcycle (with file upload)\nGET    /api/motorcycles/:id       # Get specific motorcycle\nPUT    /api/motorcycles/:id       # Update motorcycle details\nDELETE /api/motorcycles/:id       # Remove motorcycle\nGET    /api/motorcycles/:id/documents     # Get motorcycle documents\nGET    /api/motorcycles/:id/maintenance   # Get maintenance records\nPOST   /api/motorcycles/:id/maintenance   # Add maintenance record\n```\n\n### Document Management\n```\nGET  /api/documents               # Get all user documents\nGET  /api/documents/:id           # Get specific document\nPOST /api/documents               # Upload new document\nPUT  /api/documents/:id           # Update document metadata\nDELETE /api/documents/:id         # Remove document\n```\n\n### Ride Management\n```\nGET  /api/rides                   # Get user's rides\nPOST /api/rides                   # Create new ride\nGET  /api/rides/:id               # Get specific ride\nPUT  /api/rides/:id               # Update ride details\nDELETE /api/rides/:id             # Remove ride\n```\n\n### System Endpoints\n```\nGET  /api/status                  # System health check\nGET  /health                      # Application health status\n```\n\n## Frontend Components\n\n### Core UI Components\n- **Layout Components**: ModernNavBar, Footer, responsive page layouts\n- **Form Components**: Enhanced forms with validation and error handling\n- **Modal Systems**: Dialog, alert, and confirmation modals\n- **Data Display**: Cards, tables, carousels for content presentation\n- **Navigation**: Breadcrumbs, pagination, tab systems\n\n### Specialized Components\n- **Motorcycle Management**: MotorcycleCard, AddMotorcycleDialog, VehicleDetailsDialog\n- **Document System**: DocumentUpload, DocumentPreview, DocumentVault\n- **Community Features**: RiderCard, RideCard, group management interfaces\n- **Dashboard Components**: MetricCard, analytics displays, progress indicators\n\n### Utility Components\n- **File Upload**: PhotoUpload with preview and validation\n- **Carousels**: VerticalCarousel, PartsCarousel for content display\n- **Forms**: Custom form controls with Zod validation integration\n- **Loading States**: Skeletons, spinners, and progress indicators\n\n## Development Workflow\n\n### Setup & Installation\n```bash\n# Project initialization\ngit clone <repository-url>\ncd ThrottleCove\n\n# Dependency installation\nnpm install\n\n# Environment configuration\ncp .env.example .env\n# Configure DATABASE_URL and other environment variables\n\n# Database setup\nnpm run db:push\n\n# Development server\nnpm run dev\n```\n\n### Development Commands\n```bash\nnpm run dev           # Start development server\nnpm run build         # Build for production\nnpm run start         # Start production server\nnpm run check         # TypeScript type checking\nnpm run db:push       # Push database schema changes\n```\n\n### Build Process\n1. **Frontend build** using Vite with TypeScript compilation\n2. **Backend bundling** using ESBuild for Node.js target\n3. **Static asset optimization** with automatic minification\n4. **Type checking** across the entire codebase\n5. **Database migration** application if needed\n\n## Deployment Strategy\n\n### Environment Configuration\n```env\nNODE_ENV=production\nDATABASE_URL=postgresql://...\nSESSION_SECRET=your-secure-secret-key\nUPLOAD_DIR=./uploads\nMAX_FILE_SIZE=5242880\n```\n\n### Production Deployment\n1. **Build the application** using `npm run build`\n2. **Configure environment variables** for production\n3. **Set up PostgreSQL database** and apply migrations\n4. **Configure reverse proxy** (nginx/Apache) if needed\n5. **Start the production server** using `npm start`\n\n### Platform-Specific Deployment\n\n#### Replit Deployment\n- Built-in Replit configuration for seamless deployment\n- Automatic environment variable management\n- Integrated database provisioning\n\n#### Vercel Deployment\n- Configure `vercel.json` for serverless functions\n- Set up database connection for serverless environment\n- Configure static file serving\n\n#### Railway Deployment\n- Docker configuration for containerized deployment\n- Automatic database provisioning\n- Environment variable management through Railway dashboard\n\n## Future Feature Roadmap\n\n### Phase 1: Enhanced Mobile Experience\n- **Progressive Web App (PWA)** implementation\n- **Mobile-optimized interface** with touch-friendly interactions\n- **Offline functionality** for core features\n- **Push notifications** for maintenance reminders and community updates\n\n### Phase 2: Advanced Analytics\n- **Predictive maintenance** using machine learning algorithms\n- **Cost optimization** recommendations based on usage patterns\n- **Performance benchmarking** against similar vehicles and riders\n- **Carbon footprint tracking** and environmental impact analysis\n\n### Phase 3: Integration & API Expansion\n- **Third-party integrations** with popular motorcycle apps and services\n- **OBD-II connectivity** for real-time vehicle diagnostics\n- **Insurance provider APIs** for automated claim filing\n- **Parts supplier integration** for automated ordering and price comparison\n\n### Phase 4: Advanced Community Features\n- **Live ride tracking** with real-time location sharing\n- **Emergency response system** with automatic crash detection\n- **Mentorship programs** connecting experienced and novice riders\n- **Event streaming** and virtual participation options\n\n### Phase 5: Marketplace Integration\n- **Parts and accessories marketplace** with user reviews\n- **Service provider directory** with booking capabilities\n- **Vehicle marketplace** for buying and selling motorcycles\n- **Insurance broker integration** for policy comparison and purchase\n\n## Technical Considerations\n\n### Performance Optimization\n- **Code splitting** for reduced initial bundle size\n- **Image optimization** with WebP conversion and lazy loading\n- **Database query optimization** with proper indexing\n- **Caching strategies** for frequently accessed data\n\n### Scalability Planning\n- **Microservices architecture** for independent scaling\n- **Database sharding** for large-scale data management\n- **CDN integration** for global asset delivery\n- **Load balancing** for high-traffic scenarios\n\n### Security Enhancements\n- **Two-factor authentication** implementation\n- **API rate limiting** with user-specific quotas\n- **Audit logging** for security monitoring\n- **Data encryption** for sensitive information\n\n### Monitoring & Maintenance\n- **Application monitoring** with performance metrics\n- **Error tracking** and automated alerting\n- **Database performance monitoring** with query analysis\n- **User analytics** for feature usage optimization\n\n## Troubleshooting Guide\n\n### Common Issues\n1. **Database connection failures**: Verify DATABASE_URL and network connectivity\n2. **File upload issues**: Check UPLOAD_DIR permissions and disk space\n3. **Session problems**: Verify SESSION_SECRET configuration\n4. **Build failures**: Ensure all dependencies are installed and Node.js version compatibility\n\n### Development Issues\n1. **Type errors**: Run `npm run check` for TypeScript validation\n2. **Hot reload not working**: Check Vite configuration and file permissions\n3. **API endpoint errors**: Verify route registration and middleware configuration\n4. **Database schema issues**: Use `npm run db:push` to synchronize schema changes\n\n### Production Issues\n1. **Static file serving**: Verify build output and server configuration\n2. **Environment variables**: Ensure all required variables are set in production\n3. **Database performance**: Monitor query performance and optimize indexes\n4. **Memory usage**: Monitor Node.js memory consumption and optimize as needed\n\nThis comprehensive documentation provides a complete overview of the ThrottleCove platform, enabling developers to understand, maintain, and extend the application effectively.","size_bytes":18192}}}